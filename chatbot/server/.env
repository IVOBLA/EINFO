# chatbot/server/.env
# GPU-Konfiguration f端r RTX 4070 (8GB VRAM)

# KRITISCH: GPU aktivieren (NICHT OLLAMA_NO_GPU=1 setzen!)
CUDA_VISIBLE_DEVICES=0

# Ollama GPU-Schichten (20-24 f端r 8B Modell auf 8GB VRAM)
OLLAMA_NUM_GPU=22

# Speicher-Optimierung
OLLAMA_MAX_LOADED_MODELS=1
OLLAMA_KEEP_ALIVE=30m

# LLM-Konfiguration
LLM_CHAT_MODEL=llama3.1:8b
LLM_EMBED_MODEL=mxbai-embed-large
LLM_TEMP=0.05
LLM_SEED=42

# Timeouts (ms)
LLM_CHAT_TIMEOUT_MS=60000
LLM_SIM_TIMEOUT_MS=300000
LLM_EMBED_TIMEOUT_MS=30000

# RAG-Konfiguration
RAG_DIM=1024
RAG_TOP_K=5
RAG_MAX_CTX=2500
RAG_SCORE_THRESHOLD=0.35

# Debug (0=aus, 1=an)
CHATBOT_DEBUG=0

SIM_WORKER_INTERVAL_MS=60000
SIM_MAX_RETRIES=3
SIM_RETRY_DELAY_MS=5000
MAIN_SERVER_URL=http://localhost:4040

# ============================================================
# Task-basierte LLM-Konfiguration
# ============================================================
# Globales Modell-Override (optional - 端berschreibt alle task-spezifischen Modelle)
# Leer lassen oder auskommentieren f端r task-spezifische Konfiguration
#LLM_GLOBAL_MODEL=einfo-balanced

# --- START Task (Erstes Szenario) ---
LLM_TASK_START_MODEL=einfo-balanced
LLM_TASK_START_TEMPERATURE=0.1
LLM_TASK_START_MAX_TOKENS=4000
LLM_TASK_START_TIMEOUT=220000
LLM_TASK_START_NUM_GPU=20
LLM_TASK_START_NUM_CTX=4096
LLM_TASK_START_TOP_P=0.92
LLM_TASK_START_TOP_K=50
LLM_TASK_START_REPEAT_PENALTY=1.15

# --- OPERATIONS Task (Laufende Simulation) ---
LLM_TASK_OPS_MODEL=einfo-balanced
LLM_TASK_OPS_TEMPERATURE=0.05
LLM_TASK_OPS_MAX_TOKENS=4000
LLM_TASK_OPS_TIMEOUT=300000
LLM_TASK_OPS_NUM_GPU=20
LLM_TASK_OPS_NUM_CTX=4096
LLM_TASK_OPS_TOP_P=0.92
LLM_TASK_OPS_TOP_K=50
LLM_TASK_OPS_REPEAT_PENALTY=1.15

# --- CHAT Task (QA-Chat) ---
LLM_TASK_CHAT_MODEL=llama3.1:8b
LLM_TASK_CHAT_TEMPERATURE=0.4
LLM_TASK_CHAT_MAX_TOKENS=2048
LLM_TASK_CHAT_TIMEOUT=120000
LLM_TASK_CHAT_NUM_GPU=20
LLM_TASK_CHAT_NUM_CTX=4096
LLM_TASK_CHAT_TOP_P=0.9
LLM_TASK_CHAT_TOP_K=40
LLM_TASK_CHAT_REPEAT_PENALTY=1.1

# --- ANALYSIS Task (KI-Situationsanalyse) ---
LLM_TASK_ANALYSIS_MODEL=einfo-balanced
LLM_TASK_ANALYSIS_TEMPERATURE=0.3
LLM_TASK_ANALYSIS_MAX_TOKENS=4000
LLM_TASK_ANALYSIS_TIMEOUT=220000
LLM_TASK_ANALYSIS_NUM_GPU=20
LLM_TASK_ANALYSIS_NUM_CTX=4096
LLM_TASK_ANALYSIS_TOP_P=0.92
LLM_TASK_ANALYSIS_TOP_K=50
LLM_TASK_ANALYSIS_REPEAT_PENALTY=1.15

# --- DEFAULT Task (Fallback) ---
LLM_TASK_DEFAULT_MODEL=einfo-balanced
LLM_TASK_DEFAULT_TEMPERATURE=0.1
LLM_TASK_DEFAULT_MAX_TOKENS=2048
LLM_TASK_DEFAULT_TIMEOUT=120000
LLM_TASK_DEFAULT_NUM_GPU=20
LLM_TASK_DEFAULT_NUM_CTX=4096
LLM_TASK_DEFAULT_TOP_P=0.92
LLM_TASK_DEFAULT_TOP_K=50
LLM_TASK_DEFAULT_REPEAT_PENALTY=1.15
