const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/App-oJcXN6ca.js","assets/App-BdWTTRFs.css"])))=>i.map(i=>d[i]);
(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(t){if(t.ep)return;t.ep=!0;const l=i(t);fetch(t.href,l)}})();const n0="modulepreload",r0=function(n){return"/"+n},qm={},Ug=function(a,i,r){let t=Promise.resolve();if(i&&i.length>0){let p=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");t=p(i.map(h=>{if(h=r0(h),h in qm)return;qm[h]=!0;const v=h.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const S=document.createElement("link");if(S.rel=v?"stylesheet":n0,v||(S.as="script"),S.crossOrigin="",S.href=h,d&&S.setAttribute("nonce",d),document.head.appendChild(S),v)return new Promise((k,j)=>{S.addEventListener("load",k),S.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return t.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return a().catch(l)})};function Eo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var od={exports:{}},no={},ld={exports:{}},Nt={};var Jm;function a0(){if(Jm)return Nt;Jm=1;var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),t=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function S(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,E={};function C(T,Y,H){this.props=T,this.context=Y,this.refs=E,this.updater=H||k}C.prototype.isReactComponent={},C.prototype.setState=function(T,Y){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,Y,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function F(){}F.prototype=C.prototype;function O(T,Y,H){this.props=T,this.context=Y,this.refs=E,this.updater=H||k}var _=O.prototype=new F;_.constructor=O,j(_,C.prototype),_.isPureReactComponent=!0;var $=Array.isArray,Z=Object.prototype.hasOwnProperty,q={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function ae(T,Y,H){var ye,De={},ke=null,Ue=null;if(Y!=null)for(ye in Y.ref!==void 0&&(Ue=Y.ref),Y.key!==void 0&&(ke=""+Y.key),Y)Z.call(Y,ye)&&!ee.hasOwnProperty(ye)&&(De[ye]=Y[ye]);var oe=arguments.length-2;if(oe===1)De.children=H;else if(1<oe){for(var le=Array(oe),me=0;me<oe;me++)le[me]=arguments[me+2];De.children=le}if(T&&T.defaultProps)for(ye in oe=T.defaultProps,oe)De[ye]===void 0&&(De[ye]=oe[ye]);return{$$typeof:n,type:T,key:ke,ref:Ue,props:De,_owner:q.current}}function se(T,Y){return{$$typeof:n,type:T.type,key:Y,ref:T.ref,props:T.props,_owner:T._owner}}function ie(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function re(T){var Y={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(H){return Y[H]})}var Ce=/\/+/g;function fe(T,Y){return typeof T=="object"&&T!==null&&T.key!=null?re(""+T.key):Y.toString(36)}function Me(T,Y,H,ye,De){var ke=typeof T;(ke==="undefined"||ke==="boolean")&&(T=null);var Ue=!1;if(T===null)Ue=!0;else switch(ke){case"string":case"number":Ue=!0;break;case"object":switch(T.$$typeof){case n:case a:Ue=!0}}if(Ue)return Ue=T,De=De(Ue),T=ye===""?"."+fe(Ue,0):ye,$(De)?(H="",T!=null&&(H=T.replace(Ce,"$&/")+"/"),Me(De,Y,H,"",function(me){return me})):De!=null&&(ie(De)&&(De=se(De,H+(!De.key||Ue&&Ue.key===De.key?"":(""+De.key).replace(Ce,"$&/")+"/")+T)),Y.push(De)),1;if(Ue=0,ye=ye===""?".":ye+":",$(T))for(var oe=0;oe<T.length;oe++){ke=T[oe];var le=ye+fe(ke,oe);Ue+=Me(ke,Y,H,le,De)}else if(le=S(T),typeof le=="function")for(T=le.call(T),oe=0;!(ke=T.next()).done;)ke=ke.value,le=ye+fe(ke,oe++),Ue+=Me(ke,Y,H,le,De);else if(ke==="object")throw Y=String(T),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Te(T,Y,H){if(T==null)return T;var ye=[],De=0;return Me(T,ye,"","",function(ke){return Y.call(H,ke,De++)}),ye}function Ne(T){if(T._status===-1){var Y=T._result;Y=Y(),Y.then(function(H){(T._status===0||T._status===-1)&&(T._status=1,T._result=H)},function(H){(T._status===0||T._status===-1)&&(T._status=2,T._result=H)}),T._status===-1&&(T._status=0,T._result=Y)}if(T._status===1)return T._result.default;throw T._result}var xe={current:null},L={transition:null},V={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:L,ReactCurrentOwner:q};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Nt.Children={map:Te,forEach:function(T,Y,H){Te(T,function(){Y.apply(this,arguments)},H)},count:function(T){var Y=0;return Te(T,function(){Y++}),Y},toArray:function(T){return Te(T,function(Y){return Y})||[]},only:function(T){if(!ie(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Nt.Component=C,Nt.Fragment=i,Nt.Profiler=t,Nt.PureComponent=O,Nt.StrictMode=r,Nt.Suspense=p,Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,Nt.act=Q,Nt.cloneElement=function(T,Y,H){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var ye=j({},T.props),De=T.key,ke=T.ref,Ue=T._owner;if(Y!=null){if(Y.ref!==void 0&&(ke=Y.ref,Ue=q.current),Y.key!==void 0&&(De=""+Y.key),T.type&&T.type.defaultProps)var oe=T.type.defaultProps;for(le in Y)Z.call(Y,le)&&!ee.hasOwnProperty(le)&&(ye[le]=Y[le]===void 0&&oe!==void 0?oe[le]:Y[le])}var le=arguments.length-2;if(le===1)ye.children=H;else if(1<le){oe=Array(le);for(var me=0;me<le;me++)oe[me]=arguments[me+2];ye.children=oe}return{$$typeof:n,type:T.type,key:De,ref:ke,props:ye,_owner:Ue}},Nt.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},Nt.createElement=ae,Nt.createFactory=function(T){var Y=ae.bind(null,T);return Y.type=T,Y},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(T){return{$$typeof:d,render:T}},Nt.isValidElement=ie,Nt.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:Ne}},Nt.memo=function(T,Y){return{$$typeof:h,type:T,compare:Y===void 0?null:Y}},Nt.startTransition=function(T){var Y=L.transition;L.transition={};try{T()}finally{L.transition=Y}},Nt.unstable_act=Q,Nt.useCallback=function(T,Y){return xe.current.useCallback(T,Y)},Nt.useContext=function(T){return xe.current.useContext(T)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(T){return xe.current.useDeferredValue(T)},Nt.useEffect=function(T,Y){return xe.current.useEffect(T,Y)},Nt.useId=function(){return xe.current.useId()},Nt.useImperativeHandle=function(T,Y,H){return xe.current.useImperativeHandle(T,Y,H)},Nt.useInsertionEffect=function(T,Y){return xe.current.useInsertionEffect(T,Y)},Nt.useLayoutEffect=function(T,Y){return xe.current.useLayoutEffect(T,Y)},Nt.useMemo=function(T,Y){return xe.current.useMemo(T,Y)},Nt.useReducer=function(T,Y,H){return xe.current.useReducer(T,Y,H)},Nt.useRef=function(T){return xe.current.useRef(T)},Nt.useState=function(T){return xe.current.useState(T)},Nt.useSyncExternalStore=function(T,Y,H){return xe.current.useSyncExternalStore(T,Y,H)},Nt.useTransition=function(){return xe.current.useTransition()},Nt.version="18.3.1",Nt}var Xm;function lf(){return Xm||(Xm=1,ld.exports=a0()),ld.exports}var Zm;function s0(){if(Zm)return no;Zm=1;var n=lf(),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,t=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,h){var v,y={},S=null,k=null;h!==void 0&&(S=""+h),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(k=p.ref);for(v in p)r.call(p,v)&&!l.hasOwnProperty(v)&&(y[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)y[v]===void 0&&(y[v]=p[v]);return{$$typeof:a,type:d,key:S,ref:k,props:y,_owner:t.current}}return no.Fragment=i,no.jsx=u,no.jsxs=u,no}var eh;function i0(){return eh||(eh=1,od.exports=s0()),od.exports}var o=i0(),x=lf();const K=Eo(x);var Al={},cd={exports:{}},or={},ud={exports:{}},dd={};var th;function o0(){return th||(th=1,(function(n){function a(L,V){var Q=L.length;L.push(V);e:for(;0<Q;){var T=Q-1>>>1,Y=L[T];if(0<t(Y,V))L[T]=V,L[Q]=Y,Q=T;else break e}}function i(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],Q=L.pop();if(Q!==V){L[0]=Q;e:for(var T=0,Y=L.length,H=Y>>>1;T<H;){var ye=2*(T+1)-1,De=L[ye],ke=ye+1,Ue=L[ke];if(0>t(De,Q))ke<Y&&0>t(Ue,De)?(L[T]=Ue,L[ke]=Q,T=ke):(L[T]=De,L[ye]=Q,T=ye);else if(ke<Y&&0>t(Ue,Q))L[T]=Ue,L[ke]=Q,T=ke;else break e}}return V}function t(L,V){var Q=L.sortIndex-V.sortIndex;return Q!==0?Q:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],v=1,y=null,S=3,k=!1,j=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var V=i(h);V!==null;){if(V.callback===null)r(h);else if(V.startTime<=L)r(h),V.sortIndex=V.expirationTime,a(p,V);else break;V=i(h)}}function $(L){if(E=!1,_(L),!j)if(i(p)!==null)j=!0,Ne(Z);else{var V=i(h);V!==null&&xe($,V.startTime-L)}}function Z(L,V){j=!1,E&&(E=!1,F(ae),ae=-1),k=!0;var Q=S;try{for(_(V),y=i(p);y!==null&&(!(y.expirationTime>V)||L&&!re());){var T=y.callback;if(typeof T=="function"){y.callback=null,S=y.priorityLevel;var Y=T(y.expirationTime<=V);V=n.unstable_now(),typeof Y=="function"?y.callback=Y:y===i(p)&&r(p),_(V)}else r(p);y=i(p)}if(y!==null)var H=!0;else{var ye=i(h);ye!==null&&xe($,ye.startTime-V),H=!1}return H}finally{y=null,S=Q,k=!1}}var q=!1,ee=null,ae=-1,se=5,ie=-1;function re(){return!(n.unstable_now()-ie<se)}function Ce(){if(ee!==null){var L=n.unstable_now();ie=L;var V=!0;try{V=ee(!0,L)}finally{V?fe():(q=!1,ee=null)}}else q=!1}var fe;if(typeof O=="function")fe=function(){O(Ce)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Te=Me.port2;Me.port1.onmessage=Ce,fe=function(){Te.postMessage(null)}}else fe=function(){C(Ce,0)};function Ne(L){ee=L,q||(q=!0,fe())}function xe(L,V){ae=C(function(){L(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){j||k||(j=!0,Ne(Z))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return i(p)},n.unstable_next=function(L){switch(S){case 1:case 2:case 3:var V=3;break;default:V=S}var Q=S;S=V;try{return L()}finally{S=Q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Q=S;S=L;try{return V()}finally{S=Q}},n.unstable_scheduleCallback=function(L,V,Q){var T=n.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?T+Q:T):Q=T,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,L={id:v++,callback:V,priorityLevel:L,startTime:Q,expirationTime:Y,sortIndex:-1},Q>T?(L.sortIndex=Q,a(h,L),i(p)===null&&L===i(h)&&(E?(F(ae),ae=-1):E=!0,xe($,Q-T))):(L.sortIndex=Y,a(p,L),j||k||(j=!0,Ne(Z))),L},n.unstable_shouldYield=re,n.unstable_wrapCallback=function(L){var V=S;return function(){var Q=S;S=V;try{return L.apply(this,arguments)}finally{S=Q}}}})(dd)),dd}var nh;function l0(){return nh||(nh=1,ud.exports=o0()),ud.exports}var rh;function c0(){if(rh)return or;rh=1;var n=lf(),a=l0();function i(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,t={};function l(e,s){u(e,s),u(e+"Capture",s)}function u(e,s){for(t[e]=s,e=0;e<s.length;e++)r.add(s[e])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function S(e){return p.call(y,e)?!0:p.call(v,e)?!1:h.test(e)?y[e]=!0:(v[e]=!0,!1)}function k(e,s,c,f){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,s,c,f){if(s===null||typeof s>"u"||k(e,s,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function E(e,s,c,f,m,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=e,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){C[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];C[s]=new E(s,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){C[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){C[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){C[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){C[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){C[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){C[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){C[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(F,O);C[s]=new E(s,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(F,O);C[s]=new E(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(F,O);C[s]=new E(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){C[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){C[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function _(e,s,c,f){var m=C.hasOwnProperty(s)?C[s]:null;(m!==null?m.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j(s,c,m,f)&&(c=null),f||m===null?S(s)&&(c===null?e.removeAttribute(s):e.setAttribute(s,""+c)):m.mustUseProperty?e[m.propertyName]=c===null?m.type===3?!1:"":c:(s=m.attributeName,f=m.attributeNamespace,c===null?e.removeAttribute(s):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?e.setAttributeNS(f,s,c):e.setAttribute(s,c))))}var $=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),q=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),ae=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),re=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),Te=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),L=Symbol.iterator;function V(e){return e===null||typeof e!="object"?null:(e=L&&e[L]||e["@@iterator"],typeof e=="function"?e:null)}var Q=Object.assign,T;function Y(e){if(T===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);T=s&&s[1]||""}return`
`+T+e}var H=!1;function ye(e,s){if(!e||H)return"";H=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(te){var f=te}Reflect.construct(e,[],s)}else{try{s.call()}catch(te){f=te}e.call(s.prototype)}else{try{throw Error()}catch(te){f=te}e()}}catch(te){if(te&&f&&typeof te.stack=="string"){for(var m=te.stack.split(`
`),g=f.stack.split(`
`),w=m.length-1,R=g.length-1;1<=w&&0<=R&&m[w]!==g[R];)R--;for(;1<=w&&0<=R;w--,R--)if(m[w]!==g[R]){if(w!==1||R!==1)do if(w--,R--,0>R||m[w]!==g[R]){var I=`
`+m[w].replace(" at new "," at ");return e.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",e.displayName)),I}while(1<=w&&0<=R);break}}}finally{H=!1,Error.prepareStackTrace=c}return(e=e?e.displayName||e.name:"")?Y(e):""}function De(e){switch(e.tag){case 5:return Y(e.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return e=ye(e.type,!1),e;case 11:return e=ye(e.type.render,!1),e;case 1:return e=ye(e.type,!0),e;default:return""}}function ke(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case q:return"Portal";case se:return"Profiler";case ae:return"StrictMode";case fe:return"Suspense";case Me:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case re:return(e.displayName||"Context")+".Consumer";case ie:return(e._context.displayName||"Context")+".Provider";case Ce:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Te:return s=e.displayName||null,s!==null?s:ke(e.type)||"Memo";case Ne:s=e._payload,e=e._init;try{return ke(e(s))}catch{}}return null}function Ue(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(s);case 8:return s===ae?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function le(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function me(e){var s=le(e)?"checked":"value",c=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),f=""+e[s];if(!e.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return m.call(this)},set:function(w){f=""+w,g.call(this,w)}}),Object.defineProperty(e,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Oe(e){e._valueTracker||(e._valueTracker=me(e))}function Je(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return e&&(f=le(e)?e.checked?"true":"false":e.value),e=f,e!==c?(s.setValue(e),!0):!1}function qe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ut(e,s){var c=s.checked;return Q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??e._wrapperState.initialChecked})}function rt(e,s){var c=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;c=oe(s.value!=null?s.value:c),e._wrapperState={initialChecked:f,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function _t(e,s){s=s.checked,s!=null&&_(e,"checked",s,!1)}function Lt(e,s){_t(e,s);var c=oe(s.value),f=s.type;if(c!=null)f==="number"?(c===0&&e.value===""||e.value!=c)&&(e.value=""+c):e.value!==""+c&&(e.value=""+c);else if(f==="submit"||f==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?Ke(e,s.type,c):s.hasOwnProperty("defaultValue")&&Ke(e,s.type,oe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function ht(e,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,c||s===e.value||(e.value=s),e.defaultValue=s}c=e.name,c!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,c!==""&&(e.name=c)}function Ke(e,s,c){(s!=="number"||qe(e.ownerDocument)!==e)&&(c==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+c&&(e.defaultValue=""+c))}var pt=Array.isArray;function Fe(e,s,c,f){if(e=e.options,s){s={};for(var m=0;m<c.length;m++)s["$"+c[m]]=!0;for(c=0;c<e.length;c++)m=s.hasOwnProperty("$"+e[c].value),e[c].selected!==m&&(e[c].selected=m),m&&f&&(e[c].defaultSelected=!0)}else{for(c=""+oe(c),s=null,m=0;m<e.length;m++){if(e[m].value===c){e[m].selected=!0,f&&(e[m].defaultSelected=!0);return}s!==null||e[m].disabled||(s=e[m])}s!==null&&(s.selected=!0)}}function Rt(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(i(91));return Q({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bt(e,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(i(92));if(pt(c)){if(1<c.length)throw Error(i(93));c=c[0]}s=c}s==null&&(s=""),c=s}e._wrapperState={initialValue:oe(c)}}function Zt(e,s){var c=oe(s.value),f=oe(s.defaultValue);c!=null&&(c=""+c,c!==e.value&&(e.value=c),s.defaultValue==null&&e.defaultValue!==c&&(e.defaultValue=c)),f!=null&&(e.defaultValue=""+f)}function en(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function tn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?tn(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var be,bt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,f,m){MSApp.execUnsafeLocalFunction(function(){return e(s,c,f,m)})}:e})(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(be=be||document.createElement("div"),be.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=be.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function mt(e,s){if(s){var c=e.firstChild;if(c&&c===e.lastChild&&c.nodeType===3){c.nodeValue=s;return}}e.textContent=s}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"];Object.keys(dt).forEach(function(e){sn.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),dt[s]=dt[e]})});function tt(e,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||dt.hasOwnProperty(e)&&dt[e]?(""+s).trim():s+"px"}function Ut(e,s){e=e.style;for(var c in s)if(s.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=tt(c,s[c],f);c==="float"&&(c="cssFloat"),f?e.setProperty(c,m):e[c]=m}}var Gt=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $t(e,s){if(s){if(Gt[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(i(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(i(61))}if(s.style!=null&&typeof s.style!="object")throw Error(i(62))}}function Yt(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ft=null;function Qt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Be=null,W=null,ne=null;function Ee(e){if(e=Bi(e)){if(typeof Be!="function")throw Error(i(280));var s=e.stateNode;s&&(s=qo(s),Be(e.stateNode,e.type,s))}}function ve(e){W?ne?ne.push(e):ne=[e]:W=e}function pe(){if(W){var e=W,s=ne;if(ne=W=null,Ee(e),s)for(e=0;e<s.length;e++)Ee(s[e])}}function Qe(e,s){return e(s)}function wt(){}var ft=!1;function Et(e,s,c){if(ft)return e(s,c);ft=!0;try{return Qe(e,s,c)}finally{ft=!1,(W!==null||ne!==null)&&(wt(),pe())}}function at(e,s){var c=e.stateNode;if(c===null)return null;var f=qo(c);if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var A=!1;if(d)try{var ue={};Object.defineProperty(ue,"passive",{get:function(){A=!0}}),window.addEventListener("test",ue,ue),window.removeEventListener("test",ue,ue)}catch{A=!1}function Re(e,s,c,f,m,g,w,R,I){var te=Array.prototype.slice.call(arguments,3);try{s.apply(c,te)}catch(ge){this.onError(ge)}}var Ie=!1,Ve=null,it=!1,st=null,kt={onError:function(e){Ie=!0,Ve=e}};function gt(e,s,c,f,m,g,w,R,I){Ie=!1,Ve=null,Re.apply(kt,arguments)}function Bn(e,s,c,f,m,g,w,R,I){if(gt.apply(this,arguments),Ie){if(Ie){var te=Ve;Ie=!1,Ve=null}else throw Error(i(198));it||(it=!0,st=te)}}function Wt(e){var s=e,c=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(c=s.return),e=s.return;while(e)}return s.tag===3?c:null}function wn(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function In(e){if(Wt(e)!==e)throw Error(i(188))}function Pr(e){var s=e.alternate;if(!s){if(s=Wt(e),s===null)throw Error(i(188));return s!==e?null:e}for(var c=e,f=s;;){var m=c.return;if(m===null)break;var g=m.alternate;if(g===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===c)return In(m),e;if(g===f)return In(m),s;g=g.sibling}throw Error(i(188))}if(c.return!==f.return)c=m,f=g;else{for(var w=!1,R=m.child;R;){if(R===c){w=!0,c=m,f=g;break}if(R===f){w=!0,f=m,c=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===c){w=!0,c=g,f=m;break}if(R===f){w=!0,f=g,c=m;break}R=R.sibling}if(!w)throw Error(i(189))}}if(c.alternate!==f)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?e:s}function er(e){return e=Pr(e),e!==null?Is(e):null}function Is(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=Is(e);if(s!==null)return s;e=e.sibling}return null}var ur=a.unstable_scheduleCallback,ma=a.unstable_cancelCallback,Ln=a.unstable_shouldYield,Ls=a.unstable_requestPaint,Ht=a.unstable_now,_r=a.unstable_getCurrentPriorityLevel,Gr=a.unstable_ImmediatePriority,Qr=a.unstable_UserBlockingPriority,Or=a.unstable_NormalPriority,Fs=a.unstable_LowPriority,ha=a.unstable_IdlePriority,Ma=null,tr=null;function vr(e){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(Ma,e,void 0,(e.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:ss,Di=Math.log,as=Math.LN2;function ss(e){return e>>>=0,e===0?32:31-(Di(e)/as|0)|0}var ga=64,xr=4194304;function Ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ir(e,s){var c=e.pendingLanes;if(c===0)return 0;var f=0,m=e.suspendedLanes,g=e.pingedLanes,w=c&268435455;if(w!==0){var R=w&~m;R!==0?f=Ar(R):(g&=w,g!==0&&(f=Ar(g)))}else w=c&~m,w!==0?f=Ar(w):g!==0&&(f=Ar(g));if(f===0)return 0;if(s!==0&&s!==f&&(s&m)===0&&(m=f&-f,g=s&-s,m>=g||m===16&&(g&4194240)!==0))return s;if((f&4)!==0&&(f|=c&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=f;0<s;)c=31-Gn(s),m=1<<c,f|=e[c],s&=~m;return f}function is(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function os(e,s){for(var c=e.suspendedLanes,f=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes;0<g;){var w=31-Gn(g),R=1<<w,I=m[w];I===-1?((R&c)===0||(R&f)!==0)&&(m[w]=is(R,s)):I<=s&&(e.expiredLanes|=R),g&=~R}}function dr(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ra(){var e=ga;return ga<<=1,(ga&4194240)===0&&(ga=64),e}function ls(e){for(var s=[],c=0;31>c;c++)s.push(e);return s}function qr(e,s,c){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-Gn(s),e[s]=c}function cs(e,s){var c=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var f=e.eventTimes;for(e=e.expirationTimes;0<c;){var m=31-Gn(c),g=1<<m;s[m]=0,f[m]=-1,e[m]=-1,c&=~g}}function us(e,s){var c=e.entangledLanes|=s;for(e=e.entanglements;c;){var f=31-Gn(c),m=1<<f;m&s|e[f]&s&&(e[f]|=s),c&=~m}}var M=0;function z(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var de,je,vt,nt,lt,fn=!1,qt=[],Nn=null,Kt=null,xt=null,Ot=new Map,$n=new Map,hn=[],va="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zs(e,s){switch(e){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Ot.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(s.pointerId)}}function Jr(e,s,c,f,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:g,targetContainers:[m]},s!==null&&(s=Bi(s),s!==null&&je(s)),e):(e.eventSystemFlags|=f,s=e.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),e)}function Oc(e,s,c,f,m){switch(s){case"focusin":return Nn=Jr(Nn,e,s,c,f,m),!0;case"dragenter":return Kt=Jr(Kt,e,s,c,f,m),!0;case"mouseover":return xt=Jr(xt,e,s,c,f,m),!0;case"pointerover":var g=m.pointerId;return Ot.set(g,Jr(Ot.get(g)||null,e,s,c,f,m)),!0;case"gotpointercapture":return g=m.pointerId,$n.set(g,Jr($n.get(g)||null,e,s,c,f,m)),!0}return!1}function Fo(e){var s=ds(e.target);if(s!==null){var c=Wt(s);if(c!==null){if(s=c.tag,s===13){if(s=wn(c),s!==null){e.blockedOn=s,lt(e.priority,function(){vt(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){e.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Us(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var c=Pa(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(c===null){c=e.nativeEvent;var f=new c.constructor(c.type,c);Ft=f,c.target.dispatchEvent(f),Ft=null}else return s=Bi(c),s!==null&&je(s),e.blockedOn=c,!1;s.shift()}return!0}function b(e,s,c){Us(e)&&c.delete(s)}function N(){fn=!1,Nn!==null&&Us(Nn)&&(Nn=null),Kt!==null&&Us(Kt)&&(Kt=null),xt!==null&&Us(xt)&&(xt=null),Ot.forEach(b),$n.forEach(b)}function B(e,s){e.blockedOn===s&&(e.blockedOn=null,fn||(fn=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,N)))}function ce(e){function s(m){return B(m,e)}if(0<qt.length){B(qt[0],e);for(var c=1;c<qt.length;c++){var f=qt[c];f.blockedOn===e&&(f.blockedOn=null)}}for(Nn!==null&&B(Nn,e),Kt!==null&&B(Kt,e),xt!==null&&B(xt,e),Ot.forEach(s),$n.forEach(s),c=0;c<hn.length;c++)f=hn[c],f.blockedOn===e&&(f.blockedOn=null);for(;0<hn.length&&(c=hn[0],c.blockedOn===null);)Fo(c),c.blockedOn===null&&hn.shift()}var _e=$.ReactCurrentBatchConfig,ct=!0;function nn(e,s,c,f){var m=M,g=_e.transition;_e.transition=null;try{M=1,Qn(e,s,c,f)}finally{M=m,_e.transition=g}}function yr(e,s,c,f){var m=M,g=_e.transition;_e.transition=null;try{M=4,Qn(e,s,c,f)}finally{M=m,_e.transition=g}}function Qn(e,s,c,f){if(ct){var m=Pa(e,s,c,f);if(m===null)Jc(e,s,f,Sn,c),zs(e,f);else if(Oc(m,e,s,c,f))f.stopPropagation();else if(zs(e,f),s&4&&-1<va.indexOf(e)){for(;m!==null;){var g=Bi(m);if(g!==null&&de(g),g=Pa(e,s,c,f),g===null&&Jc(e,s,f,Sn,c),g===m)break;m=g}m!==null&&f.stopPropagation()}else Jc(e,s,f,null,c)}}var Sn=null;function Pa(e,s,c,f){if(Sn=null,e=Qt(f),e=ds(e),e!==null)if(s=Wt(e),s===null)e=null;else if(c=s.tag,c===13){if(e=wn(s),e!==null)return e;e=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Sn=e,null}function If(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_r()){case Gr:return 1;case Qr:return 4;case Or:case Fs:return 16;case ha:return 536870912;default:return 16}default:return 16}}var _a=null,Ac=null,zo=null;function Lf(){if(zo)return zo;var e,s=Ac,c=s.length,f,m="value"in _a?_a.value:_a.textContent,g=m.length;for(e=0;e<c&&s[e]===m[e];e++);var w=c-e;for(f=1;f<=w&&s[c-f]===m[g-f];f++);return zo=m.slice(e,1<f?1-f:void 0)}function Uo(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function Bo(){return!0}function Ff(){return!1}function fr(e){function s(c,f,m,g,w){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(c=e[R],this[R]=c?c(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Bo:Ff,this.isPropagationStopped=Ff,this}return Q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),s}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ic=fr(Bs),Mi=Q({},Bs,{view:0,detail:0}),Dx=fr(Mi),Lc,Fc,Ri,$o=Q({},Mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(Lc=e.screenX-Ri.screenX,Fc=e.screenY-Ri.screenY):Fc=Lc=0,Ri=e),Lc)},movementY:function(e){return"movementY"in e?e.movementY:Fc}}),zf=fr($o),Mx=Q({},$o,{dataTransfer:0}),Rx=fr(Mx),Px=Q({},Mi,{relatedTarget:0}),zc=fr(Px),_x=Q({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ox=fr(_x),Ax=Q({},Bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ix=fr(Ax),Lx=Q({},Bs,{data:0}),Uf=fr(Lx),Fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bx(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Ux[e])?!!s[e]:!1}function Uc(){return Bx}var $x=Q({},Mi,{key:function(e){if(e.key){var s=Fx[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=Uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(e){return e.type==="keypress"?Uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yx=fr($x),Wx=Q({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=fr(Wx),Hx=Q({},Mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),Kx=fr(Hx),Vx=Q({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gx=fr(Vx),Qx=Q({},$o,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qx=fr(Qx),Jx=[9,13,27,32],Bc=d&&"CompositionEvent"in window,Pi=null;d&&"documentMode"in document&&(Pi=document.documentMode);var Xx=d&&"TextEvent"in window&&!Pi,$f=d&&(!Bc||Pi&&8<Pi&&11>=Pi),Yf=" ",Wf=!1;function Hf(e,s){switch(e){case"keyup":return Jx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $s=!1;function Zx(e,s){switch(e){case"compositionend":return Kf(s);case"keypress":return s.which!==32?null:(Wf=!0,Yf);case"textInput":return e=s.data,e===Yf&&Wf?null:e;default:return null}}function ey(e,s){if($s)return e==="compositionend"||!Bc&&Hf(e,s)?(e=Lf(),zo=Ac=_a=null,$s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $f&&s.locale!=="ko"?null:s.data;default:return null}}var ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!ty[e.type]:s==="textarea"}function Gf(e,s,c,f){ve(f),s=Vo(s,"onChange"),0<s.length&&(c=new Ic("onChange","change",null,c,f),e.push({event:c,listeners:s}))}var _i=null,Oi=null;function ny(e){fp(e,0)}function Yo(e){var s=Vs(e);if(Je(s))return e}function ry(e,s){if(e==="change")return s}var Qf=!1;if(d){var $c;if(d){var Yc="oninput"in document;if(!Yc){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Yc=typeof qf.oninput=="function"}$c=Yc}else $c=!1;Qf=$c&&(!document.documentMode||9<document.documentMode)}function Jf(){_i&&(_i.detachEvent("onpropertychange",Xf),Oi=_i=null)}function Xf(e){if(e.propertyName==="value"&&Yo(Oi)){var s=[];Gf(s,Oi,e,Qt(e)),Et(ny,s)}}function ay(e,s,c){e==="focusin"?(Jf(),_i=s,Oi=c,_i.attachEvent("onpropertychange",Xf)):e==="focusout"&&Jf()}function sy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yo(Oi)}function iy(e,s){if(e==="click")return Yo(s)}function oy(e,s){if(e==="input"||e==="change")return Yo(s)}function ly(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Lr=typeof Object.is=="function"?Object.is:ly;function Ai(e,s){if(Lr(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var c=Object.keys(e),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!p.call(s,m)||!Lr(e[m],s[m]))return!1}return!0}function Zf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ep(e,s){var c=Zf(e);e=0;for(var f;c;){if(c.nodeType===3){if(f=e+c.textContent.length,e<=s&&f>=s)return{node:c,offset:s-e};e=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Zf(c)}}function tp(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?tp(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function np(){for(var e=window,s=qe();s instanceof e.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)e=s.contentWindow;else break;s=qe(e.document)}return s}function Wc(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function cy(e){var s=np(),c=e.focusedElem,f=e.selectionRange;if(s!==c&&c&&c.ownerDocument&&tp(c.ownerDocument.documentElement,c)){if(f!==null&&Wc(c)){if(s=f.start,e=f.end,e===void 0&&(e=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(e,c.value.length);else if(e=(s=c.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var m=c.textContent.length,g=Math.min(f.start,m);f=f.end===void 0?g:Math.min(f.end,m),!e.extend&&g>f&&(m=f,f=g,g=m),m=ep(c,g);var w=ep(c,f);m&&w&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),e.removeAllRanges(),g>f?(e.addRange(s),e.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),e.addRange(s)))}}for(s=[],e=c;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)e=s[c],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uy=d&&"documentMode"in document&&11>=document.documentMode,Ys=null,Hc=null,Ii=null,Kc=!1;function rp(e,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Kc||Ys==null||Ys!==qe(f)||(f=Ys,"selectionStart"in f&&Wc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ii&&Ai(Ii,f)||(Ii=f,f=Vo(Hc,"onSelect"),0<f.length&&(s=new Ic("onSelect","select",null,s,c),e.push({event:s,listeners:f}),s.target=Ys)))}function Wo(e,s){var c={};return c[e.toLowerCase()]=s.toLowerCase(),c["Webkit"+e]="webkit"+s,c["Moz"+e]="moz"+s,c}var Ws={animationend:Wo("Animation","AnimationEnd"),animationiteration:Wo("Animation","AnimationIteration"),animationstart:Wo("Animation","AnimationStart"),transitionend:Wo("Transition","TransitionEnd")},Vc={},ap={};d&&(ap=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function Ho(e){if(Vc[e])return Vc[e];if(!Ws[e])return e;var s=Ws[e],c;for(c in s)if(s.hasOwnProperty(c)&&c in ap)return Vc[e]=s[c];return e}var sp=Ho("animationend"),ip=Ho("animationiteration"),op=Ho("animationstart"),lp=Ho("transitionend"),cp=new Map,up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oa(e,s){cp.set(e,s),l(s,[e])}for(var Gc=0;Gc<up.length;Gc++){var Qc=up[Gc],dy=Qc.toLowerCase(),fy=Qc[0].toUpperCase()+Qc.slice(1);Oa(dy,"on"+fy)}Oa(sp,"onAnimationEnd"),Oa(ip,"onAnimationIteration"),Oa(op,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(lp,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),py=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function dp(e,s,c){var f=e.type||"unknown-event";e.currentTarget=c,Bn(f,s,void 0,e),e.currentTarget=null}function fp(e,s){s=(s&4)!==0;for(var c=0;c<e.length;c++){var f=e[c],m=f.event;f=f.listeners;e:{var g=void 0;if(s)for(var w=f.length-1;0<=w;w--){var R=f[w],I=R.instance,te=R.currentTarget;if(R=R.listener,I!==g&&m.isPropagationStopped())break e;dp(m,R,te),g=I}else for(w=0;w<f.length;w++){if(R=f[w],I=R.instance,te=R.currentTarget,R=R.listener,I!==g&&m.isPropagationStopped())break e;dp(m,R,te),g=I}}}if(it)throw e=st,it=!1,st=null,e}function rn(e,s){var c=s[ru];c===void 0&&(c=s[ru]=new Set);var f=e+"__bubble";c.has(f)||(pp(s,e,2,!1),c.add(f))}function qc(e,s,c){var f=0;s&&(f|=4),pp(c,e,f,s)}var Ko="_reactListening"+Math.random().toString(36).slice(2);function Fi(e){if(!e[Ko]){e[Ko]=!0,r.forEach(function(c){c!=="selectionchange"&&(py.has(c)||qc(c,!1,e),qc(c,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[Ko]||(s[Ko]=!0,qc("selectionchange",!1,s))}}function pp(e,s,c,f){switch(If(s)){case 1:var m=nn;break;case 4:m=yr;break;default:m=Qn}c=m.bind(null,s,c,e),m=void 0,!A||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),f?m!==void 0?e.addEventListener(s,c,{capture:!0,passive:m}):e.addEventListener(s,c,!0):m!==void 0?e.addEventListener(s,c,{passive:m}):e.addEventListener(s,c,!1)}function Jc(e,s,c,f,m){var g=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var R=f.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(w===4)for(w=f.return;w!==null;){var I=w.tag;if((I===3||I===4)&&(I=w.stateNode.containerInfo,I===m||I.nodeType===8&&I.parentNode===m))return;w=w.return}for(;R!==null;){if(w=ds(R),w===null)return;if(I=w.tag,I===5||I===6){f=g=w;continue e}R=R.parentNode}}f=f.return}Et(function(){var te=g,ge=Qt(c),we=[];e:{var he=cp.get(e);if(he!==void 0){var Le=Ic,We=e;switch(e){case"keypress":if(Uo(c)===0)break e;case"keydown":case"keyup":Le=Yx;break;case"focusin":We="focus",Le=zc;break;case"focusout":We="blur",Le=zc;break;case"beforeblur":case"afterblur":Le=zc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Le=zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Le=Rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Le=Kx;break;case sp:case ip:case op:Le=Ox;break;case lp:Le=Gx;break;case"scroll":Le=Dx;break;case"wheel":Le=qx;break;case"copy":case"cut":case"paste":Le=Ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Le=Bf}var He=(s&4)!==0,gn=!He&&e==="scroll",G=He?he!==null?he+"Capture":null:he;He=[];for(var U=te,X;U!==null;){X=U;var Se=X.stateNode;if(X.tag===5&&Se!==null&&(X=Se,G!==null&&(Se=at(U,G),Se!=null&&He.push(zi(U,Se,X)))),gn)break;U=U.return}0<He.length&&(he=new Le(he,We,null,c,ge),we.push({event:he,listeners:He}))}}if((s&7)===0){e:{if(he=e==="mouseover"||e==="pointerover",Le=e==="mouseout"||e==="pointerout",he&&c!==Ft&&(We=c.relatedTarget||c.fromElement)&&(ds(We)||We[xa]))break e;if((Le||he)&&(he=ge.window===ge?ge:(he=ge.ownerDocument)?he.defaultView||he.parentWindow:window,Le?(We=c.relatedTarget||c.toElement,Le=te,We=We?ds(We):null,We!==null&&(gn=Wt(We),We!==gn||We.tag!==5&&We.tag!==6)&&(We=null)):(Le=null,We=te),Le!==We)){if(He=zf,Se="onMouseLeave",G="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(He=Bf,Se="onPointerLeave",G="onPointerEnter",U="pointer"),gn=Le==null?he:Vs(Le),X=We==null?he:Vs(We),he=new He(Se,U+"leave",Le,c,ge),he.target=gn,he.relatedTarget=X,Se=null,ds(ge)===te&&(He=new He(G,U+"enter",We,c,ge),He.target=X,He.relatedTarget=gn,Se=He),gn=Se,Le&&We)t:{for(He=Le,G=We,U=0,X=He;X;X=Hs(X))U++;for(X=0,Se=G;Se;Se=Hs(Se))X++;for(;0<U-X;)He=Hs(He),U--;for(;0<X-U;)G=Hs(G),X--;for(;U--;){if(He===G||G!==null&&He===G.alternate)break t;He=Hs(He),G=Hs(G)}He=null}else He=null;Le!==null&&mp(we,he,Le,He,!1),We!==null&&gn!==null&&mp(we,gn,We,He,!0)}}e:{if(he=te?Vs(te):window,Le=he.nodeName&&he.nodeName.toLowerCase(),Le==="select"||Le==="input"&&he.type==="file")var Ge=ry;else if(Vf(he))if(Qf)Ge=oy;else{Ge=sy;var Ze=ay}else(Le=he.nodeName)&&Le.toLowerCase()==="input"&&(he.type==="checkbox"||he.type==="radio")&&(Ge=iy);if(Ge&&(Ge=Ge(e,te))){Gf(we,Ge,c,ge);break e}Ze&&Ze(e,he,te),e==="focusout"&&(Ze=he._wrapperState)&&Ze.controlled&&he.type==="number"&&Ke(he,"number",he.value)}switch(Ze=te?Vs(te):window,e){case"focusin":(Vf(Ze)||Ze.contentEditable==="true")&&(Ys=Ze,Hc=te,Ii=null);break;case"focusout":Ii=Hc=Ys=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,rp(we,c,ge);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":rp(we,c,ge)}var et;if(Bc)e:{switch(e){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else $s?Hf(e,c)&&(ot="onCompositionEnd"):e==="keydown"&&c.keyCode===229&&(ot="onCompositionStart");ot&&($f&&c.locale!=="ko"&&($s||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&$s&&(et=Lf()):(_a=ge,Ac="value"in _a?_a.value:_a.textContent,$s=!0)),Ze=Vo(te,ot),0<Ze.length&&(ot=new Uf(ot,e,null,c,ge),we.push({event:ot,listeners:Ze}),et?ot.data=et:(et=Kf(c),et!==null&&(ot.data=et)))),(et=Xx?Zx(e,c):ey(e,c))&&(te=Vo(te,"onBeforeInput"),0<te.length&&(ge=new Uf("onBeforeInput","beforeinput",null,c,ge),we.push({event:ge,listeners:te}),ge.data=et))}fp(we,s)})}function zi(e,s,c){return{instance:e,listener:s,currentTarget:c}}function Vo(e,s){for(var c=s+"Capture",f=[];e!==null;){var m=e,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=at(e,c),g!=null&&f.unshift(zi(e,g,m)),g=at(e,s),g!=null&&f.push(zi(e,g,m))),e=e.return}return f}function Hs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mp(e,s,c,f,m){for(var g=s._reactName,w=[];c!==null&&c!==f;){var R=c,I=R.alternate,te=R.stateNode;if(I!==null&&I===f)break;R.tag===5&&te!==null&&(R=te,m?(I=at(c,g),I!=null&&w.unshift(zi(c,I,R))):m||(I=at(c,g),I!=null&&w.push(zi(c,I,R)))),c=c.return}w.length!==0&&e.push({event:s,listeners:w})}var my=/\r\n?/g,hy=/\u0000|\uFFFD/g;function hp(e){return(typeof e=="string"?e:""+e).replace(my,`
`).replace(hy,"")}function Go(e,s,c){if(s=hp(s),hp(e)!==s&&c)throw Error(i(425))}function Qo(){}var Xc=null,Zc=null;function eu(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,gy=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(e){return gp.resolve(null).then(e).catch(xy)}:tu;function xy(e){setTimeout(function(){throw e})}function nu(e,s){var c=s,f=0;do{var m=c.nextSibling;if(e.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){e.removeChild(m),ce(s);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);ce(s)}function Aa(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function vp(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var c=e.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return e;s--}else c==="/$"&&s++}e=e.previousSibling}return null}var Ks=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Ks,Ui="__reactProps$"+Ks,xa="__reactContainer$"+Ks,ru="__reactEvents$"+Ks,yy="__reactListeners$"+Ks,by="__reactHandles$"+Ks;function ds(e){var s=e[Xr];if(s)return s;for(var c=e.parentNode;c;){if(s=c[xa]||c[Xr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(e=vp(e);e!==null;){if(c=e[Xr])return c;e=vp(e)}return s}e=c,c=e.parentNode}return null}function Bi(e){return e=e[Xr]||e[xa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function qo(e){return e[Ui]||null}var au=[],Gs=-1;function Ia(e){return{current:e}}function an(e){0>Gs||(e.current=au[Gs],au[Gs]=null,Gs--)}function Jt(e,s){Gs++,au[Gs]=e.current,e.current=s}var La={},Yn=Ia(La),nr=Ia(!1),fs=La;function Qs(e,s){var c=e.type.contextTypes;if(!c)return La;var f=e.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in c)m[g]=s[g];return f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=m),m}function rr(e){return e=e.childContextTypes,e!=null}function Jo(){an(nr),an(Yn)}function xp(e,s,c){if(Yn.current!==La)throw Error(i(168));Jt(Yn,s),Jt(nr,c)}function yp(e,s,c){var f=e.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in s))throw Error(i(108,Ue(e)||"Unknown",m));return Q({},c,f)}function Xo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||La,fs=Yn.current,Jt(Yn,e),Jt(nr,nr.current),!0}function bp(e,s,c){var f=e.stateNode;if(!f)throw Error(i(169));c?(e=yp(e,s,fs),f.__reactInternalMemoizedMergedChildContext=e,an(nr),an(Yn),Jt(Yn,e)):an(nr),Jt(nr,c)}var ya=null,Zo=!1,su=!1;function wp(e){ya===null?ya=[e]:ya.push(e)}function wy(e){Zo=!0,wp(e)}function Fa(){if(!su&&ya!==null){su=!0;var e=0,s=M;try{var c=ya;for(M=1;e<c.length;e++){var f=c[e];do f=f(!0);while(f!==null)}ya=null,Zo=!1}catch(m){throw ya!==null&&(ya=ya.slice(e+1)),ur(Gr,Fa),m}finally{M=s,su=!1}}return null}var qs=[],Js=0,el=null,tl=0,br=[],wr=0,ps=null,ba=1,wa="";function ms(e,s){qs[Js++]=tl,qs[Js++]=el,el=e,tl=s}function Np(e,s,c){br[wr++]=ba,br[wr++]=wa,br[wr++]=ps,ps=e;var f=ba;e=wa;var m=32-Gn(f)-1;f&=~(1<<m),c+=1;var g=32-Gn(s)+m;if(30<g){var w=m-m%5;g=(f&(1<<w)-1).toString(32),f>>=w,m-=w,ba=1<<32-Gn(s)+m|c<<m|f,wa=g+e}else ba=1<<g|c<<m|f,wa=e}function iu(e){e.return!==null&&(ms(e,1),Np(e,1,0))}function ou(e){for(;e===el;)el=qs[--Js],qs[Js]=null,tl=qs[--Js],qs[Js]=null;for(;e===ps;)ps=br[--wr],br[wr]=null,wa=br[--wr],br[wr]=null,ba=br[--wr],br[wr]=null}var pr=null,mr=null,on=!1,Fr=null;function Sp(e,s){var c=jr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=e,s=e.deletions,s===null?(e.deletions=[c],e.flags|=16):s.push(c)}function kp(e,s){switch(e.tag){case 5:var c=e.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,pr=e,mr=Aa(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,pr=e,mr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=ps!==null?{id:ba,overflow:wa}:null,e.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=jr(18,null,null,0),c.stateNode=s,c.return=e,e.child=c,pr=e,mr=null,!0):!1;default:return!1}}function lu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function cu(e){if(on){var s=mr;if(s){var c=s;if(!kp(e,s)){if(lu(e))throw Error(i(418));s=Aa(c.nextSibling);var f=pr;s&&kp(e,s)?Sp(f,c):(e.flags=e.flags&-4097|2,on=!1,pr=e)}}else{if(lu(e))throw Error(i(418));e.flags=e.flags&-4097|2,on=!1,pr=e}}}function jp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pr=e}function nl(e){if(e!==pr)return!1;if(!on)return jp(e),on=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!eu(e.type,e.memoizedProps)),s&&(s=mr)){if(lu(e))throw Cp(),Error(i(418));for(;s;)Sp(e,s),s=Aa(s.nextSibling)}if(jp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var c=e.data;if(c==="/$"){if(s===0){mr=Aa(e.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}e=e.nextSibling}mr=null}}else mr=pr?Aa(e.stateNode.nextSibling):null;return!0}function Cp(){for(var e=mr;e;)e=Aa(e.nextSibling)}function Xs(){mr=pr=null,on=!1}function uu(e){Fr===null?Fr=[e]:Fr.push(e)}var Ny=$.ReactCurrentBatchConfig;function $i(e,s,c){if(e=c.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(i(309));var f=c.stateNode}if(!f)throw Error(i(147,e));var m=f,g=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var R=m.refs;w===null?delete R[g]:R[g]=w},s._stringRef=g,s)}if(typeof e!="string")throw Error(i(284));if(!c._owner)throw Error(i(290,e))}return e}function rl(e,s){throw e=Object.prototype.toString.call(s),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ep(e){var s=e._init;return s(e._payload)}function Tp(e){function s(G,U){if(e){var X=G.deletions;X===null?(G.deletions=[U],G.flags|=16):X.push(U)}}function c(G,U){if(!e)return null;for(;U!==null;)s(G,U),U=U.sibling;return null}function f(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function m(G,U){return G=Ka(G,U),G.index=0,G.sibling=null,G}function g(G,U,X){return G.index=X,e?(X=G.alternate,X!==null?(X=X.index,X<U?(G.flags|=2,U):X):(G.flags|=2,U)):(G.flags|=1048576,U)}function w(G){return e&&G.alternate===null&&(G.flags|=2),G}function R(G,U,X,Se){return U===null||U.tag!==6?(U=td(X,G.mode,Se),U.return=G,U):(U=m(U,X),U.return=G,U)}function I(G,U,X,Se){var Ge=X.type;return Ge===ee?ge(G,U,X.props.children,Se,X.key):U!==null&&(U.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===Ne&&Ep(Ge)===U.type)?(Se=m(U,X.props),Se.ref=$i(G,U,X),Se.return=G,Se):(Se=El(X.type,X.key,X.props,null,G.mode,Se),Se.ref=$i(G,U,X),Se.return=G,Se)}function te(G,U,X,Se){return U===null||U.tag!==4||U.stateNode.containerInfo!==X.containerInfo||U.stateNode.implementation!==X.implementation?(U=nd(X,G.mode,Se),U.return=G,U):(U=m(U,X.children||[]),U.return=G,U)}function ge(G,U,X,Se,Ge){return U===null||U.tag!==7?(U=Ns(X,G.mode,Se,Ge),U.return=G,U):(U=m(U,X),U.return=G,U)}function we(G,U,X){if(typeof U=="string"&&U!==""||typeof U=="number")return U=td(""+U,G.mode,X),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Z:return X=El(U.type,U.key,U.props,null,G.mode,X),X.ref=$i(G,null,U),X.return=G,X;case q:return U=nd(U,G.mode,X),U.return=G,U;case Ne:var Se=U._init;return we(G,Se(U._payload),X)}if(pt(U)||V(U))return U=Ns(U,G.mode,X,null),U.return=G,U;rl(G,U)}return null}function he(G,U,X,Se){var Ge=U!==null?U.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return Ge!==null?null:R(G,U,""+X,Se);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case Z:return X.key===Ge?I(G,U,X,Se):null;case q:return X.key===Ge?te(G,U,X,Se):null;case Ne:return Ge=X._init,he(G,U,Ge(X._payload),Se)}if(pt(X)||V(X))return Ge!==null?null:ge(G,U,X,Se,null);rl(G,X)}return null}function Le(G,U,X,Se,Ge){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return G=G.get(X)||null,R(U,G,""+Se,Ge);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case Z:return G=G.get(Se.key===null?X:Se.key)||null,I(U,G,Se,Ge);case q:return G=G.get(Se.key===null?X:Se.key)||null,te(U,G,Se,Ge);case Ne:var Ze=Se._init;return Le(G,U,X,Ze(Se._payload),Ge)}if(pt(Se)||V(Se))return G=G.get(X)||null,ge(U,G,Se,Ge,null);rl(U,Se)}return null}function We(G,U,X,Se){for(var Ge=null,Ze=null,et=U,ot=U=0,Dn=null;et!==null&&ot<X.length;ot++){et.index>ot?(Dn=et,et=null):Dn=et.sibling;var Pt=he(G,et,X[ot],Se);if(Pt===null){et===null&&(et=Dn);break}e&&et&&Pt.alternate===null&&s(G,et),U=g(Pt,U,ot),Ze===null?Ge=Pt:Ze.sibling=Pt,Ze=Pt,et=Dn}if(ot===X.length)return c(G,et),on&&ms(G,ot),Ge;if(et===null){for(;ot<X.length;ot++)et=we(G,X[ot],Se),et!==null&&(U=g(et,U,ot),Ze===null?Ge=et:Ze.sibling=et,Ze=et);return on&&ms(G,ot),Ge}for(et=f(G,et);ot<X.length;ot++)Dn=Le(et,G,ot,X[ot],Se),Dn!==null&&(e&&Dn.alternate!==null&&et.delete(Dn.key===null?ot:Dn.key),U=g(Dn,U,ot),Ze===null?Ge=Dn:Ze.sibling=Dn,Ze=Dn);return e&&et.forEach(function(Va){return s(G,Va)}),on&&ms(G,ot),Ge}function He(G,U,X,Se){var Ge=V(X);if(typeof Ge!="function")throw Error(i(150));if(X=Ge.call(X),X==null)throw Error(i(151));for(var Ze=Ge=null,et=U,ot=U=0,Dn=null,Pt=X.next();et!==null&&!Pt.done;ot++,Pt=X.next()){et.index>ot?(Dn=et,et=null):Dn=et.sibling;var Va=he(G,et,Pt.value,Se);if(Va===null){et===null&&(et=Dn);break}e&&et&&Va.alternate===null&&s(G,et),U=g(Va,U,ot),Ze===null?Ge=Va:Ze.sibling=Va,Ze=Va,et=Dn}if(Pt.done)return c(G,et),on&&ms(G,ot),Ge;if(et===null){for(;!Pt.done;ot++,Pt=X.next())Pt=we(G,Pt.value,Se),Pt!==null&&(U=g(Pt,U,ot),Ze===null?Ge=Pt:Ze.sibling=Pt,Ze=Pt);return on&&ms(G,ot),Ge}for(et=f(G,et);!Pt.done;ot++,Pt=X.next())Pt=Le(et,G,ot,Pt.value,Se),Pt!==null&&(e&&Pt.alternate!==null&&et.delete(Pt.key===null?ot:Pt.key),U=g(Pt,U,ot),Ze===null?Ge=Pt:Ze.sibling=Pt,Ze=Pt);return e&&et.forEach(function(t0){return s(G,t0)}),on&&ms(G,ot),Ge}function gn(G,U,X,Se){if(typeof X=="object"&&X!==null&&X.type===ee&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case Z:e:{for(var Ge=X.key,Ze=U;Ze!==null;){if(Ze.key===Ge){if(Ge=X.type,Ge===ee){if(Ze.tag===7){c(G,Ze.sibling),U=m(Ze,X.props.children),U.return=G,G=U;break e}}else if(Ze.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===Ne&&Ep(Ge)===Ze.type){c(G,Ze.sibling),U=m(Ze,X.props),U.ref=$i(G,Ze,X),U.return=G,G=U;break e}c(G,Ze);break}else s(G,Ze);Ze=Ze.sibling}X.type===ee?(U=Ns(X.props.children,G.mode,Se,X.key),U.return=G,G=U):(Se=El(X.type,X.key,X.props,null,G.mode,Se),Se.ref=$i(G,U,X),Se.return=G,G=Se)}return w(G);case q:e:{for(Ze=X.key;U!==null;){if(U.key===Ze)if(U.tag===4&&U.stateNode.containerInfo===X.containerInfo&&U.stateNode.implementation===X.implementation){c(G,U.sibling),U=m(U,X.children||[]),U.return=G,G=U;break e}else{c(G,U);break}else s(G,U);U=U.sibling}U=nd(X,G.mode,Se),U.return=G,G=U}return w(G);case Ne:return Ze=X._init,gn(G,U,Ze(X._payload),Se)}if(pt(X))return We(G,U,X,Se);if(V(X))return He(G,U,X,Se);rl(G,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,U!==null&&U.tag===6?(c(G,U.sibling),U=m(U,X),U.return=G,G=U):(c(G,U),U=td(X,G.mode,Se),U.return=G,G=U),w(G)):c(G,U)}return gn}var Zs=Tp(!0),Dp=Tp(!1),al=Ia(null),sl=null,ei=null,du=null;function fu(){du=ei=sl=null}function pu(e){var s=al.current;an(al),e._currentValue=s}function mu(e,s,c){for(;e!==null;){var f=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),e===c)break;e=e.return}}function ti(e,s){sl=e,du=ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&s)!==0&&(ar=!0),e.firstContext=null)}function Nr(e){var s=e._currentValue;if(du!==e)if(e={context:e,memoizedValue:s,next:null},ei===null){if(sl===null)throw Error(i(308));ei=e,sl.dependencies={lanes:0,firstContext:e}}else ei=ei.next=e;return s}var hs=null;function hu(e){hs===null?hs=[e]:hs.push(e)}function Mp(e,s,c,f){var m=s.interleaved;return m===null?(c.next=c,hu(s)):(c.next=m.next,m.next=c),s.interleaved=c,Na(e,f)}function Na(e,s){e.lanes|=s;var c=e.alternate;for(c!==null&&(c.lanes|=s),c=e,e=e.return;e!==null;)e.childLanes|=s,c=e.alternate,c!==null&&(c.childLanes|=s),c=e,e=e.return;return c.tag===3?c.stateNode:null}var za=!1;function gu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rp(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sa(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function Ua(e,s,c){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(Tt&2)!==0){var m=f.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),f.pending=s,Na(e,c)}return m=f.interleaved,m===null?(s.next=s,hu(f)):(s.next=m.next,m.next=s),f.interleaved=s,Na(e,c)}function il(e,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var f=s.lanes;f&=e.pendingLanes,c|=f,s.lanes=c,us(e,c)}}function Pp(e,s){var c=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var w={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};g===null?m=g=w:g=g.next=w,c=c.next}while(c!==null);g===null?m=g=s:g=g.next=s}else m=g=s;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:f.shared,effects:f.effects},e.updateQueue=c;return}e=c.lastBaseUpdate,e===null?c.firstBaseUpdate=s:e.next=s,c.lastBaseUpdate=s}function ol(e,s,c,f){var m=e.updateQueue;za=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var I=R,te=I.next;I.next=null,w===null?g=te:w.next=te,w=I;var ge=e.alternate;ge!==null&&(ge=ge.updateQueue,R=ge.lastBaseUpdate,R!==w&&(R===null?ge.firstBaseUpdate=te:R.next=te,ge.lastBaseUpdate=I))}if(g!==null){var we=m.baseState;w=0,ge=te=I=null,R=g;do{var he=R.lane,Le=R.eventTime;if((f&he)===he){ge!==null&&(ge=ge.next={eventTime:Le,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var We=e,He=R;switch(he=s,Le=c,He.tag){case 1:if(We=He.payload,typeof We=="function"){we=We.call(Le,we,he);break e}we=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=He.payload,he=typeof We=="function"?We.call(Le,we,he):We,he==null)break e;we=Q({},we,he);break e;case 2:za=!0}}R.callback!==null&&R.lane!==0&&(e.flags|=64,he=m.effects,he===null?m.effects=[R]:he.push(R))}else Le={eventTime:Le,lane:he,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ge===null?(te=ge=Le,I=we):ge=ge.next=Le,w|=he;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;he=R,R=he.next,he.next=null,m.lastBaseUpdate=he,m.shared.pending=null}}while(!0);if(ge===null&&(I=we),m.baseState=I,m.firstBaseUpdate=te,m.lastBaseUpdate=ge,s=m.shared.interleaved,s!==null){m=s;do w|=m.lane,m=m.next;while(m!==s)}else g===null&&(m.shared.lanes=0);xs|=w,e.lanes=w,e.memoizedState=we}}function _p(e,s,c){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var f=e[s],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(i(191,m));m.call(f)}}}var Yi={},Zr=Ia(Yi),Wi=Ia(Yi),Hi=Ia(Yi);function gs(e){if(e===Yi)throw Error(i(174));return e}function vu(e,s){switch(Jt(Hi,s),Jt(Wi,e),Jt(Zr,Yi),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:J(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=J(s,e)}an(Zr),Jt(Zr,s)}function ni(){an(Zr),an(Wi),an(Hi)}function Op(e){gs(Hi.current);var s=gs(Zr.current),c=J(s,e.type);s!==c&&(Jt(Wi,e),Jt(Zr,c))}function xu(e){Wi.current===e&&(an(Zr),an(Wi))}var cn=Ia(0);function ll(e){for(var s=e;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yu=[];function bu(){for(var e=0;e<yu.length;e++)yu[e]._workInProgressVersionPrimary=null;yu.length=0}var cl=$.ReactCurrentDispatcher,wu=$.ReactCurrentBatchConfig,vs=0,un=null,kn=null,En=null,ul=!1,Ki=!1,Vi=0,Sy=0;function Wn(){throw Error(i(321))}function Nu(e,s){if(s===null)return!1;for(var c=0;c<s.length&&c<e.length;c++)if(!Lr(e[c],s[c]))return!1;return!0}function Su(e,s,c,f,m,g){if(vs=g,un=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,cl.current=e===null||e.memoizedState===null?Ey:Ty,e=c(f,m),Ki){g=0;do{if(Ki=!1,Vi=0,25<=g)throw Error(i(301));g+=1,En=kn=null,s.updateQueue=null,cl.current=Dy,e=c(f,m)}while(Ki)}if(cl.current=pl,s=kn!==null&&kn.next!==null,vs=0,En=kn=un=null,ul=!1,s)throw Error(i(300));return e}function ku(){var e=Vi!==0;return Vi=0,e}function ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?un.memoizedState=En=e:En=En.next=e,En}function Sr(){if(kn===null){var e=un.alternate;e=e!==null?e.memoizedState:null}else e=kn.next;var s=En===null?un.memoizedState:En.next;if(s!==null)En=s,kn=e;else{if(e===null)throw Error(i(310));kn=e,e={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},En===null?un.memoizedState=En=e:En=En.next=e}return En}function Gi(e,s){return typeof s=="function"?s(e):s}function ju(e){var s=Sr(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=e;var f=kn,m=f.baseQueue,g=c.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}f.baseQueue=m=g,c.pending=null}if(m!==null){g=m.next,f=f.baseState;var R=w=null,I=null,te=g;do{var ge=te.lane;if((vs&ge)===ge)I!==null&&(I=I.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),f=te.hasEagerState?te.eagerState:e(f,te.action);else{var we={lane:ge,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};I===null?(R=I=we,w=f):I=I.next=we,un.lanes|=ge,xs|=ge}te=te.next}while(te!==null&&te!==g);I===null?w=f:I.next=R,Lr(f,s.memoizedState)||(ar=!0),s.memoizedState=f,s.baseState=w,s.baseQueue=I,c.lastRenderedState=f}if(e=c.interleaved,e!==null){m=e;do g=m.lane,un.lanes|=g,xs|=g,m=m.next;while(m!==e)}else m===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Cu(e){var s=Sr(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=e;var f=c.dispatch,m=c.pending,g=s.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do g=e(g,w.action),w=w.next;while(w!==m);Lr(g,s.memoizedState)||(ar=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),c.lastRenderedState=g}return[g,f]}function Ap(){}function Ip(e,s){var c=un,f=Sr(),m=s(),g=!Lr(f.memoizedState,m);if(g&&(f.memoizedState=m,ar=!0),f=f.queue,Eu(zp.bind(null,c,f,e),[e]),f.getSnapshot!==s||g||En!==null&&En.memoizedState.tag&1){if(c.flags|=2048,Qi(9,Fp.bind(null,c,f,m,s),void 0,null),Tn===null)throw Error(i(349));(vs&30)!==0||Lp(c,s,m)}return m}function Lp(e,s,c){e.flags|=16384,e={getSnapshot:s,value:c},s=un.updateQueue,s===null?(s={lastEffect:null,stores:null},un.updateQueue=s,s.stores=[e]):(c=s.stores,c===null?s.stores=[e]:c.push(e))}function Fp(e,s,c,f){s.value=c,s.getSnapshot=f,Up(s)&&Bp(e)}function zp(e,s,c){return c(function(){Up(s)&&Bp(e)})}function Up(e){var s=e.getSnapshot;e=e.value;try{var c=s();return!Lr(e,c)}catch{return!0}}function Bp(e){var s=Na(e,1);s!==null&&$r(s,e,1,-1)}function $p(e){var s=ea();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:e},s.queue=e,e=e.dispatch=Cy.bind(null,un,e),[s.memoizedState,e]}function Qi(e,s,c,f){return e={tag:e,create:s,destroy:c,deps:f,next:null},s=un.updateQueue,s===null?(s={lastEffect:null,stores:null},un.updateQueue=s,s.lastEffect=e.next=e):(c=s.lastEffect,c===null?s.lastEffect=e.next=e:(f=c.next,c.next=e,e.next=f,s.lastEffect=e)),e}function Yp(){return Sr().memoizedState}function dl(e,s,c,f){var m=ea();un.flags|=e,m.memoizedState=Qi(1|s,c,void 0,f===void 0?null:f)}function fl(e,s,c,f){var m=Sr();f=f===void 0?null:f;var g=void 0;if(kn!==null){var w=kn.memoizedState;if(g=w.destroy,f!==null&&Nu(f,w.deps)){m.memoizedState=Qi(s,c,g,f);return}}un.flags|=e,m.memoizedState=Qi(1|s,c,g,f)}function Wp(e,s){return dl(8390656,8,e,s)}function Eu(e,s){return fl(2048,8,e,s)}function Hp(e,s){return fl(4,2,e,s)}function Kp(e,s){return fl(4,4,e,s)}function Vp(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Gp(e,s,c){return c=c!=null?c.concat([e]):null,fl(4,4,Vp.bind(null,s,e),c)}function Tu(){}function Qp(e,s){var c=Sr();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&Nu(s,f[1])?f[0]:(c.memoizedState=[e,s],e)}function qp(e,s){var c=Sr();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&Nu(s,f[1])?f[0]:(e=e(),c.memoizedState=[e,s],e)}function Jp(e,s,c){return(vs&21)===0?(e.baseState&&(e.baseState=!1,ar=!0),e.memoizedState=c):(Lr(c,s)||(c=Ra(),un.lanes|=c,xs|=c,e.baseState=!0),s)}function ky(e,s){var c=M;M=c!==0&&4>c?c:4,e(!0);var f=wu.transition;wu.transition={};try{e(!1),s()}finally{M=c,wu.transition=f}}function Xp(){return Sr().memoizedState}function jy(e,s,c){var f=Wa(e);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Zp(e))em(s,c);else if(c=Mp(e,s,c,f),c!==null){var m=Jn();$r(c,e,f,m),tm(c,s,f)}}function Cy(e,s,c){var f=Wa(e),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Zp(e))em(s,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,R=g(w,c);if(m.hasEagerState=!0,m.eagerState=R,Lr(R,w)){var I=s.interleaved;I===null?(m.next=m,hu(s)):(m.next=I.next,I.next=m),s.interleaved=m;return}}catch{}c=Mp(e,s,m,f),c!==null&&(m=Jn(),$r(c,e,f,m),tm(c,s,f))}}function Zp(e){var s=e.alternate;return e===un||s!==null&&s===un}function em(e,s){Ki=ul=!0;var c=e.pending;c===null?s.next=s:(s.next=c.next,c.next=s),e.pending=s}function tm(e,s,c){if((c&4194240)!==0){var f=s.lanes;f&=e.pendingLanes,c|=f,s.lanes=c,us(e,c)}}var pl={readContext:Nr,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},Ey={readContext:Nr,useCallback:function(e,s){return ea().memoizedState=[e,s===void 0?null:s],e},useContext:Nr,useEffect:Wp,useImperativeHandle:function(e,s,c){return c=c!=null?c.concat([e]):null,dl(4194308,4,Vp.bind(null,s,e),c)},useLayoutEffect:function(e,s){return dl(4194308,4,e,s)},useInsertionEffect:function(e,s){return dl(4,2,e,s)},useMemo:function(e,s){var c=ea();return s=s===void 0?null:s,e=e(),c.memoizedState=[e,s],e},useReducer:function(e,s,c){var f=ea();return s=c!==void 0?c(s):s,f.memoizedState=f.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},f.queue=e,e=e.dispatch=jy.bind(null,un,e),[f.memoizedState,e]},useRef:function(e){var s=ea();return e={current:e},s.memoizedState=e},useState:$p,useDebugValue:Tu,useDeferredValue:function(e){return ea().memoizedState=e},useTransition:function(){var e=$p(!1),s=e[0];return e=ky.bind(null,e[1]),ea().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,c){var f=un,m=ea();if(on){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),Tn===null)throw Error(i(349));(vs&30)!==0||Lp(f,s,c)}m.memoizedState=c;var g={value:c,getSnapshot:s};return m.queue=g,Wp(zp.bind(null,f,g,e),[e]),f.flags|=2048,Qi(9,Fp.bind(null,f,g,c,s),void 0,null),c},useId:function(){var e=ea(),s=Tn.identifierPrefix;if(on){var c=wa,f=ba;c=(f&~(1<<32-Gn(f)-1)).toString(32)+c,s=":"+s+"R"+c,c=Vi++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=Sy++,s=":"+s+"r"+c.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ty={readContext:Nr,useCallback:Qp,useContext:Nr,useEffect:Eu,useImperativeHandle:Gp,useInsertionEffect:Hp,useLayoutEffect:Kp,useMemo:qp,useReducer:ju,useRef:Yp,useState:function(){return ju(Gi)},useDebugValue:Tu,useDeferredValue:function(e){var s=Sr();return Jp(s,kn.memoizedState,e)},useTransition:function(){var e=ju(Gi)[0],s=Sr().memoizedState;return[e,s]},useMutableSource:Ap,useSyncExternalStore:Ip,useId:Xp,unstable_isNewReconciler:!1},Dy={readContext:Nr,useCallback:Qp,useContext:Nr,useEffect:Eu,useImperativeHandle:Gp,useInsertionEffect:Hp,useLayoutEffect:Kp,useMemo:qp,useReducer:Cu,useRef:Yp,useState:function(){return Cu(Gi)},useDebugValue:Tu,useDeferredValue:function(e){var s=Sr();return kn===null?s.memoizedState=e:Jp(s,kn.memoizedState,e)},useTransition:function(){var e=Cu(Gi)[0],s=Sr().memoizedState;return[e,s]},useMutableSource:Ap,useSyncExternalStore:Ip,useId:Xp,unstable_isNewReconciler:!1};function zr(e,s){if(e&&e.defaultProps){s=Q({},s),e=e.defaultProps;for(var c in e)s[c]===void 0&&(s[c]=e[c]);return s}return s}function Du(e,s,c,f){s=e.memoizedState,c=c(f,s),c=c==null?s:Q({},s,c),e.memoizedState=c,e.lanes===0&&(e.updateQueue.baseState=c)}var ml={isMounted:function(e){return(e=e._reactInternals)?Wt(e)===e:!1},enqueueSetState:function(e,s,c){e=e._reactInternals;var f=Jn(),m=Wa(e),g=Sa(f,m);g.payload=s,c!=null&&(g.callback=c),s=Ua(e,g,m),s!==null&&($r(s,e,m,f),il(s,e,m))},enqueueReplaceState:function(e,s,c){e=e._reactInternals;var f=Jn(),m=Wa(e),g=Sa(f,m);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=Ua(e,g,m),s!==null&&($r(s,e,m,f),il(s,e,m))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var c=Jn(),f=Wa(e),m=Sa(c,f);m.tag=2,s!=null&&(m.callback=s),s=Ua(e,m,f),s!==null&&($r(s,e,f,c),il(s,e,f))}};function nm(e,s,c,f,m,g,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,g,w):s.prototype&&s.prototype.isPureReactComponent?!Ai(c,f)||!Ai(m,g):!0}function rm(e,s,c){var f=!1,m=La,g=s.contextType;return typeof g=="object"&&g!==null?g=Nr(g):(m=rr(s)?fs:Yn.current,f=s.contextTypes,g=(f=f!=null)?Qs(e,m):La),s=new s(c,g),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ml,e.stateNode=s,s._reactInternals=e,f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=g),s}function am(e,s,c,f){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==e&&ml.enqueueReplaceState(s,s.state,null)}function Mu(e,s,c,f){var m=e.stateNode;m.props=c,m.state=e.memoizedState,m.refs={},gu(e);var g=s.contextType;typeof g=="object"&&g!==null?m.context=Nr(g):(g=rr(s)?fs:Yn.current,m.context=Qs(e,g)),m.state=e.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Du(e,s,g,c),m.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&ml.enqueueReplaceState(m,m.state,null),ol(e,c,m,f),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function ri(e,s){try{var c="",f=s;do c+=De(f),f=f.return;while(f);var m=c}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:s,stack:m,digest:null}}function Ru(e,s,c){return{value:e,source:null,stack:c??null,digest:s??null}}function Pu(e,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var My=typeof WeakMap=="function"?WeakMap:Map;function sm(e,s,c){c=Sa(-1,c),c.tag=3,c.payload={element:null};var f=s.value;return c.callback=function(){wl||(wl=!0,Vu=f),Pu(e,s)},c}function im(e,s,c){c=Sa(-1,c),c.tag=3;var f=e.type.getDerivedStateFromError;if(typeof f=="function"){var m=s.value;c.payload=function(){return f(m)},c.callback=function(){Pu(e,s)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(c.callback=function(){Pu(e,s),typeof f!="function"&&($a===null?$a=new Set([this]):$a.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),c}function om(e,s,c){var f=e.pingCache;if(f===null){f=e.pingCache=new My;var m=new Set;f.set(s,m)}else m=f.get(s),m===void 0&&(m=new Set,f.set(s,m));m.has(c)||(m.add(c),e=Wy.bind(null,e,s,c),s.then(e,e))}function lm(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function cm(e,s,c,f,m){return(e.mode&1)===0?(e===s?e.flags|=65536:(e.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Sa(-1,1),s.tag=2,Ua(c,s,1))),c.lanes|=1),e):(e.flags|=65536,e.lanes=m,e)}var Ry=$.ReactCurrentOwner,ar=!1;function qn(e,s,c,f){s.child=e===null?Dp(s,null,c,f):Zs(s,e.child,c,f)}function um(e,s,c,f,m){c=c.render;var g=s.ref;return ti(s,m),f=Su(e,s,c,f,g,m),c=ku(),e!==null&&!ar?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~m,ka(e,s,m)):(on&&c&&iu(s),s.flags|=1,qn(e,s,f,m),s.child)}function dm(e,s,c,f,m){if(e===null){var g=c.type;return typeof g=="function"&&!ed(g)&&g.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=g,fm(e,s,g,f,m)):(e=El(c.type,null,f,s,s.mode,m),e.ref=s.ref,e.return=s,s.child=e)}if(g=e.child,(e.lanes&m)===0){var w=g.memoizedProps;if(c=c.compare,c=c!==null?c:Ai,c(w,f)&&e.ref===s.ref)return ka(e,s,m)}return s.flags|=1,e=Ka(g,f),e.ref=s.ref,e.return=s,s.child=e}function fm(e,s,c,f,m){if(e!==null){var g=e.memoizedProps;if(Ai(g,f)&&e.ref===s.ref)if(ar=!1,s.pendingProps=f=g,(e.lanes&m)!==0)(e.flags&131072)!==0&&(ar=!0);else return s.lanes=e.lanes,ka(e,s,m)}return _u(e,s,c,f,m)}function pm(e,s,c){var f=s.pendingProps,m=f.children,g=e!==null?e.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(si,hr),hr|=c;else{if((c&1073741824)===0)return e=g!==null?g.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Jt(si,hr),hr|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=g!==null?g.baseLanes:c,Jt(si,hr),hr|=f}else g!==null?(f=g.baseLanes|c,s.memoizedState=null):f=c,Jt(si,hr),hr|=f;return qn(e,s,m,c),s.child}function mm(e,s){var c=s.ref;(e===null&&c!==null||e!==null&&e.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function _u(e,s,c,f,m){var g=rr(c)?fs:Yn.current;return g=Qs(s,g),ti(s,m),c=Su(e,s,c,f,g,m),f=ku(),e!==null&&!ar?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~m,ka(e,s,m)):(on&&f&&iu(s),s.flags|=1,qn(e,s,c,m),s.child)}function hm(e,s,c,f,m){if(rr(c)){var g=!0;Xo(s)}else g=!1;if(ti(s,m),s.stateNode===null)gl(e,s),rm(s,c,f),Mu(s,c,f,m),f=!0;else if(e===null){var w=s.stateNode,R=s.memoizedProps;w.props=R;var I=w.context,te=c.contextType;typeof te=="object"&&te!==null?te=Nr(te):(te=rr(c)?fs:Yn.current,te=Qs(s,te));var ge=c.getDerivedStateFromProps,we=typeof ge=="function"||typeof w.getSnapshotBeforeUpdate=="function";we||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==f||I!==te)&&am(s,w,f,te),za=!1;var he=s.memoizedState;w.state=he,ol(s,f,w,m),I=s.memoizedState,R!==f||he!==I||nr.current||za?(typeof ge=="function"&&(Du(s,c,ge,f),I=s.memoizedState),(R=za||nm(s,c,R,f,he,I,te))?(we||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=I),w.props=f,w.state=I,w.context=te,f=R):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{w=s.stateNode,Rp(e,s),R=s.memoizedProps,te=s.type===s.elementType?R:zr(s.type,R),w.props=te,we=s.pendingProps,he=w.context,I=c.contextType,typeof I=="object"&&I!==null?I=Nr(I):(I=rr(c)?fs:Yn.current,I=Qs(s,I));var Le=c.getDerivedStateFromProps;(ge=typeof Le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R!==we||he!==I)&&am(s,w,f,I),za=!1,he=s.memoizedState,w.state=he,ol(s,f,w,m);var We=s.memoizedState;R!==we||he!==We||nr.current||za?(typeof Le=="function"&&(Du(s,c,Le,f),We=s.memoizedState),(te=za||nm(s,c,te,f,he,We,I)||!1)?(ge||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,We,I),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,We,I)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||R===e.memoizedProps&&he===e.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===e.memoizedProps&&he===e.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=We),w.props=f,w.state=We,w.context=I,f=te):(typeof w.componentDidUpdate!="function"||R===e.memoizedProps&&he===e.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||R===e.memoizedProps&&he===e.memoizedState||(s.flags|=1024),f=!1)}return Ou(e,s,c,f,g,m)}function Ou(e,s,c,f,m,g){mm(e,s);var w=(s.flags&128)!==0;if(!f&&!w)return m&&bp(s,c,!1),ka(e,s,g);f=s.stateNode,Ry.current=s;var R=w&&typeof c.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,e!==null&&w?(s.child=Zs(s,e.child,null,g),s.child=Zs(s,null,R,g)):qn(e,s,R,g),s.memoizedState=f.state,m&&bp(s,c,!0),s.child}function gm(e){var s=e.stateNode;s.pendingContext?xp(e,s.pendingContext,s.pendingContext!==s.context):s.context&&xp(e,s.context,!1),vu(e,s.containerInfo)}function vm(e,s,c,f,m){return Xs(),uu(m),s.flags|=256,qn(e,s,c,f),s.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function Iu(e){return{baseLanes:e,cachePool:null,transitions:null}}function xm(e,s,c){var f=s.pendingProps,m=cn.current,g=!1,w=(s.flags&128)!==0,R;if((R=w)||(R=e!==null&&e.memoizedState===null?!1:(m&2)!==0),R?(g=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),Jt(cn,m&1),e===null)return cu(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((s.mode&1)===0?s.lanes=1:e.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=f.children,e=f.fallback,g?(f=s.mode,g=s.child,w={mode:"hidden",children:w},(f&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Tl(w,f,0,null),e=Ns(e,f,c,null),g.return=s,e.return=s,g.sibling=e,s.child=g,s.child.memoizedState=Iu(c),s.memoizedState=Au,e):Lu(s,w));if(m=e.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return Py(e,s,w,f,R,m,c);if(g){g=f.fallback,w=s.mode,m=e.child,R=m.sibling;var I={mode:"hidden",children:f.children};return(w&1)===0&&s.child!==m?(f=s.child,f.childLanes=0,f.pendingProps=I,s.deletions=null):(f=Ka(m,I),f.subtreeFlags=m.subtreeFlags&14680064),R!==null?g=Ka(R,g):(g=Ns(g,w,c,null),g.flags|=2),g.return=s,f.return=s,f.sibling=g,s.child=f,f=g,g=s.child,w=e.child.memoizedState,w=w===null?Iu(c):{baseLanes:w.baseLanes|c,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=e.childLanes&~c,s.memoizedState=Au,f}return g=e.child,e=g.sibling,f=Ka(g,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=c),f.return=s,f.sibling=null,e!==null&&(c=s.deletions,c===null?(s.deletions=[e],s.flags|=16):c.push(e)),s.child=f,s.memoizedState=null,f}function Lu(e,s){return s=Tl({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function hl(e,s,c,f){return f!==null&&uu(f),Zs(s,e.child,null,c),e=Lu(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function Py(e,s,c,f,m,g,w){if(c)return s.flags&256?(s.flags&=-257,f=Ru(Error(i(422))),hl(e,s,w,f)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(g=f.fallback,m=s.mode,f=Tl({mode:"visible",children:f.children},m,0,null),g=Ns(g,m,w,null),g.flags|=2,f.return=s,g.return=s,f.sibling=g,s.child=f,(s.mode&1)!==0&&Zs(s,e.child,null,w),s.child.memoizedState=Iu(w),s.memoizedState=Au,g);if((s.mode&1)===0)return hl(e,s,w,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var R=f.dgst;return f=R,g=Error(i(419)),f=Ru(g,f,void 0),hl(e,s,w,f)}if(R=(w&e.childLanes)!==0,ar||R){if(f=Tn,f!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|w))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,Na(e,m),$r(f,e,m,-1))}return Zu(),f=Ru(Error(i(421))),hl(e,s,w,f)}return m.data==="$?"?(s.flags|=128,s.child=e.child,s=Hy.bind(null,e),m._reactRetry=s,null):(e=g.treeContext,mr=Aa(m.nextSibling),pr=s,on=!0,Fr=null,e!==null&&(br[wr++]=ba,br[wr++]=wa,br[wr++]=ps,ba=e.id,wa=e.overflow,ps=s),s=Lu(s,f.children),s.flags|=4096,s)}function ym(e,s,c){e.lanes|=s;var f=e.alternate;f!==null&&(f.lanes|=s),mu(e.return,s,c)}function Fu(e,s,c,f,m){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=f,g.tail=c,g.tailMode=m)}function bm(e,s,c){var f=s.pendingProps,m=f.revealOrder,g=f.tail;if(qn(e,s,f.children,c),f=cn.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ym(e,c,s);else if(e.tag===19)ym(e,c,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}f&=1}if(Jt(cn,f),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(c=s.child,m=null;c!==null;)e=c.alternate,e!==null&&ll(e)===null&&(m=c),c=c.sibling;c=m,c===null?(m=s.child,s.child=null):(m=c.sibling,c.sibling=null),Fu(s,!1,m,c,g);break;case"backwards":for(c=null,m=s.child,s.child=null;m!==null;){if(e=m.alternate,e!==null&&ll(e)===null){s.child=m;break}e=m.sibling,m.sibling=c,c=m,m=e}Fu(s,!0,c,null,g);break;case"together":Fu(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gl(e,s){(s.mode&1)===0&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function ka(e,s,c){if(e!==null&&(s.dependencies=e.dependencies),xs|=s.lanes,(c&s.childLanes)===0)return null;if(e!==null&&s.child!==e.child)throw Error(i(153));if(s.child!==null){for(e=s.child,c=Ka(e,e.pendingProps),s.child=c,c.return=s;e.sibling!==null;)e=e.sibling,c=c.sibling=Ka(e,e.pendingProps),c.return=s;c.sibling=null}return s.child}function _y(e,s,c){switch(s.tag){case 3:gm(s),Xs();break;case 5:Op(s);break;case 1:rr(s.type)&&Xo(s);break;case 4:vu(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,m=s.memoizedProps.value;Jt(al,f._currentValue),f._currentValue=m;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(Jt(cn,cn.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?xm(e,s,c):(Jt(cn,cn.current&1),e=ka(e,s,c),e!==null?e.sibling:null);Jt(cn,cn.current&1);break;case 19:if(f=(c&s.childLanes)!==0,(e.flags&128)!==0){if(f)return bm(e,s,c);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Jt(cn,cn.current),f)break;return null;case 22:case 23:return s.lanes=0,pm(e,s,c)}return ka(e,s,c)}var wm,zu,Nm,Sm;wm=function(e,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},zu=function(){},Nm=function(e,s,c,f){var m=e.memoizedProps;if(m!==f){e=s.stateNode,gs(Zr.current);var g=null;switch(c){case"input":m=ut(e,m),f=ut(e,f),g=[];break;case"select":m=Q({},m,{value:void 0}),f=Q({},f,{value:void 0}),g=[];break;case"textarea":m=Rt(e,m),f=Rt(e,f),g=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(e.onclick=Qo)}$t(c,f);var w;c=null;for(te in m)if(!f.hasOwnProperty(te)&&m.hasOwnProperty(te)&&m[te]!=null)if(te==="style"){var R=m[te];for(w in R)R.hasOwnProperty(w)&&(c||(c={}),c[w]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(t.hasOwnProperty(te)?g||(g=[]):(g=g||[]).push(te,null));for(te in f){var I=f[te];if(R=m?.[te],f.hasOwnProperty(te)&&I!==R&&(I!=null||R!=null))if(te==="style")if(R){for(w in R)!R.hasOwnProperty(w)||I&&I.hasOwnProperty(w)||(c||(c={}),c[w]="");for(w in I)I.hasOwnProperty(w)&&R[w]!==I[w]&&(c||(c={}),c[w]=I[w])}else c||(g||(g=[]),g.push(te,c)),c=I;else te==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,R=R?R.__html:void 0,I!=null&&R!==I&&(g=g||[]).push(te,I)):te==="children"?typeof I!="string"&&typeof I!="number"||(g=g||[]).push(te,""+I):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(t.hasOwnProperty(te)?(I!=null&&te==="onScroll"&&rn("scroll",e),g||R===I||(g=[])):(g=g||[]).push(te,I))}c&&(g=g||[]).push("style",c);var te=g;(s.updateQueue=te)&&(s.flags|=4)}},Sm=function(e,s,c,f){c!==f&&(s.flags|=4)};function qi(e,s){if(!on)switch(e.tailMode){case"hidden":s=e.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?e.tail=null:c.sibling=null;break;case"collapsed":c=e.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function Hn(e){var s=e.alternate!==null&&e.alternate.child===e.child,c=0,f=0;if(s)for(var m=e.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=f,e.childLanes=c,s}function Oy(e,s,c){var f=s.pendingProps;switch(ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(s),null;case 1:return rr(s.type)&&Jo(),Hn(s),null;case 3:return f=s.stateNode,ni(),an(nr),an(Yn),bu(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(e===null||e.child===null)&&(nl(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Fr!==null&&(qu(Fr),Fr=null))),zu(e,s),Hn(s),null;case 5:xu(s);var m=gs(Hi.current);if(c=s.type,e!==null&&s.stateNode!=null)Nm(e,s,c,f,m),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(i(166));return Hn(s),null}if(e=gs(Zr.current),nl(s)){f=s.stateNode,c=s.type;var g=s.memoizedProps;switch(f[Xr]=s,f[Ui]=g,e=(s.mode&1)!==0,c){case"dialog":rn("cancel",f),rn("close",f);break;case"iframe":case"object":case"embed":rn("load",f);break;case"video":case"audio":for(m=0;m<Li.length;m++)rn(Li[m],f);break;case"source":rn("error",f);break;case"img":case"image":case"link":rn("error",f),rn("load",f);break;case"details":rn("toggle",f);break;case"input":rt(f,g),rn("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!g.multiple},rn("invalid",f);break;case"textarea":Bt(f,g),rn("invalid",f)}$t(c,g),m=null;for(var w in g)if(g.hasOwnProperty(w)){var R=g[w];w==="children"?typeof R=="string"?f.textContent!==R&&(g.suppressHydrationWarning!==!0&&Go(f.textContent,R,e),m=["children",R]):typeof R=="number"&&f.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&Go(f.textContent,R,e),m=["children",""+R]):t.hasOwnProperty(w)&&R!=null&&w==="onScroll"&&rn("scroll",f)}switch(c){case"input":Oe(f),ht(f,g,!0);break;case"textarea":Oe(f),en(f);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(f.onclick=Qo)}f=m,s.updateQueue=f,f!==null&&(s.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tn(c)),e==="http://www.w3.org/1999/xhtml"?c==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof f.is=="string"?e=w.createElement(c,{is:f.is}):(e=w.createElement(c),c==="select"&&(w=e,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):e=w.createElementNS(e,c),e[Xr]=s,e[Ui]=f,wm(e,s,!1,!1),s.stateNode=e;e:{switch(w=Yt(c,f),c){case"dialog":rn("cancel",e),rn("close",e),m=f;break;case"iframe":case"object":case"embed":rn("load",e),m=f;break;case"video":case"audio":for(m=0;m<Li.length;m++)rn(Li[m],e);m=f;break;case"source":rn("error",e),m=f;break;case"img":case"image":case"link":rn("error",e),rn("load",e),m=f;break;case"details":rn("toggle",e),m=f;break;case"input":rt(e,f),m=ut(e,f),rn("invalid",e);break;case"option":m=f;break;case"select":e._wrapperState={wasMultiple:!!f.multiple},m=Q({},f,{value:void 0}),rn("invalid",e);break;case"textarea":Bt(e,f),m=Rt(e,f),rn("invalid",e);break;default:m=f}$t(c,m),R=m;for(g in R)if(R.hasOwnProperty(g)){var I=R[g];g==="style"?Ut(e,I):g==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&bt(e,I)):g==="children"?typeof I=="string"?(c!=="textarea"||I!=="")&&mt(e,I):typeof I=="number"&&mt(e,""+I):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(t.hasOwnProperty(g)?I!=null&&g==="onScroll"&&rn("scroll",e):I!=null&&_(e,g,I,w))}switch(c){case"input":Oe(e),ht(e,f,!1);break;case"textarea":Oe(e),en(e);break;case"option":f.value!=null&&e.setAttribute("value",""+oe(f.value));break;case"select":e.multiple=!!f.multiple,g=f.value,g!=null?Fe(e,!!f.multiple,g,!1):f.defaultValue!=null&&Fe(e,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=Qo)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Hn(s),null;case 6:if(e&&s.stateNode!=null)Sm(e,s,e.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(i(166));if(c=gs(Hi.current),gs(Zr.current),nl(s)){if(f=s.stateNode,c=s.memoizedProps,f[Xr]=s,(g=f.nodeValue!==c)&&(e=pr,e!==null))switch(e.tag){case 3:Go(f.nodeValue,c,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Go(f.nodeValue,c,(e.mode&1)!==0)}g&&(s.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Xr]=s,s.stateNode=f}return Hn(s),null;case 13:if(an(cn),f=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(on&&mr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Cp(),Xs(),s.flags|=98560,g=!1;else if(g=nl(s),f!==null&&f.dehydrated!==null){if(e===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Xr]=s}else Xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Hn(s),g=!1}else Fr!==null&&(qu(Fr),Fr=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(f=f!==null,f!==(e!==null&&e.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(e===null||(cn.current&1)!==0?jn===0&&(jn=3):Zu())),s.updateQueue!==null&&(s.flags|=4),Hn(s),null);case 4:return ni(),zu(e,s),e===null&&Fi(s.stateNode.containerInfo),Hn(s),null;case 10:return pu(s.type._context),Hn(s),null;case 17:return rr(s.type)&&Jo(),Hn(s),null;case 19:if(an(cn),g=s.memoizedState,g===null)return Hn(s),null;if(f=(s.flags&128)!==0,w=g.rendering,w===null)if(f)qi(g,!1);else{if(jn!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(w=ll(e),w!==null){for(s.flags|=128,qi(g,!1),f=w.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=c,c=s.child;c!==null;)g=c,e=f,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,e=w.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),c=c.sibling;return Jt(cn,cn.current&1|2),s.child}e=e.sibling}g.tail!==null&&Ht()>ii&&(s.flags|=128,f=!0,qi(g,!1),s.lanes=4194304)}else{if(!f)if(e=ll(w),e!==null){if(s.flags|=128,f=!0,c=e.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),qi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!on)return Hn(s),null}else 2*Ht()-g.renderingStartTime>ii&&c!==1073741824&&(s.flags|=128,f=!0,qi(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(c=g.last,c!==null?c.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ht(),s.sibling=null,c=cn.current,Jt(cn,f?c&1|2:c&1),s):(Hn(s),null);case 22:case 23:return Xu(),f=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(hr&1073741824)!==0&&(Hn(s),s.subtreeFlags&6&&(s.flags|=8192)):Hn(s),null;case 24:return null;case 25:return null}throw Error(i(156,s.tag))}function Ay(e,s){switch(ou(s),s.tag){case 1:return rr(s.type)&&Jo(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return ni(),an(nr),an(Yn),bu(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 5:return xu(s),null;case 13:if(an(cn),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Xs()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return an(cn),null;case 4:return ni(),null;case 10:return pu(s.type._context),null;case 22:case 23:return Xu(),null;case 24:return null;default:return null}}var vl=!1,Kn=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,$e=null;function ai(e,s){var c=e.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){pn(e,s,f)}else c.current=null}function Uu(e,s,c){try{c()}catch(f){pn(e,s,f)}}var km=!1;function Ly(e,s){if(Xc=ct,e=np(),Wc(e)){if("selectionStart"in e)var c={start:e.selectionStart,end:e.selectionEnd};else e:{c=(c=e.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,g=f.focusNode;f=f.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var w=0,R=-1,I=-1,te=0,ge=0,we=e,he=null;t:for(;;){for(var Le;we!==c||m!==0&&we.nodeType!==3||(R=w+m),we!==g||f!==0&&we.nodeType!==3||(I=w+f),we.nodeType===3&&(w+=we.nodeValue.length),(Le=we.firstChild)!==null;)he=we,we=Le;for(;;){if(we===e)break t;if(he===c&&++te===m&&(R=w),he===g&&++ge===f&&(I=w),(Le=we.nextSibling)!==null)break;we=he,he=we.parentNode}we=Le}c=R===-1||I===-1?null:{start:R,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(Zc={focusedElem:e,selectionRange:c},ct=!1,$e=s;$e!==null;)if(s=$e,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,$e=e;else for(;$e!==null;){s=$e;try{var We=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var He=We.memoizedProps,gn=We.memoizedState,G=s.stateNode,U=G.getSnapshotBeforeUpdate(s.elementType===s.type?He:zr(s.type,He),gn);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var X=s.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Se){pn(s,s.return,Se)}if(e=s.sibling,e!==null){e.return=s.return,$e=e;break}$e=s.return}return We=km,km=!1,We}function Ji(e,s,c){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&e)===e){var g=m.destroy;m.destroy=void 0,g!==void 0&&Uu(s,c,g)}m=m.next}while(m!==f)}}function xl(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&e)===e){var f=c.create;c.destroy=f()}c=c.next}while(c!==s)}}function Bu(e){var s=e.ref;if(s!==null){var c=e.stateNode;e.tag,e=c,typeof s=="function"?s(e):s.current=e}}function jm(e){var s=e.alternate;s!==null&&(e.alternate=null,jm(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Xr],delete s[Ui],delete s[ru],delete s[yy],delete s[by])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cm(e){return e.tag===5||e.tag===3||e.tag===4}function Em(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Cm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $u(e,s,c){var f=e.tag;if(f===5||f===6)e=e.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(e,s):c.insertBefore(e,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(e,c)):(s=c,s.appendChild(e)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Qo));else if(f!==4&&(e=e.child,e!==null))for($u(e,s,c),e=e.sibling;e!==null;)$u(e,s,c),e=e.sibling}function Yu(e,s,c){var f=e.tag;if(f===5||f===6)e=e.stateNode,s?c.insertBefore(e,s):c.appendChild(e);else if(f!==4&&(e=e.child,e!==null))for(Yu(e,s,c),e=e.sibling;e!==null;)Yu(e,s,c),e=e.sibling}var Fn=null,Ur=!1;function Ba(e,s,c){for(c=c.child;c!==null;)Tm(e,s,c),c=c.sibling}function Tm(e,s,c){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Ma,c)}catch{}switch(c.tag){case 5:Kn||ai(c,s);case 6:var f=Fn,m=Ur;Fn=null,Ba(e,s,c),Fn=f,Ur=m,Fn!==null&&(Ur?(e=Fn,c=c.stateNode,e.nodeType===8?e.parentNode.removeChild(c):e.removeChild(c)):Fn.removeChild(c.stateNode));break;case 18:Fn!==null&&(Ur?(e=Fn,c=c.stateNode,e.nodeType===8?nu(e.parentNode,c):e.nodeType===1&&nu(e,c),ce(e)):nu(Fn,c.stateNode));break;case 4:f=Fn,m=Ur,Fn=c.stateNode.containerInfo,Ur=!0,Ba(e,s,c),Fn=f,Ur=m;break;case 0:case 11:case 14:case 15:if(!Kn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var g=m,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Uu(c,s,w),m=m.next}while(m!==f)}Ba(e,s,c);break;case 1:if(!Kn&&(ai(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(R){pn(c,s,R)}Ba(e,s,c);break;case 21:Ba(e,s,c);break;case 22:c.mode&1?(Kn=(f=Kn)||c.memoizedState!==null,Ba(e,s,c),Kn=f):Ba(e,s,c);break;default:Ba(e,s,c)}}function Dm(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var c=e.stateNode;c===null&&(c=e.stateNode=new Iy),s.forEach(function(f){var m=Ky.bind(null,e,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Br(e,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var g=e,w=s,R=w;e:for(;R!==null;){switch(R.tag){case 5:Fn=R.stateNode,Ur=!1;break e;case 3:Fn=R.stateNode.containerInfo,Ur=!0;break e;case 4:Fn=R.stateNode.containerInfo,Ur=!0;break e}R=R.return}if(Fn===null)throw Error(i(160));Tm(g,w,m),Fn=null,Ur=!1;var I=m.alternate;I!==null&&(I.return=null),m.return=null}catch(te){pn(m,s,te)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Mm(s,e),s=s.sibling}function Mm(e,s){var c=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Br(s,e),ta(e),f&4){try{Ji(3,e,e.return),xl(3,e)}catch(He){pn(e,e.return,He)}try{Ji(5,e,e.return)}catch(He){pn(e,e.return,He)}}break;case 1:Br(s,e),ta(e),f&512&&c!==null&&ai(c,c.return);break;case 5:if(Br(s,e),ta(e),f&512&&c!==null&&ai(c,c.return),e.flags&32){var m=e.stateNode;try{mt(m,"")}catch(He){pn(e,e.return,He)}}if(f&4&&(m=e.stateNode,m!=null)){var g=e.memoizedProps,w=c!==null?c.memoizedProps:g,R=e.type,I=e.updateQueue;if(e.updateQueue=null,I!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&_t(m,g),Yt(R,w);var te=Yt(R,g);for(w=0;w<I.length;w+=2){var ge=I[w],we=I[w+1];ge==="style"?Ut(m,we):ge==="dangerouslySetInnerHTML"?bt(m,we):ge==="children"?mt(m,we):_(m,ge,we,te)}switch(R){case"input":Lt(m,g);break;case"textarea":Zt(m,g);break;case"select":var he=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var Le=g.value;Le!=null?Fe(m,!!g.multiple,Le,!1):he!==!!g.multiple&&(g.defaultValue!=null?Fe(m,!!g.multiple,g.defaultValue,!0):Fe(m,!!g.multiple,g.multiple?[]:"",!1))}m[Ui]=g}catch(He){pn(e,e.return,He)}}break;case 6:if(Br(s,e),ta(e),f&4){if(e.stateNode===null)throw Error(i(162));m=e.stateNode,g=e.memoizedProps;try{m.nodeValue=g}catch(He){pn(e,e.return,He)}}break;case 3:if(Br(s,e),ta(e),f&4&&c!==null&&c.memoizedState.isDehydrated)try{ce(s.containerInfo)}catch(He){pn(e,e.return,He)}break;case 4:Br(s,e),ta(e);break;case 13:Br(s,e),ta(e),m=e.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(Ku=Ht())),f&4&&Dm(e);break;case 22:if(ge=c!==null&&c.memoizedState!==null,e.mode&1?(Kn=(te=Kn)||ge,Br(s,e),Kn=te):Br(s,e),ta(e),f&8192){if(te=e.memoizedState!==null,(e.stateNode.isHidden=te)&&!ge&&(e.mode&1)!==0)for($e=e,ge=e.child;ge!==null;){for(we=$e=ge;$e!==null;){switch(he=$e,Le=he.child,he.tag){case 0:case 11:case 14:case 15:Ji(4,he,he.return);break;case 1:ai(he,he.return);var We=he.stateNode;if(typeof We.componentWillUnmount=="function"){f=he,c=he.return;try{s=f,We.props=s.memoizedProps,We.state=s.memoizedState,We.componentWillUnmount()}catch(He){pn(f,c,He)}}break;case 5:ai(he,he.return);break;case 22:if(he.memoizedState!==null){_m(we);continue}}Le!==null?(Le.return=he,$e=Le):_m(we)}ge=ge.sibling}e:for(ge=null,we=e;;){if(we.tag===5){if(ge===null){ge=we;try{m=we.stateNode,te?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=we.stateNode,I=we.memoizedProps.style,w=I!=null&&I.hasOwnProperty("display")?I.display:null,R.style.display=tt("display",w))}catch(He){pn(e,e.return,He)}}}else if(we.tag===6){if(ge===null)try{we.stateNode.nodeValue=te?"":we.memoizedProps}catch(He){pn(e,e.return,He)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===e)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===e)break e;for(;we.sibling===null;){if(we.return===null||we.return===e)break e;ge===we&&(ge=null),we=we.return}ge===we&&(ge=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:Br(s,e),ta(e),f&4&&Dm(e);break;case 21:break;default:Br(s,e),ta(e)}}function ta(e){var s=e.flags;if(s&2){try{e:{for(var c=e.return;c!==null;){if(Cm(c)){var f=c;break e}c=c.return}throw Error(i(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(mt(m,""),f.flags&=-33);var g=Em(e);Yu(e,g,m);break;case 3:case 4:var w=f.stateNode.containerInfo,R=Em(e);$u(e,R,w);break;default:throw Error(i(161))}}catch(I){pn(e,e.return,I)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Fy(e,s,c){$e=e,Rm(e)}function Rm(e,s,c){for(var f=(e.mode&1)!==0;$e!==null;){var m=$e,g=m.child;if(m.tag===22&&f){var w=m.memoizedState!==null||vl;if(!w){var R=m.alternate,I=R!==null&&R.memoizedState!==null||Kn;R=vl;var te=Kn;if(vl=w,(Kn=I)&&!te)for($e=m;$e!==null;)w=$e,I=w.child,w.tag===22&&w.memoizedState!==null?Om(m):I!==null?(I.return=w,$e=I):Om(m);for(;g!==null;)$e=g,Rm(g),g=g.sibling;$e=m,vl=R,Kn=te}Pm(e)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,$e=g):Pm(e)}}function Pm(e){for(;$e!==null;){var s=$e;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Kn||xl(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Kn)if(c===null)f.componentDidMount();else{var m=s.elementType===s.type?c.memoizedProps:zr(s.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&_p(s,g,f);break;case 3:var w=s.updateQueue;if(w!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}_p(s,w,c)}break;case 5:var R=s.stateNode;if(c===null&&s.flags&4){c=R;var I=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&c.focus();break;case"img":I.src&&(c.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var te=s.alternate;if(te!==null){var ge=te.memoizedState;if(ge!==null){var we=ge.dehydrated;we!==null&&ce(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Kn||s.flags&512&&Bu(s)}catch(he){pn(s,s.return,he)}}if(s===e){$e=null;break}if(c=s.sibling,c!==null){c.return=s.return,$e=c;break}$e=s.return}}function _m(e){for(;$e!==null;){var s=$e;if(s===e){$e=null;break}var c=s.sibling;if(c!==null){c.return=s.return,$e=c;break}$e=s.return}}function Om(e){for(;$e!==null;){var s=$e;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{xl(4,s)}catch(I){pn(s,c,I)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var m=s.return;try{f.componentDidMount()}catch(I){pn(s,m,I)}}var g=s.return;try{Bu(s)}catch(I){pn(s,g,I)}break;case 5:var w=s.return;try{Bu(s)}catch(I){pn(s,w,I)}}}catch(I){pn(s,s.return,I)}if(s===e){$e=null;break}var R=s.sibling;if(R!==null){R.return=s.return,$e=R;break}$e=s.return}}var zy=Math.ceil,yl=$.ReactCurrentDispatcher,Wu=$.ReactCurrentOwner,kr=$.ReactCurrentBatchConfig,Tt=0,Tn=null,yn=null,zn=0,hr=0,si=Ia(0),jn=0,Xi=null,xs=0,bl=0,Hu=0,Zi=null,sr=null,Ku=0,ii=1/0,ja=null,wl=!1,Vu=null,$a=null,Nl=!1,Ya=null,Sl=0,eo=0,Gu=null,kl=-1,jl=0;function Jn(){return(Tt&6)!==0?Ht():kl!==-1?kl:kl=Ht()}function Wa(e){return(e.mode&1)===0?1:(Tt&2)!==0&&zn!==0?zn&-zn:Ny.transition!==null?(jl===0&&(jl=Ra()),jl):(e=M,e!==0||(e=window.event,e=e===void 0?16:If(e.type)),e)}function $r(e,s,c,f){if(50<eo)throw eo=0,Gu=null,Error(i(185));qr(e,c,f),((Tt&2)===0||e!==Tn)&&(e===Tn&&((Tt&2)===0&&(bl|=c),jn===4&&Ha(e,zn)),ir(e,f),c===1&&Tt===0&&(s.mode&1)===0&&(ii=Ht()+500,Zo&&Fa()))}function ir(e,s){var c=e.callbackNode;os(e,s);var f=Ir(e,e===Tn?zn:0);if(f===0)c!==null&&ma(c),e.callbackNode=null,e.callbackPriority=0;else if(s=f&-f,e.callbackPriority!==s){if(c!=null&&ma(c),s===1)e.tag===0?wy(Im.bind(null,e)):wp(Im.bind(null,e)),vy(function(){(Tt&6)===0&&Fa()}),c=null;else{switch(z(f)){case 1:c=Gr;break;case 4:c=Qr;break;case 16:c=Or;break;case 536870912:c=ha;break;default:c=Or}c=Wm(c,Am.bind(null,e))}e.callbackPriority=s,e.callbackNode=c}}function Am(e,s){if(kl=-1,jl=0,(Tt&6)!==0)throw Error(i(327));var c=e.callbackNode;if(oi()&&e.callbackNode!==c)return null;var f=Ir(e,e===Tn?zn:0);if(f===0)return null;if((f&30)!==0||(f&e.expiredLanes)!==0||s)s=Cl(e,f);else{s=f;var m=Tt;Tt|=2;var g=Fm();(Tn!==e||zn!==s)&&(ja=null,ii=Ht()+500,bs(e,s));do try{$y();break}catch(R){Lm(e,R)}while(!0);fu(),yl.current=g,Tt=m,yn!==null?s=0:(Tn=null,zn=0,s=jn)}if(s!==0){if(s===2&&(m=dr(e),m!==0&&(f=m,s=Qu(e,m))),s===1)throw c=Xi,bs(e,0),Ha(e,f),ir(e,Ht()),c;if(s===6)Ha(e,f);else{if(m=e.current.alternate,(f&30)===0&&!Uy(m)&&(s=Cl(e,f),s===2&&(g=dr(e),g!==0&&(f=g,s=Qu(e,g))),s===1))throw c=Xi,bs(e,0),Ha(e,f),ir(e,Ht()),c;switch(e.finishedWork=m,e.finishedLanes=f,s){case 0:case 1:throw Error(i(345));case 2:ws(e,sr,ja);break;case 3:if(Ha(e,f),(f&130023424)===f&&(s=Ku+500-Ht(),10<s)){if(Ir(e,0)!==0)break;if(m=e.suspendedLanes,(m&f)!==f){Jn(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=tu(ws.bind(null,e,sr,ja),s);break}ws(e,sr,ja);break;case 4:if(Ha(e,f),(f&4194240)===f)break;for(s=e.eventTimes,m=-1;0<f;){var w=31-Gn(f);g=1<<w,w=s[w],w>m&&(m=w),f&=~g}if(f=m,f=Ht()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*zy(f/1960))-f,10<f){e.timeoutHandle=tu(ws.bind(null,e,sr,ja),f);break}ws(e,sr,ja);break;case 5:ws(e,sr,ja);break;default:throw Error(i(329))}}}return ir(e,Ht()),e.callbackNode===c?Am.bind(null,e):null}function Qu(e,s){var c=Zi;return e.current.memoizedState.isDehydrated&&(bs(e,s).flags|=256),e=Cl(e,s),e!==2&&(s=sr,sr=c,s!==null&&qu(s)),e}function qu(e){sr===null?sr=e:sr.push.apply(sr,e)}function Uy(e){for(var s=e;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],g=m.getSnapshot;m=m.value;try{if(!Lr(g(),m))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ha(e,s){for(s&=~Hu,s&=~bl,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var c=31-Gn(s),f=1<<c;e[c]=-1,s&=~f}}function Im(e){if((Tt&6)!==0)throw Error(i(327));oi();var s=Ir(e,0);if((s&1)===0)return ir(e,Ht()),null;var c=Cl(e,s);if(e.tag!==0&&c===2){var f=dr(e);f!==0&&(s=f,c=Qu(e,f))}if(c===1)throw c=Xi,bs(e,0),Ha(e,s),ir(e,Ht()),c;if(c===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,ws(e,sr,ja),ir(e,Ht()),null}function Ju(e,s){var c=Tt;Tt|=1;try{return e(s)}finally{Tt=c,Tt===0&&(ii=Ht()+500,Zo&&Fa())}}function ys(e){Ya!==null&&Ya.tag===0&&(Tt&6)===0&&oi();var s=Tt;Tt|=1;var c=kr.transition,f=M;try{if(kr.transition=null,M=1,e)return e()}finally{M=f,kr.transition=c,Tt=s,(Tt&6)===0&&Fa()}}function Xu(){hr=si.current,an(si)}function bs(e,s){e.finishedWork=null,e.finishedLanes=0;var c=e.timeoutHandle;if(c!==-1&&(e.timeoutHandle=-1,gy(c)),yn!==null)for(c=yn.return;c!==null;){var f=c;switch(ou(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Jo();break;case 3:ni(),an(nr),an(Yn),bu();break;case 5:xu(f);break;case 4:ni();break;case 13:an(cn);break;case 19:an(cn);break;case 10:pu(f.type._context);break;case 22:case 23:Xu()}c=c.return}if(Tn=e,yn=e=Ka(e.current,null),zn=hr=s,jn=0,Xi=null,Hu=bl=xs=0,sr=Zi=null,hs!==null){for(s=0;s<hs.length;s++)if(c=hs[s],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,g=c.pending;if(g!==null){var w=g.next;g.next=m,f.next=w}c.pending=f}hs=null}return e}function Lm(e,s){do{var c=yn;try{if(fu(),cl.current=pl,ul){for(var f=un.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}ul=!1}if(vs=0,En=kn=un=null,Ki=!1,Vi=0,Wu.current=null,c===null||c.return===null){jn=1,Xi=s,yn=null;break}e:{var g=e,w=c.return,R=c,I=s;if(s=zn,R.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var te=I,ge=R,we=ge.tag;if((ge.mode&1)===0&&(we===0||we===11||we===15)){var he=ge.alternate;he?(ge.updateQueue=he.updateQueue,ge.memoizedState=he.memoizedState,ge.lanes=he.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Le=lm(w);if(Le!==null){Le.flags&=-257,cm(Le,w,R,g,s),Le.mode&1&&om(g,te,s),s=Le,I=te;var We=s.updateQueue;if(We===null){var He=new Set;He.add(I),s.updateQueue=He}else We.add(I);break e}else{if((s&1)===0){om(g,te,s),Zu();break e}I=Error(i(426))}}else if(on&&R.mode&1){var gn=lm(w);if(gn!==null){(gn.flags&65536)===0&&(gn.flags|=256),cm(gn,w,R,g,s),uu(ri(I,R));break e}}g=I=ri(I,R),jn!==4&&(jn=2),Zi===null?Zi=[g]:Zi.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var G=sm(g,I,s);Pp(g,G);break e;case 1:R=I;var U=g.type,X=g.stateNode;if((g.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&($a===null||!$a.has(X)))){g.flags|=65536,s&=-s,g.lanes|=s;var Se=im(g,R,s);Pp(g,Se);break e}}g=g.return}while(g!==null)}Um(c)}catch(Ge){s=Ge,yn===c&&c!==null&&(yn=c=c.return);continue}break}while(!0)}function Fm(){var e=yl.current;return yl.current=pl,e===null?pl:e}function Zu(){(jn===0||jn===3||jn===2)&&(jn=4),Tn===null||(xs&268435455)===0&&(bl&268435455)===0||Ha(Tn,zn)}function Cl(e,s){var c=Tt;Tt|=2;var f=Fm();(Tn!==e||zn!==s)&&(ja=null,bs(e,s));do try{By();break}catch(m){Lm(e,m)}while(!0);if(fu(),Tt=c,yl.current=f,yn!==null)throw Error(i(261));return Tn=null,zn=0,jn}function By(){for(;yn!==null;)zm(yn)}function $y(){for(;yn!==null&&!Ln();)zm(yn)}function zm(e){var s=Ym(e.alternate,e,hr);e.memoizedProps=e.pendingProps,s===null?Um(e):yn=s,Wu.current=null}function Um(e){var s=e;do{var c=s.alternate;if(e=s.return,(s.flags&32768)===0){if(c=Oy(c,s,hr),c!==null){yn=c;return}}else{if(c=Ay(c,s),c!==null){c.flags&=32767,yn=c;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jn=6,yn=null;return}}if(s=s.sibling,s!==null){yn=s;return}yn=s=e}while(s!==null);jn===0&&(jn=5)}function ws(e,s,c){var f=M,m=kr.transition;try{kr.transition=null,M=1,Yy(e,s,c,f)}finally{kr.transition=m,M=f}return null}function Yy(e,s,c,f){do oi();while(Ya!==null);if((Tt&6)!==0)throw Error(i(327));c=e.finishedWork;var m=e.finishedLanes;if(c===null)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var g=c.lanes|c.childLanes;if(cs(e,g),e===Tn&&(yn=Tn=null,zn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Nl||(Nl=!0,Wm(Or,function(){return oi(),null})),g=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||g){g=kr.transition,kr.transition=null;var w=M;M=1;var R=Tt;Tt|=4,Wu.current=null,Ly(e,c),Mm(c,e),cy(Zc),ct=!!Xc,Zc=Xc=null,e.current=c,Fy(c),Ls(),Tt=R,M=w,kr.transition=g}else e.current=c;if(Nl&&(Nl=!1,Ya=e,Sl=m),g=e.pendingLanes,g===0&&($a=null),vr(c.stateNode),ir(e,Ht()),s!==null)for(f=e.onRecoverableError,c=0;c<s.length;c++)m=s[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(wl)throw wl=!1,e=Vu,Vu=null,e;return(Sl&1)!==0&&e.tag!==0&&oi(),g=e.pendingLanes,(g&1)!==0?e===Gu?eo++:(eo=0,Gu=e):eo=0,Fa(),null}function oi(){if(Ya!==null){var e=z(Sl),s=kr.transition,c=M;try{if(kr.transition=null,M=16>e?16:e,Ya===null)var f=!1;else{if(e=Ya,Ya=null,Sl=0,(Tt&6)!==0)throw Error(i(331));var m=Tt;for(Tt|=4,$e=e.current;$e!==null;){var g=$e,w=g.child;if(($e.flags&16)!==0){var R=g.deletions;if(R!==null){for(var I=0;I<R.length;I++){var te=R[I];for($e=te;$e!==null;){var ge=$e;switch(ge.tag){case 0:case 11:case 15:Ji(8,ge,g)}var we=ge.child;if(we!==null)we.return=ge,$e=we;else for(;$e!==null;){ge=$e;var he=ge.sibling,Le=ge.return;if(jm(ge),ge===te){$e=null;break}if(he!==null){he.return=Le,$e=he;break}$e=Le}}}var We=g.alternate;if(We!==null){var He=We.child;if(He!==null){We.child=null;do{var gn=He.sibling;He.sibling=null,He=gn}while(He!==null)}}$e=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,$e=w;else e:for(;$e!==null;){if(g=$e,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ji(9,g,g.return)}var G=g.sibling;if(G!==null){G.return=g.return,$e=G;break e}$e=g.return}}var U=e.current;for($e=U;$e!==null;){w=$e;var X=w.child;if((w.subtreeFlags&2064)!==0&&X!==null)X.return=w,$e=X;else e:for(w=U;$e!==null;){if(R=$e,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:xl(9,R)}}catch(Ge){pn(R,R.return,Ge)}if(R===w){$e=null;break e}var Se=R.sibling;if(Se!==null){Se.return=R.return,$e=Se;break e}$e=R.return}}if(Tt=m,Fa(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Ma,e)}catch{}f=!0}return f}finally{M=c,kr.transition=s}}return!1}function Bm(e,s,c){s=ri(c,s),s=sm(e,s,1),e=Ua(e,s,1),s=Jn(),e!==null&&(qr(e,1,s),ir(e,s))}function pn(e,s,c){if(e.tag===3)Bm(e,e,c);else for(;s!==null;){if(s.tag===3){Bm(s,e,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&($a===null||!$a.has(f))){e=ri(c,e),e=im(s,e,1),s=Ua(s,e,1),e=Jn(),s!==null&&(qr(s,1,e),ir(s,e));break}}s=s.return}}function Wy(e,s,c){var f=e.pingCache;f!==null&&f.delete(s),s=Jn(),e.pingedLanes|=e.suspendedLanes&c,Tn===e&&(zn&c)===c&&(jn===4||jn===3&&(zn&130023424)===zn&&500>Ht()-Ku?bs(e,0):Hu|=c),ir(e,s)}function $m(e,s){s===0&&((e.mode&1)===0?s=1:(s=xr,xr<<=1,(xr&130023424)===0&&(xr=4194304)));var c=Jn();e=Na(e,s),e!==null&&(qr(e,s,c),ir(e,c))}function Hy(e){var s=e.memoizedState,c=0;s!==null&&(c=s.retryLane),$m(e,c)}function Ky(e,s){var c=0;switch(e.tag){case 13:var f=e.stateNode,m=e.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=e.stateNode;break;default:throw Error(i(314))}f!==null&&f.delete(s),$m(e,c)}var Ym;Ym=function(e,s,c){if(e!==null)if(e.memoizedProps!==s.pendingProps||nr.current)ar=!0;else{if((e.lanes&c)===0&&(s.flags&128)===0)return ar=!1,_y(e,s,c);ar=(e.flags&131072)!==0}else ar=!1,on&&(s.flags&1048576)!==0&&Np(s,tl,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;gl(e,s),e=s.pendingProps;var m=Qs(s,Yn.current);ti(s,c),m=Su(null,s,f,e,m,c);var g=ku();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,rr(f)?(g=!0,Xo(s)):g=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,gu(s),m.updater=ml,s.stateNode=m,m._reactInternals=s,Mu(s,f,e,c),s=Ou(null,s,f,!0,g,c)):(s.tag=0,on&&g&&iu(s),qn(null,s,m,c),s=s.child),s;case 16:f=s.elementType;e:{switch(gl(e,s),e=s.pendingProps,m=f._init,f=m(f._payload),s.type=f,m=s.tag=Gy(f),e=zr(f,e),m){case 0:s=_u(null,s,f,e,c);break e;case 1:s=hm(null,s,f,e,c);break e;case 11:s=um(null,s,f,e,c);break e;case 14:s=dm(null,s,f,zr(f.type,e),c);break e}throw Error(i(306,f,""))}return s;case 0:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:zr(f,m),_u(e,s,f,m,c);case 1:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:zr(f,m),hm(e,s,f,m,c);case 3:e:{if(gm(s),e===null)throw Error(i(387));f=s.pendingProps,g=s.memoizedState,m=g.element,Rp(e,s),ol(s,f,null,c);var w=s.memoizedState;if(f=w.element,g.isDehydrated)if(g={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){m=ri(Error(i(423)),s),s=vm(e,s,f,c,m);break e}else if(f!==m){m=ri(Error(i(424)),s),s=vm(e,s,f,c,m);break e}else for(mr=Aa(s.stateNode.containerInfo.firstChild),pr=s,on=!0,Fr=null,c=Dp(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Xs(),f===m){s=ka(e,s,c);break e}qn(e,s,f,c)}s=s.child}return s;case 5:return Op(s),e===null&&cu(s),f=s.type,m=s.pendingProps,g=e!==null?e.memoizedProps:null,w=m.children,eu(f,m)?w=null:g!==null&&eu(f,g)&&(s.flags|=32),mm(e,s),qn(e,s,w,c),s.child;case 6:return e===null&&cu(s),null;case 13:return xm(e,s,c);case 4:return vu(s,s.stateNode.containerInfo),f=s.pendingProps,e===null?s.child=Zs(s,null,f,c):qn(e,s,f,c),s.child;case 11:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:zr(f,m),um(e,s,f,m,c);case 7:return qn(e,s,s.pendingProps,c),s.child;case 8:return qn(e,s,s.pendingProps.children,c),s.child;case 12:return qn(e,s,s.pendingProps.children,c),s.child;case 10:e:{if(f=s.type._context,m=s.pendingProps,g=s.memoizedProps,w=m.value,Jt(al,f._currentValue),f._currentValue=w,g!==null)if(Lr(g.value,w)){if(g.children===m.children&&!nr.current){s=ka(e,s,c);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var R=g.dependencies;if(R!==null){w=g.child;for(var I=R.firstContext;I!==null;){if(I.context===f){if(g.tag===1){I=Sa(-1,c&-c),I.tag=2;var te=g.updateQueue;if(te!==null){te=te.shared;var ge=te.pending;ge===null?I.next=I:(I.next=ge.next,ge.next=I),te.pending=I}}g.lanes|=c,I=g.alternate,I!==null&&(I.lanes|=c),mu(g.return,c,s),R.lanes|=c;break}I=I.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(i(341));w.lanes|=c,R=w.alternate,R!==null&&(R.lanes|=c),mu(w,c,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}qn(e,s,m.children,c),s=s.child}return s;case 9:return m=s.type,f=s.pendingProps.children,ti(s,c),m=Nr(m),f=f(m),s.flags|=1,qn(e,s,f,c),s.child;case 14:return f=s.type,m=zr(f,s.pendingProps),m=zr(f.type,m),dm(e,s,f,m,c);case 15:return fm(e,s,s.type,s.pendingProps,c);case 17:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:zr(f,m),gl(e,s),s.tag=1,rr(f)?(e=!0,Xo(s)):e=!1,ti(s,c),rm(s,f,m),Mu(s,f,m,c),Ou(null,s,f,!0,e,c);case 19:return bm(e,s,c);case 22:return pm(e,s,c)}throw Error(i(156,s.tag))};function Wm(e,s){return ur(e,s)}function Vy(e,s,c,f){this.tag=e,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(e,s,c,f){return new Vy(e,s,c,f)}function ed(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gy(e){if(typeof e=="function")return ed(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ce)return 11;if(e===Te)return 14}return 2}function Ka(e,s){var c=e.alternate;return c===null?(c=jr(e.tag,s,e.key,e.mode),c.elementType=e.elementType,c.type=e.type,c.stateNode=e.stateNode,c.alternate=e,e.alternate=c):(c.pendingProps=s,c.type=e.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=e.flags&14680064,c.childLanes=e.childLanes,c.lanes=e.lanes,c.child=e.child,c.memoizedProps=e.memoizedProps,c.memoizedState=e.memoizedState,c.updateQueue=e.updateQueue,s=e.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=e.sibling,c.index=e.index,c.ref=e.ref,c}function El(e,s,c,f,m,g){var w=2;if(f=e,typeof e=="function")ed(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case ee:return Ns(c.children,m,g,s);case ae:w=8,m|=8;break;case se:return e=jr(12,c,s,m|2),e.elementType=se,e.lanes=g,e;case fe:return e=jr(13,c,s,m),e.elementType=fe,e.lanes=g,e;case Me:return e=jr(19,c,s,m),e.elementType=Me,e.lanes=g,e;case xe:return Tl(c,m,g,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:w=10;break e;case re:w=9;break e;case Ce:w=11;break e;case Te:w=14;break e;case Ne:w=16,f=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return s=jr(w,c,s,m),s.elementType=e,s.type=f,s.lanes=g,s}function Ns(e,s,c,f){return e=jr(7,e,f,s),e.lanes=c,e}function Tl(e,s,c,f){return e=jr(22,e,f,s),e.elementType=xe,e.lanes=c,e.stateNode={isHidden:!1},e}function td(e,s,c){return e=jr(6,e,null,s),e.lanes=c,e}function nd(e,s,c){return s=jr(4,e.children!==null?e.children:[],e.key,s),s.lanes=c,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function Qy(e,s,c,f,m){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ls(0),this.expirationTimes=ls(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function rd(e,s,c,f,m,g,w,R,I){return e=new Qy(e,s,c,R,I),s===1?(s=1,g===!0&&(s|=8)):s=0,g=jr(3,null,null,s),e.current=g,g.stateNode=e,g.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},gu(g),e}function qy(e,s,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:f==null?null:""+f,children:e,containerInfo:s,implementation:c}}function Hm(e){if(!e)return La;e=e._reactInternals;e:{if(Wt(e)!==e||e.tag!==1)throw Error(i(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(i(171))}if(e.tag===1){var c=e.type;if(rr(c))return yp(e,c,s)}return s}function Km(e,s,c,f,m,g,w,R,I){return e=rd(c,f,!0,e,m,g,w,R,I),e.context=Hm(null),c=e.current,f=Jn(),m=Wa(c),g=Sa(f,m),g.callback=s??null,Ua(c,g,m),e.current.lanes=m,qr(e,m,f),ir(e,f),e}function Dl(e,s,c,f){var m=s.current,g=Jn(),w=Wa(m);return c=Hm(c),s.context===null?s.context=c:s.pendingContext=c,s=Sa(g,w),s.payload={element:e},f=f===void 0?null:f,f!==null&&(s.callback=f),e=Ua(m,s,w),e!==null&&($r(e,m,w,g),il(e,m,w)),w}function Ml(e){return e=e.current,e.child?(e.child.tag===5,e.child.stateNode):null}function Vm(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var c=e.retryLane;e.retryLane=c!==0&&c<s?c:s}}function ad(e,s){Vm(e,s),(e=e.alternate)&&Vm(e,s)}function Jy(){return null}var Gm=typeof reportError=="function"?reportError:function(e){console.error(e)};function sd(e){this._internalRoot=e}Rl.prototype.render=sd.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(i(409));Dl(e,s,null,null)},Rl.prototype.unmount=sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;ys(function(){Dl(null,e,null,null)}),s[xa]=null}};function Rl(e){this._internalRoot=e}Rl.prototype.unstable_scheduleHydration=function(e){if(e){var s=nt();e={blockedOn:null,target:e,priority:s};for(var c=0;c<hn.length&&s!==0&&s<hn[c].priority;c++);hn.splice(c,0,e),c===0&&Fo(e)}};function id(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qm(){}function Xy(e,s,c,f,m){if(m){if(typeof f=="function"){var g=f;f=function(){var te=Ml(w);g.call(te)}}var w=Km(s,f,e,0,null,!1,!1,"",Qm);return e._reactRootContainer=w,e[xa]=w.current,Fi(e.nodeType===8?e.parentNode:e),ys(),w}for(;m=e.lastChild;)e.removeChild(m);if(typeof f=="function"){var R=f;f=function(){var te=Ml(I);R.call(te)}}var I=rd(e,0,!1,null,null,!1,!1,"",Qm);return e._reactRootContainer=I,e[xa]=I.current,Fi(e.nodeType===8?e.parentNode:e),ys(function(){Dl(s,I,c,f)}),I}function _l(e,s,c,f,m){var g=c._reactRootContainer;if(g){var w=g;if(typeof m=="function"){var R=m;m=function(){var I=Ml(w);R.call(I)}}Dl(s,w,e,m)}else w=Xy(c,s,e,m,f);return Ml(w)}de=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var c=Ar(s.pendingLanes);c!==0&&(us(s,c|1),ir(s,Ht()),(Tt&6)===0&&(ii=Ht()+500,Fa()))}break;case 13:ys(function(){var f=Na(e,1);if(f!==null){var m=Jn();$r(f,e,1,m)}}),ad(e,1)}},je=function(e){if(e.tag===13){var s=Na(e,134217728);if(s!==null){var c=Jn();$r(s,e,134217728,c)}ad(e,134217728)}},vt=function(e){if(e.tag===13){var s=Wa(e),c=Na(e,s);if(c!==null){var f=Jn();$r(c,e,s,f)}ad(e,s)}},nt=function(){return M},lt=function(e,s){var c=M;try{return M=e,s()}finally{M=c}},Be=function(e,s,c){switch(s){case"input":if(Lt(e,c),s=c.name,c.type==="radio"&&s!=null){for(c=e;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==e&&f.form===e.form){var m=qo(f);if(!m)throw Error(i(90));Je(f),Lt(f,m)}}}break;case"textarea":Zt(e,c);break;case"select":s=c.value,s!=null&&Fe(e,!!c.multiple,s,!1)}},Qe=Ju,wt=ys;var Zy={usingClientEntryPoint:!1,Events:[Bi,Vs,qo,ve,pe,Ju]},to={findFiberByHostInstance:ds,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e0={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=er(e),e===null?null:e.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||Jy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{Ma=Ol.inject(e0),tr=Ol}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy,or.createPortal=function(e,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!id(s))throw Error(i(200));return qy(e,s,null,c)},or.createRoot=function(e,s){if(!id(e))throw Error(i(299));var c=!1,f="",m=Gm;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=rd(e,1,!1,null,null,c,!1,f,m),e[xa]=s.current,Fi(e.nodeType===8?e.parentNode:e),new sd(s)},or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=er(s),e=e===null?null:e.stateNode,e},or.flushSync=function(e){return ys(e)},or.hydrate=function(e,s,c){if(!Pl(s))throw Error(i(200));return _l(null,e,s,!0,c)},or.hydrateRoot=function(e,s,c){if(!id(e))throw Error(i(405));var f=c!=null&&c.hydratedSources||null,m=!1,g="",w=Gm;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),s=Km(s,null,e,1,c??null,m,!1,g,w),e[xa]=s.current,Fi(e),f)for(e=0;e<f.length;e++)c=f[e],m=c._getVersion,m=m(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,m]:s.mutableSourceEagerHydrationData.push(c,m);return new Rl(s)},or.render=function(e,s,c){if(!Pl(s))throw Error(i(200));return _l(null,e,s,!1,c)},or.unmountComponentAtNode=function(e){if(!Pl(e))throw Error(i(40));return e._reactRootContainer?(ys(function(){_l(null,null,e,!1,function(){e._reactRootContainer=null,e[xa]=null})}),!0):!1},or.unstable_batchedUpdates=Ju,or.unstable_renderSubtreeIntoContainer=function(e,s,c,f){if(!Pl(c))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return _l(e,s,c,!1,f)},or.version="18.3.1-next-f1338f8080-20240426",or}var ah;function Bg(){if(ah)return cd.exports;ah=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),cd.exports=c0(),cd.exports}var sh;function u0(){if(sh)return Al;sh=1;var n=Bg();return Al.createRoot=n.createRoot,Al.hydrateRoot=n.hydrateRoot,Al}var d0=u0(),Ta=Bg();const f0=Eo(Ta);function p0(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return x.useMemo(()=>r=>{a.forEach(t=>t(r))},a)}const Nc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ki(n){const a=Object.prototype.toString.call(n);return a==="[object Window]"||a==="[object global]"}function cf(n){return"nodeType"in n}function Zn(n){var a,i;return n?ki(n)?n:cf(n)&&(a=(i=n.ownerDocument)==null?void 0:i.defaultView)!=null?a:window:window}function uf(n){const{Document:a}=Zn(n);return n instanceof a}function To(n){return ki(n)?!1:n instanceof Zn(n).HTMLElement}function $g(n){return n instanceof Zn(n).SVGElement}function ji(n){return n?ki(n)?n.document:cf(n)?uf(n)?n:To(n)||$g(n)?n.ownerDocument:document:document:document}const Hr=Nc?x.useLayoutEffect:x.useEffect;function Sc(n){const a=x.useRef(n);return Hr(()=>{a.current=n}),x.useCallback(function(){for(var i=arguments.length,r=new Array(i),t=0;t<i;t++)r[t]=arguments[t];return a.current==null?void 0:a.current(...r)},[])}function m0(){const n=x.useRef(null),a=x.useCallback((r,t)=>{n.current=setInterval(r,t)},[]),i=x.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[a,i]}function xo(n,a){a===void 0&&(a=[n]);const i=x.useRef(n);return Hr(()=>{i.current!==n&&(i.current=n)},a),i}function Do(n,a){const i=x.useRef();return x.useMemo(()=>{const r=n(i.current);return i.current=r,r},[...a])}function rc(n){const a=Sc(n),i=x.useRef(null),r=x.useCallback(t=>{t!==i.current&&a?.(t,i.current),i.current=t},[]);return[i,r]}function ac(n){const a=x.useRef();return x.useEffect(()=>{a.current=n},[n]),a.current}let fd={};function Mo(n,a){return x.useMemo(()=>{if(a)return a;const i=fd[n]==null?0:fd[n]+1;return fd[n]=i,n+"-"+i},[n,a])}function Yg(n){return function(a){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return r.reduce((l,u)=>{const d=Object.entries(u);for(const[p,h]of d){const v=l[p];v!=null&&(l[p]=v+n*h)}return l},{...a})}}const mi=Yg(1),sc=Yg(-1);function h0(n){return"clientX"in n&&"clientY"in n}function kc(n){if(!n)return!1;const{KeyboardEvent:a}=Zn(n.target);return a&&n instanceof a}function g0(n){if(!n)return!1;const{TouchEvent:a}=Zn(n.target);return a&&n instanceof a}function ic(n){if(g0(n)){if(n.touches&&n.touches.length){const{clientX:a,clientY:i}=n.touches[0];return{x:a,y:i}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:a,clientY:i}=n.changedTouches[0];return{x:a,y:i}}}return h0(n)?{x:n.clientX,y:n.clientY}:null}const ts=Object.freeze({Translate:{toString(n){if(!n)return;const{x:a,y:i}=n;return"translate3d("+(a?Math.round(a):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:a,scaleY:i}=n;return"scaleX("+a+") scaleY("+i+")"}},Transform:{toString(n){if(n)return[ts.Translate.toString(n),ts.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:a,duration:i,easing:r}=n;return a+" "+i+"ms "+r}}}),ih="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function v0(n){return n.matches(ih)?n:n.querySelector(ih)}const x0={display:"none"};function y0(n){let{id:a,value:i}=n;return K.createElement("div",{id:a,style:x0},i)}function b0(n){let{id:a,announcement:i,ariaLiveType:r="assertive"}=n;const t={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return K.createElement("div",{id:a,style:t,role:"status","aria-live":r,"aria-atomic":!0},i)}function w0(){const[n,a]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&a(r)},[]),announcement:n}}const Wg=x.createContext(null);function N0(n){const a=x.useContext(Wg);x.useEffect(()=>{if(!a)throw new Error("useDndMonitor must be used within a children of <DndContext>");return a(n)},[n,a])}function S0(){const[n]=x.useState(()=>new Set),a=x.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[x.useCallback(r=>{let{type:t,event:l}=r;n.forEach(u=>{var d;return(d=u[t])==null?void 0:d.call(u,l)})},[n]),a]}const k0={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},j0={onDragStart(n){let{active:a}=n;return"Picked up draggable item "+a.id+"."},onDragOver(n){let{active:a,over:i}=n;return i?"Draggable item "+a.id+" was moved over droppable area "+i.id+".":"Draggable item "+a.id+" is no longer over a droppable area."},onDragEnd(n){let{active:a,over:i}=n;return i?"Draggable item "+a.id+" was dropped over droppable area "+i.id:"Draggable item "+a.id+" was dropped."},onDragCancel(n){let{active:a}=n;return"Dragging was cancelled. Draggable item "+a.id+" was dropped."}};function C0(n){let{announcements:a=j0,container:i,hiddenTextDescribedById:r,screenReaderInstructions:t=k0}=n;const{announce:l,announcement:u}=w0(),d=Mo("DndLiveRegion"),[p,h]=x.useState(!1);if(x.useEffect(()=>{h(!0)},[]),N0(x.useMemo(()=>({onDragStart(y){let{active:S}=y;l(a.onDragStart({active:S}))},onDragMove(y){let{active:S,over:k}=y;a.onDragMove&&l(a.onDragMove({active:S,over:k}))},onDragOver(y){let{active:S,over:k}=y;l(a.onDragOver({active:S,over:k}))},onDragEnd(y){let{active:S,over:k}=y;l(a.onDragEnd({active:S,over:k}))},onDragCancel(y){let{active:S,over:k}=y;l(a.onDragCancel({active:S,over:k}))}}),[l,a])),!p)return null;const v=K.createElement(K.Fragment,null,K.createElement(y0,{id:r,value:t.draggable}),K.createElement(b0,{id:d,announcement:u}));return i?Ta.createPortal(v,i):v}var Cn;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Cn||(Cn={}));function oc(){}function oh(n,a){return x.useMemo(()=>({sensor:n,options:a??{}}),[n,a])}function E0(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return x.useMemo(()=>[...a].filter(r=>r!=null),[...a])}const Kr=Object.freeze({x:0,y:0});function T0(n,a){return Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2))}function D0(n,a){const i=ic(n);if(!i)return"0 0";const r={x:(i.x-a.left)/a.width*100,y:(i.y-a.top)/a.height*100};return r.x+"% "+r.y+"%"}function M0(n,a){let{data:{value:i}}=n,{data:{value:r}}=a;return i-r}function R0(n,a){let{data:{value:i}}=n,{data:{value:r}}=a;return r-i}function P0(n,a){if(!n||n.length===0)return null;const[i]=n;return i[a]}function lh(n,a,i){return a===void 0&&(a=n.left),i===void 0&&(i=n.top),{x:a+n.width*.5,y:i+n.height*.5}}const _0=n=>{let{collisionRect:a,droppableRects:i,droppableContainers:r}=n;const t=lh(a,a.left,a.top),l=[];for(const u of r){const{id:d}=u,p=i.get(d);if(p){const h=T0(lh(p),t);l.push({id:d,data:{droppableContainer:u,value:h}})}}return l.sort(M0)};function O0(n,a){const i=Math.max(a.top,n.top),r=Math.max(a.left,n.left),t=Math.min(a.left+a.width,n.left+n.width),l=Math.min(a.top+a.height,n.top+n.height),u=t-r,d=l-i;if(r<t&&i<l){const p=a.width*a.height,h=n.width*n.height,v=u*d,y=v/(p+h-v);return Number(y.toFixed(4))}return 0}const A0=n=>{let{collisionRect:a,droppableRects:i,droppableContainers:r}=n;const t=[];for(const l of r){const{id:u}=l,d=i.get(u);if(d){const p=O0(d,a);p>0&&t.push({id:u,data:{droppableContainer:l,value:p}})}}return t.sort(R0)};function I0(n,a,i){return{...n,scaleX:a&&i?a.width/i.width:1,scaleY:a&&i?a.height/i.height:1}}function Hg(n,a){return n&&a?{x:n.left-a.left,y:n.top-a.top}:Kr}function L0(n){return function(i){for(var r=arguments.length,t=new Array(r>1?r-1:0),l=1;l<r;l++)t[l-1]=arguments[l];return t.reduce((u,d)=>({...u,top:u.top+n*d.y,bottom:u.bottom+n*d.y,left:u.left+n*d.x,right:u.right+n*d.x}),{...i})}}const F0=L0(1);function Kg(n){if(n.startsWith("matrix3d(")){const a=n.slice(9,-1).split(/, /);return{x:+a[12],y:+a[13],scaleX:+a[0],scaleY:+a[5]}}else if(n.startsWith("matrix(")){const a=n.slice(7,-1).split(/, /);return{x:+a[4],y:+a[5],scaleX:+a[0],scaleY:+a[3]}}return null}function z0(n,a,i){const r=Kg(a);if(!r)return n;const{scaleX:t,scaleY:l,x:u,y:d}=r,p=n.left-u-(1-t)*parseFloat(i),h=n.top-d-(1-l)*parseFloat(i.slice(i.indexOf(" ")+1)),v=t?n.width/t:n.width,y=l?n.height/l:n.height;return{width:v,height:y,top:h,right:p+v,bottom:h+y,left:p}}const U0={ignoreTransform:!1};function Ci(n,a){a===void 0&&(a=U0);let i=n.getBoundingClientRect();if(a.ignoreTransform){const{transform:h,transformOrigin:v}=Zn(n).getComputedStyle(n);h&&(i=z0(i,h,v))}const{top:r,left:t,width:l,height:u,bottom:d,right:p}=i;return{top:r,left:t,width:l,height:u,bottom:d,right:p}}function ch(n){return Ci(n,{ignoreTransform:!0})}function B0(n){const a=n.innerWidth,i=n.innerHeight;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}function $0(n,a){return a===void 0&&(a=Zn(n).getComputedStyle(n)),a.position==="fixed"}function Y0(n,a){a===void 0&&(a=Zn(n).getComputedStyle(n));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(t=>{const l=a[t];return typeof l=="string"?i.test(l):!1})}function df(n,a){const i=[];function r(t){if(a!=null&&i.length>=a||!t)return i;if(uf(t)&&t.scrollingElement!=null&&!i.includes(t.scrollingElement))return i.push(t.scrollingElement),i;if(!To(t)||$g(t)||i.includes(t))return i;const l=Zn(n).getComputedStyle(t);return t!==n&&Y0(t,l)&&i.push(t),$0(t,l)?i:r(t.parentNode)}return n?r(n):i}function Vg(n){const[a]=df(n,1);return a??null}function pd(n){return!Nc||!n?null:ki(n)?n:cf(n)?uf(n)||n===ji(n).scrollingElement?window:To(n)?n:null:null}function Gg(n){return ki(n)?n.scrollX:n.scrollLeft}function Qg(n){return ki(n)?n.scrollY:n.scrollTop}function Ud(n){return{x:Gg(n),y:Qg(n)}}var Mn;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Mn||(Mn={}));function qg(n){return!Nc||!n?!1:n===document.scrollingElement}function Jg(n){const a={x:0,y:0},i=qg(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-i.width,y:n.scrollHeight-i.height},t=n.scrollTop<=a.y,l=n.scrollLeft<=a.x,u=n.scrollTop>=r.y,d=n.scrollLeft>=r.x;return{isTop:t,isLeft:l,isBottom:u,isRight:d,maxScroll:r,minScroll:a}}const W0={x:.2,y:.2};function H0(n,a,i,r,t){let{top:l,left:u,right:d,bottom:p}=i;r===void 0&&(r=10),t===void 0&&(t=W0);const{isTop:h,isBottom:v,isLeft:y,isRight:S}=Jg(n),k={x:0,y:0},j={x:0,y:0},E={height:a.height*t.y,width:a.width*t.x};return!h&&l<=a.top+E.height?(k.y=Mn.Backward,j.y=r*Math.abs((a.top+E.height-l)/E.height)):!v&&p>=a.bottom-E.height&&(k.y=Mn.Forward,j.y=r*Math.abs((a.bottom-E.height-p)/E.height)),!S&&d>=a.right-E.width?(k.x=Mn.Forward,j.x=r*Math.abs((a.right-E.width-d)/E.width)):!y&&u<=a.left+E.width&&(k.x=Mn.Backward,j.x=r*Math.abs((a.left+E.width-u)/E.width)),{direction:k,speed:j}}function K0(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:u}=window;return{top:0,left:0,right:l,bottom:u,width:l,height:u}}const{top:a,left:i,right:r,bottom:t}=n.getBoundingClientRect();return{top:a,left:i,right:r,bottom:t,width:n.clientWidth,height:n.clientHeight}}function Xg(n){return n.reduce((a,i)=>mi(a,Ud(i)),Kr)}function V0(n){return n.reduce((a,i)=>a+Gg(i),0)}function G0(n){return n.reduce((a,i)=>a+Qg(i),0)}function Zg(n,a){if(a===void 0&&(a=Ci),!n)return;const{top:i,left:r,bottom:t,right:l}=a(n);Vg(n)&&(t<=0||l<=0||i>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Q0=[["x",["left","right"],V0],["y",["top","bottom"],G0]];class ff{constructor(a,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=df(i),t=Xg(r);this.rect={...a},this.width=a.width,this.height=a.height;for(const[l,u,d]of Q0)for(const p of u)Object.defineProperty(this,p,{get:()=>{const h=d(r),v=t[l]-h;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lo{constructor(a){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...i)})},this.target=a}add(a,i,r){var t;(t=this.target)==null||t.addEventListener(a,i,r),this.listeners.push([a,i,r])}}function q0(n){const{EventTarget:a}=Zn(n);return n instanceof a?n:ji(n)}function md(n,a){const i=Math.abs(n.x),r=Math.abs(n.y);return typeof a=="number"?Math.sqrt(i**2+r**2)>a:"x"in a&&"y"in a?i>a.x&&r>a.y:"x"in a?i>a.x:"y"in a?r>a.y:!1}var Er;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Er||(Er={}));function uh(n){n.preventDefault()}function J0(n){n.stopPropagation()}var At;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(At||(At={}));const ev={start:[At.Space,At.Enter],cancel:[At.Esc],end:[At.Space,At.Enter,At.Tab]},X0=(n,a)=>{let{currentCoordinates:i}=a;switch(n.code){case At.Right:return{...i,x:i.x+25};case At.Left:return{...i,x:i.x-25};case At.Down:return{...i,y:i.y+25};case At.Up:return{...i,y:i.y-25}}};class tv{constructor(a){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=a;const{event:{target:i}}=a;this.props=a,this.listeners=new lo(ji(i)),this.windowListeners=new lo(Zn(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Er.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:a,onStart:i}=this.props,r=a.node.current;r&&Zg(r),i(Kr)}handleKeyDown(a){if(kc(a)){const{active:i,context:r,options:t}=this.props,{keyboardCodes:l=ev,coordinateGetter:u=X0,scrollBehavior:d="smooth"}=t,{code:p}=a;if(l.end.includes(p)){this.handleEnd(a);return}if(l.cancel.includes(p)){this.handleCancel(a);return}const{collisionRect:h}=r.current,v=h?{x:h.left,y:h.top}:Kr;this.referenceCoordinates||(this.referenceCoordinates=v);const y=u(a,{active:i,context:r.current,currentCoordinates:v});if(y){const S=sc(y,v),k={x:0,y:0},{scrollableAncestors:j}=r.current;for(const E of j){const C=a.code,{isTop:F,isRight:O,isLeft:_,isBottom:$,maxScroll:Z,minScroll:q}=Jg(E),ee=K0(E),ae={x:Math.min(C===At.Right?ee.right-ee.width/2:ee.right,Math.max(C===At.Right?ee.left:ee.left+ee.width/2,y.x)),y:Math.min(C===At.Down?ee.bottom-ee.height/2:ee.bottom,Math.max(C===At.Down?ee.top:ee.top+ee.height/2,y.y))},se=C===At.Right&&!O||C===At.Left&&!_,ie=C===At.Down&&!$||C===At.Up&&!F;if(se&&ae.x!==y.x){const re=E.scrollLeft+S.x,Ce=C===At.Right&&re<=Z.x||C===At.Left&&re>=q.x;if(Ce&&!S.y){E.scrollTo({left:re,behavior:d});return}Ce?k.x=E.scrollLeft-re:k.x=C===At.Right?E.scrollLeft-Z.x:E.scrollLeft-q.x,k.x&&E.scrollBy({left:-k.x,behavior:d});break}else if(ie&&ae.y!==y.y){const re=E.scrollTop+S.y,Ce=C===At.Down&&re<=Z.y||C===At.Up&&re>=q.y;if(Ce&&!S.x){E.scrollTo({top:re,behavior:d});return}Ce?k.y=E.scrollTop-re:k.y=C===At.Down?E.scrollTop-Z.y:E.scrollTop-q.y,k.y&&E.scrollBy({top:-k.y,behavior:d});break}}this.handleMove(a,mi(sc(y,this.referenceCoordinates),k))}}}handleMove(a,i){const{onMove:r}=this.props;a.preventDefault(),r(i)}handleEnd(a){const{onEnd:i}=this.props;a.preventDefault(),this.detach(),i()}handleCancel(a){const{onCancel:i}=this.props;a.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}tv.activators=[{eventName:"onKeyDown",handler:(n,a,i)=>{let{keyboardCodes:r=ev,onActivation:t}=a,{active:l}=i;const{code:u}=n.nativeEvent;if(r.start.includes(u)){const d=l.activatorNode.current;return d&&n.target!==d?!1:(n.preventDefault(),t?.({event:n.nativeEvent}),!0)}return!1}}];function dh(n){return!!(n&&"distance"in n)}function fh(n){return!!(n&&"delay"in n)}class pf{constructor(a,i,r){var t;r===void 0&&(r=q0(a.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=a,this.events=i;const{event:l}=a,{target:u}=l;this.props=a,this.events=i,this.document=ji(u),this.documentListeners=new lo(this.document),this.listeners=new lo(r),this.windowListeners=new lo(Zn(u)),this.initialCoordinates=(t=ic(l))!=null?t:Kr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:a,props:{options:{activationConstraint:i,bypassActivationConstraint:r}}}=this;if(this.listeners.add(a.move.name,this.handleMove,{passive:!1}),this.listeners.add(a.end.name,this.handleEnd),a.cancel&&this.listeners.add(a.cancel.name,this.handleCancel),this.windowListeners.add(Er.Resize,this.handleCancel),this.windowListeners.add(Er.DragStart,uh),this.windowListeners.add(Er.VisibilityChange,this.handleCancel),this.windowListeners.add(Er.ContextMenu,uh),this.documentListeners.add(Er.Keydown,this.handleKeydown),i){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(fh(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(dh(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(a,i){const{active:r,onPending:t}=this.props;t(r,a,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:a}=this,{onStart:i}=this.props;a&&(this.activated=!0,this.documentListeners.add(Er.Click,J0,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Er.SelectionChange,this.removeTextSelection),i(a))}handleMove(a){var i;const{activated:r,initialCoordinates:t,props:l}=this,{onMove:u,options:{activationConstraint:d}}=l;if(!t)return;const p=(i=ic(a))!=null?i:Kr,h=sc(t,p);if(!r&&d){if(dh(d)){if(d.tolerance!=null&&md(h,d.tolerance))return this.handleCancel();if(md(h,d.distance))return this.handleStart()}if(fh(d)&&md(h,d.tolerance))return this.handleCancel();this.handlePending(d,h);return}a.cancelable&&a.preventDefault(),u(p)}handleEnd(){const{onAbort:a,onEnd:i}=this.props;this.detach(),this.activated||a(this.props.active),i()}handleCancel(){const{onAbort:a,onCancel:i}=this.props;this.detach(),this.activated||a(this.props.active),i()}handleKeydown(a){a.code===At.Esc&&this.handleCancel()}removeTextSelection(){var a;(a=this.document.getSelection())==null||a.removeAllRanges()}}const Z0={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nv extends pf{constructor(a){const{event:i}=a,r=ji(i.target);super(a,Z0,r)}}nv.activators=[{eventName:"onPointerDown",handler:(n,a)=>{let{nativeEvent:i}=n,{onActivation:r}=a;return!i.isPrimary||i.button!==0?!1:(r?.({event:i}),!0)}}];const eb={move:{name:"mousemove"},end:{name:"mouseup"}};var Bd;(function(n){n[n.RightClick=2]="RightClick"})(Bd||(Bd={}));class rv extends pf{constructor(a){super(a,eb,ji(a.event.target))}}rv.activators=[{eventName:"onMouseDown",handler:(n,a)=>{let{nativeEvent:i}=n,{onActivation:r}=a;return i.button===Bd.RightClick?!1:(r?.({event:i}),!0)}}];const hd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class av extends pf{constructor(a){super(a,hd)}static setup(){return window.addEventListener(hd.move.name,a,{capture:!1,passive:!1}),function(){window.removeEventListener(hd.move.name,a)};function a(){}}}av.activators=[{eventName:"onTouchStart",handler:(n,a)=>{let{nativeEvent:i}=n,{onActivation:r}=a;const{touches:t}=i;return t.length>1?!1:(r?.({event:i}),!0)}}];var co;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(co||(co={}));var lc;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(lc||(lc={}));function tb(n){let{acceleration:a,activator:i=co.Pointer,canScroll:r,draggingRect:t,enabled:l,interval:u=5,order:d=lc.TreeOrder,pointerCoordinates:p,scrollableAncestors:h,scrollableAncestorRects:v,delta:y,threshold:S}=n;const k=rb({delta:y,disabled:!l}),[j,E]=m0(),C=x.useRef({x:0,y:0}),F=x.useRef({x:0,y:0}),O=x.useMemo(()=>{switch(i){case co.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case co.DraggableRect:return t}},[i,t,p]),_=x.useRef(null),$=x.useCallback(()=>{const q=_.current;if(!q)return;const ee=C.current.x*F.current.x,ae=C.current.y*F.current.y;q.scrollBy(ee,ae)},[]),Z=x.useMemo(()=>d===lc.TreeOrder?[...h].reverse():h,[d,h]);x.useEffect(()=>{if(!l||!h.length||!O){E();return}for(const q of Z){if(r?.(q)===!1)continue;const ee=h.indexOf(q),ae=v[ee];if(!ae)continue;const{direction:se,speed:ie}=H0(q,ae,O,a,S);for(const re of["x","y"])k[re][se[re]]||(ie[re]=0,se[re]=0);if(ie.x>0||ie.y>0){E(),_.current=q,j($,u),C.current=ie,F.current=se;return}}C.current={x:0,y:0},F.current={x:0,y:0},E()},[a,$,r,E,l,u,JSON.stringify(O),JSON.stringify(k),j,h,Z,v,JSON.stringify(S)])}const nb={x:{[Mn.Backward]:!1,[Mn.Forward]:!1},y:{[Mn.Backward]:!1,[Mn.Forward]:!1}};function rb(n){let{delta:a,disabled:i}=n;const r=ac(a);return Do(t=>{if(i||!r||!t)return nb;const l={x:Math.sign(a.x-r.x),y:Math.sign(a.y-r.y)};return{x:{[Mn.Backward]:t.x[Mn.Backward]||l.x===-1,[Mn.Forward]:t.x[Mn.Forward]||l.x===1},y:{[Mn.Backward]:t.y[Mn.Backward]||l.y===-1,[Mn.Forward]:t.y[Mn.Forward]||l.y===1}}},[i,a,r])}function ab(n,a){const i=a!=null?n.get(a):void 0,r=i?i.node.current:null;return Do(t=>{var l;return a==null?null:(l=r??t)!=null?l:null},[r,a])}function sb(n,a){return x.useMemo(()=>n.reduce((i,r)=>{const{sensor:t}=r,l=t.activators.map(u=>({eventName:u.eventName,handler:a(u.handler,r)}));return[...i,...l]},[]),[n,a])}var yo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(yo||(yo={}));var $d;(function(n){n.Optimized="optimized"})($d||($d={}));const ph=new Map;function ib(n,a){let{dragging:i,dependencies:r,config:t}=a;const[l,u]=x.useState(null),{frequency:d,measure:p,strategy:h}=t,v=x.useRef(n),y=C(),S=xo(y),k=x.useCallback(function(F){F===void 0&&(F=[]),!S.current&&u(O=>O===null?F:O.concat(F.filter(_=>!O.includes(_))))},[S]),j=x.useRef(null),E=Do(F=>{if(y&&!i)return ph;if(!F||F===ph||v.current!==n||l!=null){const O=new Map;for(let _ of n){if(!_)continue;if(l&&l.length>0&&!l.includes(_.id)&&_.rect.current){O.set(_.id,_.rect.current);continue}const $=_.node.current,Z=$?new ff(p($),$):null;_.rect.current=Z,Z&&O.set(_.id,Z)}return O}return F},[n,l,i,y,p]);return x.useEffect(()=>{v.current=n},[n]),x.useEffect(()=>{y||k()},[i,y]),x.useEffect(()=>{l&&l.length>0&&u(null)},[JSON.stringify(l)]),x.useEffect(()=>{y||typeof d!="number"||j.current!==null||(j.current=setTimeout(()=>{k(),j.current=null},d))},[d,y,k,...r]),{droppableRects:E,measureDroppableContainers:k,measuringScheduled:l!=null};function C(){switch(h){case yo.Always:return!1;case yo.BeforeDragging:return i;default:return!i}}}function mf(n,a){return Do(i=>n?i||(typeof a=="function"?a(n):n):null,[a,n])}function ob(n,a){return mf(n,a)}function lb(n){let{callback:a,disabled:i}=n;const r=Sc(a),t=x.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,i]);return x.useEffect(()=>()=>t?.disconnect(),[t]),t}function jc(n){let{callback:a,disabled:i}=n;const r=Sc(a),t=x.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[i]);return x.useEffect(()=>()=>t?.disconnect(),[t]),t}function cb(n){return new ff(Ci(n),n)}function mh(n,a,i){a===void 0&&(a=cb);const[r,t]=x.useState(null);function l(){t(p=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=p??i)!=null?h:null}const v=a(n);return JSON.stringify(p)===JSON.stringify(v)?p:v})}const u=lb({callback(p){if(n)for(const h of p){const{type:v,target:y}=h;if(v==="childList"&&y instanceof HTMLElement&&y.contains(n)){l();break}}}}),d=jc({callback:l});return Hr(()=>{l(),n?(d?.observe(n),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[n]),r}function ub(n){const a=mf(n);return Hg(n,a)}const hh=[];function db(n){const a=x.useRef(n),i=Do(r=>n?r&&r!==hh&&n&&a.current&&n.parentNode===a.current.parentNode?r:df(n):hh,[n]);return x.useEffect(()=>{a.current=n},[n]),i}function fb(n){const[a,i]=x.useState(null),r=x.useRef(n),t=x.useCallback(l=>{const u=pd(l.target);u&&i(d=>d?(d.set(u,Ud(u)),new Map(d)):null)},[]);return x.useEffect(()=>{const l=r.current;if(n!==l){u(l);const d=n.map(p=>{const h=pd(p);return h?(h.addEventListener("scroll",t,{passive:!0}),[h,Ud(h)]):null}).filter(p=>p!=null);i(d.length?new Map(d):null),r.current=n}return()=>{u(n),u(l)};function u(d){d.forEach(p=>{const h=pd(p);h?.removeEventListener("scroll",t)})}},[t,n]),x.useMemo(()=>n.length?a?Array.from(a.values()).reduce((l,u)=>mi(l,u),Kr):Xg(n):Kr,[n,a])}function gh(n,a){a===void 0&&(a=[]);const i=x.useRef(null);return x.useEffect(()=>{i.current=null},a),x.useEffect(()=>{const r=n!==Kr;r&&!i.current&&(i.current=n),!r&&i.current&&(i.current=null)},[n]),i.current?sc(n,i.current):Kr}function pb(n){x.useEffect(()=>{if(!Nc)return;const a=n.map(i=>{let{sensor:r}=i;return r.setup==null?void 0:r.setup()});return()=>{for(const i of a)i?.()}},n.map(a=>{let{sensor:i}=a;return i}))}function mb(n,a){return x.useMemo(()=>n.reduce((i,r)=>{let{eventName:t,handler:l}=r;return i[t]=u=>{l(u,a)},i},{}),[n,a])}function sv(n){return x.useMemo(()=>n?B0(n):null,[n])}const vh=[];function hb(n,a){a===void 0&&(a=Ci);const[i]=n,r=sv(i?Zn(i):null),[t,l]=x.useState(vh);function u(){l(()=>n.length?n.map(p=>qg(p)?r:new ff(a(p),p)):vh)}const d=jc({callback:u});return Hr(()=>{d?.disconnect(),u(),n.forEach(p=>d?.observe(p))},[n]),t}function iv(n){if(!n)return null;if(n.children.length>1)return n;const a=n.children[0];return To(a)?a:n}function gb(n){let{measure:a}=n;const[i,r]=x.useState(null),t=x.useCallback(h=>{for(const{target:v}of h)if(To(v)){r(y=>{const S=a(v);return y?{...y,width:S.width,height:S.height}:S});break}},[a]),l=jc({callback:t}),u=x.useCallback(h=>{const v=iv(h);l?.disconnect(),v&&l?.observe(v),r(v?a(v):null)},[a,l]),[d,p]=rc(u);return x.useMemo(()=>({nodeRef:d,rect:i,setRef:p}),[i,d,p])}const vb=[{sensor:nv,options:{}},{sensor:tv,options:{}}],xb={current:{}},Jl={draggable:{measure:ch},droppable:{measure:ch,strategy:yo.WhileDragging,frequency:$d.Optimized},dragOverlay:{measure:Ci}};class uo extends Map{get(a){var i;return a!=null&&(i=super.get(a))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(a=>{let{disabled:i}=a;return!i})}getNodeFor(a){var i,r;return(i=(r=this.get(a))==null?void 0:r.node.current)!=null?i:void 0}}const yb={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new uo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:oc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Jl,measureDroppableContainers:oc,windowRect:null,measuringScheduled:!1},ov={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:oc,draggableNodes:new Map,over:null,measureDroppableContainers:oc},Ro=x.createContext(ov),lv=x.createContext(yb);function bb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new uo}}}function wb(n,a){switch(a.type){case Cn.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:a.initialCoordinates,active:a.active}};case Cn.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:a.coordinates.x-n.draggable.initialCoordinates.x,y:a.coordinates.y-n.draggable.initialCoordinates.y}}};case Cn.DragEnd:case Cn.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Cn.RegisterDroppable:{const{element:i}=a,{id:r}=i,t=new uo(n.droppable.containers);return t.set(r,i),{...n,droppable:{...n.droppable,containers:t}}}case Cn.SetDroppableDisabled:{const{id:i,key:r,disabled:t}=a,l=n.droppable.containers.get(i);if(!l||r!==l.key)return n;const u=new uo(n.droppable.containers);return u.set(i,{...l,disabled:t}),{...n,droppable:{...n.droppable,containers:u}}}case Cn.UnregisterDroppable:{const{id:i,key:r}=a,t=n.droppable.containers.get(i);if(!t||r!==t.key)return n;const l=new uo(n.droppable.containers);return l.delete(i),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function Nb(n){let{disabled:a}=n;const{active:i,activatorEvent:r,draggableNodes:t}=x.useContext(Ro),l=ac(r),u=ac(i?.id);return x.useEffect(()=>{if(!a&&!r&&l&&u!=null){if(!kc(l)||document.activeElement===l.target)return;const d=t.get(u);if(!d)return;const{activatorNode:p,node:h}=d;if(!p.current&&!h.current)return;requestAnimationFrame(()=>{for(const v of[p.current,h.current]){if(!v)continue;const y=v0(v);if(y){y.focus();break}}})}},[r,a,t,u,l]),null}function cv(n,a){let{transform:i,...r}=a;return n!=null&&n.length?n.reduce((t,l)=>l({transform:t,...r}),i):i}function Sb(n){return x.useMemo(()=>({draggable:{...Jl.draggable,...n?.draggable},droppable:{...Jl.droppable,...n?.droppable},dragOverlay:{...Jl.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function kb(n){let{activeNode:a,measure:i,initialRect:r,config:t=!0}=n;const l=x.useRef(!1),{x:u,y:d}=typeof t=="boolean"?{x:t,y:t}:t;Hr(()=>{if(!u&&!d||!a){l.current=!1;return}if(l.current||!r)return;const h=a?.node.current;if(!h||h.isConnected===!1)return;const v=i(h),y=Hg(v,r);if(u||(y.x=0),d||(y.y=0),l.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const S=Vg(h);S&&S.scrollBy({top:y.y,left:y.x})}},[a,u,d,r,i])}const Cc=x.createContext({...Kr,scaleX:1,scaleY:1});var qa;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(qa||(qa={}));const jb=x.memo(function(a){var i,r,t,l;let{id:u,accessibility:d,autoScroll:p=!0,children:h,sensors:v=vb,collisionDetection:y=A0,measuring:S,modifiers:k,...j}=a;const E=x.useReducer(wb,void 0,bb),[C,F]=E,[O,_]=S0(),[$,Z]=x.useState(qa.Uninitialized),q=$===qa.Initialized,{draggable:{active:ee,nodes:ae,translate:se},droppable:{containers:ie}}=C,re=ee!=null?ae.get(ee):null,Ce=x.useRef({initial:null,translated:null}),fe=x.useMemo(()=>{var ne;return ee!=null?{id:ee,data:(ne=re?.data)!=null?ne:xb,rect:Ce}:null},[ee,re]),Me=x.useRef(null),[Te,Ne]=x.useState(null),[xe,L]=x.useState(null),V=xo(j,Object.values(j)),Q=Mo("DndDescribedBy",u),T=x.useMemo(()=>ie.getEnabled(),[ie]),Y=Sb(S),{droppableRects:H,measureDroppableContainers:ye,measuringScheduled:De}=ib(T,{dragging:q,dependencies:[se.x,se.y],config:Y.droppable}),ke=ab(ae,ee),Ue=x.useMemo(()=>xe?ic(xe):null,[xe]),oe=W(),le=ob(ke,Y.draggable.measure);kb({activeNode:ee!=null?ae.get(ee):null,config:oe.layoutShiftCompensation,initialRect:le,measure:Y.draggable.measure});const me=mh(ke,Y.draggable.measure,le),Oe=mh(ke?ke.parentElement:null),Je=x.useRef({activatorEvent:null,active:null,activeNode:ke,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:ae,draggingNode:null,draggingNodeRect:null,droppableContainers:ie,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qe=ie.getNodeFor((i=Je.current.over)==null?void 0:i.id),ut=gb({measure:Y.dragOverlay.measure}),rt=(r=ut.nodeRef.current)!=null?r:ke,_t=q?(t=ut.rect)!=null?t:me:null,Lt=!!(ut.nodeRef.current&&ut.rect),ht=ub(Lt?null:me),Ke=sv(rt?Zn(rt):null),pt=db(q?qe??ke:null),Fe=hb(pt),Rt=cv(k,{transform:{x:se.x-ht.x,y:se.y-ht.y,scaleX:1,scaleY:1},activatorEvent:xe,active:fe,activeNodeRect:me,containerNodeRect:Oe,draggingNodeRect:_t,over:Je.current.over,overlayNodeRect:ut.rect,scrollableAncestors:pt,scrollableAncestorRects:Fe,windowRect:Ke}),Bt=Ue?mi(Ue,se):null,Zt=fb(pt),en=gh(Zt),tn=gh(Zt,[me]),J=mi(Rt,en),be=_t?F0(_t,Rt):null,bt=fe&&be?y({active:fe,collisionRect:be,droppableRects:H,droppableContainers:T,pointerCoordinates:Bt}):null,mt=P0(bt,"id"),[dt,sn]=x.useState(null),tt=Lt?Rt:mi(Rt,tn),Ut=I0(tt,(l=dt?.rect)!=null?l:null,me),Gt=x.useRef(null),$t=x.useCallback((ne,Ee)=>{let{sensor:ve,options:pe}=Ee;if(Me.current==null)return;const Qe=ae.get(Me.current);if(!Qe)return;const wt=ne.nativeEvent,ft=new ve({active:Me.current,activeNode:Qe,event:wt,options:pe,context:Je,onAbort(at){if(!ae.get(at))return;const{onDragAbort:ue}=V.current,Re={id:at};ue?.(Re),O({type:"onDragAbort",event:Re})},onPending(at,A,ue,Re){if(!ae.get(at))return;const{onDragPending:Ve}=V.current,it={id:at,constraint:A,initialCoordinates:ue,offset:Re};Ve?.(it),O({type:"onDragPending",event:it})},onStart(at){const A=Me.current;if(A==null)return;const ue=ae.get(A);if(!ue)return;const{onDragStart:Re}=V.current,Ie={activatorEvent:wt,active:{id:A,data:ue.data,rect:Ce}};Ta.unstable_batchedUpdates(()=>{Re?.(Ie),Z(qa.Initializing),F({type:Cn.DragStart,initialCoordinates:at,active:A}),O({type:"onDragStart",event:Ie}),Ne(Gt.current),L(wt)})},onMove(at){F({type:Cn.DragMove,coordinates:at})},onEnd:Et(Cn.DragEnd),onCancel:Et(Cn.DragCancel)});Gt.current=ft;function Et(at){return async function(){const{active:ue,collisions:Re,over:Ie,scrollAdjustedTranslate:Ve}=Je.current;let it=null;if(ue&&Ve){const{cancelDrop:st}=V.current;it={activatorEvent:wt,active:ue,collisions:Re,delta:Ve,over:Ie},at===Cn.DragEnd&&typeof st=="function"&&await Promise.resolve(st(it))&&(at=Cn.DragCancel)}Me.current=null,Ta.unstable_batchedUpdates(()=>{F({type:at}),Z(qa.Uninitialized),sn(null),Ne(null),L(null),Gt.current=null;const st=at===Cn.DragEnd?"onDragEnd":"onDragCancel";if(it){const kt=V.current[st];kt?.(it),O({type:st,event:it})}})}}},[ae]),Yt=x.useCallback((ne,Ee)=>(ve,pe)=>{const Qe=ve.nativeEvent,wt=ae.get(pe);if(Me.current!==null||!wt||Qe.dndKit||Qe.defaultPrevented)return;const ft={active:wt};ne(ve,Ee.options,ft)===!0&&(Qe.dndKit={capturedBy:Ee.sensor},Me.current=pe,$t(ve,Ee))},[ae,$t]),Ft=sb(v,Yt);pb(v),Hr(()=>{me&&$===qa.Initializing&&Z(qa.Initialized)},[me,$]),x.useEffect(()=>{const{onDragMove:ne}=V.current,{active:Ee,activatorEvent:ve,collisions:pe,over:Qe}=Je.current;if(!Ee||!ve)return;const wt={active:Ee,activatorEvent:ve,collisions:pe,delta:{x:J.x,y:J.y},over:Qe};Ta.unstable_batchedUpdates(()=>{ne?.(wt),O({type:"onDragMove",event:wt})})},[J.x,J.y]),x.useEffect(()=>{const{active:ne,activatorEvent:Ee,collisions:ve,droppableContainers:pe,scrollAdjustedTranslate:Qe}=Je.current;if(!ne||Me.current==null||!Ee||!Qe)return;const{onDragOver:wt}=V.current,ft=pe.get(mt),Et=ft&&ft.rect.current?{id:ft.id,rect:ft.rect.current,data:ft.data,disabled:ft.disabled}:null,at={active:ne,activatorEvent:Ee,collisions:ve,delta:{x:Qe.x,y:Qe.y},over:Et};Ta.unstable_batchedUpdates(()=>{sn(Et),wt?.(at),O({type:"onDragOver",event:at})})},[mt]),Hr(()=>{Je.current={activatorEvent:xe,active:fe,activeNode:ke,collisionRect:be,collisions:bt,droppableRects:H,draggableNodes:ae,draggingNode:rt,draggingNodeRect:_t,droppableContainers:ie,over:dt,scrollableAncestors:pt,scrollAdjustedTranslate:J},Ce.current={initial:_t,translated:be}},[fe,ke,bt,be,ae,rt,_t,H,ie,dt,pt,J]),tb({...oe,delta:se,draggingRect:be,pointerCoordinates:Bt,scrollableAncestors:pt,scrollableAncestorRects:Fe});const Qt=x.useMemo(()=>({active:fe,activeNode:ke,activeNodeRect:me,activatorEvent:xe,collisions:bt,containerNodeRect:Oe,dragOverlay:ut,draggableNodes:ae,droppableContainers:ie,droppableRects:H,over:dt,measureDroppableContainers:ye,scrollableAncestors:pt,scrollableAncestorRects:Fe,measuringConfiguration:Y,measuringScheduled:De,windowRect:Ke}),[fe,ke,me,xe,bt,Oe,ut,ae,ie,H,dt,ye,pt,Fe,Y,De,Ke]),Be=x.useMemo(()=>({activatorEvent:xe,activators:Ft,active:fe,activeNodeRect:me,ariaDescribedById:{draggable:Q},dispatch:F,draggableNodes:ae,over:dt,measureDroppableContainers:ye}),[xe,Ft,fe,me,F,Q,ae,dt,ye]);return K.createElement(Wg.Provider,{value:_},K.createElement(Ro.Provider,{value:Be},K.createElement(lv.Provider,{value:Qt},K.createElement(Cc.Provider,{value:Ut},h)),K.createElement(Nb,{disabled:d?.restoreFocus===!1})),K.createElement(C0,{...d,hiddenTextDescribedById:Q}));function W(){const ne=Te?.autoScrollEnabled===!1,Ee=typeof p=="object"?p.enabled===!1:p===!1,ve=q&&!ne&&!Ee;return typeof p=="object"?{...p,enabled:ve}:{enabled:ve}}}),Cb=x.createContext(null),xh="button",Eb="Draggable";function Tb(n){let{id:a,data:i,disabled:r=!1,attributes:t}=n;const l=Mo(Eb),{activators:u,activatorEvent:d,active:p,activeNodeRect:h,ariaDescribedById:v,draggableNodes:y,over:S}=x.useContext(Ro),{role:k=xh,roleDescription:j="draggable",tabIndex:E=0}=t??{},C=p?.id===a,F=x.useContext(C?Cc:Cb),[O,_]=rc(),[$,Z]=rc(),q=mb(u,a),ee=xo(i);Hr(()=>(y.set(a,{id:a,key:l,node:O,activatorNode:$,data:ee}),()=>{const se=y.get(a);se&&se.key===l&&y.delete(a)}),[y,a]);const ae=x.useMemo(()=>({role:k,tabIndex:E,"aria-disabled":r,"aria-pressed":C&&k===xh?!0:void 0,"aria-roledescription":j,"aria-describedby":v.draggable}),[r,k,E,C,j,v.draggable]);return{active:p,activatorEvent:d,activeNodeRect:h,attributes:ae,isDragging:C,listeners:r?void 0:q,node:O,over:S,setNodeRef:_,setActivatorNodeRef:Z,transform:F}}function uv(){return x.useContext(lv)}const Db="Droppable",Mb={timeout:25};function dv(n){let{data:a,disabled:i=!1,id:r,resizeObserverConfig:t}=n;const l=Mo(Db),{active:u,dispatch:d,over:p,measureDroppableContainers:h}=x.useContext(Ro),v=x.useRef({disabled:i}),y=x.useRef(!1),S=x.useRef(null),k=x.useRef(null),{disabled:j,updateMeasurementsFor:E,timeout:C}={...Mb,...t},F=xo(E??r),O=x.useCallback(()=>{if(!y.current){y.current=!0;return}k.current!=null&&clearTimeout(k.current),k.current=setTimeout(()=>{h(Array.isArray(F.current)?F.current:[F.current]),k.current=null},C)},[C]),_=jc({callback:O,disabled:j||!u}),$=x.useCallback((ae,se)=>{_&&(se&&(_.unobserve(se),y.current=!1),ae&&_.observe(ae))},[_]),[Z,q]=rc($),ee=xo(a);return x.useEffect(()=>{!_||!Z.current||(_.disconnect(),y.current=!1,_.observe(Z.current))},[Z,_]),x.useEffect(()=>(d({type:Cn.RegisterDroppable,element:{id:r,key:l,disabled:i,node:Z,rect:S,data:ee}}),()=>d({type:Cn.UnregisterDroppable,key:l,id:r})),[r]),x.useEffect(()=>{i!==v.current.disabled&&(d({type:Cn.SetDroppableDisabled,id:r,key:l,disabled:i}),v.current.disabled=i)},[r,l,i,d]),{active:u,rect:S,isOver:p?.id===r,node:Z,over:p,setNodeRef:q}}function Rb(n){let{animation:a,children:i}=n;const[r,t]=x.useState(null),[l,u]=x.useState(null),d=ac(i);return!i&&!r&&d&&t(d),Hr(()=>{if(!l)return;const p=r?.key,h=r?.props.id;if(p==null||h==null){t(null);return}Promise.resolve(a(h,l)).then(()=>{t(null)})},[a,r,l]),K.createElement(K.Fragment,null,i,r?x.cloneElement(r,{ref:u}):null)}const Pb={x:0,y:0,scaleX:1,scaleY:1};function _b(n){let{children:a}=n;return K.createElement(Ro.Provider,{value:ov},K.createElement(Cc.Provider,{value:Pb},a))}const Ob={position:"fixed",touchAction:"none"},Ab=n=>kc(n)?"transform 250ms ease":void 0,Ib=x.forwardRef((n,a)=>{let{as:i,activatorEvent:r,adjustScale:t,children:l,className:u,rect:d,style:p,transform:h,transition:v=Ab}=n;if(!d)return null;const y=t?h:{...h,scaleX:1,scaleY:1},S={...Ob,width:d.width,height:d.height,top:d.top,left:d.left,transform:ts.Transform.toString(y),transformOrigin:t&&r?D0(r,d):void 0,transition:typeof v=="function"?v(r):v,...p};return K.createElement(i,{className:u,style:S,ref:a},l)}),Lb=n=>a=>{let{active:i,dragOverlay:r}=a;const t={},{styles:l,className:u}=n;if(l!=null&&l.active)for(const[d,p]of Object.entries(l.active))p!==void 0&&(t[d]=i.node.style.getPropertyValue(d),i.node.style.setProperty(d,p));if(l!=null&&l.dragOverlay)for(const[d,p]of Object.entries(l.dragOverlay))p!==void 0&&r.node.style.setProperty(d,p);return u!=null&&u.active&&i.node.classList.add(u.active),u!=null&&u.dragOverlay&&r.node.classList.add(u.dragOverlay),function(){for(const[p,h]of Object.entries(t))i.node.style.setProperty(p,h);u!=null&&u.active&&i.node.classList.remove(u.active)}},Fb=n=>{let{transform:{initial:a,final:i}}=n;return[{transform:ts.Transform.toString(a)},{transform:ts.Transform.toString(i)}]},zb={duration:250,easing:"ease",keyframes:Fb,sideEffects:Lb({styles:{active:{opacity:"0"}}})};function Ub(n){let{config:a,draggableNodes:i,droppableContainers:r,measuringConfiguration:t}=n;return Sc((l,u)=>{if(a===null)return;const d=i.get(l);if(!d)return;const p=d.node.current;if(!p)return;const h=iv(u);if(!h)return;const{transform:v}=Zn(u).getComputedStyle(u),y=Kg(v);if(!y)return;const S=typeof a=="function"?a:Bb(a);return Zg(p,t.draggable.measure),S({active:{id:l,data:d.data,node:p,rect:t.draggable.measure(p)},draggableNodes:i,dragOverlay:{node:u,rect:t.dragOverlay.measure(h)},droppableContainers:r,measuringConfiguration:t,transform:y})})}function Bb(n){const{duration:a,easing:i,sideEffects:r,keyframes:t}={...zb,...n};return l=>{let{active:u,dragOverlay:d,transform:p,...h}=l;if(!a)return;const v={x:d.rect.left-u.rect.left,y:d.rect.top-u.rect.top},y={scaleX:p.scaleX!==1?u.rect.width*p.scaleX/d.rect.width:1,scaleY:p.scaleY!==1?u.rect.height*p.scaleY/d.rect.height:1},S={x:p.x-v.x,y:p.y-v.y,...y},k=t({...h,active:u,dragOverlay:d,transform:{initial:p,final:S}}),[j]=k,E=k[k.length-1];if(JSON.stringify(j)===JSON.stringify(E))return;const C=r?.({active:u,dragOverlay:d,...h}),F=d.node.animate(k,{duration:a,easing:i,fill:"forwards"});return new Promise(O=>{F.onfinish=()=>{C?.(),O()}})}}let yh=0;function $b(n){return x.useMemo(()=>{if(n!=null)return yh++,yh},[n])}const Yb=K.memo(n=>{let{adjustScale:a=!1,children:i,dropAnimation:r,style:t,transition:l,modifiers:u,wrapperElement:d="div",className:p,zIndex:h=999}=n;const{activatorEvent:v,active:y,activeNodeRect:S,containerNodeRect:k,draggableNodes:j,droppableContainers:E,dragOverlay:C,over:F,measuringConfiguration:O,scrollableAncestors:_,scrollableAncestorRects:$,windowRect:Z}=uv(),q=x.useContext(Cc),ee=$b(y?.id),ae=cv(u,{activatorEvent:v,active:y,activeNodeRect:S,containerNodeRect:k,draggingNodeRect:C.rect,over:F,overlayNodeRect:C.rect,scrollableAncestors:_,scrollableAncestorRects:$,transform:q,windowRect:Z}),se=mf(S),ie=Ub({config:r,draggableNodes:j,droppableContainers:E,measuringConfiguration:O}),re=se?C.setRef:void 0;return K.createElement(_b,null,K.createElement(Rb,{animation:ie},y&&ee?K.createElement(Ib,{key:ee,id:y.id,ref:re,as:d,activatorEvent:v,adjustScale:a,className:p,transition:l,rect:se,style:{zIndex:h,...t},transform:ae},i):null))});function hf(n,a,i){const r=n.slice();return r.splice(i<0?r.length+i:i,0,r.splice(a,1)[0]),r}function Wb(n,a){return n.reduce((i,r,t)=>{const l=a.get(r);return l&&(i[t]=l),i},Array(n.length))}function Il(n){return n!==null&&n>=0}function Hb(n,a){if(n===a)return!0;if(n.length!==a.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==a[i])return!1;return!0}function Kb(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const fv=n=>{let{rects:a,activeIndex:i,overIndex:r,index:t}=n;const l=hf(a,r,i),u=a[t],d=l[t];return!d||!u?null:{x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height}},Ll={scaleX:1,scaleY:1},Vb=n=>{var a;let{activeIndex:i,activeNodeRect:r,index:t,rects:l,overIndex:u}=n;const d=(a=l[i])!=null?a:r;if(!d)return null;if(t===i){const h=l[u];return h?{x:0,y:i<u?h.top+h.height-(d.top+d.height):h.top-d.top,...Ll}:null}const p=Gb(l,t,i);return t>i&&t<=u?{x:0,y:-d.height-p,...Ll}:t<i&&t>=u?{x:0,y:d.height+p,...Ll}:{x:0,y:0,...Ll}};function Gb(n,a,i){const r=n[a],t=n[a-1],l=n[a+1];return r?i<a?t?r.top-(t.top+t.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):t?r.top-(t.top+t.height):0:0}const pv="Sortable",mv=K.createContext({activeIndex:-1,containerId:pv,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:fv,disabled:{draggable:!1,droppable:!1}});function Qb(n){let{children:a,id:i,items:r,strategy:t=fv,disabled:l=!1}=n;const{active:u,dragOverlay:d,droppableRects:p,over:h,measureDroppableContainers:v}=uv(),y=Mo(pv,i),S=d.rect!==null,k=x.useMemo(()=>r.map(q=>typeof q=="object"&&"id"in q?q.id:q),[r]),j=u!=null,E=u?k.indexOf(u.id):-1,C=h?k.indexOf(h.id):-1,F=x.useRef(k),O=!Hb(k,F.current),_=C!==-1&&E===-1||O,$=Kb(l);Hr(()=>{O&&j&&v(k)},[O,k,j,v]),x.useEffect(()=>{F.current=k},[k]);const Z=x.useMemo(()=>({activeIndex:E,containerId:y,disabled:$,disableTransforms:_,items:k,overIndex:C,useDragOverlay:S,sortedRects:Wb(k,p),strategy:t}),[E,y,$.draggable,$.droppable,_,k,C,p,S,t]);return K.createElement(mv.Provider,{value:Z},a)}const qb=n=>{let{id:a,items:i,activeIndex:r,overIndex:t}=n;return hf(i,r,t).indexOf(a)},Jb=n=>{let{containerId:a,isSorting:i,wasDragging:r,index:t,items:l,newIndex:u,previousItems:d,previousContainerId:p,transition:h}=n;return!h||!r||d!==l&&t===u?!1:i?!0:u!==t&&a===p},Xb={duration:200,easing:"ease"},hv="transform",Zb=ts.Transition.toString({property:hv,duration:0,easing:"linear"}),ew={roleDescription:"sortable"};function tw(n){let{disabled:a,index:i,node:r,rect:t}=n;const[l,u]=x.useState(null),d=x.useRef(i);return Hr(()=>{if(!a&&i!==d.current&&r.current){const p=t.current;if(p){const h=Ci(r.current,{ignoreTransform:!0}),v={x:p.left-h.left,y:p.top-h.top,scaleX:p.width/h.width,scaleY:p.height/h.height};(v.x||v.y)&&u(v)}}i!==d.current&&(d.current=i)},[a,i,r,t]),x.useEffect(()=>{l&&u(null)},[l]),l}function nw(n){let{animateLayoutChanges:a=Jb,attributes:i,disabled:r,data:t,getNewIndex:l=qb,id:u,strategy:d,resizeObserverConfig:p,transition:h=Xb}=n;const{items:v,containerId:y,activeIndex:S,disabled:k,disableTransforms:j,sortedRects:E,overIndex:C,useDragOverlay:F,strategy:O}=x.useContext(mv),_=rw(r,k),$=v.indexOf(u),Z=x.useMemo(()=>({sortable:{containerId:y,index:$,items:v},...t}),[y,t,$,v]),q=x.useMemo(()=>v.slice(v.indexOf(u)),[v,u]),{rect:ee,node:ae,isOver:se,setNodeRef:ie}=dv({id:u,data:Z,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:q,...p}}),{active:re,activatorEvent:Ce,activeNodeRect:fe,attributes:Me,setNodeRef:Te,listeners:Ne,isDragging:xe,over:L,setActivatorNodeRef:V,transform:Q}=Tb({id:u,data:Z,attributes:{...ew,...i},disabled:_.draggable}),T=p0(ie,Te),Y=!!re,H=Y&&!j&&Il(S)&&Il(C),ye=!F&&xe,De=ye&&H?Q:null,Ue=H?De??(d??O)({rects:E,activeNodeRect:fe,activeIndex:S,overIndex:C,index:$}):null,oe=Il(S)&&Il(C)?l({id:u,items:v,activeIndex:S,overIndex:C}):$,le=re?.id,me=x.useRef({activeId:le,items:v,newIndex:oe,containerId:y}),Oe=v!==me.current.items,Je=a({active:re,containerId:y,isDragging:xe,isSorting:Y,id:u,index:$,items:v,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:h,wasDragging:me.current.activeId!=null}),qe=tw({disabled:!Je,index:$,node:ae,rect:ee});return x.useEffect(()=>{Y&&me.current.newIndex!==oe&&(me.current.newIndex=oe),y!==me.current.containerId&&(me.current.containerId=y),v!==me.current.items&&(me.current.items=v)},[Y,oe,y,v]),x.useEffect(()=>{if(le===me.current.activeId)return;if(le&&!me.current.activeId){me.current.activeId=le;return}const rt=setTimeout(()=>{me.current.activeId=le},50);return()=>clearTimeout(rt)},[le]),{active:re,activeIndex:S,attributes:Me,data:Z,rect:ee,index:$,newIndex:oe,items:v,isOver:se,isSorting:Y,isDragging:xe,listeners:Ne,node:ae,overIndex:C,over:L,setNodeRef:T,setActivatorNodeRef:V,setDroppableNodeRef:ie,setDraggableNodeRef:Te,transform:qe??Ue,transition:ut()};function ut(){if(qe||Oe&&me.current.newIndex===$)return Zb;if(!(ye&&!kc(Ce)||!h)&&(Y||Je))return ts.Transition.toString({...h,property:hv})}}function rw(n,a){var i,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(i=n?.draggable)!=null?i:a.draggable,droppable:(r=n?.droppable)!=null?r:a.droppable}}At.Down,At.Right,At.Up,At.Left;const aw={Neu:{colClass:"col-new",titleClass:"col-title-new",badgeClass:"kpi-badge-new",icon:""},"In Bearbeitung":{colClass:"col-progress",titleClass:"col-title-progress",badgeClass:"kpi-badge-progress",icon:""},Erledigt:{colClass:"col-done",titleClass:"col-title-done",badgeClass:"kpi-badge-done",icon:""}};function gd({id:n,title:a,count:i,itemIds:r,bg:t="",children:l}){const{setNodeRef:u,isOver:d}=dv({id:n}),p=aw[n]||{},h=x.useRef(null),[v,y]=x.useState(null);return x.useLayoutEffect(()=>{const S=h.current;if(!S)return;const k=()=>{const j=S.getBoundingClientRect(),E=window.innerHeight||document.documentElement.clientHeight,C=Math.max(240,Math.floor(E-j.top-16));y(C)};return k(),window.addEventListener("resize",k),window.addEventListener("orientationchange",k),()=>{window.removeEventListener("resize",k),window.removeEventListener("orientationchange",k)}},[]),o.jsxs("section",{ref:S=>{u(S),h.current=S},id:n,style:v?{height:v}:void 0,className:["droppable-column","flex flex-col overflow-hidden",p.colClass||t,d?"ring-2 ring-blue-300":""].join(" "),children:[o.jsx("div",{className:"column-header sticky top-0 z-10",children:o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("h2",{className:`col-title flex items-center gap-2 ${p.titleClass||""}`,children:[o.jsx("span",{className:"text-base","aria-hidden":!0,children:p.icon||""}),a]}),o.jsx("span",{className:`kpi-badge ${p.badgeClass||""}`,children:i})]})}),o.jsx(Qb,{items:r,strategy:Vb,children:o.jsx("ul",{className:"flex-1 overflow-y-auto overflow-x-hidden px-2 py-2.5 space-y-2.5",children:l})})]})}var vd={exports:{}};var bh;function sw(){return bh||(bh=1,(function(n){(function(){var a={}.hasOwnProperty;function i(){for(var l="",u=0;u<arguments.length;u++){var d=arguments[u];d&&(l=t(l,r(d)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return i.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var u="";for(var d in l)a.call(l,d)&&l[d]&&(u=t(u,d));return u}function t(l,u){return u?l?l+" "+u:l+u:l}n.exports?(i.default=i,n.exports=i):window.classNames=i})()})(vd)),vd.exports}var iw=sw();const Un=Eo(iw);function Dr(n){"@babel/helpers - typeof";return Dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Dr(n)}function Pe(n,a){if(a.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+a.length+" present")}function Ec(n){return Pe(1,arguments),n instanceof Date||Dr(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ye(n){Pe(1,arguments);var a=Object.prototype.toString.call(n);return n instanceof Date||Dr(n)==="object"&&a==="[object Date]"?new Date(n.getTime()):typeof n=="number"||a==="[object Number]"?new Date(n):((typeof n=="string"||a==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function bo(n){if(Pe(1,arguments),!Ec(n)&&typeof n!="number")return!1;var a=Ye(n);return!isNaN(Number(a))}function yt(n){if(n===null||n===!0||n===!1)return NaN;var a=Number(n);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}function gf(n,a){Pe(2,arguments);var i=Ye(n).getTime(),r=yt(a);return new Date(i+r)}function gv(n,a){Pe(2,arguments);var i=yt(a);return gf(n,-i)}var ow=864e5;function lw(n){Pe(1,arguments);var a=Ye(n),i=a.getTime();a.setUTCMonth(0,1),a.setUTCHours(0,0,0,0);var r=a.getTime(),t=i-r;return Math.floor(t/ow)+1}function gi(n){Pe(1,arguments);var a=1,i=Ye(n),r=i.getUTCDay(),t=(r<a?7:0)+r-a;return i.setUTCDate(i.getUTCDate()-t),i.setUTCHours(0,0,0,0),i}function vv(n){Pe(1,arguments);var a=Ye(n),i=a.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(i+1,0,4),r.setUTCHours(0,0,0,0);var t=gi(r),l=new Date(0);l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0);var u=gi(l);return a.getTime()>=t.getTime()?i+1:a.getTime()>=u.getTime()?i:i-1}function cw(n){Pe(1,arguments);var a=vv(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var r=gi(i);return r}var uw=6048e5;function xv(n){Pe(1,arguments);var a=Ye(n),i=gi(a).getTime()-cw(a).getTime();return Math.round(i/uw)+1}var dw={};function As(){return dw}function _s(n,a){var i,r,t,l,u,d,p,h;Pe(1,arguments);var v=As(),y=yt((i=(r=(t=(l=a?.weekStartsOn)!==null&&l!==void 0?l:a==null||(u=a.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:v.weekStartsOn)!==null&&r!==void 0?r:(p=v.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var S=Ye(n),k=S.getUTCDay(),j=(k<y?7:0)+k-y;return S.setUTCDate(S.getUTCDate()-j),S.setUTCHours(0,0,0,0),S}function vf(n,a){var i,r,t,l,u,d,p,h;Pe(1,arguments);var v=Ye(n),y=v.getUTCFullYear(),S=As(),k=yt((i=(r=(t=(l=a?.firstWeekContainsDate)!==null&&l!==void 0?l:a==null||(u=a.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:S.firstWeekContainsDate)!==null&&r!==void 0?r:(p=S.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=new Date(0);j.setUTCFullYear(y+1,0,k),j.setUTCHours(0,0,0,0);var E=_s(j,a),C=new Date(0);C.setUTCFullYear(y,0,k),C.setUTCHours(0,0,0,0);var F=_s(C,a);return v.getTime()>=E.getTime()?y+1:v.getTime()>=F.getTime()?y:y-1}function fw(n,a){var i,r,t,l,u,d,p,h;Pe(1,arguments);var v=As(),y=yt((i=(r=(t=(l=a?.firstWeekContainsDate)!==null&&l!==void 0?l:a==null||(u=a.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:v.firstWeekContainsDate)!==null&&r!==void 0?r:(p=v.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1),S=vf(n,a),k=new Date(0);k.setUTCFullYear(S,0,y),k.setUTCHours(0,0,0,0);var j=_s(k,a);return j}var pw=6048e5;function yv(n,a){Pe(1,arguments);var i=Ye(n),r=_s(i,a).getTime()-fw(i,a).getTime();return Math.round(r/pw)+1}function zt(n,a){for(var i=n<0?"-":"",r=Math.abs(n).toString();r.length<a;)r="0"+r;return i+r}var Ga={y:function(a,i){var r=a.getUTCFullYear(),t=r>0?r:1-r;return zt(i==="yy"?t%100:t,i.length)},M:function(a,i){var r=a.getUTCMonth();return i==="M"?String(r+1):zt(r+1,2)},d:function(a,i){return zt(a.getUTCDate(),i.length)},a:function(a,i){var r=a.getUTCHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return r==="am"?"a.m.":"p.m."}},h:function(a,i){return zt(a.getUTCHours()%12||12,i.length)},H:function(a,i){return zt(a.getUTCHours(),i.length)},m:function(a,i){return zt(a.getUTCMinutes(),i.length)},s:function(a,i){return zt(a.getUTCSeconds(),i.length)},S:function(a,i){var r=i.length,t=a.getUTCMilliseconds(),l=Math.floor(t*Math.pow(10,r-3));return zt(l,i.length)}},li={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},mw={G:function(a,i,r){var t=a.getUTCFullYear()>0?1:0;switch(i){case"G":case"GG":case"GGG":return r.era(t,{width:"abbreviated"});case"GGGGG":return r.era(t,{width:"narrow"});default:return r.era(t,{width:"wide"})}},y:function(a,i,r){if(i==="yo"){var t=a.getUTCFullYear(),l=t>0?t:1-t;return r.ordinalNumber(l,{unit:"year"})}return Ga.y(a,i)},Y:function(a,i,r,t){var l=vf(a,t),u=l>0?l:1-l;if(i==="YY"){var d=u%100;return zt(d,2)}return i==="Yo"?r.ordinalNumber(u,{unit:"year"}):zt(u,i.length)},R:function(a,i){var r=vv(a);return zt(r,i.length)},u:function(a,i){var r=a.getUTCFullYear();return zt(r,i.length)},Q:function(a,i,r){var t=Math.ceil((a.getUTCMonth()+1)/3);switch(i){case"Q":return String(t);case"QQ":return zt(t,2);case"Qo":return r.ordinalNumber(t,{unit:"quarter"});case"QQQ":return r.quarter(t,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(t,{width:"narrow",context:"formatting"});default:return r.quarter(t,{width:"wide",context:"formatting"})}},q:function(a,i,r){var t=Math.ceil((a.getUTCMonth()+1)/3);switch(i){case"q":return String(t);case"qq":return zt(t,2);case"qo":return r.ordinalNumber(t,{unit:"quarter"});case"qqq":return r.quarter(t,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(t,{width:"narrow",context:"standalone"});default:return r.quarter(t,{width:"wide",context:"standalone"})}},M:function(a,i,r){var t=a.getUTCMonth();switch(i){case"M":case"MM":return Ga.M(a,i);case"Mo":return r.ordinalNumber(t+1,{unit:"month"});case"MMM":return r.month(t,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(t,{width:"narrow",context:"formatting"});default:return r.month(t,{width:"wide",context:"formatting"})}},L:function(a,i,r){var t=a.getUTCMonth();switch(i){case"L":return String(t+1);case"LL":return zt(t+1,2);case"Lo":return r.ordinalNumber(t+1,{unit:"month"});case"LLL":return r.month(t,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(t,{width:"narrow",context:"standalone"});default:return r.month(t,{width:"wide",context:"standalone"})}},w:function(a,i,r,t){var l=yv(a,t);return i==="wo"?r.ordinalNumber(l,{unit:"week"}):zt(l,i.length)},I:function(a,i,r){var t=xv(a);return i==="Io"?r.ordinalNumber(t,{unit:"week"}):zt(t,i.length)},d:function(a,i,r){return i==="do"?r.ordinalNumber(a.getUTCDate(),{unit:"date"}):Ga.d(a,i)},D:function(a,i,r){var t=lw(a);return i==="Do"?r.ordinalNumber(t,{unit:"dayOfYear"}):zt(t,i.length)},E:function(a,i,r){var t=a.getUTCDay();switch(i){case"E":case"EE":case"EEE":return r.day(t,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(t,{width:"short",context:"formatting"});default:return r.day(t,{width:"wide",context:"formatting"})}},e:function(a,i,r,t){var l=a.getUTCDay(),u=(l-t.weekStartsOn+8)%7||7;switch(i){case"e":return String(u);case"ee":return zt(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(a,i,r,t){var l=a.getUTCDay(),u=(l-t.weekStartsOn+8)%7||7;switch(i){case"c":return String(u);case"cc":return zt(u,i.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(a,i,r){var t=a.getUTCDay(),l=t===0?7:t;switch(i){case"i":return String(l);case"ii":return zt(l,i.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(t,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(t,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(t,{width:"short",context:"formatting"});default:return r.day(t,{width:"wide",context:"formatting"})}},a:function(a,i,r){var t=a.getUTCHours(),l=t/12>=1?"pm":"am";switch(i){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(a,i,r){var t=a.getUTCHours(),l;switch(t===12?l=li.noon:t===0?l=li.midnight:l=t/12>=1?"pm":"am",i){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(a,i,r){var t=a.getUTCHours(),l;switch(t>=17?l=li.evening:t>=12?l=li.afternoon:t>=4?l=li.morning:l=li.night,i){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(a,i,r){if(i==="ho"){var t=a.getUTCHours()%12;return t===0&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Ga.h(a,i)},H:function(a,i,r){return i==="Ho"?r.ordinalNumber(a.getUTCHours(),{unit:"hour"}):Ga.H(a,i)},K:function(a,i,r){var t=a.getUTCHours()%12;return i==="Ko"?r.ordinalNumber(t,{unit:"hour"}):zt(t,i.length)},k:function(a,i,r){var t=a.getUTCHours();return t===0&&(t=24),i==="ko"?r.ordinalNumber(t,{unit:"hour"}):zt(t,i.length)},m:function(a,i,r){return i==="mo"?r.ordinalNumber(a.getUTCMinutes(),{unit:"minute"}):Ga.m(a,i)},s:function(a,i,r){return i==="so"?r.ordinalNumber(a.getUTCSeconds(),{unit:"second"}):Ga.s(a,i)},S:function(a,i){return Ga.S(a,i)},X:function(a,i,r,t){var l=t._originalDate||a,u=l.getTimezoneOffset();if(u===0)return"Z";switch(i){case"X":return Nh(u);case"XXXX":case"XX":return Cs(u);default:return Cs(u,":")}},x:function(a,i,r,t){var l=t._originalDate||a,u=l.getTimezoneOffset();switch(i){case"x":return Nh(u);case"xxxx":case"xx":return Cs(u);default:return Cs(u,":")}},O:function(a,i,r,t){var l=t._originalDate||a,u=l.getTimezoneOffset();switch(i){case"O":case"OO":case"OOO":return"GMT"+wh(u,":");default:return"GMT"+Cs(u,":")}},z:function(a,i,r,t){var l=t._originalDate||a,u=l.getTimezoneOffset();switch(i){case"z":case"zz":case"zzz":return"GMT"+wh(u,":");default:return"GMT"+Cs(u,":")}},t:function(a,i,r,t){var l=t._originalDate||a,u=Math.floor(l.getTime()/1e3);return zt(u,i.length)},T:function(a,i,r,t){var l=t._originalDate||a,u=l.getTime();return zt(u,i.length)}};function wh(n,a){var i=n>0?"-":"+",r=Math.abs(n),t=Math.floor(r/60),l=r%60;if(l===0)return i+String(t);var u=a;return i+String(t)+u+zt(l,2)}function Nh(n,a){if(n%60===0){var i=n>0?"-":"+";return i+zt(Math.abs(n)/60,2)}return Cs(n,a)}function Cs(n,a){var i=a||"",r=n>0?"-":"+",t=Math.abs(n),l=zt(Math.floor(t/60),2),u=zt(t%60,2);return r+l+i+u}var Sh=function(a,i){switch(a){case"P":return i.date({width:"short"});case"PP":return i.date({width:"medium"});case"PPP":return i.date({width:"long"});default:return i.date({width:"full"})}},bv=function(a,i){switch(a){case"p":return i.time({width:"short"});case"pp":return i.time({width:"medium"});case"ppp":return i.time({width:"long"});default:return i.time({width:"full"})}},hw=function(a,i){var r=a.match(/(P+)(p+)?/)||[],t=r[1],l=r[2];if(!l)return Sh(a,i);var u;switch(t){case"P":u=i.dateTime({width:"short"});break;case"PP":u=i.dateTime({width:"medium"});break;case"PPP":u=i.dateTime({width:"long"});break;default:u=i.dateTime({width:"full"});break}return u.replace("{{date}}",Sh(t,i)).replace("{{time}}",bv(l,i))},Yd={p:bv,P:hw};function cc(n){var a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),n.getTime()-a.getTime()}var gw=["D","DD"],vw=["YY","YYYY"];function wv(n){return gw.indexOf(n)!==-1}function Nv(n){return vw.indexOf(n)!==-1}function uc(n,a,i){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(a,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(a,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(a,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(a,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var xw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yw=function(a,i,r){var t,l=xw[a];return typeof l=="string"?t=l:i===1?t=l.one:t=l.other.replace("{{count}}",i.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+t:t+" ago":t};function hi(n){return function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=a.width?String(a.width):n.defaultWidth,r=n.formats[i]||n.formats[n.defaultWidth];return r}}var bw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ww={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Nw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Sw={date:hi({formats:bw,defaultWidth:"full"}),time:hi({formats:ww,defaultWidth:"full"}),dateTime:hi({formats:Nw,defaultWidth:"full"})},kw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},jw=function(a,i,r,t){return kw[a]};function aa(n){return function(a,i){var r=i!=null&&i.context?String(i.context):"standalone",t;if(r==="formatting"&&n.formattingValues){var l=n.defaultFormattingWidth||n.defaultWidth,u=i!=null&&i.width?String(i.width):l;t=n.formattingValues[u]||n.formattingValues[l]}else{var d=n.defaultWidth,p=i!=null&&i.width?String(i.width):n.defaultWidth;t=n.values[p]||n.values[d]}var h=n.argumentCallback?n.argumentCallback(a):a;return t[h]}}var Cw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ew={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tw={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Dw={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Rw={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pw=function(a,i){var r=Number(a),t=r%100;if(t>20||t<10)switch(t%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},_w={ordinalNumber:Pw,era:aa({values:Cw,defaultWidth:"wide"}),quarter:aa({values:Ew,defaultWidth:"wide",argumentCallback:function(a){return a-1}}),month:aa({values:Tw,defaultWidth:"wide"}),day:aa({values:Dw,defaultWidth:"wide"}),dayPeriod:aa({values:Mw,defaultWidth:"wide",formattingValues:Rw,defaultFormattingWidth:"wide"})};function sa(n){return function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.width,t=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],l=a.match(t);if(!l)return null;var u=l[0],d=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(d)?Aw(d,function(y){return y.test(u)}):Ow(d,function(y){return y.test(u)}),h;h=n.valueCallback?n.valueCallback(p):p,h=i.valueCallback?i.valueCallback(h):h;var v=a.slice(u.length);return{value:h,rest:v}}}function Ow(n,a){for(var i in n)if(n.hasOwnProperty(i)&&a(n[i]))return i}function Aw(n,a){for(var i=0;i<n.length;i++)if(a(n[i]))return i}function Sv(n){return function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.match(n.matchPattern);if(!r)return null;var t=r[0],l=a.match(n.parsePattern);if(!l)return null;var u=n.valueCallback?n.valueCallback(l[0]):l[0];u=i.valueCallback?i.valueCallback(u):u;var d=a.slice(t.length);return{value:u,rest:d}}}var Iw=/^(\d+)(th|st|nd|rd)?/i,Lw=/\d+/i,Fw={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zw={any:[/^b/i,/^(a|c)/i]},Uw={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Bw={any:[/1/i,/2/i,/3/i,/4/i]},$w={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Yw={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ww={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Hw={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kw={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vw={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gw={ordinalNumber:Sv({matchPattern:Iw,parsePattern:Lw,valueCallback:function(a){return parseInt(a,10)}}),era:sa({matchPatterns:Fw,defaultMatchWidth:"wide",parsePatterns:zw,defaultParseWidth:"any"}),quarter:sa({matchPatterns:Uw,defaultMatchWidth:"wide",parsePatterns:Bw,defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:sa({matchPatterns:$w,defaultMatchWidth:"wide",parsePatterns:Yw,defaultParseWidth:"any"}),day:sa({matchPatterns:Ww,defaultMatchWidth:"wide",parsePatterns:Hw,defaultParseWidth:"any"}),dayPeriod:sa({matchPatterns:Kw,defaultMatchWidth:"any",parsePatterns:Vw,defaultParseWidth:"any"})},kv={code:"en-US",formatDistance:yw,formatLong:Sw,formatRelative:jw,localize:_w,match:Gw,options:{weekStartsOn:0,firstWeekContainsDate:1}},Qw=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qw=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jw=/^'([^]*?)'?$/,Xw=/''/g,Zw=/[a-zA-Z]/;function kh(n,a,i){var r,t,l,u,d,p,h,v,y,S,k,j,E,C,F,O,_,$;Pe(2,arguments);var Z=String(a),q=As(),ee=(r=(t=i?.locale)!==null&&t!==void 0?t:q.locale)!==null&&r!==void 0?r:kv,ae=yt((l=(u=(d=(p=i?.firstWeekContainsDate)!==null&&p!==void 0?p:i==null||(h=i.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&d!==void 0?d:q.firstWeekContainsDate)!==null&&u!==void 0?u:(y=q.locale)===null||y===void 0||(S=y.options)===null||S===void 0?void 0:S.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(ae>=1&&ae<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var se=yt((k=(j=(E=(C=i?.weekStartsOn)!==null&&C!==void 0?C:i==null||(F=i.locale)===null||F===void 0||(O=F.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&E!==void 0?E:q.weekStartsOn)!==null&&j!==void 0?j:(_=q.locale)===null||_===void 0||($=_.options)===null||$===void 0?void 0:$.weekStartsOn)!==null&&k!==void 0?k:0);if(!(se>=0&&se<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ee.localize)throw new RangeError("locale must contain localize property");if(!ee.formatLong)throw new RangeError("locale must contain formatLong property");var ie=Ye(n);if(!bo(ie))throw new RangeError("Invalid time value");var re=cc(ie),Ce=gv(ie,re),fe={firstWeekContainsDate:ae,weekStartsOn:se,locale:ee,_originalDate:ie},Me=Z.match(qw).map(function(Te){var Ne=Te[0];if(Ne==="p"||Ne==="P"){var xe=Yd[Ne];return xe(Te,ee.formatLong)}return Te}).join("").match(Qw).map(function(Te){if(Te==="''")return"'";var Ne=Te[0];if(Ne==="'")return eN(Te);var xe=mw[Ne];if(xe)return!(i!=null&&i.useAdditionalWeekYearTokens)&&Nv(Te)&&uc(Te,a,String(n)),!(i!=null&&i.useAdditionalDayOfYearTokens)&&wv(Te)&&uc(Te,a,String(n)),xe(Ce,Te,ee.localize,fe);if(Ne.match(Zw))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ne+"`");return Te}).join("");return Me}function eN(n){var a=n.match(Jw);return a?a[1].replace(Xw,"'"):n}var tN=6e4;function Wd(n,a){Pe(2,arguments);var i=yt(a);return gf(n,i*tN)}var nN=36e5;function rN(n,a){Pe(2,arguments);var i=yt(a);return gf(n,i*nN)}function Ei(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a);return isNaN(r)?new Date(NaN):(r&&i.setDate(i.getDate()+r),i)}function dc(n,a){Pe(2,arguments);var i=yt(a),r=i*7;return Ei(n,r)}function Vr(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a);if(isNaN(r))return new Date(NaN);if(!r)return i;var t=i.getDate(),l=new Date(i.getTime());l.setMonth(i.getMonth()+r+1,0);var u=l.getDate();return t>=u?l:(i.setFullYear(l.getFullYear(),l.getMonth(),t),i)}function jv(n,a){Pe(2,arguments);var i=yt(a),r=i*3;return Vr(n,r)}function vi(n,a){Pe(2,arguments);var i=yt(a);return Vr(n,i*12)}function aN(n,a){Pe(2,arguments);var i=yt(a);return Ei(n,-i)}function jh(n,a){Pe(2,arguments);var i=yt(a);return dc(n,-i)}function xi(n,a){Pe(2,arguments);var i=yt(a);return Vr(n,-i)}function sN(n,a){Pe(2,arguments);var i=yt(a);return jv(n,-i)}function wo(n,a){Pe(2,arguments);var i=yt(a);return vi(n,-i)}function Ch(n){Pe(1,arguments);var a=Ye(n),i=a.getSeconds();return i}function la(n){Pe(1,arguments);var a=Ye(n),i=a.getMinutes();return i}function ca(n){Pe(1,arguments);var a=Ye(n),i=a.getHours();return i}function iN(n){Pe(1,arguments);var a=Ye(n),i=a.getDay();return i}function Eh(n){Pe(1,arguments);var a=Ye(n),i=a.getDate();return i}function Cv(n,a){var i,r,t,l,u,d,p,h;Pe(1,arguments);var v=As(),y=yt((i=(r=(t=(l=a?.weekStartsOn)!==null&&l!==void 0?l:a==null||(u=a.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:v.weekStartsOn)!==null&&r!==void 0?r:(p=v.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var S=Ye(n),k=S.getDay(),j=(k<y?7:0)+k-y;return S.setDate(S.getDate()-j),S.setHours(0,0,0,0),S}function fc(n){return Pe(1,arguments),Cv(n,{weekStartsOn:1})}function oN(n){Pe(1,arguments);var a=Ye(n),i=a.getFullYear(),r=new Date(0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);var t=fc(r),l=new Date(0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);var u=fc(l);return a.getTime()>=t.getTime()?i+1:a.getTime()>=u.getTime()?i:i-1}function lN(n){Pe(1,arguments);var a=oN(n),i=new Date(0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);var r=fc(i);return r}var cN=6048e5;function uN(n){Pe(1,arguments);var a=Ye(n),i=fc(a).getTime()-lN(a).getTime();return Math.round(i/cN)+1}function Vn(n){Pe(1,arguments);var a=Ye(n),i=a.getMonth();return i}function ui(n){Pe(1,arguments);var a=Ye(n),i=Math.floor(a.getMonth()/3)+1;return i}function St(n){return Pe(1,arguments),Ye(n).getFullYear()}function Hd(n){Pe(1,arguments);var a=Ye(n),i=a.getTime();return i}function dN(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a);return i.setSeconds(r),i}function Xl(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a);return i.setMinutes(r),i}function Zl(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a);return i.setHours(r),i}function fN(n){Pe(1,arguments);var a=Ye(n),i=a.getFullYear(),r=a.getMonth(),t=new Date(0);return t.setFullYear(i,r+1,0),t.setHours(0,0,0,0),t.getDate()}function Xn(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a),t=i.getFullYear(),l=i.getDate(),u=new Date(0);u.setFullYear(t,r,15),u.setHours(0,0,0,0);var d=fN(u);return i.setMonth(r,Math.min(l,d)),i}function ci(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a),t=Math.floor(i.getMonth()/3)+1,l=r-t;return Xn(i,i.getMonth()+l*3)}function Ea(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a);return isNaN(i.getTime())?new Date(NaN):(i.setFullYear(r),i)}function Th(n){Pe(1,arguments);var a;if(n&&typeof n.forEach=="function")a=n;else if(Dr(n)==="object"&&n!==null)a=Array.prototype.slice.call(n);else return new Date(NaN);var i;return a.forEach(function(r){var t=Ye(r);(i===void 0||i>t||isNaN(t.getDate()))&&(i=t)}),i||new Date(NaN)}function Dh(n){Pe(1,arguments);var a;if(n&&typeof n.forEach=="function")a=n;else if(Dr(n)==="object"&&n!==null)a=Array.prototype.slice.call(n);else return new Date(NaN);var i;return a.forEach(function(r){var t=Ye(r);(i===void 0||i<t||isNaN(Number(t)))&&(i=t)}),i||new Date(NaN)}function ua(n){Pe(1,arguments);var a=Ye(n);return a.setHours(0,0,0,0),a}var pN=864e5;function pc(n,a){Pe(2,arguments);var i=ua(n),r=ua(a),t=i.getTime()-cc(i),l=r.getTime()-cc(r);return Math.round((t-l)/pN)}function mc(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a),t=i.getFullYear()-r.getFullYear(),l=i.getMonth()-r.getMonth();return t*12+l}function hc(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a);return i.getFullYear()-r.getFullYear()}function Ev(n){Pe(1,arguments);var a=Ye(n);return a.setDate(1),a.setHours(0,0,0,0),a}function Kd(n){Pe(1,arguments);var a=Ye(n),i=a.getMonth(),r=i-i%3;return a.setMonth(r,1),a.setHours(0,0,0,0),a}function Tv(n){Pe(1,arguments);var a=Ye(n),i=new Date(0);return i.setFullYear(a.getFullYear(),0,1),i.setHours(0,0,0,0),i}function Vd(n){Pe(1,arguments);var a=Ye(n);return a.setHours(23,59,59,999),a}function mN(n){Pe(1,arguments);var a=Ye(n),i=a.getMonth();return a.setFullYear(a.getFullYear(),i+1,0),a.setHours(23,59,59,999),a}function hN(n){Pe(1,arguments);var a=Ye(n),i=a.getFullYear();return a.setFullYear(i+1,0,0),a.setHours(23,59,59,999),a}function gN(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a);return i.getTime()===r.getTime()}function vN(n,a){Pe(2,arguments);var i=ua(n),r=ua(a);return i.getTime()===r.getTime()}function xN(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}function yN(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a);return i.getFullYear()===r.getFullYear()}function bN(n,a){Pe(2,arguments);var i=Kd(n),r=Kd(a);return i.getTime()===r.getTime()}function ns(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a);return i.getTime()>r.getTime()}function Xa(n,a){Pe(2,arguments);var i=Ye(n),r=Ye(a);return i.getTime()<r.getTime()}function No(n,a){Pe(2,arguments);var i=Ye(n).getTime(),r=Ye(a.start).getTime(),t=Ye(a.end).getTime();if(!(r<=t))throw new RangeError("Invalid interval");return i>=r&&i<=t}function Mh(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,r=Array(a);i<a;i++)r[i]=n[i];return r}function wN(n,a){if(n){if(typeof n=="string")return Mh(n,a);var i={}.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Mh(n,a):void 0}}function Rh(n,a){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=wN(n))||a){i&&(n=i);var r=0,t=function(){};return{s:t,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,u=!0,d=!1;return{s:function(){i=i.call(n)},n:function(){var h=i.next();return u=h.done,h},e:function(h){d=!0,l=h},f:function(){try{u||i.return==null||i.return()}finally{if(d)throw l}}}}function NN(n,a){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i]);return n}function ze(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Gd(n,a){return Gd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Gd(n,a)}function Dt(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&Gd(n,a)}function gc(n){return gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},gc(n)}function Dv(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dv=function(){return!!n})()}function SN(n,a){if(a&&(Dr(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ze(n)}function Mt(n){var a=Dv();return function(){var i,r=gc(n);if(a){var t=gc(this).constructor;i=Reflect.construct(r,arguments,t)}else i=r.apply(this,arguments);return SN(this,i)}}function jt(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function kN(n,a){if(Dr(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,a);if(Dr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function Mv(n){var a=kN(n,"string");return Dr(a)=="symbol"?a:a+""}function jN(n,a){for(var i=0;i<a.length;i++){var r=a[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Mv(r.key),r)}}function Ct(n,a,i){return a&&jN(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ae(n,a,i){return(a=Mv(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}var CN=10,Rv=(function(){function n(){jt(this,n),Ae(this,"priority",void 0),Ae(this,"subPriority",0)}return Ct(n,[{key:"validate",value:function(i,r){return!0}}]),n})(),EN=(function(n){Dt(i,n);var a=Mt(i);function i(r,t,l,u,d){var p;return jt(this,i),p=a.call(this),p.value=r,p.validateValue=t,p.setValue=l,p.priority=u,d&&(p.subPriority=d),p}return Ct(i,[{key:"validate",value:function(t,l){return this.validateValue(t,this.value,l)}},{key:"set",value:function(t,l,u){return this.setValue(t,l,this.value,u)}}]),i})(Rv),TN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",CN),Ae(ze(r),"subPriority",-1),r}return Ct(i,[{key:"set",value:function(t,l){if(l.timestampIsSet)return t;var u=new Date(0);return u.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),u.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),u}}]),i})(Rv),It=(function(){function n(){jt(this,n),Ae(this,"incompatibleTokens",void 0),Ae(this,"priority",void 0),Ae(this,"subPriority",void 0)}return Ct(n,[{key:"run",value:function(i,r,t,l){var u=this.parse(i,r,t,l);return u?{setter:new EN(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}},{key:"validate",value:function(i,r,t){return!0}}]),n})(),DN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",140),Ae(ze(r),"incompatibleTokens",["R","u","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"G":case"GG":case"GGG":return u.era(t,{width:"abbreviated"})||u.era(t,{width:"narrow"});case"GGGGG":return u.era(t,{width:"narrow"});default:return u.era(t,{width:"wide"})||u.era(t,{width:"abbreviated"})||u.era(t,{width:"narrow"})}}},{key:"set",value:function(t,l,u){return l.era=u,t.setUTCFullYear(u,0,1),t.setUTCHours(0,0,0,0),t}}]),i})(It),xf=6e4,yf=36e5,MN=1e3,vn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ia={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function xn(n,a){return n&&{value:a(n.value),rest:n.rest}}function dn(n,a){var i=a.match(n);return i?{value:parseInt(i[0],10),rest:a.slice(i[0].length)}:null}function oa(n,a){var i=a.match(n);if(!i)return null;if(i[0]==="Z")return{value:0,rest:a.slice(1)};var r=i[1]==="+"?1:-1,t=i[2]?parseInt(i[2],10):0,l=i[3]?parseInt(i[3],10):0,u=i[5]?parseInt(i[5],10):0;return{value:r*(t*yf+l*xf+u*MN),rest:a.slice(i[0].length)}}function Pv(n){return dn(vn.anyDigitsSigned,n)}function mn(n,a){switch(n){case 1:return dn(vn.singleDigit,a);case 2:return dn(vn.twoDigits,a);case 3:return dn(vn.threeDigits,a);case 4:return dn(vn.fourDigits,a);default:return dn(new RegExp("^\\d{1,"+n+"}"),a)}}function vc(n,a){switch(n){case 1:return dn(vn.singleDigitSigned,a);case 2:return dn(vn.twoDigitsSigned,a);case 3:return dn(vn.threeDigitsSigned,a);case 4:return dn(vn.fourDigitsSigned,a);default:return dn(new RegExp("^-?\\d{1,"+n+"}"),a)}}function bf(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function _v(n,a){var i=a>0,r=i?a:1-a,t;if(r<=50)t=n||100;else{var l=r+50,u=Math.floor(l/100)*100,d=n>=l%100;t=n+u-(d?100:0)}return i?t:1-t}function Ov(n){return n%400===0||n%4===0&&n%100!==0}var RN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",130),Ae(ze(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return{year:h,isTwoDigitYear:l==="yy"}};switch(l){case"y":return xn(mn(4,t),d);case"yo":return xn(u.ordinalNumber(t,{unit:"year"}),d);default:return xn(mn(l.length,t),d)}}},{key:"validate",value:function(t,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(t,l,u){var d=t.getUTCFullYear();if(u.isTwoDigitYear){var p=_v(u.year,d);return t.setUTCFullYear(p,0,1),t.setUTCHours(0,0,0,0),t}var h=!("era"in l)||l.era===1?u.year:1-u.year;return t.setUTCFullYear(h,0,1),t.setUTCHours(0,0,0,0),t}}]),i})(It),PN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",130),Ae(ze(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return{year:h,isTwoDigitYear:l==="YY"}};switch(l){case"Y":return xn(mn(4,t),d);case"Yo":return xn(u.ordinalNumber(t,{unit:"year"}),d);default:return xn(mn(l.length,t),d)}}},{key:"validate",value:function(t,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(t,l,u,d){var p=vf(t,d);if(u.isTwoDigitYear){var h=_v(u.year,p);return t.setUTCFullYear(h,0,d.firstWeekContainsDate),t.setUTCHours(0,0,0,0),_s(t,d)}var v=!("era"in l)||l.era===1?u.year:1-u.year;return t.setUTCFullYear(v,0,d.firstWeekContainsDate),t.setUTCHours(0,0,0,0),_s(t,d)}}]),i})(It),_N=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",130),Ae(ze(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l){return vc(l==="R"?4:l.length,t)}},{key:"set",value:function(t,l,u){var d=new Date(0);return d.setUTCFullYear(u,0,4),d.setUTCHours(0,0,0,0),gi(d)}}]),i})(It),ON=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",130),Ae(ze(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l){return vc(l==="u"?4:l.length,t)}},{key:"set",value:function(t,l,u){return t.setUTCFullYear(u,0,1),t.setUTCHours(0,0,0,0),t}}]),i})(It),AN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",120),Ae(ze(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"Q":case"QQ":return mn(l.length,t);case"Qo":return u.ordinalNumber(t,{unit:"quarter"});case"QQQ":return u.quarter(t,{width:"abbreviated",context:"formatting"})||u.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return u.quarter(t,{width:"narrow",context:"formatting"});default:return u.quarter(t,{width:"wide",context:"formatting"})||u.quarter(t,{width:"abbreviated",context:"formatting"})||u.quarter(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=1&&l<=4}},{key:"set",value:function(t,l,u){return t.setUTCMonth((u-1)*3,1),t.setUTCHours(0,0,0,0),t}}]),i})(It),IN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",120),Ae(ze(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"q":case"qq":return mn(l.length,t);case"qo":return u.ordinalNumber(t,{unit:"quarter"});case"qqq":return u.quarter(t,{width:"abbreviated",context:"standalone"})||u.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return u.quarter(t,{width:"narrow",context:"standalone"});default:return u.quarter(t,{width:"wide",context:"standalone"})||u.quarter(t,{width:"abbreviated",context:"standalone"})||u.quarter(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,l){return l>=1&&l<=4}},{key:"set",value:function(t,l,u){return t.setUTCMonth((u-1)*3,1),t.setUTCHours(0,0,0,0),t}}]),i})(It),LN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Ae(ze(r),"priority",110),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return h-1};switch(l){case"M":return xn(dn(vn.month,t),d);case"MM":return xn(mn(2,t),d);case"Mo":return xn(u.ordinalNumber(t,{unit:"month"}),d);case"MMM":return u.month(t,{width:"abbreviated",context:"formatting"})||u.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return u.month(t,{width:"narrow",context:"formatting"});default:return u.month(t,{width:"wide",context:"formatting"})||u.month(t,{width:"abbreviated",context:"formatting"})||u.month(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=11}},{key:"set",value:function(t,l,u){return t.setUTCMonth(u,1),t.setUTCHours(0,0,0,0),t}}]),i})(It),FN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",110),Ae(ze(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return h-1};switch(l){case"L":return xn(dn(vn.month,t),d);case"LL":return xn(mn(2,t),d);case"Lo":return xn(u.ordinalNumber(t,{unit:"month"}),d);case"LLL":return u.month(t,{width:"abbreviated",context:"standalone"})||u.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return u.month(t,{width:"narrow",context:"standalone"});default:return u.month(t,{width:"wide",context:"standalone"})||u.month(t,{width:"abbreviated",context:"standalone"})||u.month(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=11}},{key:"set",value:function(t,l,u){return t.setUTCMonth(u,1),t.setUTCHours(0,0,0,0),t}}]),i})(It);function zN(n,a,i){Pe(2,arguments);var r=Ye(n),t=yt(a),l=yv(r,i)-t;return r.setUTCDate(r.getUTCDate()-l*7),r}var UN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",100),Ae(ze(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"w":return dn(vn.week,t);case"wo":return u.ordinalNumber(t,{unit:"week"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=53}},{key:"set",value:function(t,l,u,d){return _s(zN(t,u,d),d)}}]),i})(It);function BN(n,a){Pe(2,arguments);var i=Ye(n),r=yt(a),t=xv(i)-r;return i.setUTCDate(i.getUTCDate()-t*7),i}var $N=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",100),Ae(ze(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"I":return dn(vn.week,t);case"Io":return u.ordinalNumber(t,{unit:"week"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=53}},{key:"set",value:function(t,l,u){return gi(BN(t,u))}}]),i})(It),YN=[31,28,31,30,31,30,31,31,30,31,30,31],WN=[31,29,31,30,31,30,31,31,30,31,30,31],HN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",90),Ae(ze(r),"subPriority",1),Ae(ze(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"d":return dn(vn.date,t);case"do":return u.ordinalNumber(t,{unit:"date"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){var u=t.getUTCFullYear(),d=Ov(u),p=t.getUTCMonth();return d?l>=1&&l<=WN[p]:l>=1&&l<=YN[p]}},{key:"set",value:function(t,l,u){return t.setUTCDate(u),t.setUTCHours(0,0,0,0),t}}]),i})(It),KN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",90),Ae(ze(r),"subpriority",1),Ae(ze(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"D":case"DD":return dn(vn.dayOfYear,t);case"Do":return u.ordinalNumber(t,{unit:"date"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){var u=t.getUTCFullYear(),d=Ov(u);return d?l>=1&&l<=366:l>=1&&l<=365}},{key:"set",value:function(t,l,u){return t.setUTCMonth(0,u),t.setUTCHours(0,0,0,0),t}}]),i})(It);function wf(n,a,i){var r,t,l,u,d,p,h,v;Pe(2,arguments);var y=As(),S=yt((r=(t=(l=(u=i?.weekStartsOn)!==null&&u!==void 0?u:i==null||(d=i.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&l!==void 0?l:y.weekStartsOn)!==null&&t!==void 0?t:(h=y.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&r!==void 0?r:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var k=Ye(n),j=yt(a),E=k.getUTCDay(),C=j%7,F=(C+7)%7,O=(F<S?7:0)+j-E;return k.setUTCDate(k.getUTCDate()+O),k}var VN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",90),Ae(ze(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"E":case"EE":case"EEE":return u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return u.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});default:return u.day(t,{width:"wide",context:"formatting"})||u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=6}},{key:"set",value:function(t,l,u,d){return t=wf(t,u,d),t.setUTCHours(0,0,0,0),t}}]),i})(It),GN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",90),Ae(ze(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u,d){var p=function(v){var y=Math.floor((v-1)/7)*7;return(v+d.weekStartsOn+6)%7+y};switch(l){case"e":case"ee":return xn(mn(l.length,t),p);case"eo":return xn(u.ordinalNumber(t,{unit:"day"}),p);case"eee":return u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});case"eeeee":return u.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});default:return u.day(t,{width:"wide",context:"formatting"})||u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=6}},{key:"set",value:function(t,l,u,d){return t=wf(t,u,d),t.setUTCHours(0,0,0,0),t}}]),i})(It),QN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",90),Ae(ze(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u,d){var p=function(v){var y=Math.floor((v-1)/7)*7;return(v+d.weekStartsOn+6)%7+y};switch(l){case"c":case"cc":return xn(mn(l.length,t),p);case"co":return xn(u.ordinalNumber(t,{unit:"day"}),p);case"ccc":return u.day(t,{width:"abbreviated",context:"standalone"})||u.day(t,{width:"short",context:"standalone"})||u.day(t,{width:"narrow",context:"standalone"});case"ccccc":return u.day(t,{width:"narrow",context:"standalone"});case"cccccc":return u.day(t,{width:"short",context:"standalone"})||u.day(t,{width:"narrow",context:"standalone"});default:return u.day(t,{width:"wide",context:"standalone"})||u.day(t,{width:"abbreviated",context:"standalone"})||u.day(t,{width:"short",context:"standalone"})||u.day(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=6}},{key:"set",value:function(t,l,u,d){return t=wf(t,u,d),t.setUTCHours(0,0,0,0),t}}]),i})(It);function qN(n,a){Pe(2,arguments);var i=yt(a);i%7===0&&(i=i-7);var r=1,t=Ye(n),l=t.getUTCDay(),u=i%7,d=(u+7)%7,p=(d<r?7:0)+i-l;return t.setUTCDate(t.getUTCDate()+p),t}var JN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",90),Ae(ze(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return h===0?7:h};switch(l){case"i":case"ii":return mn(l.length,t);case"io":return u.ordinalNumber(t,{unit:"day"});case"iii":return xn(u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"}),d);case"iiiii":return xn(u.day(t,{width:"narrow",context:"formatting"}),d);case"iiiiii":return xn(u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"}),d);default:return xn(u.day(t,{width:"wide",context:"formatting"})||u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"}),d)}}},{key:"validate",value:function(t,l){return l>=1&&l<=7}},{key:"set",value:function(t,l,u){return t=qN(t,u),t.setUTCHours(0,0,0,0),t}}]),i})(It),XN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",80),Ae(ze(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"a":case"aa":case"aaa":return u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return u.dayPeriod(t,{width:"narrow",context:"formatting"});default:return u.dayPeriod(t,{width:"wide",context:"formatting"})||u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,l,u){return t.setUTCHours(bf(u),0,0,0),t}}]),i})(It),ZN=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",80),Ae(ze(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"b":case"bb":case"bbb":return u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return u.dayPeriod(t,{width:"narrow",context:"formatting"});default:return u.dayPeriod(t,{width:"wide",context:"formatting"})||u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,l,u){return t.setUTCHours(bf(u),0,0,0),t}}]),i})(It),eS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",80),Ae(ze(r),"incompatibleTokens",["a","b","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"B":case"BB":case"BBB":return u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return u.dayPeriod(t,{width:"narrow",context:"formatting"});default:return u.dayPeriod(t,{width:"wide",context:"formatting"})||u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,l,u){return t.setUTCHours(bf(u),0,0,0),t}}]),i})(It),tS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",70),Ae(ze(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"h":return dn(vn.hour12h,t);case"ho":return u.ordinalNumber(t,{unit:"hour"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=12}},{key:"set",value:function(t,l,u){var d=t.getUTCHours()>=12;return d&&u<12?t.setUTCHours(u+12,0,0,0):!d&&u===12?t.setUTCHours(0,0,0,0):t.setUTCHours(u,0,0,0),t}}]),i})(It),nS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",70),Ae(ze(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"H":return dn(vn.hour23h,t);case"Ho":return u.ordinalNumber(t,{unit:"hour"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=23}},{key:"set",value:function(t,l,u){return t.setUTCHours(u,0,0,0),t}}]),i})(It),rS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",70),Ae(ze(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"K":return dn(vn.hour11h,t);case"Ko":return u.ordinalNumber(t,{unit:"hour"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=11}},{key:"set",value:function(t,l,u){var d=t.getUTCHours()>=12;return d&&u<12?t.setUTCHours(u+12,0,0,0):t.setUTCHours(u,0,0,0),t}}]),i})(It),aS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",70),Ae(ze(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"k":return dn(vn.hour24h,t);case"ko":return u.ordinalNumber(t,{unit:"hour"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=24}},{key:"set",value:function(t,l,u){var d=u<=24?u%24:u;return t.setUTCHours(d,0,0,0),t}}]),i})(It),sS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",60),Ae(ze(r),"incompatibleTokens",["t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"m":return dn(vn.minute,t);case"mo":return u.ordinalNumber(t,{unit:"minute"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=59}},{key:"set",value:function(t,l,u){return t.setUTCMinutes(u,0,0),t}}]),i})(It),iS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",50),Ae(ze(r),"incompatibleTokens",["t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"s":return dn(vn.second,t);case"so":return u.ordinalNumber(t,{unit:"second"});default:return mn(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=59}},{key:"set",value:function(t,l,u){return t.setUTCSeconds(u,0),t}}]),i})(It),oS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",30),Ae(ze(r),"incompatibleTokens",["t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l){var u=function(p){return Math.floor(p*Math.pow(10,-l.length+3))};return xn(mn(l.length,t),u)}},{key:"set",value:function(t,l,u){return t.setUTCMilliseconds(u),t}}]),i})(It),lS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",10),Ae(ze(r),"incompatibleTokens",["t","T","x"]),r}return Ct(i,[{key:"parse",value:function(t,l){switch(l){case"X":return oa(ia.basicOptionalMinutes,t);case"XX":return oa(ia.basic,t);case"XXXX":return oa(ia.basicOptionalSeconds,t);case"XXXXX":return oa(ia.extendedOptionalSeconds,t);default:return oa(ia.extended,t)}}},{key:"set",value:function(t,l,u){return l.timestampIsSet?t:new Date(t.getTime()-u)}}]),i})(It),cS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",10),Ae(ze(r),"incompatibleTokens",["t","T","X"]),r}return Ct(i,[{key:"parse",value:function(t,l){switch(l){case"x":return oa(ia.basicOptionalMinutes,t);case"xx":return oa(ia.basic,t);case"xxxx":return oa(ia.basicOptionalSeconds,t);case"xxxxx":return oa(ia.extendedOptionalSeconds,t);default:return oa(ia.extended,t)}}},{key:"set",value:function(t,l,u){return l.timestampIsSet?t:new Date(t.getTime()-u)}}]),i})(It),uS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",40),Ae(ze(r),"incompatibleTokens","*"),r}return Ct(i,[{key:"parse",value:function(t){return Pv(t)}},{key:"set",value:function(t,l,u){return[new Date(u*1e3),{timestampIsSet:!0}]}}]),i})(It),dS=(function(n){Dt(i,n);var a=Mt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=a.call.apply(a,[this].concat(l)),Ae(ze(r),"priority",20),Ae(ze(r),"incompatibleTokens","*"),r}return Ct(i,[{key:"parse",value:function(t){return Pv(t)}},{key:"set",value:function(t,l,u){return[new Date(u),{timestampIsSet:!0}]}}]),i})(It),fS={G:new DN,y:new RN,Y:new PN,R:new _N,u:new ON,Q:new AN,q:new IN,M:new LN,L:new FN,w:new UN,I:new $N,d:new HN,D:new KN,E:new VN,e:new GN,c:new QN,i:new JN,a:new XN,b:new ZN,B:new eS,h:new tS,H:new nS,K:new rS,k:new aS,m:new sS,s:new iS,S:new oS,X:new lS,x:new cS,t:new uS,T:new dS},pS=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mS=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hS=/^'([^]*?)'?$/,gS=/''/g,vS=/\S/,xS=/[a-zA-Z]/;function xd(n,a,i,r){var t,l,u,d,p,h,v,y,S,k,j,E,C,F,O,_,$,Z;Pe(3,arguments);var q=String(n),ee=String(a),ae=As(),se=(t=(l=r?.locale)!==null&&l!==void 0?l:ae.locale)!==null&&t!==void 0?t:kv;if(!se.match)throw new RangeError("locale must contain match property");var ie=yt((u=(d=(p=(h=r?.firstWeekContainsDate)!==null&&h!==void 0?h:r==null||(v=r.locale)===null||v===void 0||(y=v.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&p!==void 0?p:ae.firstWeekContainsDate)!==null&&d!==void 0?d:(S=ae.locale)===null||S===void 0||(k=S.options)===null||k===void 0?void 0:k.firstWeekContainsDate)!==null&&u!==void 0?u:1);if(!(ie>=1&&ie<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var re=yt((j=(E=(C=(F=r?.weekStartsOn)!==null&&F!==void 0?F:r==null||(O=r.locale)===null||O===void 0||(_=O.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&C!==void 0?C:ae.weekStartsOn)!==null&&E!==void 0?E:($=ae.locale)===null||$===void 0||(Z=$.options)===null||Z===void 0?void 0:Z.weekStartsOn)!==null&&j!==void 0?j:0);if(!(re>=0&&re<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(ee==="")return q===""?Ye(i):new Date(NaN);var Ce={firstWeekContainsDate:ie,weekStartsOn:re,locale:se},fe=[new TN],Me=ee.match(mS).map(function(oe){var le=oe[0];if(le in Yd){var me=Yd[le];return me(oe,se.formatLong)}return oe}).join("").match(pS),Te=[],Ne=Rh(Me),xe;try{var L=function(){var le=xe.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&Nv(le)&&uc(le,ee,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&wv(le)&&uc(le,ee,n);var me=le[0],Oe=fS[me];if(Oe){var Je=Oe.incompatibleTokens;if(Array.isArray(Je)){var qe=Te.find(function(rt){return Je.includes(rt.token)||rt.token===me});if(qe)throw new RangeError("The format string mustn't contain `".concat(qe.fullToken,"` and `").concat(le,"` at the same time"))}else if(Oe.incompatibleTokens==="*"&&Te.length>0)throw new RangeError("The format string mustn't contain `".concat(le,"` and any other token at the same time"));Te.push({token:me,fullToken:le});var ut=Oe.run(q,le,se.match,Ce);if(!ut)return{v:new Date(NaN)};fe.push(ut.setter),q=ut.rest}else{if(me.match(xS))throw new RangeError("Format string contains an unescaped latin alphabet character `"+me+"`");if(le==="''"?le="'":me==="'"&&(le=yS(le)),q.indexOf(le)===0)q=q.slice(le.length);else return{v:new Date(NaN)}}};for(Ne.s();!(xe=Ne.n()).done;){var V=L();if(Dr(V)==="object")return V.v}}catch(oe){Ne.e(oe)}finally{Ne.f()}if(q.length>0&&vS.test(q))return new Date(NaN);var Q=fe.map(function(oe){return oe.priority}).sort(function(oe,le){return le-oe}).filter(function(oe,le,me){return me.indexOf(oe)===le}).map(function(oe){return fe.filter(function(le){return le.priority===oe}).sort(function(le,me){return me.subPriority-le.subPriority})}).map(function(oe){return oe[0]}),T=Ye(i);if(isNaN(T.getTime()))return new Date(NaN);var Y=gv(T,cc(T)),H={},ye=Rh(Q),De;try{for(ye.s();!(De=ye.n()).done;){var ke=De.value;if(!ke.validate(Y,Ce))return new Date(NaN);var Ue=ke.set(Y,H,Ce);Array.isArray(Ue)?(Y=Ue[0],NN(H,Ue[1])):Y=Ue}}catch(oe){ye.e(oe)}finally{ye.f()}return Y}function yS(n){return n.match(hS)[1].replace(gS,"'")}function bS(n,a){var i;Pe(1,arguments);var r=yt((i=void 0)!==null&&i!==void 0?i:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var t=kS(n),l;if(t.date){var u=jS(t.date,r);l=CS(u.restDateString,u.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);var d=l.getTime(),p=0,h;if(t.time&&(p=ES(t.time),isNaN(p)))return new Date(NaN);if(t.timezone){if(h=TS(t.timezone),isNaN(h))return new Date(NaN)}else{var v=new Date(d+p),y=new Date(0);return y.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),y.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),y}return new Date(d+p+h)}var Fl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},wS=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,NS=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,SS=/^([+-])(\d{2})(?::?(\d{2}))?$/;function kS(n){var a={},i=n.split(Fl.dateTimeDelimiter),r;if(i.length>2)return a;if(/:/.test(i[0])?r=i[0]:(a.date=i[0],r=i[1],Fl.timeZoneDelimiter.test(a.date)&&(a.date=n.split(Fl.timeZoneDelimiter)[0],r=n.substr(a.date.length,n.length))),r){var t=Fl.timezone.exec(r);t?(a.time=r.replace(t[1],""),a.timezone=t[1]):a.time=r}return a}function jS(n,a){var i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),r=n.match(i);if(!r)return{year:NaN,restDateString:""};var t=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:l===null?t:l*100,restDateString:n.slice((r[1]||r[2]).length)}}function CS(n,a){if(a===null)return new Date(NaN);var i=n.match(wS);if(!i)return new Date(NaN);var r=!!i[4],t=ro(i[1]),l=ro(i[2])-1,u=ro(i[3]),d=ro(i[4]),p=ro(i[5])-1;if(r)return _S(a,d,p)?DS(a,d,p):new Date(NaN);var h=new Date(0);return!RS(a,l,u)||!PS(a,t)?new Date(NaN):(h.setUTCFullYear(a,l,Math.max(t,u)),h)}function ro(n){return n?parseInt(n):1}function ES(n){var a=n.match(NS);if(!a)return NaN;var i=yd(a[1]),r=yd(a[2]),t=yd(a[3]);return OS(i,r,t)?i*yf+r*xf+t*1e3:NaN}function yd(n){return n&&parseFloat(n.replace(",","."))||0}function TS(n){if(n==="Z")return 0;var a=n.match(SS);if(!a)return 0;var i=a[1]==="+"?-1:1,r=parseInt(a[2]),t=a[3]&&parseInt(a[3])||0;return AS(r,t)?i*(r*yf+t*xf):NaN}function DS(n,a,i){var r=new Date(0);r.setUTCFullYear(n,0,4);var t=r.getUTCDay()||7,l=(a-1)*7+i+1-t;return r.setUTCDate(r.getUTCDate()+l),r}var MS=[31,null,31,30,31,30,31,31,30,31,30,31];function Av(n){return n%400===0||n%4===0&&n%100!==0}function RS(n,a,i){return a>=0&&a<=11&&i>=1&&i<=(MS[a]||(Av(n)?29:28))}function PS(n,a){return a>=1&&a<=(Av(n)?366:365)}function _S(n,a,i){return a>=1&&a<=53&&i>=0&&i<=6}function OS(n,a,i){return n===24?a===0&&i===0:i>=0&&i<60&&a>=0&&a<60&&n>=0&&n<25}function AS(n,a){return a>=0&&a<=59}function IS(n,a){n.prototype=Object.create(a.prototype),n.prototype.constructor=n,Qd(n,a)}function Qd(n,a){return Qd=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r},Qd(n,a)}function LS(n,a){if(n==null)return{};var i={},r=Object.keys(n),t,l;for(l=0;l<r.length;l++)t=r[l],!(a.indexOf(t)>=0)&&(i[t]=n[t]);return i}function Ph(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function FS(n,a,i){return n===a?!0:n.correspondingElement?n.correspondingElement.classList.contains(i):n.classList.contains(i)}function zS(n,a,i){if(n===a)return!0;for(;n.parentNode||n.host;){if(n.parentNode&&FS(n,a,i))return!0;n=n.parentNode||n.host}return n}function US(n){return document.documentElement.clientWidth<=n.clientX||document.documentElement.clientHeight<=n.clientY}var BS=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var a=!1,i=Object.defineProperty({},"passive",{get:function(){a=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,i),window.removeEventListener("testPassiveEventSupport",r,i),a}};function $S(n){return n===void 0&&(n=0),function(){return++n}}var YS=$S(),qd,zl={},bd={},WS=["touchstart","touchmove"],HS="ignore-react-onclickoutside";function _h(n,a){var i={},r=WS.indexOf(a)!==-1;return r&&qd&&(i.passive=!n.props.preventDefault),i}function Tc(n,a){var i,r,t=n.displayName||n.name||"Component";return r=i=(function(l){IS(u,l);function u(p){var h;return h=l.call(this,p)||this,h.__outsideClickHandler=function(v){if(typeof h.__clickOutsideHandlerProp=="function"){h.__clickOutsideHandlerProp(v);return}var y=h.getInstance();if(typeof y.props.handleClickOutside=="function"){y.props.handleClickOutside(v);return}if(typeof y.handleClickOutside=="function"){y.handleClickOutside(v);return}throw new Error("WrappedComponent: "+t+" lacks a handleClickOutside(event) function for processing outside click events.")},h.__getComponentNode=function(){var v=h.getInstance();return typeof v.setClickOutsideRef=="function"?v.setClickOutsideRef():Ta.findDOMNode(v)},h.enableOnClickOutside=function(){if(!(typeof document>"u"||bd[h._uid])){typeof qd>"u"&&(qd=BS()),bd[h._uid]=!0;var v=h.props.eventTypes;v.forEach||(v=[v]),zl[h._uid]=function(y){if(h.componentNode!==null&&!(h.initTimeStamp>y.timeStamp)&&(h.props.preventDefault&&y.preventDefault(),h.props.stopPropagation&&y.stopPropagation(),!(h.props.excludeScrollbar&&US(y)))){var S=y.composed&&y.composedPath&&y.composedPath().shift()||y.target;zS(S,h.componentNode,h.props.outsideClickIgnoreClass)===document&&h.__outsideClickHandler(y)}},v.forEach(function(y){document.addEventListener(y,zl[h._uid],_h(Ph(h),y))})}},h.disableOnClickOutside=function(){delete bd[h._uid];var v=zl[h._uid];if(v&&typeof document<"u"){var y=h.props.eventTypes;y.forEach||(y=[y]),y.forEach(function(S){return document.removeEventListener(S,v,_h(Ph(h),S))}),delete zl[h._uid]}},h.getRef=function(v){return h.instanceRef=v},h._uid=YS(),h.initTimeStamp=performance.now(),h}var d=u.prototype;return d.getInstance=function(){if(n.prototype&&!n.prototype.isReactComponent)return this;var h=this.instanceRef;return h.getInstance?h.getInstance():h},d.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},d.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},d.componentWillUnmount=function(){this.disableOnClickOutside()},d.render=function(){var h=this.props;h.excludeScrollbar;var v=LS(h,["excludeScrollbar"]);return n.prototype&&n.prototype.isReactComponent?v.ref=this.getRef:v.wrappedRef=this.getRef,v.disableOnClickOutside=this.disableOnClickOutside,v.enableOnClickOutside=this.enableOnClickOutside,x.createElement(n,v)},u})(x.Component),i.displayName="OnClickOutside("+t+")",i.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:HS,preventDefault:!1,stopPropagation:!1},i.getClass=function(){return n.getClass?n.getClass():n},r}var Iv=x.createContext(),Lv=x.createContext();function KS(n){var a=n.children,i=x.useState(null),r=i[0],t=i[1],l=x.useRef(!1);x.useEffect(function(){return function(){l.current=!0}},[]);var u=x.useCallback(function(d){l.current||t(d)},[]);return x.createElement(Iv.Provider,{value:r},x.createElement(Lv.Provider,{value:u},a))}var Fv=function(a){return Array.isArray(a)?a[0]:a},zv=function(a){if(typeof a=="function"){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return a.apply(void 0,r)}},Jd=function(a,i){if(typeof a=="function")return zv(a,i);a!=null&&(a.current=i)},Oh=function(a){return a.reduce(function(i,r){var t=r[0],l=r[1];return i[t]=l,i},{})},Ah=typeof window<"u"&&window.document&&window.document.createElement?x.useLayoutEffect:x.useEffect,lr="top",Mr="bottom",Rr="right",cr="left",Nf="auto",Po=[lr,Mr,Rr,cr],yi="start",So="end",VS="clippingParents",Uv="viewport",ao="popper",GS="reference",Ih=Po.reduce(function(n,a){return n.concat([a+"-"+yi,a+"-"+So])},[]),Bv=[].concat(Po,[Nf]).reduce(function(n,a){return n.concat([a,a+"-"+yi,a+"-"+So])},[]),QS="beforeRead",qS="read",JS="afterRead",XS="beforeMain",ZS="main",ek="afterMain",tk="beforeWrite",nk="write",rk="afterWrite",ak=[QS,qS,JS,XS,ZS,ek,tk,nk,rk];function pa(n){return n?(n.nodeName||"").toLowerCase():null}function gr(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var a=n.ownerDocument;return a&&a.defaultView||window}return n}function Os(n){var a=gr(n).Element;return n instanceof a||n instanceof Element}function Tr(n){var a=gr(n).HTMLElement;return n instanceof a||n instanceof HTMLElement}function Sf(n){if(typeof ShadowRoot>"u")return!1;var a=gr(n).ShadowRoot;return n instanceof a||n instanceof ShadowRoot}function sk(n){var a=n.state;Object.keys(a.elements).forEach(function(i){var r=a.styles[i]||{},t=a.attributes[i]||{},l=a.elements[i];!Tr(l)||!pa(l)||(Object.assign(l.style,r),Object.keys(t).forEach(function(u){var d=t[u];d===!1?l.removeAttribute(u):l.setAttribute(u,d===!0?"":d)}))})}function ik(n){var a=n.state,i={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,i.popper),a.styles=i,a.elements.arrow&&Object.assign(a.elements.arrow.style,i.arrow),function(){Object.keys(a.elements).forEach(function(r){var t=a.elements[r],l=a.attributes[r]||{},u=Object.keys(a.styles.hasOwnProperty(r)?a.styles[r]:i[r]),d=u.reduce(function(p,h){return p[h]="",p},{});!Tr(t)||!pa(t)||(Object.assign(t.style,d),Object.keys(l).forEach(function(p){t.removeAttribute(p)}))})}}const ok={name:"applyStyles",enabled:!0,phase:"write",fn:sk,effect:ik,requires:["computeStyles"]};function da(n){return n.split("-")[0]}var Ts=Math.max,xc=Math.min,bi=Math.round;function Xd(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function $v(){return!/^((?!chrome|android).)*safari/i.test(Xd())}function wi(n,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1);var r=n.getBoundingClientRect(),t=1,l=1;a&&Tr(n)&&(t=n.offsetWidth>0&&bi(r.width)/n.offsetWidth||1,l=n.offsetHeight>0&&bi(r.height)/n.offsetHeight||1);var u=Os(n)?gr(n):window,d=u.visualViewport,p=!$v()&&i,h=(r.left+(p&&d?d.offsetLeft:0))/t,v=(r.top+(p&&d?d.offsetTop:0))/l,y=r.width/t,S=r.height/l;return{width:y,height:S,top:v,right:h+y,bottom:v+S,left:h,x:h,y:v}}function kf(n){var a=wi(n),i=n.offsetWidth,r=n.offsetHeight;return Math.abs(a.width-i)<=1&&(i=a.width),Math.abs(a.height-r)<=1&&(r=a.height),{x:n.offsetLeft,y:n.offsetTop,width:i,height:r}}function Yv(n,a){var i=a.getRootNode&&a.getRootNode();if(n.contains(a))return!0;if(i&&Sf(i)){var r=a;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Da(n){return gr(n).getComputedStyle(n)}function lk(n){return["table","td","th"].indexOf(pa(n))>=0}function rs(n){return((Os(n)?n.ownerDocument:n.document)||window.document).documentElement}function Dc(n){return pa(n)==="html"?n:n.assignedSlot||n.parentNode||(Sf(n)?n.host:null)||rs(n)}function Lh(n){return!Tr(n)||Da(n).position==="fixed"?null:n.offsetParent}function ck(n){var a=/firefox/i.test(Xd()),i=/Trident/i.test(Xd());if(i&&Tr(n)){var r=Da(n);if(r.position==="fixed")return null}var t=Dc(n);for(Sf(t)&&(t=t.host);Tr(t)&&["html","body"].indexOf(pa(t))<0;){var l=Da(t);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||a&&l.willChange==="filter"||a&&l.filter&&l.filter!=="none")return t;t=t.parentNode}return null}function _o(n){for(var a=gr(n),i=Lh(n);i&&lk(i)&&Da(i).position==="static";)i=Lh(i);return i&&(pa(i)==="html"||pa(i)==="body"&&Da(i).position==="static")?a:i||ck(n)||a}function jf(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function fo(n,a,i){return Ts(n,xc(a,i))}function uk(n,a,i){var r=fo(n,a,i);return r>i?i:r}function Wv(){return{top:0,right:0,bottom:0,left:0}}function Hv(n){return Object.assign({},Wv(),n)}function Kv(n,a){return a.reduce(function(i,r){return i[r]=n,i},{})}var dk=function(a,i){return a=typeof a=="function"?a(Object.assign({},i.rects,{placement:i.placement})):a,Hv(typeof a!="number"?a:Kv(a,Po))};function fk(n){var a,i=n.state,r=n.name,t=n.options,l=i.elements.arrow,u=i.modifiersData.popperOffsets,d=da(i.placement),p=jf(d),h=[cr,Rr].indexOf(d)>=0,v=h?"height":"width";if(!(!l||!u)){var y=dk(t.padding,i),S=kf(l),k=p==="y"?lr:cr,j=p==="y"?Mr:Rr,E=i.rects.reference[v]+i.rects.reference[p]-u[p]-i.rects.popper[v],C=u[p]-i.rects.reference[p],F=_o(l),O=F?p==="y"?F.clientHeight||0:F.clientWidth||0:0,_=E/2-C/2,$=y[k],Z=O-S[v]-y[j],q=O/2-S[v]/2+_,ee=fo($,q,Z),ae=p;i.modifiersData[r]=(a={},a[ae]=ee,a.centerOffset=ee-q,a)}}function pk(n){var a=n.state,i=n.options,r=i.element,t=r===void 0?"[data-popper-arrow]":r;t!=null&&(typeof t=="string"&&(t=a.elements.popper.querySelector(t),!t)||Yv(a.elements.popper,t)&&(a.elements.arrow=t))}const mk={name:"arrow",enabled:!0,phase:"main",fn:fk,effect:pk,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ni(n){return n.split("-")[1]}var hk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function gk(n,a){var i=n.x,r=n.y,t=a.devicePixelRatio||1;return{x:bi(i*t)/t||0,y:bi(r*t)/t||0}}function Fh(n){var a,i=n.popper,r=n.popperRect,t=n.placement,l=n.variation,u=n.offsets,d=n.position,p=n.gpuAcceleration,h=n.adaptive,v=n.roundOffsets,y=n.isFixed,S=u.x,k=S===void 0?0:S,j=u.y,E=j===void 0?0:j,C=typeof v=="function"?v({x:k,y:E}):{x:k,y:E};k=C.x,E=C.y;var F=u.hasOwnProperty("x"),O=u.hasOwnProperty("y"),_=cr,$=lr,Z=window;if(h){var q=_o(i),ee="clientHeight",ae="clientWidth";if(q===gr(i)&&(q=rs(i),Da(q).position!=="static"&&d==="absolute"&&(ee="scrollHeight",ae="scrollWidth")),q=q,t===lr||(t===cr||t===Rr)&&l===So){$=Mr;var se=y&&q===Z&&Z.visualViewport?Z.visualViewport.height:q[ee];E-=se-r.height,E*=p?1:-1}if(t===cr||(t===lr||t===Mr)&&l===So){_=Rr;var ie=y&&q===Z&&Z.visualViewport?Z.visualViewport.width:q[ae];k-=ie-r.width,k*=p?1:-1}}var re=Object.assign({position:d},h&&hk),Ce=v===!0?gk({x:k,y:E},gr(i)):{x:k,y:E};if(k=Ce.x,E=Ce.y,p){var fe;return Object.assign({},re,(fe={},fe[$]=O?"0":"",fe[_]=F?"0":"",fe.transform=(Z.devicePixelRatio||1)<=1?"translate("+k+"px, "+E+"px)":"translate3d("+k+"px, "+E+"px, 0)",fe))}return Object.assign({},re,(a={},a[$]=O?E+"px":"",a[_]=F?k+"px":"",a.transform="",a))}function vk(n){var a=n.state,i=n.options,r=i.gpuAcceleration,t=r===void 0?!0:r,l=i.adaptive,u=l===void 0?!0:l,d=i.roundOffsets,p=d===void 0?!0:d,h={placement:da(a.placement),variation:Ni(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:t,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,Fh(Object.assign({},h,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:u,roundOffsets:p})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,Fh(Object.assign({},h,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})}const xk={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:vk,data:{}};var Ul={passive:!0};function yk(n){var a=n.state,i=n.instance,r=n.options,t=r.scroll,l=t===void 0?!0:t,u=r.resize,d=u===void 0?!0:u,p=gr(a.elements.popper),h=[].concat(a.scrollParents.reference,a.scrollParents.popper);return l&&h.forEach(function(v){v.addEventListener("scroll",i.update,Ul)}),d&&p.addEventListener("resize",i.update,Ul),function(){l&&h.forEach(function(v){v.removeEventListener("scroll",i.update,Ul)}),d&&p.removeEventListener("resize",i.update,Ul)}}const bk={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yk,data:{}};var wk={left:"right",right:"left",bottom:"top",top:"bottom"};function ec(n){return n.replace(/left|right|bottom|top/g,function(a){return wk[a]})}var Nk={start:"end",end:"start"};function zh(n){return n.replace(/start|end/g,function(a){return Nk[a]})}function Cf(n){var a=gr(n),i=a.pageXOffset,r=a.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Ef(n){return wi(rs(n)).left+Cf(n).scrollLeft}function Sk(n,a){var i=gr(n),r=rs(n),t=i.visualViewport,l=r.clientWidth,u=r.clientHeight,d=0,p=0;if(t){l=t.width,u=t.height;var h=$v();(h||!h&&a==="fixed")&&(d=t.offsetLeft,p=t.offsetTop)}return{width:l,height:u,x:d+Ef(n),y:p}}function kk(n){var a,i=rs(n),r=Cf(n),t=(a=n.ownerDocument)==null?void 0:a.body,l=Ts(i.scrollWidth,i.clientWidth,t?t.scrollWidth:0,t?t.clientWidth:0),u=Ts(i.scrollHeight,i.clientHeight,t?t.scrollHeight:0,t?t.clientHeight:0),d=-r.scrollLeft+Ef(n),p=-r.scrollTop;return Da(t||i).direction==="rtl"&&(d+=Ts(i.clientWidth,t?t.clientWidth:0)-l),{width:l,height:u,x:d,y:p}}function Tf(n){var a=Da(n),i=a.overflow,r=a.overflowX,t=a.overflowY;return/auto|scroll|overlay|hidden/.test(i+t+r)}function Vv(n){return["html","body","#document"].indexOf(pa(n))>=0?n.ownerDocument.body:Tr(n)&&Tf(n)?n:Vv(Dc(n))}function po(n,a){var i;a===void 0&&(a=[]);var r=Vv(n),t=r===((i=n.ownerDocument)==null?void 0:i.body),l=gr(r),u=t?[l].concat(l.visualViewport||[],Tf(r)?r:[]):r,d=a.concat(u);return t?d:d.concat(po(Dc(u)))}function Zd(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function jk(n,a){var i=wi(n,!1,a==="fixed");return i.top=i.top+n.clientTop,i.left=i.left+n.clientLeft,i.bottom=i.top+n.clientHeight,i.right=i.left+n.clientWidth,i.width=n.clientWidth,i.height=n.clientHeight,i.x=i.left,i.y=i.top,i}function Uh(n,a,i){return a===Uv?Zd(Sk(n,i)):Os(a)?jk(a,i):Zd(kk(rs(n)))}function Ck(n){var a=po(Dc(n)),i=["absolute","fixed"].indexOf(Da(n).position)>=0,r=i&&Tr(n)?_o(n):n;return Os(r)?a.filter(function(t){return Os(t)&&Yv(t,r)&&pa(t)!=="body"}):[]}function Ek(n,a,i,r){var t=a==="clippingParents"?Ck(n):[].concat(a),l=[].concat(t,[i]),u=l[0],d=l.reduce(function(p,h){var v=Uh(n,h,r);return p.top=Ts(v.top,p.top),p.right=xc(v.right,p.right),p.bottom=xc(v.bottom,p.bottom),p.left=Ts(v.left,p.left),p},Uh(n,u,r));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function Gv(n){var a=n.reference,i=n.element,r=n.placement,t=r?da(r):null,l=r?Ni(r):null,u=a.x+a.width/2-i.width/2,d=a.y+a.height/2-i.height/2,p;switch(t){case lr:p={x:u,y:a.y-i.height};break;case Mr:p={x:u,y:a.y+a.height};break;case Rr:p={x:a.x+a.width,y:d};break;case cr:p={x:a.x-i.width,y:d};break;default:p={x:a.x,y:a.y}}var h=t?jf(t):null;if(h!=null){var v=h==="y"?"height":"width";switch(l){case yi:p[h]=p[h]-(a[v]/2-i[v]/2);break;case So:p[h]=p[h]+(a[v]/2-i[v]/2);break}}return p}function ko(n,a){a===void 0&&(a={});var i=a,r=i.placement,t=r===void 0?n.placement:r,l=i.strategy,u=l===void 0?n.strategy:l,d=i.boundary,p=d===void 0?VS:d,h=i.rootBoundary,v=h===void 0?Uv:h,y=i.elementContext,S=y===void 0?ao:y,k=i.altBoundary,j=k===void 0?!1:k,E=i.padding,C=E===void 0?0:E,F=Hv(typeof C!="number"?C:Kv(C,Po)),O=S===ao?GS:ao,_=n.rects.popper,$=n.elements[j?O:S],Z=Ek(Os($)?$:$.contextElement||rs(n.elements.popper),p,v,u),q=wi(n.elements.reference),ee=Gv({reference:q,element:_,placement:t}),ae=Zd(Object.assign({},_,ee)),se=S===ao?ae:q,ie={top:Z.top-se.top+F.top,bottom:se.bottom-Z.bottom+F.bottom,left:Z.left-se.left+F.left,right:se.right-Z.right+F.right},re=n.modifiersData.offset;if(S===ao&&re){var Ce=re[t];Object.keys(ie).forEach(function(fe){var Me=[Rr,Mr].indexOf(fe)>=0?1:-1,Te=[lr,Mr].indexOf(fe)>=0?"y":"x";ie[fe]+=Ce[Te]*Me})}return ie}function Tk(n,a){a===void 0&&(a={});var i=a,r=i.placement,t=i.boundary,l=i.rootBoundary,u=i.padding,d=i.flipVariations,p=i.allowedAutoPlacements,h=p===void 0?Bv:p,v=Ni(r),y=v?d?Ih:Ih.filter(function(j){return Ni(j)===v}):Po,S=y.filter(function(j){return h.indexOf(j)>=0});S.length===0&&(S=y);var k=S.reduce(function(j,E){return j[E]=ko(n,{placement:E,boundary:t,rootBoundary:l,padding:u})[da(E)],j},{});return Object.keys(k).sort(function(j,E){return k[j]-k[E]})}function Dk(n){if(da(n)===Nf)return[];var a=ec(n);return[zh(n),a,zh(a)]}function Mk(n){var a=n.state,i=n.options,r=n.name;if(!a.modifiersData[r]._skip){for(var t=i.mainAxis,l=t===void 0?!0:t,u=i.altAxis,d=u===void 0?!0:u,p=i.fallbackPlacements,h=i.padding,v=i.boundary,y=i.rootBoundary,S=i.altBoundary,k=i.flipVariations,j=k===void 0?!0:k,E=i.allowedAutoPlacements,C=a.options.placement,F=da(C),O=F===C,_=p||(O||!j?[ec(C)]:Dk(C)),$=[C].concat(_).reduce(function(ye,De){return ye.concat(da(De)===Nf?Tk(a,{placement:De,boundary:v,rootBoundary:y,padding:h,flipVariations:j,allowedAutoPlacements:E}):De)},[]),Z=a.rects.reference,q=a.rects.popper,ee=new Map,ae=!0,se=$[0],ie=0;ie<$.length;ie++){var re=$[ie],Ce=da(re),fe=Ni(re)===yi,Me=[lr,Mr].indexOf(Ce)>=0,Te=Me?"width":"height",Ne=ko(a,{placement:re,boundary:v,rootBoundary:y,altBoundary:S,padding:h}),xe=Me?fe?Rr:cr:fe?Mr:lr;Z[Te]>q[Te]&&(xe=ec(xe));var L=ec(xe),V=[];if(l&&V.push(Ne[Ce]<=0),d&&V.push(Ne[xe]<=0,Ne[L]<=0),V.every(function(ye){return ye})){se=re,ae=!1;break}ee.set(re,V)}if(ae)for(var Q=j?3:1,T=function(De){var ke=$.find(function(Ue){var oe=ee.get(Ue);if(oe)return oe.slice(0,De).every(function(le){return le})});if(ke)return se=ke,"break"},Y=Q;Y>0;Y--){var H=T(Y);if(H==="break")break}a.placement!==se&&(a.modifiersData[r]._skip=!0,a.placement=se,a.reset=!0)}}const Rk={name:"flip",enabled:!0,phase:"main",fn:Mk,requiresIfExists:["offset"],data:{_skip:!1}};function Bh(n,a,i){return i===void 0&&(i={x:0,y:0}),{top:n.top-a.height-i.y,right:n.right-a.width+i.x,bottom:n.bottom-a.height+i.y,left:n.left-a.width-i.x}}function $h(n){return[lr,Rr,Mr,cr].some(function(a){return n[a]>=0})}function Pk(n){var a=n.state,i=n.name,r=a.rects.reference,t=a.rects.popper,l=a.modifiersData.preventOverflow,u=ko(a,{elementContext:"reference"}),d=ko(a,{altBoundary:!0}),p=Bh(u,r),h=Bh(d,t,l),v=$h(p),y=$h(h);a.modifiersData[i]={referenceClippingOffsets:p,popperEscapeOffsets:h,isReferenceHidden:v,hasPopperEscaped:y},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":v,"data-popper-escaped":y})}const _k={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Pk};function Ok(n,a,i){var r=da(n),t=[cr,lr].indexOf(r)>=0?-1:1,l=typeof i=="function"?i(Object.assign({},a,{placement:n})):i,u=l[0],d=l[1];return u=u||0,d=(d||0)*t,[cr,Rr].indexOf(r)>=0?{x:d,y:u}:{x:u,y:d}}function Ak(n){var a=n.state,i=n.options,r=n.name,t=i.offset,l=t===void 0?[0,0]:t,u=Bv.reduce(function(v,y){return v[y]=Ok(y,a.rects,l),v},{}),d=u[a.placement],p=d.x,h=d.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=p,a.modifiersData.popperOffsets.y+=h),a.modifiersData[r]=u}const Ik={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ak};function Lk(n){var a=n.state,i=n.name;a.modifiersData[i]=Gv({reference:a.rects.reference,element:a.rects.popper,placement:a.placement})}const Fk={name:"popperOffsets",enabled:!0,phase:"read",fn:Lk,data:{}};function zk(n){return n==="x"?"y":"x"}function Uk(n){var a=n.state,i=n.options,r=n.name,t=i.mainAxis,l=t===void 0?!0:t,u=i.altAxis,d=u===void 0?!1:u,p=i.boundary,h=i.rootBoundary,v=i.altBoundary,y=i.padding,S=i.tether,k=S===void 0?!0:S,j=i.tetherOffset,E=j===void 0?0:j,C=ko(a,{boundary:p,rootBoundary:h,padding:y,altBoundary:v}),F=da(a.placement),O=Ni(a.placement),_=!O,$=jf(F),Z=zk($),q=a.modifiersData.popperOffsets,ee=a.rects.reference,ae=a.rects.popper,se=typeof E=="function"?E(Object.assign({},a.rects,{placement:a.placement})):E,ie=typeof se=="number"?{mainAxis:se,altAxis:se}:Object.assign({mainAxis:0,altAxis:0},se),re=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,Ce={x:0,y:0};if(q){if(l){var fe,Me=$==="y"?lr:cr,Te=$==="y"?Mr:Rr,Ne=$==="y"?"height":"width",xe=q[$],L=xe+C[Me],V=xe-C[Te],Q=k?-ae[Ne]/2:0,T=O===yi?ee[Ne]:ae[Ne],Y=O===yi?-ae[Ne]:-ee[Ne],H=a.elements.arrow,ye=k&&H?kf(H):{width:0,height:0},De=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:Wv(),ke=De[Me],Ue=De[Te],oe=fo(0,ee[Ne],ye[Ne]),le=_?ee[Ne]/2-Q-oe-ke-ie.mainAxis:T-oe-ke-ie.mainAxis,me=_?-ee[Ne]/2+Q+oe+Ue+ie.mainAxis:Y+oe+Ue+ie.mainAxis,Oe=a.elements.arrow&&_o(a.elements.arrow),Je=Oe?$==="y"?Oe.clientTop||0:Oe.clientLeft||0:0,qe=(fe=re?.[$])!=null?fe:0,ut=xe+le-qe-Je,rt=xe+me-qe,_t=fo(k?xc(L,ut):L,xe,k?Ts(V,rt):V);q[$]=_t,Ce[$]=_t-xe}if(d){var Lt,ht=$==="x"?lr:cr,Ke=$==="x"?Mr:Rr,pt=q[Z],Fe=Z==="y"?"height":"width",Rt=pt+C[ht],Bt=pt-C[Ke],Zt=[lr,cr].indexOf(F)!==-1,en=(Lt=re?.[Z])!=null?Lt:0,tn=Zt?Rt:pt-ee[Fe]-ae[Fe]-en+ie.altAxis,J=Zt?pt+ee[Fe]+ae[Fe]-en-ie.altAxis:Bt,be=k&&Zt?uk(tn,pt,J):fo(k?tn:Rt,pt,k?J:Bt);q[Z]=be,Ce[Z]=be-pt}a.modifiersData[r]=Ce}}const Bk={name:"preventOverflow",enabled:!0,phase:"main",fn:Uk,requiresIfExists:["offset"]};function $k(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Yk(n){return n===gr(n)||!Tr(n)?Cf(n):$k(n)}function Wk(n){var a=n.getBoundingClientRect(),i=bi(a.width)/n.offsetWidth||1,r=bi(a.height)/n.offsetHeight||1;return i!==1||r!==1}function Hk(n,a,i){i===void 0&&(i=!1);var r=Tr(a),t=Tr(a)&&Wk(a),l=rs(a),u=wi(n,t,i),d={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!i)&&((pa(a)!=="body"||Tf(l))&&(d=Yk(a)),Tr(a)?(p=wi(a,!0),p.x+=a.clientLeft,p.y+=a.clientTop):l&&(p.x=Ef(l))),{x:u.left+d.scrollLeft-p.x,y:u.top+d.scrollTop-p.y,width:u.width,height:u.height}}function Kk(n){var a=new Map,i=new Set,r=[];n.forEach(function(l){a.set(l.name,l)});function t(l){i.add(l.name);var u=[].concat(l.requires||[],l.requiresIfExists||[]);u.forEach(function(d){if(!i.has(d)){var p=a.get(d);p&&t(p)}}),r.push(l)}return n.forEach(function(l){i.has(l.name)||t(l)}),r}function Vk(n){var a=Kk(n);return ak.reduce(function(i,r){return i.concat(a.filter(function(t){return t.phase===r}))},[])}function Gk(n){var a;return function(){return a||(a=new Promise(function(i){Promise.resolve().then(function(){a=void 0,i(n())})})),a}}function Qk(n){var a=n.reduce(function(i,r){var t=i[r.name];return i[r.name]=t?Object.assign({},t,r,{options:Object.assign({},t.options,r.options),data:Object.assign({},t.data,r.data)}):r,i},{});return Object.keys(a).map(function(i){return a[i]})}var Yh={placement:"bottom",modifiers:[],strategy:"absolute"};function Wh(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return!a.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function qk(n){n===void 0&&(n={});var a=n,i=a.defaultModifiers,r=i===void 0?[]:i,t=a.defaultOptions,l=t===void 0?Yh:t;return function(d,p,h){h===void 0&&(h=l);var v={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yh,l),modifiersData:{},elements:{reference:d,popper:p},attributes:{},styles:{}},y=[],S=!1,k={state:v,setOptions:function(F){var O=typeof F=="function"?F(v.options):F;E(),v.options=Object.assign({},l,v.options,O),v.scrollParents={reference:Os(d)?po(d):d.contextElement?po(d.contextElement):[],popper:po(p)};var _=Vk(Qk([].concat(r,v.options.modifiers)));return v.orderedModifiers=_.filter(function($){return $.enabled}),j(),k.update()},forceUpdate:function(){if(!S){var F=v.elements,O=F.reference,_=F.popper;if(Wh(O,_)){v.rects={reference:Hk(O,_o(_),v.options.strategy==="fixed"),popper:kf(_)},v.reset=!1,v.placement=v.options.placement,v.orderedModifiers.forEach(function(ie){return v.modifiersData[ie.name]=Object.assign({},ie.data)});for(var $=0;$<v.orderedModifiers.length;$++){if(v.reset===!0){v.reset=!1,$=-1;continue}var Z=v.orderedModifiers[$],q=Z.fn,ee=Z.options,ae=ee===void 0?{}:ee,se=Z.name;typeof q=="function"&&(v=q({state:v,options:ae,name:se,instance:k})||v)}}}},update:Gk(function(){return new Promise(function(C){k.forceUpdate(),C(v)})}),destroy:function(){E(),S=!0}};if(!Wh(d,p))return k;k.setOptions(h).then(function(C){!S&&h.onFirstUpdate&&h.onFirstUpdate(C)});function j(){v.orderedModifiers.forEach(function(C){var F=C.name,O=C.options,_=O===void 0?{}:O,$=C.effect;if(typeof $=="function"){var Z=$({state:v,name:F,instance:k,options:_}),q=function(){};y.push(Z||q)}})}function E(){y.forEach(function(C){return C()}),y=[]}return k}}var Jk=[bk,Fk,xk,ok,Ik,Rk,Bk,mk,_k],Xk=qk({defaultModifiers:Jk}),wd,Hh;function Zk(){if(Hh)return wd;Hh=1;var n=typeof Element<"u",a=typeof Map=="function",i=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function t(l,u){if(l===u)return!0;if(l&&u&&typeof l=="object"&&typeof u=="object"){if(l.constructor!==u.constructor)return!1;var d,p,h;if(Array.isArray(l)){if(d=l.length,d!=u.length)return!1;for(p=d;p--!==0;)if(!t(l[p],u[p]))return!1;return!0}var v;if(a&&l instanceof Map&&u instanceof Map){if(l.size!==u.size)return!1;for(v=l.entries();!(p=v.next()).done;)if(!u.has(p.value[0]))return!1;for(v=l.entries();!(p=v.next()).done;)if(!t(p.value[1],u.get(p.value[0])))return!1;return!0}if(i&&l instanceof Set&&u instanceof Set){if(l.size!==u.size)return!1;for(v=l.entries();!(p=v.next()).done;)if(!u.has(p.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(u)){if(d=l.length,d!=u.length)return!1;for(p=d;p--!==0;)if(l[p]!==u[p])return!1;return!0}if(l.constructor===RegExp)return l.source===u.source&&l.flags===u.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof u.valueOf=="function")return l.valueOf()===u.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof u.toString=="function")return l.toString()===u.toString();if(h=Object.keys(l),d=h.length,d!==Object.keys(u).length)return!1;for(p=d;p--!==0;)if(!Object.prototype.hasOwnProperty.call(u,h[p]))return!1;if(n&&l instanceof Element)return!1;for(p=d;p--!==0;)if(!((h[p]==="_owner"||h[p]==="__v"||h[p]==="__o")&&l.$$typeof)&&!t(l[h[p]],u[h[p]]))return!1;return!0}return l!==l&&u!==u}return wd=function(u,d){try{return t(u,d)}catch(p){if((p.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw p}},wd}var ej=Zk();const tj=Eo(ej);var nj=[],rj=function(a,i,r){r===void 0&&(r={});var t=x.useRef(null),l={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||nj},u=x.useState({styles:{popper:{position:l.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),d=u[0],p=u[1],h=x.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(k){var j=k.state,E=Object.keys(j.elements);Ta.flushSync(function(){p({styles:Oh(E.map(function(C){return[C,j.styles[C]||{}]})),attributes:Oh(E.map(function(C){return[C,j.attributes[C]]}))})})},requires:["computeStyles"]}},[]),v=x.useMemo(function(){var S={onFirstUpdate:l.onFirstUpdate,placement:l.placement,strategy:l.strategy,modifiers:[].concat(l.modifiers,[h,{name:"applyStyles",enabled:!1}])};return tj(t.current,S)?t.current||S:(t.current=S,S)},[l.onFirstUpdate,l.placement,l.strategy,l.modifiers,h]),y=x.useRef();return Ah(function(){y.current&&y.current.setOptions(v)},[v]),Ah(function(){if(!(a==null||i==null)){var S=r.createPopper||Xk,k=S(a,i,v);return y.current=k,function(){k.destroy(),y.current=null}}},[a,i,r.createPopper]),{state:y.current?y.current.state:null,styles:d.styles,attributes:d.attributes,update:y.current?y.current.update:null,forceUpdate:y.current?y.current.forceUpdate:null}},aj=function(){},sj=function(){return Promise.resolve(null)},ij=[];function oj(n){var a=n.placement,i=a===void 0?"bottom":a,r=n.strategy,t=r===void 0?"absolute":r,l=n.modifiers,u=l===void 0?ij:l,d=n.referenceElement,p=n.onFirstUpdate,h=n.innerRef,v=n.children,y=x.useContext(Iv),S=x.useState(null),k=S[0],j=S[1],E=x.useState(null),C=E[0],F=E[1];x.useEffect(function(){Jd(h,k)},[h,k]);var O=x.useMemo(function(){return{placement:i,strategy:t,onFirstUpdate:p,modifiers:[].concat(u,[{name:"arrow",enabled:C!=null,options:{element:C}}])}},[i,t,p,u,C]),_=rj(d||y,k,O),$=_.state,Z=_.styles,q=_.forceUpdate,ee=_.update,ae=x.useMemo(function(){return{ref:j,style:Z.popper,placement:$?$.placement:i,hasPopperEscaped:$&&$.modifiersData.hide?$.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:$&&$.modifiersData.hide?$.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:Z.arrow,ref:F},forceUpdate:q||aj,update:ee||sj}},[j,F,i,$,Z,ee,q]);return Fv(v)(ae)}var Nd,Kh;function lj(){if(Kh)return Nd;Kh=1;var n=function(){};return Nd=n,Nd}var cj=lj();const uj=Eo(cj);function dj(n){var a=n.children,i=n.innerRef,r=x.useContext(Lv),t=x.useCallback(function(l){Jd(i,l),zv(r,l)},[i,r]);return x.useEffect(function(){return function(){return Jd(i,null)}},[]),x.useEffect(function(){uj(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),Fv(a)({ref:t})}function fj(n,a){if(Pe(2,arguments),Dr(a)!=="object"||a===null)throw new RangeError("values parameter must be an object");var i=Ye(n);return isNaN(i.getTime())?new Date(NaN):(a.year!=null&&i.setFullYear(a.year),a.month!=null&&(i=Xn(i,a.month)),a.date!=null&&i.setDate(yt(a.date)),a.hours!=null&&i.setHours(yt(a.hours)),a.minutes!=null&&i.setMinutes(yt(a.minutes)),a.seconds!=null&&i.setSeconds(yt(a.seconds)),a.milliseconds!=null&&i.setMilliseconds(yt(a.milliseconds)),i)}function Vh(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);a&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.push.apply(i,r)}return i}function yc(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Vh(Object(i),!0).forEach((function(r){D(n,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Vh(Object(i)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))}))}return n}function ef(n){return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ef(n)}function Rn(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Gh(n,a){for(var i=0;i<a.length;i++){var r=a[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Qv(r.key),r)}}function Pn(n,a,i){return a&&Gh(n.prototype,a),i&&Gh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function D(n,a,i){return(a=Qv(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function Si(){return Si=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},Si.apply(this,arguments)}function _n(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&tf(n,a)}function bc(n){return bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},bc(n)}function tf(n,a){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},tf(n,a)}function P(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function On(n){var a=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})();return function(){var i,r=bc(n);if(a){var t=bc(this).constructor;i=Reflect.construct(r,arguments,t)}else i=r.apply(this,arguments);return(function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(l)})(this,i)}}function jo(n){return(function(a){if(Array.isArray(a))return Sd(a)})(n)||(function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)})(n)||(function(a,i){if(a){if(typeof a=="string")return Sd(a,i);var r=Object.prototype.toString.call(a).slice(8,-1);if(r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set")return Array.from(a);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sd(a,i)}})(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Sd(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,r=new Array(a);i<a;i++)r[i]=n[i];return r}function Qv(n){var a=(function(i,r){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var l=t.call(i,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)})(n,"string");return typeof a=="symbol"?a:String(a)}var Qh=function(n,a){switch(n){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});default:return a.date({width:"full"})}},qh=function(n,a){switch(n){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});default:return a.time({width:"full"})}},pj={p:qh,P:function(n,a){var i,r=n.match(/(P+)(p+)?/)||[],t=r[1],l=r[2];if(!l)return Qh(n,a);switch(t){case"P":i=a.dateTime({width:"short"});break;case"PP":i=a.dateTime({width:"medium"});break;case"PPP":i=a.dateTime({width:"long"});break;default:i=a.dateTime({width:"full"})}return i.replace("{{date}}",Qh(t,a)).replace("{{time}}",qh(l,a))}},mo=12,mj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Vt(n){var a=n?typeof n=="string"||n instanceof String?bS(n):Ye(n):new Date;return Ja(a)?a:null}function Ja(n,a){return a=a||new Date("1/1/1000"),bo(n)&&!Xa(n,a)}function ln(n,a,i){if(i==="en")return kh(n,a,{awareOfUnicodeTokens:!0});var r=Ms(i);return i&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(i,'"].')),!r&&Ds()&&Ms(Ds())&&(r=Ms(Ds())),kh(n,a,{locale:r||null,awareOfUnicodeTokens:!0})}function na(n,a){var i=a.dateFormat,r=a.locale;return n&&ln(n,Array.isArray(i)?i[0]:i,r)||""}function Jh(n,a){var i=a.hour,r=i===void 0?0:i,t=a.minute,l=t===void 0?0:t,u=a.second;return Zl(Xl(dN(n,u===void 0?0:u),l),r)}function fa(n,a,i){var r=Ms(a||Ds());return Cv(n,{locale:r,weekStartsOn:i})}function es(n){return Ev(n)}function io(n){return Tv(n)}function Xh(n){return Kd(n)}function Zh(){return ua(Vt())}function Za(n,a){return n&&a?yN(n,a):!n&&!a}function Wr(n,a){return n&&a?xN(n,a):!n&&!a}function wc(n,a){return n&&a?bN(n,a):!n&&!a}function Xt(n,a){return n&&a?vN(n,a):!n&&!a}function Es(n,a){return n&&a?gN(n,a):!n&&!a}function tc(n,a,i){var r,t=ua(a),l=Vd(i);try{r=No(n,{start:t,end:l})}catch{r=!1}return r}function qv(n,a){var i=typeof window<"u"?window:globalThis;i.__localeData__||(i.__localeData__={}),i.__localeData__[n]=a}function Ds(){return(typeof window<"u"?window:globalThis).__localeId__}function Ms(n){if(typeof n=="string"){var a=typeof window<"u"?window:globalThis;return a.__localeData__?a.__localeData__[n]:null}return n}function Df(n,a){return ln(Xn(Vt(),n),"LLLL",a)}function Jv(n,a){return ln(Xn(Vt(),n),"LLL",a)}function Mc(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.maxDate,t=a.excludeDates,l=a.excludeDateIntervals,u=a.includeDates,d=a.includeDateIntervals,p=a.filterDate;return Rc(n,{minDate:i,maxDate:r})||t&&t.some((function(h){return Xt(n,h)}))||l&&l.some((function(h){var v=h.start,y=h.end;return No(n,{start:v,end:y})}))||u&&!u.some((function(h){return Xt(n,h)}))||d&&!d.some((function(h){var v=h.start,y=h.end;return No(n,{start:v,end:y})}))||p&&!p(Vt(n))||!1}function Mf(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.excludeDates,r=a.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var l=t.start,u=t.end;return No(n,{start:l,end:u})})):i&&i.some((function(t){return Xt(n,t)}))||!1}function Xv(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.maxDate,t=a.excludeDates,l=a.includeDates,u=a.filterDate;return Rc(n,{minDate:Ev(i),maxDate:mN(r)})||t&&t.some((function(d){return Wr(n,d)}))||l&&!l.some((function(d){return Wr(n,d)}))||u&&!u(Vt(n))||!1}function kd(n,a,i,r){var t=St(n),l=Vn(n),u=St(a),d=Vn(a),p=St(r);return t===u&&t===p?l<=i&&i<=d:t<u?p===t&&l<=i||p===u&&d>=i||p<u&&p>t:void 0}function hj(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.maxDate,t=a.excludeDates,l=a.includeDates,u=a.filterDate;return Rc(n,{minDate:i,maxDate:r})||t&&t.some((function(d){return wc(n,d)}))||l&&!l.some((function(d){return wc(n,d)}))||u&&!u(Vt(n))||!1}function jd(n,a,i){if(!bo(a)||!bo(i))return!1;var r=St(a),t=St(i);return r<=n&&t>=n}function Zv(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.maxDate,t=a.excludeDates,l=a.includeDates,u=a.filterDate,d=new Date(n,0,1);return Rc(d,{minDate:Tv(i),maxDate:hN(r)})||t&&t.some((function(p){return Za(d,p)}))||l&&!l.some((function(p){return Za(d,p)}))||u&&!u(Vt(d))||!1}function Cd(n,a,i,r){var t=St(n),l=ui(n),u=St(a),d=ui(a),p=St(r);return t===u&&t===p?l<=i&&i<=d:t<u?p===t&&l<=i||p===u&&d>=i||p<u&&p>t:void 0}function Rc(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.maxDate;return i&&pc(n,i)<0||r&&pc(n,r)>0}function eg(n,a){return a.some((function(i){return ca(i)===ca(n)&&la(i)===la(n)}))}function tg(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.excludeTimes,r=a.includeTimes,t=a.filterTime;return i&&eg(n,i)||r&&!eg(n,r)||t&&!t(n)||!1}function ng(n,a){var i=a.minTime,r=a.maxTime;if(!i||!r)throw new Error("Both minTime and maxTime props required");var t,l=Vt(),u=Zl(Xl(l,la(n)),ca(n)),d=Zl(Xl(l,la(i)),ca(i)),p=Zl(Xl(l,la(r)),ca(r));try{t=!No(u,{start:d,end:p})}catch{t=!1}return t}function rg(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.includeDates,t=xi(n,1);return i&&mc(i,t)>0||r&&r.every((function(l){return mc(l,t)>0}))||!1}function ag(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.maxDate,r=a.includeDates,t=Vr(n,1);return i&&mc(t,i)>0||r&&r.every((function(l){return mc(t,l)>0}))||!1}function sg(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.minDate,r=a.includeDates,t=wo(n,1);return i&&hc(i,t)>0||r&&r.every((function(l){return hc(l,t)>0}))||!1}function ig(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.maxDate,r=a.includeDates,t=vi(n,1);return i&&hc(t,i)>0||r&&r.every((function(l){return hc(t,l)>0}))||!1}function ex(n){var a=n.minDate,i=n.includeDates;if(i&&a){var r=i.filter((function(t){return pc(t,a)>=0}));return Th(r)}return i?Th(i):a}function tx(n){var a=n.maxDate,i=n.includeDates;if(i&&a){var r=i.filter((function(t){return pc(t,a)<=0}));return Dh(r)}return i?Dh(i):a}function og(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",i=new Map,r=0,t=n.length;r<t;r++){var l=n[r];if(Ec(l)){var u=ln(l,"MM.dd.yyyy"),d=i.get(u)||[];d.includes(a)||(d.push(a),i.set(u,d))}else if(ef(l)==="object"){var p=Object.keys(l),h=p[0],v=l[p[0]];if(typeof h=="string"&&v.constructor===Array)for(var y=0,S=v.length;y<S;y++){var k=ln(v[y],"MM.dd.yyyy"),j=i.get(k)||[];j.includes(h)||(j.push(h),i.set(k,j))}}}return i}function gj(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",i=new Map;return n.forEach((function(r){var t=r.date,l=r.holidayName;if(Ec(t)){var u=ln(t,"MM.dd.yyyy"),d=i.get(u)||{};if(!("className"in d)||d.className!==a||(p=d.holidayNames,h=[l],p.length!==h.length||!p.every((function(y,S){return y===h[S]})))){var p,h;d.className=a;var v=d.holidayNames;d.holidayNames=v?[].concat(jo(v),[l]):[l],i.set(u,d)}}})),i}function vj(n,a,i,r,t){for(var l=t.length,u=[],d=0;d<l;d++){var p=Wd(rN(n,ca(t[d])),la(t[d])),h=Wd(n,(i+1)*r);ns(p,a)&&Xa(p,h)&&u.push(t[d])}return u}function lg(n){return n<10?"0".concat(n):"".concat(n)}function di(n){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mo,i=Math.ceil(St(n)/a)*a;return{startPeriod:i-(a-1),endPeriod:i}}function cg(n){var a=n.getSeconds(),i=n.getMilliseconds();return Ye(n.getTime()-1e3*a-i)}function xj(n,a,i,r){for(var t=[],l=0;l<2*a+1;l++){var u=n+a-l,d=!0;i&&(d=St(i)<=u),r&&d&&(d=St(r)>=u),d&&t.push(u)}return t}var yj=Tc((function(n){_n(i,K.Component);var a=On(i);function i(r){var t;Rn(this,i),D(P(t=a.call(this,r)),"renderOptions",(function(){var p=t.props.year,h=t.state.yearsList.map((function(S){return K.createElement("div",{className:p===S?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:S,onClick:t.onChange.bind(P(t),S),"aria-selected":p===S?"true":void 0},p===S?K.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",S)})),v=t.props.minDate?St(t.props.minDate):null,y=t.props.maxDate?St(t.props.maxDate):null;return y&&t.state.yearsList.find((function(S){return S===y}))||h.unshift(K.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:t.incrementYears},K.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),v&&t.state.yearsList.find((function(S){return S===v}))||h.push(K.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:t.decrementYears},K.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),h})),D(P(t),"onChange",(function(p){t.props.onChange(p)})),D(P(t),"handleClickOutside",(function(){t.props.onCancel()})),D(P(t),"shiftYears",(function(p){var h=t.state.yearsList.map((function(v){return v+p}));t.setState({yearsList:h})})),D(P(t),"incrementYears",(function(){return t.shiftYears(1)})),D(P(t),"decrementYears",(function(){return t.shiftYears(-1)}));var l=r.yearDropdownItemNumber,u=r.scrollableYearDropdown,d=l||(u?10:5);return t.state={yearsList:xj(t.props.year,d,t.props.minDate,t.props.maxDate)},t.dropdownRef=x.createRef(),t}return Pn(i,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var t=r.children?Array.from(r.children):null,l=t?t.find((function(u){return u.ariaSelected})):null;r.scrollTop=l?l.offsetTop+(l.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=Un({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return K.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}]),i})()),bj=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"state",{dropdownVisible:!1}),D(P(r),"renderSelectOptions",(function(){for(var d=r.props.minDate?St(r.props.minDate):1900,p=r.props.maxDate?St(r.props.maxDate):2100,h=[],v=d;v<=p;v++)h.push(K.createElement("option",{key:v,value:v},v));return h})),D(P(r),"onSelectChange",(function(d){r.onChange(d.target.value)})),D(P(r),"renderSelectMode",(function(){return K.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())})),D(P(r),"renderReadView",(function(d){return K.createElement("div",{key:"read",style:{visibility:d?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(p){return r.toggleDropdown(p)}},K.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),K.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))})),D(P(r),"renderDropdown",(function(){return K.createElement(yj,{key:"dropdown",year:r.props.year,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),D(P(r),"renderScrollMode",(function(){var d=r.state.dropdownVisible,p=[r.renderReadView(!d)];return d&&p.unshift(r.renderDropdown()),p})),D(P(r),"onChange",(function(d){r.toggleDropdown(),d!==r.props.year&&r.props.onChange(d)})),D(P(r),"toggleDropdown",(function(d){r.setState({dropdownVisible:!r.state.dropdownVisible},(function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,d)}))})),D(P(r),"handleYearChange",(function(d,p){r.onSelect(d,p),r.setOpen()})),D(P(r),"onSelect",(function(d,p){r.props.onSelect&&r.props.onSelect(d,p)})),D(P(r),"setOpen",(function(){r.props.setOpen&&r.props.setOpen(!0)})),r}return Pn(i,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return K.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),i})(),wj=Tc((function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"isSelectedMonth",(function(d){return r.props.month===d})),D(P(r),"renderOptions",(function(){return r.props.monthNames.map((function(d,p){return K.createElement("div",{className:r.isSelectedMonth(p)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:d,onClick:r.onChange.bind(P(r),p),"aria-selected":r.isSelectedMonth(p)?"true":void 0},r.isSelectedMonth(p)?K.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",d)}))})),D(P(r),"onChange",(function(d){return r.props.onChange(d)})),D(P(r),"handleClickOutside",(function(){return r.props.onCancel()})),r}return Pn(i,[{key:"render",value:function(){return K.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),i})()),Nj=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"state",{dropdownVisible:!1}),D(P(r),"renderSelectOptions",(function(d){return d.map((function(p,h){return K.createElement("option",{key:h,value:h},p)}))})),D(P(r),"renderSelectMode",(function(d){return K.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(p){return r.onChange(p.target.value)}},r.renderSelectOptions(d))})),D(P(r),"renderReadView",(function(d,p){return K.createElement("div",{key:"read",style:{visibility:d?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},K.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),K.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},p[r.props.month]))})),D(P(r),"renderDropdown",(function(d){return K.createElement(wj,{key:"dropdown",month:r.props.month,monthNames:d,onChange:r.onChange,onCancel:r.toggleDropdown})})),D(P(r),"renderScrollMode",(function(d){var p=r.state.dropdownVisible,h=[r.renderReadView(!p,d)];return p&&h.unshift(r.renderDropdown(d)),h})),D(P(r),"onChange",(function(d){r.toggleDropdown(),d!==r.props.month&&r.props.onChange(d)})),D(P(r),"toggleDropdown",(function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})})),r}return Pn(i,[{key:"render",value:function(){var r,t=this,l=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(u){return Jv(u,t.props.locale)}:function(u){return Df(u,t.props.locale)});switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(l);break;case"select":r=this.renderSelectMode(l)}return K.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),i})();function Sj(n,a){for(var i=[],r=es(n),t=es(a);!ns(r,t);)i.push(Vt(r)),r=Vr(r,1);return i}var kj=Tc((function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),D(P(t=a.call(this,r)),"renderOptions",(function(){return t.state.monthYearsList.map((function(l){var u=Hd(l),d=Za(t.props.date,l)&&Wr(t.props.date,l);return K.createElement("div",{className:d?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:u,onClick:t.onChange.bind(P(t),u),"aria-selected":d?"true":void 0},d?K.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",ln(l,t.props.dateFormat,t.props.locale))}))})),D(P(t),"onChange",(function(l){return t.props.onChange(l)})),D(P(t),"handleClickOutside",(function(){t.props.onCancel()})),t.state={monthYearsList:Sj(t.props.minDate,t.props.maxDate)},t}return Pn(i,[{key:"render",value:function(){var r=Un({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return K.createElement("div",{className:r},this.renderOptions())}}]),i})()),jj=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"state",{dropdownVisible:!1}),D(P(r),"renderSelectOptions",(function(){for(var d=es(r.props.minDate),p=es(r.props.maxDate),h=[];!ns(d,p);){var v=Hd(d);h.push(K.createElement("option",{key:v,value:v},ln(d,r.props.dateFormat,r.props.locale))),d=Vr(d,1)}return h})),D(P(r),"onSelectChange",(function(d){r.onChange(d.target.value)})),D(P(r),"renderSelectMode",(function(){return K.createElement("select",{value:Hd(es(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())})),D(P(r),"renderReadView",(function(d){var p=ln(r.props.date,r.props.dateFormat,r.props.locale);return K.createElement("div",{key:"read",style:{visibility:d?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(h){return r.toggleDropdown(h)}},K.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),K.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},p))})),D(P(r),"renderDropdown",(function(){return K.createElement(kj,{key:"dropdown",date:r.props.date,dateFormat:r.props.dateFormat,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,locale:r.props.locale})})),D(P(r),"renderScrollMode",(function(){var d=r.state.dropdownVisible,p=[r.renderReadView(!d)];return d&&p.unshift(r.renderDropdown()),p})),D(P(r),"onChange",(function(d){r.toggleDropdown();var p=Vt(parseInt(d));Za(r.props.date,p)&&Wr(r.props.date,p)||r.props.onChange(p)})),D(P(r),"toggleDropdown",(function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})})),r}return Pn(i,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return K.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),i})(),Cj=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"dayEl",K.createRef()),D(P(r),"handleClick",(function(d){!r.isDisabled()&&r.props.onClick&&r.props.onClick(d)})),D(P(r),"handleMouseEnter",(function(d){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(d)})),D(P(r),"handleOnKeyDown",(function(d){d.key===" "&&(d.preventDefault(),d.key="Enter"),r.props.handleOnKeyDown(d)})),D(P(r),"isSameDay",(function(d){return Xt(r.props.day,d)})),D(P(r),"isKeyboardSelected",(function(){return!r.props.disabledKeyboardNavigation&&!(r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected))&&(r.isSameDay(r.props.preSelection)||r.isSameWeek(r.props.preSelection))})),D(P(r),"isDisabled",(function(){return Mc(r.props.day,r.props)})),D(P(r),"isExcluded",(function(){return Mf(r.props.day,r.props)})),D(P(r),"isStartOfWeek",(function(){return Xt(r.props.day,fa(r.props.day,r.props.locale,r.props.calendarStartDay))})),D(P(r),"isSameWeek",(function(d){return r.props.showWeekPicker&&Xt(d,fa(r.props.day,r.props.locale,r.props.calendarStartDay))})),D(P(r),"getHighLightedClass",(function(){var d=r.props,p=d.day,h=d.highlightDates;if(!h)return!1;var v=ln(p,"MM.dd.yyyy");return h.get(v)})),D(P(r),"getHolidaysClass",(function(){var d=r.props,p=d.day,h=d.holidays;if(!h)return!1;var v=ln(p,"MM.dd.yyyy");return h.has(v)?[h.get(v).className]:void 0})),D(P(r),"isInRange",(function(){var d=r.props,p=d.day,h=d.startDate,v=d.endDate;return!(!h||!v)&&tc(p,h,v)})),D(P(r),"isInSelectingRange",(function(){var d,p=r.props,h=p.day,v=p.selectsStart,y=p.selectsEnd,S=p.selectsRange,k=p.selectsDisabledDaysInRange,j=p.startDate,E=p.endDate,C=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(v||y||S)||!C||!k&&r.isDisabled())&&(v&&E&&(Xa(C,E)||Es(C,E))?tc(h,C,E):(y&&j&&(ns(C,j)||Es(C,j))||!(!S||!j||E||!ns(C,j)&&!Es(C,j)))&&tc(h,j,C))})),D(P(r),"isSelectingRangeStart",(function(){var d;if(!r.isInSelectingRange())return!1;var p=r.props,h=p.day,v=p.startDate,y=p.selectsStart,S=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return Xt(h,y?S:v)})),D(P(r),"isSelectingRangeEnd",(function(){var d;if(!r.isInSelectingRange())return!1;var p=r.props,h=p.day,v=p.endDate,y=p.selectsEnd,S=p.selectsRange,k=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return Xt(h,y||S?k:v)})),D(P(r),"isRangeStart",(function(){var d=r.props,p=d.day,h=d.startDate,v=d.endDate;return!(!h||!v)&&Xt(h,p)})),D(P(r),"isRangeEnd",(function(){var d=r.props,p=d.day,h=d.startDate,v=d.endDate;return!(!h||!v)&&Xt(v,p)})),D(P(r),"isWeekend",(function(){var d=iN(r.props.day);return d===0||d===6})),D(P(r),"isAfterMonth",(function(){return r.props.month!==void 0&&(r.props.month+1)%12===Vn(r.props.day)})),D(P(r),"isBeforeMonth",(function(){return r.props.month!==void 0&&(Vn(r.props.day)+1)%12===r.props.month})),D(P(r),"isCurrentDay",(function(){return r.isSameDay(Vt())})),D(P(r),"isSelected",(function(){return r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected)})),D(P(r),"getClassNames",(function(d){var p,h=r.props.dayClassName?r.props.dayClassName(d):void 0;return Un("react-datepicker__day",h,"react-datepicker__day--"+ln(r.props.day,"ddd",p),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass("react-datepicker__day--highlighted"),r.getHolidaysClass())})),D(P(r),"getAriaLabel",(function(){var d=r.props,p=d.day,h=d.ariaLabelPrefixWhenEnabled,v=h===void 0?"Choose":h,y=d.ariaLabelPrefixWhenDisabled,S=y===void 0?"Not available":y,k=r.isDisabled()||r.isExcluded()?S:v;return"".concat(k," ").concat(ln(p,"PPPP",r.props.locale))})),D(P(r),"getTitle",(function(){var d=r.props,p=d.day,h=d.holidays,v=h===void 0?new Map:h,y=ln(p,"MM.dd.yyyy");return v.has(y)&&v.get(y).holidayNames.length>0?v.get(y).holidayNames.join(", "):""})),D(P(r),"getTabIndex",(function(d,p){var h=d||r.props.selected,v=p||r.props.preSelection;return(!r.props.showWeekPicker||!r.props.showWeekNumber&&r.isStartOfWeek())&&(r.isKeyboardSelected()||r.isSameDay(h)&&Xt(v,h))?0:-1})),D(P(r),"handleFocusDay",(function(){var d,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=!1;r.getTabIndex()===0&&!p.isInputFocused&&r.isSameDay(r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(h=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(h=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(h=!0),r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()&&(h=!1),r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()&&(h=!1)),h&&((d=r.dayEl.current)===null||d===void 0||d.focus({preventScroll:!0}))})),D(P(r),"renderDayContents",(function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(Eh(r.props.day),r.props.day):Eh(r.props.day)})),D(P(r),"render",(function(){return K.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.handleMouseEnter,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&K.createElement("span",{className:"holiday-overlay"},r.getTitle()))})),r}return Pn(i,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}]),i})(),Ej=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"weekNumberEl",K.createRef()),D(P(r),"handleClick",(function(d){r.props.onClick&&r.props.onClick(d)})),D(P(r),"handleOnKeyDown",(function(d){d.key===" "&&(d.preventDefault(),d.key="Enter"),r.props.handleOnKeyDown(d)})),D(P(r),"isKeyboardSelected",(function(){return!r.props.disabledKeyboardNavigation&&!Xt(r.props.date,r.props.selected)&&Xt(r.props.date,r.props.preSelection)})),D(P(r),"getTabIndex",(function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||Xt(r.props.date,r.props.selected)&&Xt(r.props.preSelection,r.props.selected))?0:-1})),D(P(r),"handleFocusWeekNumber",(function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=!1;r.getTabIndex()===0&&!d.isInputFocused&&Xt(r.props.date,r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(p=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(p=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(p=!0)),p&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})})),r}return Pn(i,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,t=r.weekNumber,l=r.ariaLabelPrefix,u=l===void 0?"week ":l,d={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!r.onClick,"react-datepicker__week-number--selected":Xt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return K.createElement("div",{ref:this.weekNumberEl,className:Un(d),"aria-label":"".concat(u," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),i})(),Tj=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"handleDayClick",(function(d,p){r.props.onDayClick&&r.props.onDayClick(d,p)})),D(P(r),"handleDayMouseEnter",(function(d){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(d)})),D(P(r),"handleWeekClick",(function(d,p,h){if(typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,p,h),r.props.showWeekPicker){var v=fa(d,r.props.locale,r.props.calendarStartDay);r.handleDayClick(v,h)}r.props.shouldCloseOnSelect&&r.props.setOpen(!1)})),D(P(r),"formatWeekNumber",(function(d){return r.props.formatWeekNumber?r.props.formatWeekNumber(d):(function(p,h){var v=Ds()&&Ms(Ds());return uN(p,v?{locale:v}:null)})(d)})),D(P(r),"renderDays",(function(){var d=fa(r.props.day,r.props.locale,r.props.calendarStartDay),p=[],h=r.formatWeekNumber(d);if(r.props.showWeekNumber){var v=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(P(r),d,h):void 0;p.push(K.createElement(Ej,{key:"W",weekNumber:h,date:d,onClick:v,selected:r.props.selected,preSelection:r.props.preSelection,ariaLabelPrefix:r.props.ariaLabelPrefix,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef}))}return p.concat([0,1,2,3,4,5,6].map((function(y){var S=Ei(d,y);return K.createElement(Cj,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:S.valueOf(),day:S,month:r.props.month,onClick:r.handleDayClick.bind(P(r),S),onMouseEnter:r.handleDayMouseEnter.bind(P(r),S),minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart,locale:r.props.locale})})))})),D(P(r),"startOfWeek",(function(){return fa(r.props.day,r.props.locale,r.props.calendarStartDay)})),D(P(r),"isKeyboardSelected",(function(){return!r.props.disabledKeyboardNavigation&&!Xt(r.startOfWeek(),r.props.selected)&&Xt(r.startOfWeek(),r.props.preSelection)})),r}return Pn(i,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":Xt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return K.createElement("div",{className:Un(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),i})(),nx="two_columns",rx="three_columns",ax="four_columns",Ed=D(D(D({},nx,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),rx,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),ax,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function ug(n,a){return n?ax:a?nx:rx}var Dj=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"MONTH_REFS",jo(Array(12)).map((function(){return K.createRef()}))),D(P(r),"QUARTER_REFS",jo(Array(4)).map((function(){return K.createRef()}))),D(P(r),"isDisabled",(function(d){return Mc(d,r.props)})),D(P(r),"isExcluded",(function(d){return Mf(d,r.props)})),D(P(r),"handleDayClick",(function(d,p){r.props.onDayClick&&r.props.onDayClick(d,p,r.props.orderInDisplay)})),D(P(r),"handleDayMouseEnter",(function(d){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(d)})),D(P(r),"handleMouseLeave",(function(){r.props.onMouseLeave&&r.props.onMouseLeave()})),D(P(r),"isRangeStartMonth",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&Wr(Xn(h,d),v)})),D(P(r),"isRangeStartQuarter",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&wc(ci(h,d),v)})),D(P(r),"isRangeEndMonth",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&Wr(Xn(h,d),y)})),D(P(r),"isRangeEndQuarter",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&wc(ci(h,d),y)})),D(P(r),"isInSelectingRangeMonth",(function(d){var p,h=r.props,v=h.day,y=h.selectsStart,S=h.selectsEnd,k=h.selectsRange,j=h.startDate,E=h.endDate,C=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return!(!(y||S||k)||!C)&&(y&&E?kd(C,E,d,v):(S&&j||!(!k||!j||E))&&kd(j,C,d,v))})),D(P(r),"isSelectingMonthRangeStart",(function(d){var p;if(!r.isInSelectingRangeMonth(d))return!1;var h=r.props,v=h.day,y=h.startDate,S=h.selectsStart,k=Xn(v,d),j=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return Wr(k,S?j:y)})),D(P(r),"isSelectingMonthRangeEnd",(function(d){var p;if(!r.isInSelectingRangeMonth(d))return!1;var h=r.props,v=h.day,y=h.endDate,S=h.selectsEnd,k=h.selectsRange,j=Xn(v,d),E=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return Wr(j,S||k?E:y)})),D(P(r),"isInSelectingRangeQuarter",(function(d){var p,h=r.props,v=h.day,y=h.selectsStart,S=h.selectsEnd,k=h.selectsRange,j=h.startDate,E=h.endDate,C=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return!(!(y||S||k)||!C)&&(y&&E?Cd(C,E,d,v):(S&&j||!(!k||!j||E))&&Cd(j,C,d,v))})),D(P(r),"isWeekInMonth",(function(d){var p=r.props.day,h=Ei(d,6);return Wr(d,p)||Wr(h,p)})),D(P(r),"isCurrentMonth",(function(d,p){return St(d)===St(Vt())&&p===Vn(Vt())})),D(P(r),"isCurrentQuarter",(function(d,p){return St(d)===St(Vt())&&p===ui(Vt())})),D(P(r),"isSelectedMonth",(function(d,p,h){return Vn(h)===p&&St(d)===St(h)})),D(P(r),"isSelectedQuarter",(function(d,p,h){return ui(d)===p&&St(d)===St(h)})),D(P(r),"renderWeeks",(function(){for(var d=[],p=r.props.fixedHeight,h=0,v=!1,y=fa(es(r.props.day),r.props.locale,r.props.calendarStartDay);d.push(K.createElement(Tj,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,key:h,day:y,month:Vn(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,onWeekSelect:r.props.onWeekSelect,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumber:r.props.showWeekNumbers,showWeekPicker:r.props.showWeekPicker,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderDayContents:r.props.renderDayContents,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,calendarStartDay:r.props.calendarStartDay,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart})),!v;){h++,y=dc(y,1);var S=p&&h>=6,k=!p&&!r.isWeekInMonth(y);if(S||k){if(!r.props.peekNextMonth)break;v=!0}}return d})),D(P(r),"onMonthClick",(function(d,p){r.handleDayClick(es(Xn(r.props.day,p)),d)})),D(P(r),"onMonthMouseEnter",(function(d){r.handleDayMouseEnter(es(Xn(r.props.day,d)))})),D(P(r),"handleMonthNavigation",(function(d,p){r.isDisabled(p)||r.isExcluded(p)||(r.props.setPreSelection(p),r.MONTH_REFS[d].current&&r.MONTH_REFS[d].current.focus())})),D(P(r),"onMonthKeyDown",(function(d,p){var h=r.props,v=h.selected,y=h.preSelection,S=h.disabledKeyboardNavigation,k=h.showTwoColumnMonthYearPicker,j=h.showFourColumnMonthYearPicker,E=h.setPreSelection,C=d.key;if(C!=="Tab"&&d.preventDefault(),!S){var F=ug(j,k),O=Ed[F].verticalNavigationOffset,_=Ed[F].grid;switch(C){case"Enter":r.onMonthClick(d,p),E(v);break;case"ArrowRight":r.handleMonthNavigation(p===11?0:p+1,Vr(y,1));break;case"ArrowLeft":r.handleMonthNavigation(p===0?11:p-1,xi(y,1));break;case"ArrowUp":r.handleMonthNavigation(_[0].includes(p)?p+12-O:p-O,xi(y,O));break;case"ArrowDown":r.handleMonthNavigation(_[_.length-1].includes(p)?p-12+O:p+O,Vr(y,O))}}})),D(P(r),"onQuarterClick",(function(d,p){r.handleDayClick(Xh(ci(r.props.day,p)),d)})),D(P(r),"onQuarterMouseEnter",(function(d){r.handleDayMouseEnter(Xh(ci(r.props.day,d)))})),D(P(r),"handleQuarterNavigation",(function(d,p){r.isDisabled(p)||r.isExcluded(p)||(r.props.setPreSelection(p),r.QUARTER_REFS[d-1].current&&r.QUARTER_REFS[d-1].current.focus())})),D(P(r),"onQuarterKeyDown",(function(d,p){var h=d.key;if(!r.props.disabledKeyboardNavigation)switch(h){case"Enter":r.onQuarterClick(d,p),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleQuarterNavigation(p===4?1:p+1,jv(r.props.preSelection,1));break;case"ArrowLeft":r.handleQuarterNavigation(p===1?4:p-1,sN(r.props.preSelection,1))}})),D(P(r),"getMonthClassNames",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate,S=p.selected,k=p.minDate,j=p.maxDate,E=p.preSelection,C=p.monthClassName,F=p.excludeDates,O=p.includeDates,_=C?C(Xn(h,d)):void 0,$=Xn(h,d);return Un("react-datepicker__month-text","react-datepicker__month-".concat(d),_,{"react-datepicker__month-text--disabled":(k||j||F||O)&&Xv($,r.props),"react-datepicker__month-text--selected":r.isSelectedMonth(h,d,S),"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&Vn(E)===d,"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(d),"react-datepicker__month-text--in-range":kd(v,y,d,h),"react-datepicker__month-text--range-start":r.isRangeStartMonth(d),"react-datepicker__month-text--range-end":r.isRangeEndMonth(d),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(d),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(d),"react-datepicker__month-text--today":r.isCurrentMonth(h,d)})})),D(P(r),"getTabIndex",(function(d){var p=Vn(r.props.preSelection);return r.props.disabledKeyboardNavigation||d!==p?"-1":"0"})),D(P(r),"getQuarterTabIndex",(function(d){var p=ui(r.props.preSelection);return r.props.disabledKeyboardNavigation||d!==p?"-1":"0"})),D(P(r),"getAriaLabel",(function(d){var p=r.props,h=p.chooseDayAriaLabelPrefix,v=h===void 0?"Choose":h,y=p.disabledDayAriaLabelPrefix,S=y===void 0?"Not available":y,k=p.day,j=Xn(k,d),E=r.isDisabled(j)||r.isExcluded(j)?S:v;return"".concat(E," ").concat(ln(j,"MMMM yyyy"))})),D(P(r),"getQuarterClassNames",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate,S=p.selected,k=p.minDate,j=p.maxDate,E=p.preSelection,C=p.disabledKeyboardNavigation;return Un("react-datepicker__quarter-text","react-datepicker__quarter-".concat(d),{"react-datepicker__quarter-text--disabled":(k||j)&&hj(ci(h,d),r.props),"react-datepicker__quarter-text--selected":r.isSelectedQuarter(h,d,S),"react-datepicker__quarter-text--keyboard-selected":!C&&ui(E)===d,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(d),"react-datepicker__quarter-text--in-range":Cd(v,y,d,h),"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(d),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(d)})})),D(P(r),"getMonthContent",(function(d){var p=r.props,h=p.showFullMonthYearPicker,v=p.renderMonthContent,y=p.locale,S=p.day,k=Jv(d,y),j=Df(d,y);return v?v(d,k,j,S):h?j:k})),D(P(r),"getQuarterContent",(function(d){var p=r.props,h=p.renderQuarterContent,v=(function(y,S){return ln(ci(Vt(),y),"QQQ",S)})(d,p.locale);return h?h(d,v):v})),D(P(r),"renderMonths",(function(){var d=r.props,p=d.showTwoColumnMonthYearPicker,h=d.showFourColumnMonthYearPicker,v=d.day,y=d.selected;return Ed[ug(h,p)].grid.map((function(S,k){return K.createElement("div",{className:"react-datepicker__month-wrapper",key:k},S.map((function(j,E){return K.createElement("div",{ref:r.MONTH_REFS[j],key:E,onClick:function(C){r.onMonthClick(C,j)},onKeyDown:function(C){r.onMonthKeyDown(C,j)},onMouseEnter:function(){return r.onMonthMouseEnter(j)},tabIndex:r.getTabIndex(j),className:r.getMonthClassNames(j),role:"option","aria-label":r.getAriaLabel(j),"aria-current":r.isCurrentMonth(v,j)?"date":void 0,"aria-selected":r.isSelectedMonth(v,j,y)},r.getMonthContent(j))})))}))})),D(P(r),"renderQuarters",(function(){var d=r.props,p=d.day,h=d.selected;return K.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(v,y){return K.createElement("div",{key:y,ref:r.QUARTER_REFS[y],role:"option",onClick:function(S){r.onQuarterClick(S,v)},onKeyDown:function(S){r.onQuarterKeyDown(S,v)},onMouseEnter:function(){return r.onQuarterMouseEnter(v)},className:r.getQuarterClassNames(v),"aria-selected":r.isSelectedQuarter(p,v,h),tabIndex:r.getQuarterTabIndex(v),"aria-current":r.isCurrentQuarter(p,v)?"date":void 0},r.getQuarterContent(v))})))})),D(P(r),"getClassNames",(function(){var d=r.props,p=d.selectingDate,h=d.selectsStart,v=d.selectsEnd,y=d.showMonthYearPicker,S=d.showQuarterYearPicker,k=d.showWeekPicker;return Un("react-datepicker__month",{"react-datepicker__month--selecting-range":p&&(h||v)},{"react-datepicker__monthPicker":y},{"react-datepicker__quarterPicker":S},{"react-datepicker__weekPicker":k})})),r}return Pn(i,[{key:"render",value:function(){var r=this.props,t=r.showMonthYearPicker,l=r.showQuarterYearPicker,u=r.day,d=r.ariaLabelPrefix,p=d===void 0?"month ":d;return K.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(p," ").concat(ln(u,"yyyy-MM")),role:"listbox"},t?this.renderMonths():l?this.renderQuarters():this.renderWeeks())}}]),i})(),sx=(function(n){_n(i,K.Component);var a=On(i);function i(){var r;Rn(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(P(r=a.call.apply(a,[this].concat(l))),"state",{height:null}),D(P(r),"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){r.list&&(r.list.scrollTop=r.centerLi&&i.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-r.header.clientHeight:r.list.clientHeight,r.centerLi))}))})),D(P(r),"handleClick",(function(d){(r.props.minTime||r.props.maxTime)&&ng(d,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&tg(d,r.props)||r.props.onChange(d)})),D(P(r),"isSelectedTime",(function(d){return r.props.selected&&(p=r.props.selected,h=d,cg(p).getTime()===cg(h).getTime());var p,h})),D(P(r),"isDisabledTime",(function(d){return(r.props.minTime||r.props.maxTime)&&ng(d,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&tg(d,r.props)})),D(P(r),"liClasses",(function(d){var p=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(d):void 0];return r.isSelectedTime(d)&&p.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(d)&&p.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(60*ca(d)+la(d))%r.props.intervals!=0&&p.push("react-datepicker__time-list-item--injected"),p.join(" ")})),D(P(r),"handleOnKeyDown",(function(d,p){d.key===" "&&(d.preventDefault(),d.key="Enter"),d.key!=="ArrowUp"&&d.key!=="ArrowLeft"||!d.target.previousSibling||(d.preventDefault(),d.target.previousSibling.focus()),d.key!=="ArrowDown"&&d.key!=="ArrowRight"||!d.target.nextSibling||(d.preventDefault(),d.target.nextSibling.focus()),d.key==="Enter"&&r.handleClick(p),r.props.handleOnKeyDown(d)})),D(P(r),"renderTimes",(function(){for(var d=[],p=r.props.format?r.props.format:"p",h=r.props.intervals,v=r.props.selected||r.props.openToDate||Vt(),y=ua(v),S=r.props.injectTimes&&r.props.injectTimes.sort((function(_,$){return _-$})),k=60*(function(_){var $=new Date(_.getFullYear(),_.getMonth(),_.getDate()),Z=new Date(_.getFullYear(),_.getMonth(),_.getDate(),24);return Math.round((+Z-+$)/36e5)})(v),j=k/h,E=0;E<j;E++){var C=Wd(y,E*h);if(d.push(C),S){var F=vj(y,C,E,h,S);d=d.concat(F)}}var O=d.reduce((function(_,$){return $.getTime()<=v.getTime()?$:_}),d[0]);return d.map((function(_,$){return K.createElement("li",{key:$,onClick:r.handleClick.bind(P(r),_),className:r.liClasses(_),ref:function(Z){_===O&&(r.centerLi=Z)},onKeyDown:function(Z){r.handleOnKeyDown(Z,_)},tabIndex:_===O?0:-1,role:"option","aria-selected":r.isSelectedTime(_)?"true":void 0,"aria-disabled":r.isDisabledTime(_)?"true":void 0},ln(_,p,r.props.locale))}))})),r}return Pn(i,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,t=this.state.height;return K.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},K.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(l){r.header=l}},K.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),K.createElement("div",{className:"react-datepicker__time"},K.createElement("div",{className:"react-datepicker__time-box"},K.createElement("ul",{className:"react-datepicker__time-list",ref:function(l){r.list=l},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),i})();D(sx,"calcCenterPosition",(function(n,a){return a.offsetTop-(n/2-a.clientHeight/2)}));var Mj=(function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),D(P(t=a.call(this,r)),"YEAR_REFS",jo(Array(t.props.yearItemNumber)).map((function(){return K.createRef()}))),D(P(t),"isDisabled",(function(l){return Mc(l,t.props)})),D(P(t),"isExcluded",(function(l){return Mf(l,t.props)})),D(P(t),"selectingDate",(function(){var l;return(l=t.props.selectingDate)!==null&&l!==void 0?l:t.props.preSelection})),D(P(t),"updateFocusOnPaginate",(function(l){var u=(function(){this.YEAR_REFS[l].current.focus()}).bind(P(t));window.requestAnimationFrame(u)})),D(P(t),"handleYearClick",(function(l,u){t.props.onDayClick&&t.props.onDayClick(l,u)})),D(P(t),"handleYearNavigation",(function(l,u){var d=t.props,p=d.date,h=d.yearItemNumber,v=di(p,h).startPeriod;t.isDisabled(u)||t.isExcluded(u)||(t.props.setPreSelection(u),l-v==-1?t.updateFocusOnPaginate(h-1):l-v===h?t.updateFocusOnPaginate(0):t.YEAR_REFS[l-v].current.focus())})),D(P(t),"isSameDay",(function(l,u){return Xt(l,u)})),D(P(t),"isCurrentYear",(function(l){return l===St(Vt())})),D(P(t),"isRangeStart",(function(l){return t.props.startDate&&t.props.endDate&&Za(Ea(Vt(),l),t.props.startDate)})),D(P(t),"isRangeEnd",(function(l){return t.props.startDate&&t.props.endDate&&Za(Ea(Vt(),l),t.props.endDate)})),D(P(t),"isInRange",(function(l){return jd(l,t.props.startDate,t.props.endDate)})),D(P(t),"isInSelectingRange",(function(l){var u=t.props,d=u.selectsStart,p=u.selectsEnd,h=u.selectsRange,v=u.startDate,y=u.endDate;return!(!(d||p||h)||!t.selectingDate())&&(d&&y?jd(l,t.selectingDate(),y):(p&&v||!(!h||!v||y))&&jd(l,v,t.selectingDate()))})),D(P(t),"isSelectingRangeStart",(function(l){if(!t.isInSelectingRange(l))return!1;var u=t.props,d=u.startDate,p=u.selectsStart,h=Ea(Vt(),l);return Za(h,p?t.selectingDate():d)})),D(P(t),"isSelectingRangeEnd",(function(l){if(!t.isInSelectingRange(l))return!1;var u=t.props,d=u.endDate,p=u.selectsEnd,h=u.selectsRange,v=Ea(Vt(),l);return Za(v,p||h?t.selectingDate():d)})),D(P(t),"isKeyboardSelected",(function(l){var u=io(Ea(t.props.date,l));return!t.props.disabledKeyboardNavigation&&!t.props.inline&&!Xt(u,io(t.props.selected))&&Xt(u,io(t.props.preSelection))})),D(P(t),"onYearClick",(function(l,u){var d=t.props.date;t.handleYearClick(io(Ea(d,u)),l)})),D(P(t),"onYearKeyDown",(function(l,u){var d=l.key;if(!t.props.disabledKeyboardNavigation)switch(d){case"Enter":t.onYearClick(l,u),t.props.setPreSelection(t.props.selected);break;case"ArrowRight":t.handleYearNavigation(u+1,vi(t.props.preSelection,1));break;case"ArrowLeft":t.handleYearNavigation(u-1,wo(t.props.preSelection,1))}})),D(P(t),"getYearClassNames",(function(l){var u=t.props,d=u.minDate,p=u.maxDate,h=u.selected,v=u.excludeDates,y=u.includeDates,S=u.filterDate;return Un("react-datepicker__year-text",{"react-datepicker__year-text--selected":l===St(h),"react-datepicker__year-text--disabled":(d||p||v||y||S)&&Zv(l,t.props),"react-datepicker__year-text--keyboard-selected":t.isKeyboardSelected(l),"react-datepicker__year-text--range-start":t.isRangeStart(l),"react-datepicker__year-text--range-end":t.isRangeEnd(l),"react-datepicker__year-text--in-range":t.isInRange(l),"react-datepicker__year-text--in-selecting-range":t.isInSelectingRange(l),"react-datepicker__year-text--selecting-range-start":t.isSelectingRangeStart(l),"react-datepicker__year-text--selecting-range-end":t.isSelectingRangeEnd(l),"react-datepicker__year-text--today":t.isCurrentYear(l)})})),D(P(t),"getYearTabIndex",(function(l){return t.props.disabledKeyboardNavigation?"-1":l===St(t.props.preSelection)?"0":"-1"})),D(P(t),"getYearContainerClassNames",(function(){var l=t.props,u=l.selectingDate,d=l.selectsStart,p=l.selectsEnd,h=l.selectsRange;return Un("react-datepicker__year",{"react-datepicker__year--selecting-range":u&&(d||p||h)})})),D(P(t),"getYearContent",(function(l){return t.props.renderYearContent?t.props.renderYearContent(l):l})),t}return Pn(i,[{key:"render",value:function(){for(var r=this,t=[],l=this.props,u=l.date,d=l.yearItemNumber,p=l.onYearMouseEnter,h=l.onYearMouseLeave,v=di(u,d),y=v.startPeriod,S=v.endPeriod,k=function(E){t.push(K.createElement("div",{ref:r.YEAR_REFS[E-y],onClick:function(C){r.onYearClick(C,E)},onKeyDown:function(C){r.onYearKeyDown(C,E)},tabIndex:r.getYearTabIndex(E),className:r.getYearClassNames(E),onMouseEnter:function(C){return p(C,E)},onMouseLeave:function(C){return h(C,E)},key:E,"aria-current":r.isCurrentYear(E)?"date":void 0},r.getYearContent(E)))},j=y;j<=S;j++)k(j);return K.createElement("div",{className:this.getYearContainerClassNames()},K.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},t))}}]),i})(),Rj=(function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),D(P(t=a.call(this,r)),"onTimeChange",(function(l){t.setState({time:l});var u=t.props.date,d=u instanceof Date&&!isNaN(u)?u:new Date;d.setHours(l.split(":")[0]),d.setMinutes(l.split(":")[1]),t.props.onChange(d)})),D(P(t),"renderTimeInput",(function(){var l=t.state.time,u=t.props,d=u.date,p=u.timeString,h=u.customTimeInput;return h?K.cloneElement(h,{date:d,value:l,onChange:t.onTimeChange}):K.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:l,onChange:function(v){t.onTimeChange(v.target.value||p)}})})),t.state={time:t.props.timeString},t}return Pn(i,[{key:"render",value:function(){return K.createElement("div",{className:"react-datepicker__input-time-container"},K.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),K.createElement("div",{className:"react-datepicker-time__input-container"},K.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,t){return r.timeString!==t.time?{time:r.timeString}:null}}]),i})();function Pj(n){var a=n.className,i=n.children,r=n.showPopperArrow,t=n.arrowProps,l=t===void 0?{}:t;return K.createElement("div",{className:a},r&&K.createElement("div",Si({className:"react-datepicker__triangle"},l)),i)}var _j=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Oj=(function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),D(P(t=a.call(this,r)),"handleClickOutside",(function(l){t.props.onClickOutside(l)})),D(P(t),"setClickOutsideRef",(function(){return t.containerRef.current})),D(P(t),"handleDropdownFocus",(function(l){(function(){var u=((arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).className||"").split(/\s+/);return _j.some((function(d){return u.indexOf(d)>=0}))})(l.target)&&t.props.onDropdownFocus()})),D(P(t),"getDateInView",(function(){var l=t.props,u=l.preSelection,d=l.selected,p=l.openToDate,h=ex(t.props),v=tx(t.props),y=Vt(),S=p||d||u;return S||(h&&Xa(y,h)?h:v&&ns(y,v)?v:y)})),D(P(t),"increaseMonth",(function(){t.setState((function(l){var u=l.date;return{date:Vr(u,1)}}),(function(){return t.handleMonthChange(t.state.date)}))})),D(P(t),"decreaseMonth",(function(){t.setState((function(l){var u=l.date;return{date:xi(u,1)}}),(function(){return t.handleMonthChange(t.state.date)}))})),D(P(t),"handleDayClick",(function(l,u,d){t.props.onSelect(l,u,d),t.props.setPreSelection&&t.props.setPreSelection(l)})),D(P(t),"handleDayMouseEnter",(function(l){t.setState({selectingDate:l}),t.props.onDayMouseEnter&&t.props.onDayMouseEnter(l)})),D(P(t),"handleMonthMouseLeave",(function(){t.setState({selectingDate:null}),t.props.onMonthMouseLeave&&t.props.onMonthMouseLeave()})),D(P(t),"handleYearMouseEnter",(function(l,u){t.setState({selectingDate:Ea(Vt(),u)}),t.props.onYearMouseEnter&&t.props.onYearMouseEnter(l,u)})),D(P(t),"handleYearMouseLeave",(function(l,u){t.props.onYearMouseLeave&&t.props.onYearMouseLeave(l,u)})),D(P(t),"handleYearChange",(function(l){t.props.onYearChange&&(t.props.onYearChange(l),t.setState({isRenderAriaLiveMessage:!0})),t.props.adjustDateOnChange&&(t.props.onSelect&&t.props.onSelect(l),t.props.setOpen&&t.props.setOpen(!0)),t.props.setPreSelection&&t.props.setPreSelection(l)})),D(P(t),"handleMonthChange",(function(l){t.handleCustomMonthChange(l),t.props.adjustDateOnChange&&(t.props.onSelect&&t.props.onSelect(l),t.props.setOpen&&t.props.setOpen(!0)),t.props.setPreSelection&&t.props.setPreSelection(l)})),D(P(t),"handleCustomMonthChange",(function(l){t.props.onMonthChange&&(t.props.onMonthChange(l),t.setState({isRenderAriaLiveMessage:!0}))})),D(P(t),"handleMonthYearChange",(function(l){t.handleYearChange(l),t.handleMonthChange(l)})),D(P(t),"changeYear",(function(l){t.setState((function(u){var d=u.date;return{date:Ea(d,l)}}),(function(){return t.handleYearChange(t.state.date)}))})),D(P(t),"changeMonth",(function(l){t.setState((function(u){var d=u.date;return{date:Xn(d,l)}}),(function(){return t.handleMonthChange(t.state.date)}))})),D(P(t),"changeMonthYear",(function(l){t.setState((function(u){var d=u.date;return{date:Ea(Xn(d,Vn(l)),St(l))}}),(function(){return t.handleMonthYearChange(t.state.date)}))})),D(P(t),"header",(function(){var l=fa(arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.state.date,t.props.locale,t.props.calendarStartDay),u=[];return t.props.showWeekNumbers&&u.push(K.createElement("div",{key:"W",className:"react-datepicker__day-name"},t.props.weekLabel||"#")),u.concat([0,1,2,3,4,5,6].map((function(d){var p=Ei(l,d),h=t.formatWeekday(p,t.props.locale),v=t.props.weekDayClassName?t.props.weekDayClassName(p):void 0;return K.createElement("div",{key:d,className:Un("react-datepicker__day-name",v)},h)})))})),D(P(t),"formatWeekday",(function(l,u){return t.props.formatWeekDay?(function(d,p,h){return p(ln(d,"EEEE",h))})(l,t.props.formatWeekDay,u):t.props.useWeekdaysShort?(function(d,p){return ln(d,"EEE",p)})(l,u):(function(d,p){return ln(d,"EEEEEE",p)})(l,u)})),D(P(t),"decreaseYear",(function(){t.setState((function(l){var u=l.date;return{date:wo(u,t.props.showYearPicker?t.props.yearItemNumber:1)}}),(function(){return t.handleYearChange(t.state.date)}))})),D(P(t),"clearSelectingDate",(function(){t.setState({selectingDate:null})})),D(P(t),"renderPreviousButton",(function(){if(!t.props.renderCustomHeader){var l;switch(!0){case t.props.showMonthYearPicker:l=sg(t.state.date,t.props);break;case t.props.showYearPicker:l=(function(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=O.minDate,$=O.yearItemNumber,Z=$===void 0?mo:$,q=di(io(wo(F,Z)),Z).endPeriod,ee=_&&St(_);return ee&&ee>q||!1})(t.state.date,t.props);break;default:l=rg(t.state.date,t.props)}if((t.props.forceShowMonthNavigation||t.props.showDisabledMonthNavigation||!l)&&!t.props.showTimeSelectOnly){var u=["react-datepicker__navigation","react-datepicker__navigation--previous"],d=t.decreaseMonth;(t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker)&&(d=t.decreaseYear),l&&t.props.showDisabledMonthNavigation&&(u.push("react-datepicker__navigation--previous--disabled"),d=null);var p=t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker,h=t.props,v=h.previousMonthButtonLabel,y=h.previousYearButtonLabel,S=t.props,k=S.previousMonthAriaLabel,j=k===void 0?typeof v=="string"?v:"Previous Month":k,E=S.previousYearAriaLabel,C=E===void 0?typeof y=="string"?y:"Previous Year":E;return K.createElement("button",{type:"button",className:u.join(" "),onClick:d,onKeyDown:t.props.handleOnKeyDown,"aria-label":p?C:j},K.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},p?t.props.previousYearButtonLabel:t.props.previousMonthButtonLabel))}}})),D(P(t),"increaseYear",(function(){t.setState((function(l){var u=l.date;return{date:vi(u,t.props.showYearPicker?t.props.yearItemNumber:1)}}),(function(){return t.handleYearChange(t.state.date)}))})),D(P(t),"renderNextButton",(function(){if(!t.props.renderCustomHeader){var l;switch(!0){case t.props.showMonthYearPicker:l=ig(t.state.date,t.props);break;case t.props.showYearPicker:l=(function(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=O.maxDate,$=O.yearItemNumber,Z=$===void 0?mo:$,q=di(vi(F,Z),Z).startPeriod,ee=_&&St(_);return ee&&ee<q||!1})(t.state.date,t.props);break;default:l=ag(t.state.date,t.props)}if((t.props.forceShowMonthNavigation||t.props.showDisabledMonthNavigation||!l)&&!t.props.showTimeSelectOnly){var u=["react-datepicker__navigation","react-datepicker__navigation--next"];t.props.showTimeSelect&&u.push("react-datepicker__navigation--next--with-time"),t.props.todayButton&&u.push("react-datepicker__navigation--next--with-today-button");var d=t.increaseMonth;(t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker)&&(d=t.increaseYear),l&&t.props.showDisabledMonthNavigation&&(u.push("react-datepicker__navigation--next--disabled"),d=null);var p=t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker,h=t.props,v=h.nextMonthButtonLabel,y=h.nextYearButtonLabel,S=t.props,k=S.nextMonthAriaLabel,j=k===void 0?typeof v=="string"?v:"Next Month":k,E=S.nextYearAriaLabel,C=E===void 0?typeof y=="string"?y:"Next Year":E;return K.createElement("button",{type:"button",className:u.join(" "),onClick:d,onKeyDown:t.props.handleOnKeyDown,"aria-label":p?C:j},K.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},p?t.props.nextYearButtonLabel:t.props.nextMonthButtonLabel))}}})),D(P(t),"renderCurrentMonth",(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.state.date,u=["react-datepicker__current-month"];return t.props.showYearDropdown&&u.push("react-datepicker__current-month--hasYearDropdown"),t.props.showMonthDropdown&&u.push("react-datepicker__current-month--hasMonthDropdown"),t.props.showMonthYearDropdown&&u.push("react-datepicker__current-month--hasMonthYearDropdown"),K.createElement("div",{className:u.join(" ")},ln(l,t.props.dateFormat,t.props.locale))})),D(P(t),"renderYearDropdown",(function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(t.props.showYearDropdown&&!l)return K.createElement(bj,{adjustDateOnChange:t.props.adjustDateOnChange,date:t.state.date,onSelect:t.props.onSelect,setOpen:t.props.setOpen,dropdownMode:t.props.dropdownMode,onChange:t.changeYear,minDate:t.props.minDate,maxDate:t.props.maxDate,year:St(t.state.date),scrollableYearDropdown:t.props.scrollableYearDropdown,yearDropdownItemNumber:t.props.yearDropdownItemNumber})})),D(P(t),"renderMonthDropdown",(function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(t.props.showMonthDropdown&&!l)return K.createElement(Nj,{dropdownMode:t.props.dropdownMode,locale:t.props.locale,onChange:t.changeMonth,month:Vn(t.state.date),useShortMonthInDropdown:t.props.useShortMonthInDropdown})})),D(P(t),"renderMonthYearDropdown",(function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(t.props.showMonthYearDropdown&&!l)return K.createElement(jj,{dropdownMode:t.props.dropdownMode,locale:t.props.locale,dateFormat:t.props.dateFormat,onChange:t.changeMonthYear,minDate:t.props.minDate,maxDate:t.props.maxDate,date:t.state.date,scrollableMonthYearDropdown:t.props.scrollableMonthYearDropdown})})),D(P(t),"handleTodayButtonClick",(function(l){t.props.onSelect(Zh(),l),t.props.setPreSelection&&t.props.setPreSelection(Zh())})),D(P(t),"renderTodayButton",(function(){if(t.props.todayButton&&!t.props.showTimeSelectOnly)return K.createElement("div",{className:"react-datepicker__today-button",onClick:function(l){return t.handleTodayButtonClick(l)}},t.props.todayButton)})),D(P(t),"renderDefaultHeader",(function(l){var u=l.monthDate,d=l.i;return K.createElement("div",{className:"react-datepicker__header ".concat(t.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},t.renderCurrentMonth(u),K.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(t.props.dropdownMode),onFocus:t.handleDropdownFocus},t.renderMonthDropdown(d!==0),t.renderMonthYearDropdown(d!==0),t.renderYearDropdown(d!==0)),K.createElement("div",{className:"react-datepicker__day-names"},t.header(u)))})),D(P(t),"renderCustomHeader",(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.monthDate,d=l.i;if(t.props.showTimeSelect&&!t.state.monthContainer||t.props.showTimeSelectOnly)return null;var p=rg(t.state.date,t.props),h=ag(t.state.date,t.props),v=sg(t.state.date,t.props),y=ig(t.state.date,t.props),S=!t.props.showMonthYearPicker&&!t.props.showQuarterYearPicker&&!t.props.showYearPicker;return K.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:t.props.onDropdownFocus},t.props.renderCustomHeader(yc(yc({},t.state),{},{customHeaderCount:d,monthDate:u,changeMonth:t.changeMonth,changeYear:t.changeYear,decreaseMonth:t.decreaseMonth,increaseMonth:t.increaseMonth,decreaseYear:t.decreaseYear,increaseYear:t.increaseYear,prevMonthButtonDisabled:p,nextMonthButtonDisabled:h,prevYearButtonDisabled:v,nextYearButtonDisabled:y})),S&&K.createElement("div",{className:"react-datepicker__day-names"},t.header(u)))})),D(P(t),"renderYearHeader",(function(){var l=t.state.date,u=t.props,d=u.showYearPicker,p=di(l,u.yearItemNumber),h=p.startPeriod,v=p.endPeriod;return K.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},d?"".concat(h," - ").concat(v):St(l))})),D(P(t),"renderHeader",(function(l){switch(!0){case t.props.renderCustomHeader!==void 0:return t.renderCustomHeader(l);case(t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker):return t.renderYearHeader(l);default:return t.renderDefaultHeader(l)}})),D(P(t),"renderMonths",(function(){var l;if(!t.props.showTimeSelectOnly&&!t.props.showYearPicker){for(var u=[],d=t.props.showPreviousMonths?t.props.monthsShown-1:0,p=xi(t.state.date,d),h=(l=t.props.monthSelectedIn)!==null&&l!==void 0?l:d,v=0;v<t.props.monthsShown;++v){var y=Vr(p,v-h+d),S="month-".concat(v),k=v<t.props.monthsShown-1,j=v>0;u.push(K.createElement("div",{key:S,ref:function(E){t.monthContainer=E},className:"react-datepicker__month-container"},t.renderHeader({monthDate:y,i:v}),K.createElement(Dj,{chooseDayAriaLabelPrefix:t.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:t.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:t.props.weekAriaLabelPrefix,ariaLabelPrefix:t.props.monthAriaLabelPrefix,onChange:t.changeMonthYear,day:y,dayClassName:t.props.dayClassName,calendarStartDay:t.props.calendarStartDay,monthClassName:t.props.monthClassName,onDayClick:t.handleDayClick,handleOnKeyDown:t.props.handleOnDayKeyDown,onDayMouseEnter:t.handleDayMouseEnter,onMouseLeave:t.handleMonthMouseLeave,onWeekSelect:t.props.onWeekSelect,orderInDisplay:v,formatWeekNumber:t.props.formatWeekNumber,locale:t.props.locale,minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,highlightDates:t.props.highlightDates,holidays:t.props.holidays,selectingDate:t.state.selectingDate,includeDates:t.props.includeDates,includeDateIntervals:t.props.includeDateIntervals,inline:t.props.inline,shouldFocusDayInline:t.props.shouldFocusDayInline,fixedHeight:t.props.fixedHeight,filterDate:t.props.filterDate,preSelection:t.props.preSelection,setPreSelection:t.props.setPreSelection,selected:t.props.selected,selectsStart:t.props.selectsStart,selectsEnd:t.props.selectsEnd,selectsRange:t.props.selectsRange,selectsDisabledDaysInRange:t.props.selectsDisabledDaysInRange,showWeekNumbers:t.props.showWeekNumbers,startDate:t.props.startDate,endDate:t.props.endDate,peekNextMonth:t.props.peekNextMonth,setOpen:t.props.setOpen,shouldCloseOnSelect:t.props.shouldCloseOnSelect,renderDayContents:t.props.renderDayContents,renderMonthContent:t.props.renderMonthContent,renderQuarterContent:t.props.renderQuarterContent,renderYearContent:t.props.renderYearContent,disabledKeyboardNavigation:t.props.disabledKeyboardNavigation,showMonthYearPicker:t.props.showMonthYearPicker,showFullMonthYearPicker:t.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:t.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:t.props.showFourColumnMonthYearPicker,showYearPicker:t.props.showYearPicker,showQuarterYearPicker:t.props.showQuarterYearPicker,showWeekPicker:t.props.showWeekPicker,isInputFocused:t.props.isInputFocused,containerRef:t.containerRef,monthShowsDuplicateDaysEnd:k,monthShowsDuplicateDaysStart:j})))}return u}})),D(P(t),"renderYears",(function(){if(!t.props.showTimeSelectOnly)return t.props.showYearPicker?K.createElement("div",{className:"react-datepicker__year--container"},t.renderHeader(),K.createElement(Mj,Si({onDayClick:t.handleDayClick,selectingDate:t.state.selectingDate,clearSelectingDate:t.clearSelectingDate,date:t.state.date},t.props,{onYearMouseEnter:t.handleYearMouseEnter,onYearMouseLeave:t.handleYearMouseLeave}))):void 0})),D(P(t),"renderTimeSection",(function(){if(t.props.showTimeSelect&&(t.state.monthContainer||t.props.showTimeSelectOnly))return K.createElement(sx,{selected:t.props.selected,openToDate:t.props.openToDate,onChange:t.props.onTimeChange,timeClassName:t.props.timeClassName,format:t.props.timeFormat,includeTimes:t.props.includeTimes,intervals:t.props.timeIntervals,minTime:t.props.minTime,maxTime:t.props.maxTime,excludeTimes:t.props.excludeTimes,filterTime:t.props.filterTime,timeCaption:t.props.timeCaption,todayButton:t.props.todayButton,showMonthDropdown:t.props.showMonthDropdown,showMonthYearDropdown:t.props.showMonthYearDropdown,showYearDropdown:t.props.showYearDropdown,withPortal:t.props.withPortal,monthRef:t.state.monthContainer,injectTimes:t.props.injectTimes,locale:t.props.locale,handleOnKeyDown:t.props.handleOnKeyDown,showTimeSelectOnly:t.props.showTimeSelectOnly})})),D(P(t),"renderInputTimeSection",(function(){var l=new Date(t.props.selected),u=Ja(l)&&t.props.selected?"".concat(lg(l.getHours()),":").concat(lg(l.getMinutes())):"";if(t.props.showTimeInput)return K.createElement(Rj,{date:l,timeString:u,timeInputLabel:t.props.timeInputLabel,onChange:t.props.onTimeChange,customTimeInput:t.props.customTimeInput})})),D(P(t),"renderAriaLiveRegion",(function(){var l,u=di(t.state.date,t.props.yearItemNumber),d=u.startPeriod,p=u.endPeriod;return l=t.props.showYearPicker?"".concat(d," - ").concat(p):t.props.showMonthYearPicker||t.props.showQuarterYearPicker?St(t.state.date):"".concat(Df(Vn(t.state.date),t.props.locale)," ").concat(St(t.state.date)),K.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},t.state.isRenderAriaLiveMessage&&l)})),D(P(t),"renderChildren",(function(){if(t.props.children)return K.createElement("div",{className:"react-datepicker__children-container"},t.props.children)})),t.containerRef=K.createRef(),t.state={date:t.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},t}return Pn(i,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=void r.setState({monthContainer:r.monthContainer}))}},{key:"componentDidUpdate",value:function(r){var t=this;if(!this.props.preSelection||Xt(this.props.preSelection,r.preSelection)&&this.props.monthSelectedIn===r.monthSelectedIn)this.props.openToDate&&!Xt(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate});else{var l=!Wr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return l&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var r=this.props.container||Pj;return K.createElement("div",{style:{display:"contents"},ref:this.containerRef},K.createElement(r,{className:Un("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:mo}}}]),i})(),Aj=function(n){var a=n.icon,i=n.className,r=i===void 0?"":i,t=n.onClick,l="react-datepicker__calendar-icon";return K.isValidElement(a)?K.cloneElement(a,{className:"".concat(a.props.className||""," ").concat(l," ").concat(r),onClick:function(u){typeof a.props.onClick=="function"&&a.props.onClick(u),typeof t=="function"&&t(u)}}):typeof a=="string"?K.createElement("i",{className:"".concat(l," ").concat(a," ").concat(r),"aria-hidden":"true",onClick:t}):K.createElement("svg",{className:"".concat(l," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:t},K.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},ix=(function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),(t=a.call(this,r)).el=document.createElement("div"),t}return Pn(i,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return f0.createPortal(this.props.children,this.el)}}]),i})(),Ij=function(n){return!n.disabled&&n.tabIndex!==-1},ox=(function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),D(P(t=a.call(this,r)),"getTabChildren",(function(){return Array.prototype.slice.call(t.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(Ij)})),D(P(t),"handleFocusStart",(function(){var l=t.getTabChildren();l&&l.length>1&&l[l.length-1].focus()})),D(P(t),"handleFocusEnd",(function(){var l=t.getTabChildren();l&&l.length>1&&l[0].focus()})),t.tabLoopRef=K.createRef(),t}return Pn(i,[{key:"render",value:function(){return this.props.enableTabLoop?K.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},K.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,K.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),i})(),Lj=(function(n){_n(i,K.Component);var a=On(i);function i(){return Rn(this,i),a.apply(this,arguments)}return Pn(i,[{key:"render",value:function(){var r,t=this.props,l=t.className,u=t.wrapperClassName,d=t.hidePopper,p=t.popperComponent,h=t.popperModifiers,v=t.popperPlacement,y=t.popperProps,S=t.targetComponent,k=t.enableTabLoop,j=t.popperOnKeyDown,E=t.portalId,C=t.portalHost;if(!d){var F=Un("react-datepicker-popper",l);r=K.createElement(oj,Si({modifiers:h,placement:v},y),(function(_){var $=_.ref,Z=_.style,q=_.placement,ee=_.arrowProps;return K.createElement(ox,{enableTabLoop:k},K.createElement("div",{ref:$,style:Z,className:F,"data-placement":q,onKeyDown:j},K.cloneElement(p,{arrowProps:ee})))}))}this.props.popperContainer&&(r=K.createElement(this.props.popperContainer,{},r)),E&&!d&&(r=K.createElement(ix,{portalId:E,portalHost:C},r));var O=Un("react-datepicker-wrapper",u);return K.createElement(KS,{className:"react-datepicker-manager"},K.createElement(dj,null,(function(_){var $=_.ref;return K.createElement("div",{ref:$,className:O},S)})),r)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),i})(),dg="react-datepicker-ignore-onclickoutside",Fj=Tc(Oj),Td="Date input not valid.",lx=(function(n){_n(i,K.Component);var a=On(i);function i(r){var t;return Rn(this,i),D(P(t=a.call(this,r)),"getPreSelection",(function(){return t.props.openToDate?t.props.openToDate:t.props.selectsEnd&&t.props.startDate?t.props.startDate:t.props.selectsStart&&t.props.endDate?t.props.endDate:Vt()})),D(P(t),"modifyHolidays",(function(){var l;return(l=t.props.holidays)===null||l===void 0?void 0:l.reduce((function(u,d){var p=new Date(d.date);return bo(p)?[].concat(jo(u),[yc(yc({},d),{},{date:p})]):u}),[])})),D(P(t),"calcInitialState",(function(){var l,u=t.getPreSelection(),d=ex(t.props),p=tx(t.props),h=d&&Xa(u,ua(d))?d:p&&ns(u,Vd(p))?p:u;return{open:t.props.startOpen||!1,preventFocus:!1,preSelection:(l=t.props.selectsRange?t.props.startDate:t.props.selected)!==null&&l!==void 0?l:h,highlightDates:og(t.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),D(P(t),"clearPreventFocusTimeout",(function(){t.preventFocusTimeout&&clearTimeout(t.preventFocusTimeout)})),D(P(t),"setFocus",(function(){t.input&&t.input.focus&&t.input.focus({preventScroll:!0})})),D(P(t),"setBlur",(function(){t.input&&t.input.blur&&t.input.blur(),t.cancelFocusInput()})),D(P(t),"setOpen",(function(l){var u=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t.setState({open:l,preSelection:l&&t.state.open?t.state.preSelection:t.calcInitialState().preSelection,lastPreSelectChange:Dd},(function(){l||t.setState((function(d){return{focused:!!u&&d.focused}}),(function(){!u&&t.setBlur(),t.setState({inputValue:null})}))}))})),D(P(t),"inputOk",(function(){return Ec(t.state.preSelection)})),D(P(t),"isCalendarOpen",(function(){return t.props.open===void 0?t.state.open&&!t.props.disabled&&!t.props.readOnly:t.props.open})),D(P(t),"handleFocus",(function(l){t.state.preventFocus||(t.props.onFocus(l),t.props.preventOpenOnFocus||t.props.readOnly||t.setOpen(!0)),t.setState({focused:!0})})),D(P(t),"sendFocusBackToInput",(function(){t.preventFocusTimeout&&t.clearPreventFocusTimeout(),t.setState({preventFocus:!0},(function(){t.preventFocusTimeout=setTimeout((function(){t.setFocus(),t.setState({preventFocus:!1})}))}))})),D(P(t),"cancelFocusInput",(function(){clearTimeout(t.inputFocusTimeout),t.inputFocusTimeout=null})),D(P(t),"deferFocusInput",(function(){t.cancelFocusInput(),t.inputFocusTimeout=setTimeout((function(){return t.setFocus()}),1)})),D(P(t),"handleDropdownFocus",(function(){t.cancelFocusInput()})),D(P(t),"handleBlur",(function(l){(!t.state.open||t.props.withPortal||t.props.showTimeInput)&&t.props.onBlur(l),t.setState({focused:!1})})),D(P(t),"handleCalendarClickOutside",(function(l){t.props.inline||t.setOpen(!1),t.props.onClickOutside(l),t.props.withPortal&&l.preventDefault()})),D(P(t),"handleChange",(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var p=u[0];if(!t.props.onChangeRaw||(t.props.onChangeRaw.apply(P(t),u),typeof p.isDefaultPrevented=="function"&&!p.isDefaultPrevented())){t.setState({inputValue:p.target.value,lastPreSelectChange:zj});var h,v,y,S,k,j,E,C,F=(h=p.target.value,v=t.props.dateFormat,y=t.props.locale,S=t.props.strictParsing,k=t.props.minDate,j=null,E=Ms(y)||Ms(Ds()),C=!0,Array.isArray(v)?(v.forEach((function(O){var _=xd(h,O,new Date,{locale:E});S&&(C=Ja(_,k)&&h===ln(_,O,y)),Ja(_,k)&&C&&(j=_)})),j):(j=xd(h,v,new Date,{locale:E}),S?C=Ja(j)&&h===ln(j,v,y):Ja(j)||(v=v.match(mj).map((function(O){var _=O[0];return _==="p"||_==="P"?E?(0,pj[_])(O,E.formatLong):_:O})).join(""),h.length>0&&(j=xd(h,v.slice(0,h.length),new Date)),Ja(j)||(j=new Date(h))),Ja(j)&&C?j:null));t.props.showTimeSelectOnly&&t.props.selected&&F&&!Xt(F,t.props.selected)&&(F=fj(t.props.selected,{hours:ca(F),minutes:la(F),seconds:Ch(F)})),!F&&p.target.value||(t.props.showWeekPicker&&(F=fa(F,t.props.locale,t.props.calendarStartDay)),t.setSelected(F,p,!0))}})),D(P(t),"handleSelect",(function(l,u,d){if(t.props.shouldCloseOnSelect&&!t.props.showTimeSelect&&t.sendFocusBackToInput(),t.props.onChangeRaw&&t.props.onChangeRaw(u),t.props.showWeekPicker&&(l=fa(l,t.props.locale,t.props.calendarStartDay)),t.setSelected(l,u,!1,d),t.props.showDateSelect&&t.setState({isRenderAriaLiveMessage:!0}),!t.props.shouldCloseOnSelect||t.props.showTimeSelect)t.setPreSelection(l);else if(!t.props.inline){t.props.selectsRange||t.setOpen(!1);var p=t.props,h=p.startDate,v=p.endDate;!h||v||Xa(l,h)||t.setOpen(!1)}})),D(P(t),"setSelected",(function(l,u,d,p){var h=l;if(t.props.showYearPicker){if(h!==null&&Zv(St(h),t.props))return}else if(t.props.showMonthYearPicker){if(h!==null&&Xv(h,t.props))return}else if(h!==null&&Mc(h,t.props))return;var v=t.props,y=v.onChange,S=v.selectsRange,k=v.startDate,j=v.endDate;if(!Es(t.props.selected,h)||t.props.allowSameDay||S)if(h!==null&&(!t.props.selected||d&&(t.props.showTimeSelect||t.props.showTimeSelectOnly||t.props.showTimeInput)||(h=Jh(h,{hour:ca(t.props.selected),minute:la(t.props.selected),second:Ch(t.props.selected)})),t.props.inline||t.setState({preSelection:h}),t.props.focusSelectedMonth||t.setState({monthSelectedIn:p})),S){var E=k&&!j,C=k&&j;!k&&!j?y([h,null],u):E&&(Xa(h,k)?y([h,null],u):y([k,h],u)),C&&y([h,null],u)}else y(h,u);d||(t.props.onSelect(h,u),t.setState({inputValue:null}))})),D(P(t),"setPreSelection",(function(l){var u=t.props.minDate!==void 0,d=t.props.maxDate!==void 0,p=!0;if(l){t.props.showWeekPicker&&(l=fa(l,t.props.locale,t.props.calendarStartDay));var h=ua(l);if(u&&d)p=tc(l,t.props.minDate,t.props.maxDate);else if(u){var v=ua(t.props.minDate);p=ns(l,v)||Es(h,v)}else if(d){var y=Vd(t.props.maxDate);p=Xa(l,y)||Es(h,y)}}p&&t.setState({preSelection:l})})),D(P(t),"toggleCalendar",(function(){t.setOpen(!t.state.open)})),D(P(t),"handleTimeChange",(function(l){var u=t.props.selected?t.props.selected:t.getPreSelection(),d=t.props.selected?l:Jh(u,{hour:ca(l),minute:la(l)});t.setState({preSelection:d}),t.props.onChange(d),t.props.shouldCloseOnSelect&&(t.sendFocusBackToInput(),t.setOpen(!1)),t.props.showTimeInput&&t.setOpen(!0),(t.props.showTimeSelectOnly||t.props.showTimeSelect)&&t.setState({isRenderAriaLiveMessage:!0}),t.setState({inputValue:null})})),D(P(t),"onInputClick",(function(){t.props.disabled||t.props.readOnly||t.setOpen(!0),t.props.onInputClick()})),D(P(t),"onInputKeyDown",(function(l){t.props.onKeyDown(l);var u=l.key;if(t.state.open||t.props.inline||t.props.preventOpenOnFocus){if(t.state.open){if(u==="ArrowDown"||u==="ArrowUp"){l.preventDefault();var d=t.props.showWeekPicker&&t.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=t.calendar.componentNode&&t.calendar.componentNode.querySelector(d);return void(p&&p.focus({preventScroll:!0}))}var h=Vt(t.state.preSelection);u==="Enter"?(l.preventDefault(),t.inputOk()&&t.state.lastPreSelectChange===Dd?(t.handleSelect(h,l),!t.props.shouldCloseOnSelect&&t.setPreSelection(h)):t.setOpen(!1)):u==="Escape"?(l.preventDefault(),t.sendFocusBackToInput(),t.setOpen(!1)):u==="Tab"&&t.setOpen(!1),t.inputOk()||t.props.onInputError({code:1,msg:Td})}}else u!=="ArrowDown"&&u!=="ArrowUp"&&u!=="Enter"||t.onInputClick()})),D(P(t),"onPortalKeyDown",(function(l){l.key==="Escape"&&(l.preventDefault(),t.setState({preventFocus:!0},(function(){t.setOpen(!1),setTimeout((function(){t.setFocus(),t.setState({preventFocus:!1})}))})))})),D(P(t),"onDayKeyDown",(function(l){t.props.onKeyDown(l);var u=l.key,d=Vt(t.state.preSelection);if(u==="Enter")l.preventDefault(),t.handleSelect(d,l),!t.props.shouldCloseOnSelect&&t.setPreSelection(d);else if(u==="Escape")l.preventDefault(),t.setOpen(!1),t.inputOk()||t.props.onInputError({code:1,msg:Td});else if(!t.props.disabledKeyboardNavigation){var p;switch(u){case"ArrowLeft":p=t.props.showWeekPicker?jh(d,1):aN(d,1);break;case"ArrowRight":p=t.props.showWeekPicker?dc(d,1):Ei(d,1);break;case"ArrowUp":p=jh(d,1);break;case"ArrowDown":p=dc(d,1);break;case"PageUp":p=xi(d,1);break;case"PageDown":p=Vr(d,1);break;case"Home":p=wo(d,1);break;case"End":p=vi(d,1);break;default:p=null}if(!p)return void(t.props.onInputError&&t.props.onInputError({code:1,msg:Td}));if(l.preventDefault(),t.setState({lastPreSelectChange:Dd}),t.props.adjustDateOnChange&&t.setSelected(p),t.setPreSelection(p),t.props.inline){var h=Vn(d),v=Vn(p),y=St(d),S=St(p);h!==v||y!==S?t.setState({shouldFocusDayInline:!0}):t.setState({shouldFocusDayInline:!1})}}})),D(P(t),"onPopperKeyDown",(function(l){l.key==="Escape"&&(l.preventDefault(),t.sendFocusBackToInput())})),D(P(t),"onClearClick",(function(l){l&&l.preventDefault&&l.preventDefault(),t.sendFocusBackToInput(),t.props.selectsRange?t.props.onChange([null,null],l):t.props.onChange(null,l),t.setState({inputValue:null})})),D(P(t),"clear",(function(){t.onClearClick()})),D(P(t),"onScroll",(function(l){typeof t.props.closeOnScroll=="boolean"&&t.props.closeOnScroll?l.target!==document&&l.target!==document.documentElement&&l.target!==document.body||t.setOpen(!1):typeof t.props.closeOnScroll=="function"&&t.props.closeOnScroll(l)&&t.setOpen(!1)})),D(P(t),"renderCalendar",(function(){return t.props.inline||t.isCalendarOpen()?K.createElement(Fj,{ref:function(l){t.calendar=l},locale:t.props.locale,calendarStartDay:t.props.calendarStartDay,chooseDayAriaLabelPrefix:t.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:t.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:t.props.weekAriaLabelPrefix,monthAriaLabelPrefix:t.props.monthAriaLabelPrefix,adjustDateOnChange:t.props.adjustDateOnChange,setOpen:t.setOpen,shouldCloseOnSelect:t.props.shouldCloseOnSelect,dateFormat:t.props.dateFormatCalendar,useWeekdaysShort:t.props.useWeekdaysShort,formatWeekDay:t.props.formatWeekDay,dropdownMode:t.props.dropdownMode,selected:t.props.selected,preSelection:t.state.preSelection,onSelect:t.handleSelect,onWeekSelect:t.props.onWeekSelect,openToDate:t.props.openToDate,minDate:t.props.minDate,maxDate:t.props.maxDate,selectsStart:t.props.selectsStart,selectsEnd:t.props.selectsEnd,selectsRange:t.props.selectsRange,startDate:t.props.startDate,endDate:t.props.endDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,filterDate:t.props.filterDate,onClickOutside:t.handleCalendarClickOutside,formatWeekNumber:t.props.formatWeekNumber,highlightDates:t.state.highlightDates,holidays:gj(t.modifyHolidays()),includeDates:t.props.includeDates,includeDateIntervals:t.props.includeDateIntervals,includeTimes:t.props.includeTimes,injectTimes:t.props.injectTimes,inline:t.props.inline,shouldFocusDayInline:t.state.shouldFocusDayInline,peekNextMonth:t.props.peekNextMonth,showMonthDropdown:t.props.showMonthDropdown,showPreviousMonths:t.props.showPreviousMonths,useShortMonthInDropdown:t.props.useShortMonthInDropdown,showMonthYearDropdown:t.props.showMonthYearDropdown,showWeekNumbers:t.props.showWeekNumbers,showYearDropdown:t.props.showYearDropdown,withPortal:t.props.withPortal,forceShowMonthNavigation:t.props.forceShowMonthNavigation,showDisabledMonthNavigation:t.props.showDisabledMonthNavigation,scrollableYearDropdown:t.props.scrollableYearDropdown,scrollableMonthYearDropdown:t.props.scrollableMonthYearDropdown,todayButton:t.props.todayButton,weekLabel:t.props.weekLabel,outsideClickIgnoreClass:dg,fixedHeight:t.props.fixedHeight,monthsShown:t.props.monthsShown,monthSelectedIn:t.state.monthSelectedIn,onDropdownFocus:t.handleDropdownFocus,onMonthChange:t.props.onMonthChange,onYearChange:t.props.onYearChange,dayClassName:t.props.dayClassName,weekDayClassName:t.props.weekDayClassName,monthClassName:t.props.monthClassName,timeClassName:t.props.timeClassName,showDateSelect:t.props.showDateSelect,showTimeSelect:t.props.showTimeSelect,showTimeSelectOnly:t.props.showTimeSelectOnly,onTimeChange:t.handleTimeChange,timeFormat:t.props.timeFormat,timeIntervals:t.props.timeIntervals,minTime:t.props.minTime,maxTime:t.props.maxTime,excludeTimes:t.props.excludeTimes,filterTime:t.props.filterTime,timeCaption:t.props.timeCaption,className:t.props.calendarClassName,container:t.props.calendarContainer,yearItemNumber:t.props.yearItemNumber,yearDropdownItemNumber:t.props.yearDropdownItemNumber,previousMonthAriaLabel:t.props.previousMonthAriaLabel,previousMonthButtonLabel:t.props.previousMonthButtonLabel,nextMonthAriaLabel:t.props.nextMonthAriaLabel,nextMonthButtonLabel:t.props.nextMonthButtonLabel,previousYearAriaLabel:t.props.previousYearAriaLabel,previousYearButtonLabel:t.props.previousYearButtonLabel,nextYearAriaLabel:t.props.nextYearAriaLabel,nextYearButtonLabel:t.props.nextYearButtonLabel,timeInputLabel:t.props.timeInputLabel,disabledKeyboardNavigation:t.props.disabledKeyboardNavigation,renderCustomHeader:t.props.renderCustomHeader,popperProps:t.props.popperProps,renderDayContents:t.props.renderDayContents,renderMonthContent:t.props.renderMonthContent,renderQuarterContent:t.props.renderQuarterContent,renderYearContent:t.props.renderYearContent,onDayMouseEnter:t.props.onDayMouseEnter,onMonthMouseLeave:t.props.onMonthMouseLeave,onYearMouseEnter:t.props.onYearMouseEnter,onYearMouseLeave:t.props.onYearMouseLeave,selectsDisabledDaysInRange:t.props.selectsDisabledDaysInRange,showTimeInput:t.props.showTimeInput,showMonthYearPicker:t.props.showMonthYearPicker,showFullMonthYearPicker:t.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:t.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:t.props.showFourColumnMonthYearPicker,showYearPicker:t.props.showYearPicker,showQuarterYearPicker:t.props.showQuarterYearPicker,showWeekPicker:t.props.showWeekPicker,showPopperArrow:t.props.showPopperArrow,excludeScrollbar:t.props.excludeScrollbar,handleOnKeyDown:t.props.onKeyDown,handleOnDayKeyDown:t.onDayKeyDown,isInputFocused:t.state.focused,customTimeInput:t.props.customTimeInput,setPreSelection:t.setPreSelection},t.props.children):null})),D(P(t),"renderAriaLiveRegion",(function(){var l,u=t.props,d=u.dateFormat,p=u.locale,h=t.props.showTimeInput||t.props.showTimeSelect?"PPPPp":"PPPP";return l=t.props.selectsRange?"Selected start date: ".concat(na(t.props.startDate,{dateFormat:h,locale:p}),". ").concat(t.props.endDate?"End date: "+na(t.props.endDate,{dateFormat:h,locale:p}):""):t.props.showTimeSelectOnly?"Selected time: ".concat(na(t.props.selected,{dateFormat:d,locale:p})):t.props.showYearPicker?"Selected year: ".concat(na(t.props.selected,{dateFormat:"yyyy",locale:p})):t.props.showMonthYearPicker?"Selected month: ".concat(na(t.props.selected,{dateFormat:"MMMM yyyy",locale:p})):t.props.showQuarterYearPicker?"Selected quarter: ".concat(na(t.props.selected,{dateFormat:"yyyy, QQQ",locale:p})):"Selected date: ".concat(na(t.props.selected,{dateFormat:h,locale:p})),K.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},l)})),D(P(t),"renderDateInput",(function(){var l,u=Un(t.props.className,D({},dg,t.state.open)),d=t.props.customInput||K.createElement("input",{type:"text"}),p=t.props.customInputRef||"ref",h=typeof t.props.value=="string"?t.props.value:typeof t.state.inputValue=="string"?t.state.inputValue:t.props.selectsRange?(function(v,y,S){if(!v)return"";var k=na(v,S),j=y?na(y,S):"";return"".concat(k," - ").concat(j)})(t.props.startDate,t.props.endDate,t.props):na(t.props.selected,t.props);return K.cloneElement(d,(D(D(D(D(D(D(D(D(D(D(l={},p,(function(v){t.input=v})),"value",h),"onBlur",t.handleBlur),"onChange",t.handleChange),"onClick",t.onInputClick),"onFocus",t.handleFocus),"onKeyDown",t.onInputKeyDown),"id",t.props.id),"name",t.props.name),"form",t.props.form),D(D(D(D(D(D(D(D(D(D(l,"autoFocus",t.props.autoFocus),"placeholder",t.props.placeholderText),"disabled",t.props.disabled),"autoComplete",t.props.autoComplete),"className",Un(d.props.className,u)),"title",t.props.title),"readOnly",t.props.readOnly),"required",t.props.required),"tabIndex",t.props.tabIndex),"aria-describedby",t.props.ariaDescribedBy),D(D(D(l,"aria-invalid",t.props.ariaInvalid),"aria-labelledby",t.props.ariaLabelledBy),"aria-required",t.props.ariaRequired)))})),D(P(t),"renderClearButton",(function(){var l=t.props,u=l.isClearable,d=l.disabled,p=l.selected,h=l.startDate,v=l.endDate,y=l.clearButtonTitle,S=l.clearButtonClassName,k=S===void 0?"":S,j=l.ariaLabelClose,E=j===void 0?"Close":j;return!u||p==null&&h==null&&v==null?null:K.createElement("button",{type:"button",className:Un("react-datepicker__close-icon",k,{"react-datepicker__close-icon--disabled":d}),disabled:d,"aria-label":E,onClick:t.onClearClick,title:y,tabIndex:-1})})),t.state=t.calcInitialState(),t.preventFocusTimeout=null,t}return Pn(i,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,t){var l,u;r.inline&&(l=r.selected,u=this.props.selected,l&&u?Vn(l)!==Vn(u)||St(l)!==St(u):l!==u)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:og(this.props.highlightDates)}),t.focused||Es(r.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(t.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),t.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,t=r.showIcon,l=r.icon,u=r.calendarIconClassname,d=r.toggleCalendarOnIconClick,p=this.state.open;return K.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&K.createElement(Aj,Si({icon:l,className:"".concat(u," ").concat(p&&"react-datepicker-ignore-onclickoutside")},d?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var t=this.state.open?K.createElement(ox,{enableTabLoop:this.props.enableTabLoop},K.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(t=K.createElement(ix,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),K.createElement("div",null,this.renderInputContainer(),t)}return K.createElement(Lj,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:mo,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),i})(),zj="input",Dd="navigate",fg={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"halbe Minute",withPreposition:"halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},Uj=function(a,i,r){var t,l=r!=null&&r.addSuffix?fg[a].withPreposition:fg[a].standalone;return typeof l=="string"?t=l:i===1?t=l.one:t=l.other.replace("{{count}}",String(i)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+t:"vor "+t:t},Bj={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},$j={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Yj={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Wj={date:hi({formats:Bj,defaultWidth:"full"}),time:hi({formats:$j,defaultWidth:"full"}),dateTime:hi({formats:Yj,defaultWidth:"full"})},Hj={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},Kj=function(a,i,r,t){return Hj[a]},Vj={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},Gj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},nf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},Qj={narrow:nf.narrow,abbreviated:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:nf.wide},qj={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},Jj={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},Xj={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},Zj=function(a){var i=Number(a);return i+"."},e1={ordinalNumber:Zj,era:aa({values:Vj,defaultWidth:"wide"}),quarter:aa({values:Gj,defaultWidth:"wide",argumentCallback:function(a){return a-1}}),month:aa({values:nf,formattingValues:Qj,defaultWidth:"wide"}),day:aa({values:qj,defaultWidth:"wide"}),dayPeriod:aa({values:Jj,defaultWidth:"wide",formattingValues:Xj,defaultFormattingWidth:"wide"})},t1=/^(\d+)(\.)?/i,n1=/\d+/i,r1={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},a1={any:[/^v/i,/^n/i]},s1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},i1={any:[/1/i,/2/i,/3/i,/4/i]},o1={narrow:/^[jfmasond]/i,abbreviated:/^(j[a]n|feb|mr[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|mrz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},l1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[a]/i,/^f/i,/^mr/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},c1={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},u1={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},d1={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},f1={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},p1={ordinalNumber:Sv({matchPattern:t1,parsePattern:n1,valueCallback:function(a){return parseInt(a)}}),era:sa({matchPatterns:r1,defaultMatchWidth:"wide",parsePatterns:a1,defaultParseWidth:"any"}),quarter:sa({matchPatterns:s1,defaultMatchWidth:"wide",parsePatterns:i1,defaultParseWidth:"any",valueCallback:function(a){return a+1}}),month:sa({matchPatterns:o1,defaultMatchWidth:"wide",parsePatterns:l1,defaultParseWidth:"any"}),day:sa({matchPatterns:c1,defaultMatchWidth:"wide",parsePatterns:u1,defaultParseWidth:"any"}),dayPeriod:sa({matchPatterns:d1,defaultMatchWidth:"wide",parsePatterns:f1,defaultParseWidth:"any"})},cx={code:"de",formatDistance:Uj,formatLong:Wj,formatRelative:Kj,localize:e1,match:p1,options:{weekStartsOn:1,firstWeekContainsDate:4}};const m1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},pg=30;function h1(){try{const n=typeof import.meta<"u"?m1??{}:{},a=n?.VITE_DEFAULT_DUE_OFFSET_MINUTES??n?.DEFAULT_DUE_OFFSET_MINUTES;return a==null||a===""?null:a}catch{return null}}function ux(n,a){const i=Number(n);return Number.isFinite(i)?Math.max(0,i):a}function Rf(){const n=h1();return n!=null?ux(n,pg):pg}function Pf(n){return ux(n,Rf())}qv("de",cx);const g1=1;function Md(n){const a=Pf(n),i=new Date(Date.now()+a*60*1e3);return i.setSeconds(0,0),i}function dx({open:n,onClose:a,onAdded:i,incidentOptions:r=[],defaultDueOffsetMinutes:t=Rf(),initialTitle:l="",initialDesc:u="",initialResponsible:d="",initialType:p=""}){const h=x.useMemo(()=>Pf(t),[t]),[v,y]=x.useState(()=>Md(h)),[S,k]=x.useState(""),[j,E]=x.useState(""),[C,F]=x.useState(""),[O,_]=x.useState(""),[$,Z]=x.useState("");x.useEffect(()=>{n&&(y(Md(h)),k(l||""),E(p||""),F(d||""),_(u||""),Z(""))},[n,h,l,u,d,p]);const q=x.useMemo(()=>$&&r.find(se=>String(se?.id??"")===String($))||null,[r,$]),ee=se=>{se.preventDefault();const ie=v??Md(h),re=$?String($).trim():"";i?.({title:S?.trim(),type:j?.trim(),responsible:C?.trim(),desc:O?.trim(),dueAt:ie?ie.toISOString():null,relatedIncidentId:re||null,incidentTitle:q?.label||null}),a?.()};if(!n)return null;const ae=typeof document<"u"?document.body:null;return ae?Ta.createPortal(o.jsx("div",{className:"fixed inset-0 z-[1200] flex min-h-screen items-center justify-center bg-black/40 p-3 overflow-y-auto",children:o.jsxs("div",{className:"w-[840px] max-w-[90vw] max-h-[90vh] overflow-y-auto rounded-2xl bg-white p-4 shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Aufgabe anlegen"}),o.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:a,title:"Schlieen",children:""})]}),o.jsxs("form",{onSubmit:ee,className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Frist/Kontrollzeitpunkt"}),o.jsx(lx,{selected:v,onChange:se=>y(se),showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeIntervals:g1,timeFormat:"HH:mm",timeCaption:"Zeit",locale:"de",popperPlacement:"bottom-start",isClearable:!0,placeholderText:"Datum auswhlen"})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Titel"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:S,onChange:se=>k(se.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Typ"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:j,onChange:se=>E(se.target.value)})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Verantwortlich (Rolle)"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:C,onChange:se=>F(se.target.value)})]})]}),r.length>0&&o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Einsatz verknpfen"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2 h-10 text-sm",value:$,onChange:se=>Z(se.target.value),children:[o.jsx("option",{value:"",children:"Kein Einsatz"}),r.map(se=>{const ie=String(se?.id??""),Ce=(se?.statusName||se?.statusLabel||"").replace(/:$/,"").trim(),fe=Ce&&Ce.toLowerCase()!=="neu",Me=se?.label??ie,Te=fe?`${Ce}: ${Me}`:Me;return o.jsx("option",{value:ie,children:Te},ie)})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Notizen"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-2 min-h-[120px] max-h-[320px] overflow-y-auto resize-y",value:O,onChange:se=>_(se.target.value)})]}),o.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",onClick:a,className:"px-3 py-1.5 rounded border bg-white",children:"Abbrechen"}),o.jsx("button",{type:"submit",className:"px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",children:"Anlegen"})]})]})]})}),ae):null}const v1=200;function fx({text:n,limit:a=v1,className:i="",textClassName:r="",toggleClassName:t="text-xs text-blue-700 hover:underline"}){const l=x.useMemo(()=>typeof n=="string"?n:"",[n]),[u,d]=x.useState(!1);x.useEffect(()=>{d(!1)},[l]);const p=l.length>a,h=u||!p?l:l.slice(0,a);return l?o.jsxs("div",{className:i,children:[o.jsxs("div",{className:`${r} whitespace-pre-wrap break-words`,children:[h,!u&&p?"":""]}),p?o.jsx("button",{type:"button",className:`${t} mt-1`,onClick:v=>{v.stopPropagation(),d(y=>!y)},"aria-expanded":u,children:u?"Weniger anzeigen":"Mehr anzeigen"}):null]}):o.jsx("div",{className:i,children:o.jsx("div",{className:`${r} whitespace-pre-wrap break-words`,children:""})})}qv("de",cx);const Rd=100,x1=n=>{if(!n)return"";const a=new Date(n);return Number.isNaN(a.getTime())?"":a.toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1})},ho=n=>{if(n==null)return"";const a=String(n).trim();if(!a)return"";if(/^\d+$/.test(a)){const i=String(Number(a));return i==="0"?"0":i}return a},Bl=n=>{const a=[],i=new Set;for(const r of Array.isArray(n)?n:[]){const t=ho(r);!t||i.has(t)||(i.add(t),a.push(t))}return a},$l=n=>{if(!n)return null;const a=ho(n?.nr??n?.id??n?.value);if(!a)return null;const i={nr:a},r=(t,l=[])=>{const u=[n[t],...l.map(d=>n[d])];for(const d of u){if(d==null)continue;const p=String(d).trim();if(p){i[t]=p;return}}};return r("title",["label"]),r("information",["desc","beschreibung","content"]),r("infoTyp"),r("datum"),r("zeit"),r("anvon"),i},Yl=(n,{maxTextLength:a}={})=>{if(!n)return"Meldung";const r=[n.nr?`#${n.nr}`:"Meldung"];n.infoTyp&&r.push(n.infoTyp),n.anvon&&r.push(n.anvon);const t=n.title||n.information;if(t){const u=String(t),d=a&&u.length>a?`${u.slice(0,a)}`:u;r.push(d)}const l=[n.datum,n.zeit].filter(Boolean).join(" ");return l&&r.push(l),r.join("  ")};function y1({open:n,item:a,onClose:i,onSave:r,canEdit:t,incidentOptions:l=[],incidentLookup:u,protocolOptions:d=[],protocolLookup:p,onCreateProtocol:h,onOpenProtocol:v}){const y=a||null,S=x.useMemo(()=>ho(y?.originProtocolNr),[y?.originProtocolNr]),k=!!S,[j,E]=x.useState(!1),[C,F]=x.useState({title:"",type:"",responsible:"",desc:"",dueAt:null,relatedIncidentId:"",linkedProtocolNrs:[]}),O=x.useRef(null),_=x.useMemo(()=>{if(u&&typeof u.get=="function")return u;const L=new Map;return u&&typeof u=="object"&&Object.entries(u).forEach(([V,Q])=>{L.set(String(V),Q)}),L},[u]),$=x.useCallback(L=>{const V=ho(L);V&&v?.(V)},[v]);x.useEffect(()=>{if(!n){O.current=null;return}const L=y?.id??null;if(j&&O.current===L)return;O.current=L,E(!1);const V=Bl(y?.linkedProtocolNrs??(Array.isArray(y?.linkedProtocols)?y.linkedProtocols.map(T=>T?.nr):[])),Q=S&&!V.includes(S)?[...V,S]:V;F({title:y?.title||"",type:y?.type||"",responsible:y?.responsible||"",desc:y?.desc||"",dueAt:y?.dueAt?new Date(y.dueAt):null,relatedIncidentId:y?.relatedIncidentId?String(y.relatedIncidentId):"",linkedProtocolNrs:Q})},[n,y?.id,S,y?.linkedProtocolNrs,y?.linkedProtocols,j]),x.useEffect(()=>{if(!n)return;const L=V=>{V.key==="Escape"&&i?.()};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[n,i]);const Z=x.useMemo(()=>{const L=Bl(C.linkedProtocolNrs);return S&&!L.includes(S)&&L.push(S),L},[C.linkedProtocolNrs,S]),q=x.useMemo(()=>{const L=Bl(y?.linkedProtocolNrs??(Array.isArray(y?.linkedProtocols)?y.linkedProtocols.map(V=>V?.nr):[]));return S&&!L.includes(S)&&L.push(S),L},[y?.linkedProtocolNrs,y?.linkedProtocols,S]),ee=x.useMemo(()=>{const L=new Map;if(Array.isArray(y?.linkedProtocols))for(const V of y.linkedProtocols){const Q=$l(V);Q&&L.set(Q.nr,Q)}return L},[y?.linkedProtocols]),ae=x.useMemo(()=>{const L=Array.isArray(d)?d:[],V=new Set,Q=[];for(const T of L){const Y=$l(T);!Y||V.has(Y.nr)||(V.add(Y.nr),Q.push({value:Y.nr,label:Yl(Y,{maxTextLength:Rd}),detail:Y}))}return Q.sort((T,Y)=>{const H=Number(T.value),ye=Number(Y.value);return Number.isFinite(H)&&Number.isFinite(ye)?ye-H:String(Y.value).localeCompare(String(T.value),"de",{numeric:!0})}),Q},[d]),se=x.useMemo(()=>Z.map(L=>{const V=p&&typeof p.get=="function"?p.get(L):null;return $l(V)||ee.get(L)||{nr:L}}),[Z,p,ee]),ie=x.useMemo(()=>new Set(ae.map(L=>L.value)),[ae]),re=x.useMemo(()=>Z.filter(L=>!ie.has(L)).map(L=>ee.get(L)||{nr:L}),[Z,ie,ee]),Ce=x.useMemo(()=>{if(!y)return Z.length>0;if(Z.length!==q.length)return!0;const L=[...Z].sort(),V=[...q].sort();return L.some((Q,T)=>Q!==V[T])},[y,Z,q]),fe=x.useCallback(L=>{const V=ho(L);V&&F(Q=>{const T=new Set(Bl(Q.linkedProtocolNrs));return T.has(V)?T.delete(V):T.add(V),{...Q,linkedProtocolNrs:[...T]}})},[]),Me=x.useMemo(()=>{if(!y)return!1;const L=C.relatedIncidentId?String(C.relatedIncidentId):"",V=y?.relatedIncidentId?String(y.relatedIncidentId):"";return(C.title??"")!==(y.title??"")||(C.type??"")!==(y.type??"")||(C.responsible??"")!==(y.responsible??"")||(C.desc??"")!==(y.desc??"")||L!==V||((C.dueAt?C.dueAt.toISOString():null)??null)!==((y.dueAt?new Date(y.dueAt).toISOString():null)??null)||Ce},[C,y,Ce]),Te=async()=>{if(!t||!y)return;if(!Me){E(!1);return}const L={id:y.id,title:C.title?.trim()||"",type:C.type?.trim()||"",responsible:C.responsible?.trim()||"",desc:C.desc?.trim()||"",dueAt:C.dueAt?C.dueAt.toISOString():null},V=C.relatedIncidentId?String(C.relatedIncidentId):"";if(V){const T=_.get(V);L.relatedIncidentId=V,L.incidentTitle=T?.label||T?.content||y.incidentTitle||`#${V}`}else L.relatedIncidentId=null,L.incidentTitle=null;const Q=Z;if(L.linkedProtocolNrs=Q,Q.length){const T=[];for(const Y of Q){const H=p&&typeof p.get=="function"?p.get(Y):null,ye=$l(H)||ee.get(Y)||{nr:Y},De={nr:ye.nr},ke=Ue=>{const oe=ye[Ue];if(oe==null)return;const le=String(oe).trim();le&&(De[Ue]=le)};ke("title"),ke("information"),ke("infoTyp"),ke("datum"),ke("zeit"),ke("anvon"),T.push(De)}L.linkedProtocols=T}else L.linkedProtocols=[];await r?.(L),E(!1)},Ne=x.useMemo(()=>{if(!y?.relatedIncidentId)return null;const L=String(y.relatedIncidentId),V=_.get(L);return V?{...V,id:L,fromBoard:!0}:{id:L,label:y.incidentTitle||`#${L}`,statusName:"",fromBoard:!1}},[_,y?.relatedIncidentId,y?.incidentTitle]),xe=x.useMemo(()=>{const L=Array.isArray(l)?l:[];return!Ne||Ne.fromBoard||L.some(V=>String(V.id)===String(Ne.id))?L:[...L,{id:Ne.id,label:`${Ne.label} (nicht mehr am Einsatzboard)`,statusName:Ne.statusName,fromBoard:!1}]},[l,Ne]);return!n||!y?null:o.jsx("div",{className:"fixed inset-0 z-[1200] flex min-h-screen items-start justify-center bg-black/40 p-3 overflow-y-auto",onClick:()=>i?.(),children:o.jsxs("div",{className:"w-[840px] max-w-[90vw] max-h-[90vh] overflow-y-auto rounded-2xl bg-white p-4 shadow-2xl",onClick:L=>L.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Aufgabe"}),o.jsxs("div",{className:"flex items-center gap-2",children:[h?o.jsx("button",{type:"button",onClick:()=>{h(y),i?.()},className:"px-3 py-1.5 rounded bg-blue-600 hover:bg-blue-700 text-white",title:"Meldung aus Aufgabe erstellen",children:"Meldung"}):null,t?j?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>E(!1),className:"px-3 py-1.5 rounded border bg-white",children:"Abbrechen"}),o.jsx("button",{onClick:Te,className:"px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white disabled:opacity-50",disabled:!Me,children:"Speichern"})]}):o.jsx("button",{onClick:()=>E(!0),className:"px-3 py-1.5 rounded border bg-white hover:bg-gray-50",children:"Bearbeiten"}):null,o.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",title:"Schlieen",children:""})]})]}),j?o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Titel"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:C.title,onChange:L=>F(V=>({...V,title:L.target.value}))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Typ"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:C.type,onChange:L=>F(V=>({...V,type:L.target.value}))})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Verantwortlich (Rolle)"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:C.responsible,onChange:L=>F(V=>({...V,responsible:L.target.value}))})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Einsatzverknpfung"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1 h-9",value:C.relatedIncidentId,onChange:L=>F(V=>({...V,relatedIncidentId:L.target.value})),children:[o.jsx("option",{value:"",children:"Kein Einsatz"}),xe.map(L=>{const V=String(L.id),Q=L.statusName||L.statusLabel||"",T=Q?`${Q}: ${L.label}`:L.label;return o.jsx("option",{value:V,children:T},V)})]})]}),o.jsxs("label",{className:"block col-span-2",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Verknpfte Meldungen"}),k?o.jsx("div",{className:"mt-1",children:se.length?o.jsx("ul",{className:"space-y-1 max-h-28 overflow-y-auto pr-1",children:se.map(L=>{const V=L.nr,Q=Yl(L,{maxTextLength:Rd});return o.jsx("li",{children:o.jsx("button",{type:"button",className:"text-blue-700 hover:underline",onClick:()=>{V&&$(V)},title:V?`Meldung #${V} ffnen`:"Meldung ffnen",children:Q})},V)})}):o.jsx("div",{className:"text-sm",children:""})}):o.jsxs("div",{className:"mt-1 flex flex-col gap-2",children:[o.jsx("div",{className:"max-h-48 overflow-y-auto border rounded divide-y",children:ae.length?ae.map(L=>{const V=Z.includes(L.value);return o.jsxs("label",{className:"flex items-start gap-2 px-2 py-2 text-sm hover:bg-gray-50",children:[o.jsx("input",{type:"checkbox",className:"mt-1",checked:V,onChange:()=>fe(L.value)}),o.jsx("span",{children:L.label})]},L.value)}):o.jsx("div",{className:"px-2 py-2 text-sm text-gray-500",children:"Keine Meldungen verfgbar."})}),o.jsx("div",{className:"text-[11px] text-gray-500",children:"Meldungen, bei denen diese Rolle als ergeht an eingetragen ist."}),re.length?o.jsxs("div",{className:"rounded border border-amber-300 bg-amber-50 px-2 py-2 text-xs text-amber-800",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Bereits verknpft (nicht mehr in der Auswahl)"}),o.jsx("ul",{className:"space-y-1",children:re.map(L=>o.jsxs("li",{className:"flex items-start justify-between gap-2",children:[o.jsx("span",{children:Yl(L,{maxTextLength:Rd})}),o.jsx("button",{type:"button",className:"text-red-600 hover:underline",onClick:()=>fe(L.nr),children:"Entfernen"})]},L.nr))})]}):null]})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Notizen"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-2 min-h-[160px] max-h-[320px] overflow-y-auto resize-y",value:C.desc,onChange:L=>F(V=>({...V,desc:L.target.value}))})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Frist/Kontrollzeitpunkt"}),o.jsx(lx,{selected:C.dueAt,onChange:L=>F(V=>({...V,dueAt:L})),showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeIntervals:5,timeFormat:"HH:mm",timeCaption:"Zeit",locale:"de",isClearable:!0,placeholderText:"Kein Termin"})]})]}):o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Titel"}),o.jsx("div",{className:"font-medium break-words",children:y.title||""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Typ"}),o.jsx("div",{children:y.type||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Verantwortlich"}),o.jsx("div",{children:y.responsible||""})]})]}),y.originProtocolNr?o.jsxs("div",{className:"text-xs",children:["Ursprung:"," ",o.jsxs("button",{className:"text-blue-700 hover:underline",onClick:()=>$(y.originProtocolNr),title:`Meldung #${y.originProtocolNr} ffnen`,children:["Meldung: ",y.originProtocolNr]})]}):null,y.relatedIncidentId?o.jsxs("div",{className:"text-xs",children:["Einsatz:"," ",o.jsx("span",{className:"font-medium",children:Ne?.label||y.incidentTitle||`#${y.relatedIncidentId}`}),Ne?.statusName?o.jsxs("span",{className:"text-gray-500 ml-1",children:["(",Ne.statusName,")"]}):null,Ne&&!_.has(String(Ne.id))?o.jsx("span",{className:"ml-1 text-[11px] text-amber-600",children:"(nicht mehr am Einsatzboard)"}):null]}):null,o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Verknpfte Meldungen"}),se.length?o.jsx("ul",{className:"mt-1 space-y-1 max-h-28 overflow-y-auto pr-1",children:se.map(L=>{const V=L.nr,Q=Yl(L);return o.jsx("li",{children:o.jsx("button",{type:"button",className:"text-blue-700 hover:underline",onClick:()=>{V&&$(V)},title:V?`Meldung #${V} ffnen`:"Meldung ffnen",children:Q})},V)})}):o.jsx("div",{className:"text-sm",children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Notizen"}),o.jsx(fx,{text:y.desc})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Frist/Kontrollzeitpunkt"}),o.jsx("div",{className:"font-medium",children:x1(y.dueAt)})]})]})]})})}const b1={Neu:"card-accent-new","In Bearbeitung":"card-accent-progress",Erledigt:"card-accent-done"};function w1({item:n,onClick:a,onShowInfo:i,onAdvance:r,disableAdvance:t,isNew:l,incidentLookup:u,onCreateProtocol:d,onOpenProtocol:p,tick:h}){const v=n||{},{attributes:y,listeners:S,setNodeRef:k,transform:j,transition:E,isDragging:C}=nw({id:v.id});if(!v.id)return null;const F=String(v.status||"")==="Erledigt",O=x.useMemo(()=>{if(!v?.dueAt||F)return"none";const Me=new Date(v.dueAt);if(Number.isNaN(Me.getTime()))return"none";const Te=Me.getTime()-Date.now();return Te<=0?"overdue":Te<=600*1e3?"soon":"none"},[v?.dueAt,F,h]),_=O==="overdue",$=O==="soon",Z=b1[v.status]||"card-accent-new",q=!!(l&&!F),ee=v?.relatedIncidentId?String(v.relatedIncidentId):"",ae=ee&&u?.get?u.get(ee):null,se=ae?.label||v?.incidentTitle||(ee?`#${ee}`:""),ie=ae?.statusName||ae?.statusLabel||"",re=Me=>{if(!Me)return"";const Te=new Date(Me);return Number.isNaN(Te.getTime())?"":Te.toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1})},Ce={transform:ts.Transform.toString(j),transition:E,opacity:C?.6:1,cursor:"grab"},fe=Me=>{if(!Me)return"";const Te=new Date(Me);return Number.isNaN(Te.getTime())?"":Te.toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1})};return o.jsxs("div",{ref:k,style:Ce,className:["sortable-card relative rounded-xl border p-3.5 cursor-pointer",Z,F?"opacity-75":"",_&&!F?"bg-red-50 border-red-200":"bg-slate-50",q?"pulse-incoming":""].filter(Boolean).join(" "),...y,...S,onClick:()=>a?a(v):i?.(v),role:"button",tabIndex:0,"aria-live":q?"polite":void 0,children:[q&&o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl bg-red-500/8 animate-pulse-inner"}),o.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl animate-ping-safe"})]}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-400 leading-4 mb-1.5 font-medium",children:[o.jsx("span",{children:fe(v.createdAt)}),v.updatedAt&&v.updatedAt!==v.createdAt&&o.jsxs("span",{children:["akt. ",fe(v.updatedAt)]})]}),o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:"font-bold text-sm leading-snug text-slate-900 line-clamp-2",children:v.title||"Ohne Titel"}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx("button",{className:"card-action-btn bg-slate-100 text-slate-600 hover:bg-blue-100 hover:text-blue-700",onClick:Me=>{Me.stopPropagation(),d?.(v)},title:"Meldung aus Aufgabe erstellen","aria-label":"Meldung aus Aufgabe erstellen",children:o.jsx("img",{src:"/report-form.png",alt:"",className:"w-4 h-4",draggable:!1})}),o.jsx("button",{className:`card-action-btn ${t?"bg-slate-100 text-slate-300":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,onClick:Me=>{Me.stopPropagation(),t||r?.(v)},disabled:t,title:"Status weiter",children:""})]})]}),v.type&&o.jsx("div",{className:"mt-1.5",children:o.jsx("span",{className:"card-type-badge",children:v.type})}),v.desc?o.jsx(fx,{text:v.desc,className:"mt-2",textClassName:"text-sm text-slate-700 leading-relaxed"}):null,(v.originProtocolNr||v.relatedIncidentId)&&o.jsxs("div",{className:"mt-2.5 flex items-center gap-3 text-[11px]",children:[v.originProtocolNr&&o.jsxs("button",{onClick:Me=>{Me.stopPropagation(),p?.(v.originProtocolNr)},className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",title:`Meldung #${v.originProtocolNr} oeffnen`,children:["Meldung #",v.originProtocolNr]}),se&&o.jsxs("span",{className:"text-slate-600",title:ie?`Einsatz: ${se}
Status: ${ie}`:`Einsatz: ${se}`,children:["Einsatz: ",se,ie?` (${ie})`:""]})]}),v.dueAt&&o.jsxs("div",{className:`card-due ${_&&!F?"card-due-overdue":""} ${$&&!F?"text-amber-600 font-medium":""}`,children:[o.jsx("svg",{className:"w-3.5 h-3.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("span",{children:re(v.dueAt)}),_&&!F&&o.jsx("span",{className:"card-overdue-badge ml-1",children:"Ueberfaellig"})]})]})]})}const Pd=K.memo(w1);let Rs=null,Wl;function px(){try{const n=typeof window<"u"?window:{},a=n.localStorage,i=n.sessionStorage,r=[()=>n.__USER__,()=>n.__APP_AUTH__?.user,()=>a&&JSON.parse(a.getItem("auth.user")||"null"),()=>a&&JSON.parse(a.getItem("user")||"null"),()=>i&&JSON.parse(i.getItem("auth.user")||"null"),()=>i&&JSON.parse(i.getItem("user")||"null")];for(const t of r){const l=t?.();if(l)return l}}catch{}return null}async function N1(){return Rs||Wl||(Wl=(async()=>{async function n(t){const l=await fetch(t,{cache:"no-store"});if(!l.ok)throw new Error(String(l.status));const u=await l.json();return Array.isArray(u)?u:u.roles||[]}let a=[];try{a=await n("/api/user/roles")}catch{a=[]}if(!(Array.isArray(a)&&a.some(t=>t&&typeof t.apps=="object")))try{a=await n("/User_roles.json")}catch{}const r=new Map;for(const t of a||[])!t||!t.id||r.set(String(t.id).toUpperCase(),{id:t.id,label:t.label||t.id,apps:t.apps||{}});return Rs=r,r})(),Wl)}function mx(n){const a=[];if(!n)return a;if(n.role&&(typeof n.role=="string"?a.push(n.role):typeof n.role?.id=="string"&&a.push(n.role.id)),Array.isArray(n.roles))for(const i of n.roles)typeof i=="string"?a.push(i):typeof i?.id=="string"&&a.push(i.id);return a.map(i=>String(i).trim().toUpperCase())}async function hx(){await N1()}function gx(n,a){const i=a??px();if(!Rs)return!1;const r=mx(i),t=String(n);for(const l of r)if(Rs.get(l)?.apps?.[t]==="edit")return!0;return!1}function fi(n,a){const i=String(n||"").trim().toUpperCase();return i?mx(a??px()).includes(i):!1}function S1(){return Rs?Array.from(Rs.entries()).map(([n,a])=>({id:n,label:a?.label||a?.id||n,apps:a?.apps?{...a.apps}:{}})):[]}const _f="Sie haben keine Berechtigung";function go(){if(typeof window>"u")return;const n=typeof window.alert=="function"?window.alert.bind(window):null;n&&n(_f)}function oo(){go();const n=new Error(_f);return n.status=403,n.code="FORBIDDEN",n}const Of={},mg=Of?.VITE_API_BASE_URL,hg=Of?.VITE_LOGIN_BASE_URL,gg=Of?.VITE_CHATBOT_BASE_URL,k1="Verbindung zum Server fehlgeschlagen. Bitte prfen, ob das Backend erreichbar ist.",Hl="Chatbot-Server nicht erreichbar (Port 3100). Bitte sicherstellen, dass der Chatbot-Server luft.";function Ps(n){if(n==null)return"";try{return String(n).trim().replace(/\/+$/,"")}catch{return""}}function j1(){if(typeof window>"u")return"";const n=[window.__APP_LOGIN_BASE_URL__,window.__APP_API_BASE_URL__,window.__APP_BASE_URL__];for(const a of n)if(a)return Ps(a);return""}function Oo(){const n=j1();return n||(mg?Ps(mg):hg?Ps(hg):typeof window<"u"?Ps(`${window.location.protocol}//${window.location.host}`):"")}function C1(){return typeof window<"u"&&window.__APP_CHATBOT_BASE_URL__?Ps(window.__APP_CHATBOT_BASE_URL__):gg?Ps(gg):Oo()}function E1(n){if(!n)return"";const a=String(n);return a.startsWith("/")?a:`/${a}`}const T1=/^https?:/i;function Af(n,a=Oo()){const i=Ps(a);if(!n)return i;if(T1.test(n))return n;const r=E1(n);return i?`${i}${r}`:r}function Ao(n,a=Oo()){return Af(n,a)}function bn(n,a=C1()){return Af(n,a||Oo())}function Pc(n,a=k1){if(n&&(n.name==="TypeError"||n instanceof TypeError)){const i=new Error(a);try{i.cause=n}catch{}return i}return n instanceof Error?n:new Error(a)}async function Io(n,a="GET",i){const r=Ao(`/api/user${n}`);let t;try{t=await fetch(r,{method:a,headers:i?{"Content-Type":"application/json"}:void 0,body:i?JSON.stringify(i):void 0,credentials:"include"})}catch(l){throw Pc(l)}if(!t.ok){if(t.status===403)throw oo();let l;try{l=await t.json()}catch{l={error:t.statusText}}throw new Error(l.error||"API_ERROR")}return t.json()}const D1=(n,a)=>Io("/login","POST",{username:n,password:a}),M1=()=>Io("/me"),R1=()=>Io("/logout","POST"),P1=(n,a,i)=>Io("/master/setup","POST",{password:n,adminUser:a,adminPass:i}),_1=()=>Io("/master/state"),O1={colors:{col_new:"#dc2626",col_progress:"#d97706",col_done:"#059669",col_accent:"#1e40af",col_surface:"rgba(255,255,255,.92)",col_surface_hover:"rgba(255,255,255,.98)"},watermark:{image:"/Logo.png",opacity:.18,sizeVw:90,maxPx:900,posX:50,posY:50,grayscale:!0}};function nc(n){if(!n||typeof n!="object")return;const a=document.documentElement.style,i=n.colors||{};for(const[t,l]of Object.entries(i))typeof l=="string"&&l.trim()&&a.setProperty(`--${t.replace(/_/g,"-")}`,l);const r=n.watermark||{};r.image&&a.setProperty("--wm-image",`url("${r.image}")`),r.opacity!=null&&a.setProperty("--wm-opacity",String(r.opacity)),r.sizeVw!=null&&a.setProperty("--wm-size-vw",`${r.sizeVw}vw`),r.sizeVw!=null&&a.setProperty("--wm-size-vmin",`${r.sizeVw}vmin`),r.maxPx!=null&&a.setProperty("--wm-size-max",`${r.maxPx}px`),r.posX!=null&&a.setProperty("--wm-pos-x",`${r.posX}%`),r.posY!=null&&a.setProperty("--wm-pos-y",`${r.posY}%`),a.setProperty("--wm-filter",r.grayscale?"grayscale(100%)":"none")}function A1(){const n=document.documentElement.style;["--col-new","--col-progress","--col-done","--col-accent","--col-surface","--col-surface-hover","--wm-image","--wm-opacity","--wm-size-vw","--wm-size-vmin","--wm-size-max","--wm-pos-x","--wm-pos-y","--wm-filter"].forEach(i=>n.removeProperty(i))}async function vx(){const n=await fetch("/api/ui-theme",{credentials:"include"});if(!n.ok)throw new Error(`UI-Theme laden fehlgeschlagen: ${n.status}`);return n.json()}async function vg(n){const a=await fetch("/api/ui-theme",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok)throw new Error(`UI-Theme speichern fehlgeschlagen: ${a.status}`);return a.json()}const xx=x.createContext(null),Ti=()=>x.useContext(xx),vo=15*6e4,xg=["mousemove","mousedown","keydown","touchstart","wheel"],yg="auth.skipLogoutOnUnload";function I1(n){if(!n||typeof n!="object")return{idleTimeoutMs:vo,idleTimeoutSeconds:Math.round(vo/1e3),lastSeenIso:null,expiresAtIso:null};const a=Number(n.idleTimeoutMs),i=Number(n.idleTimeoutSeconds);let r=Number.isFinite(a)&&a>0?a:void 0;!r&&Number.isFinite(i)&&i>0&&(r=i*1e3),(!r||!Number.isFinite(r)||r<=0)&&(r=vo);const t=Number.isFinite(i)&&i>0?i:Math.round(r/1e3),l=typeof n.lastSeenIso=="string"?n.lastSeenIso:null,u=typeof n.expiresAtIso=="string"?n.expiresAtIso:typeof n.expiresAt=="string"?n.expiresAt:null;return{idleTimeoutMs:r,idleTimeoutSeconds:t,lastSeenIso:l,expiresAtIso:u}}function _d({children:n}){const[a,i]=x.useState(null),[r,t]=x.useState(null),[l,u]=x.useState(!1),d=x.useRef(Date.now()),p=x.useRef(!1),h=x.useRef(!1),v=x.useCallback(j=>{if(j&&typeof j=="object"){const{session:E,...C}=j;i(C);const F=I1(E);return t(F),d.current=Date.now(),{user:C,session:F}}return i(null),t(null),d.current=Date.now(),{user:null,session:null}},[]);x.useEffect(()=>{let j=!1;return(async()=>{try{const E=await M1();j||v(E)}catch{j||v(null)}finally{j||u(!0)}})(),()=>{j=!0}},[v]),x.useEffect(()=>{if(typeof window<"u")if(window.__APP_AUTH__=window.__APP_AUTH__||{},window.__APP_AUTH__.user=a||null,window.__APP_AUTH__.session=r||null,a){window.__USER__=a;try{localStorage.setItem("auth.user",JSON.stringify(a))}catch{}}else{delete window.__USER__;try{localStorage.removeItem("auth.user")}catch{}}},[a,r]),x.useEffect(()=>{if(typeof window>"u")return()=>{};const j=()=>{h.current=!0;try{window.sessionStorage?.setItem(yg,"1")}catch{}},E=O=>{if(O){if(O.key==="F5"){j();return}(O.key==="r"||O.key==="R")&&(O.ctrlKey||O.metaKey)&&!O.altKey&&j()}};let C=null,F=!1;if(typeof window.location?.reload=="function"){C=window.location.reload;try{window.location.reload=function(..._){return j(),C.apply(this,_)},F=!0}catch{C=null}}return window.addEventListener("keydown",E,!0),()=>{if(window.removeEventListener("keydown",E,!0),F&&C)try{window.location.reload=C}catch{}h.current=!1;try{window.sessionStorage?.removeItem(yg)}catch{}}},[]),x.useEffect(()=>{if(!a){A1();return}let j=!1;return vx().then(E=>{j||nc(E)}).catch(()=>{}),()=>{j=!0}},[a]);const y=x.useCallback(async(j,E)=>{const C=await D1(j,E);return v(C),C},[v]),S=x.useCallback(async(j={})=>{const C=(typeof j=="object"&&j?j:{}).silent===!0;let F=null;try{await R1()}catch(O){F=O,C||console.error(O)}if(v(null),F&&!C)throw F;return!0},[v]),k=x.useCallback(()=>{d.current=Date.now()},[]);return x.useEffect(()=>{if(!a)return p.current=!1,()=>{};k();const j=F=>{if(F?.type==="visibilitychange"){document.hidden||k();return}k()};xg.forEach(F=>document.addEventListener(F,j,!0)),window.addEventListener("focus",j,!0),document.addEventListener("visibilitychange",j,!0);let E=null;const C=r?.idleTimeoutMs??vo;if(Number.isFinite(C)&&C>0){const F=Math.min(6e4,Math.max(5e3,Math.floor(C/3)));E=setInterval(()=>{const O=r?.idleTimeoutMs??vo;if(!Number.isFinite(O)||O<=0)return;Date.now()-d.current>=O&&!p.current&&(p.current=!0,S({silent:!0}).finally(()=>{p.current=!1}))},F)}return()=>{xg.forEach(F=>document.removeEventListener(F,j,!0)),window.removeEventListener("focus",j,!0),document.removeEventListener("visibilitychange",j,!0),E&&clearInterval(E)}},[a,r,k,S]),o.jsx(xx.Provider,{value:{user:a,ready:l,login:y,logout:S,session:r},children:n})}function L1({children:n,fallback:a}){const{user:i,ready:r}=Ti();return r?i?n:a??o.jsx("div",{style:{padding:16},children:"Bitte einloggen"}):null}async function An(n,a,i){const r=Ao(a);let t;try{t=await fetch(r,{method:n,headers:{"Content-Type":"application/json"},body:i===void 0?void 0:JSON.stringify(i),cache:"no-store",credentials:"include"})}catch(u){throw Pc(u)}if(!t.ok)throw new Error(`HTTP ${t.status} ${await t.text().catch(()=>t.statusText)}`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()}async function F1(){return An("GET","/api/board")}async function JC(){return An("GET","/api/vehicles")}async function XC(){return An("GET","/api/groups/availability")}async function ZC(){return An("GET","/api/groups/alerted")}async function eE(n,a,i){const r={available:a};return a===!1&&typeof i<"u"&&i!==null&&String(i).trim()!==""&&(r.until=i),An("PATCH",`/api/vehicles/${encodeURIComponent(n)}/availability`,r)}async function tE(n,a,i){const r={available:a};return a===!1&&typeof i<"u"&&i!==null&&String(i).trim()!==""&&(r.until=i),An("PATCH",`/api/groups/${encodeURIComponent(n)}/availability`,r)}async function nE(){try{return await An("GET","/api/types")}catch{return[]}}async function rE(n="",{signal:a}={}){const i=n?`?role=${encodeURIComponent(n)}`:"",t={method:"GET",credentials:"include",cache:"no-store",headers:n?{"X-Role-Id":n}:{}};a&&(t.signal=a);let l;try{l=await fetch(Ao(`/api/aufgaben${i}`),t)}catch(u){throw Pc(u)}if(!l.ok)throw new Error(`HTTP ${l.status} ${l.statusText}`);try{return await l.json()}catch{return{}}}async function z1(){const n=await An("GET","/api/user/online-roles");return Array.isArray(n?.roles)?n.roles:Array.isArray(n)?n:[]}async function aE(n,a="neu",i=0,r="",t="",l={}){const u={title:n,columnId:a,toIndex:i,ort:r,typ:t};if(l&&typeof l=="object"){const{lat:d,lng:p,latitude:h,longitude:v,...y}=l;Number.isFinite(h)&&(u.latitude=Number(h)),Number.isFinite(v)&&(u.longitude=Number(v)),Number.isFinite(d)&&(u.latitude=Number(d)),Number.isFinite(p)&&(u.longitude=Number(p)),Object.assign(u,y)}return An("POST","/api/cards",u)}async function sE(n,a){return An("PATCH",`/api/cards/${encodeURIComponent(n)}`,a)}async function iE({cardId:n,from:a,to:i,toIndex:r=0}){return An("POST",`/api/cards/${encodeURIComponent(n)}/move`,{from:a,to:i,toIndex:r})}async function oE(n,a){return An("POST",`/api/cards/${encodeURIComponent(n)}/assign`,{vehicleId:a})}async function lE(n,a){return An("POST",`/api/cards/${encodeURIComponent(n)}/unassign`,{vehicleId:a})}async function cE(n,a){return An("PATCH",`/api/cards/${encodeURIComponent(n)}/personnel`,{manualPersonnel:a})}async function U1(){return An("POST","/api/reset",{})}async function uE(){return An("GET","/api/import/auto-config")}function dE(){return Ao("/api/export/pdf")}async function fE(n,a){const i=`cardId=${encodeURIComponent(n)}`,t=Number.isFinite(Number(a))&&Number(a)>0?`${i}&radiusKm=${encodeURIComponent(a)}`:i;let l;try{l=await fetch(Ao(`/api/nearby?${t}`),{credentials:"include",cache:"no-store"})}catch(d){throw Pc(d)}let u=null;try{u=await l.json()}catch{u=null}if(!l.ok){if(l.status===400||l.status===404)return{ok:!1,error:u?.error||"card has no coordinates",center:u?.center??null,radiusKm:u?.radiusKm??null,units:Array.isArray(u?.units)?u.units:[]};const d=new Error("fetchNearby failed");throw u&&(d.response=u),d}return u}async function pE(n,a,i,r=null,t="manual"){return An("PATCH",`/api/vehicles/${encodeURIComponent(n)}/position`,{lat:Number(a),lng:Number(i),incidentId:r,source:t})}async function mE(n){return An("DELETE",`/api/vehicles/${encodeURIComponent(n)}/position`)}const B1=15e3;function $1(n){const a=Array.isArray(n)?n:[],i=new Set;for(const r of a){const t=typeof r=="string"?r.trim().toUpperCase():typeof r?.id=="string"?r.id.trim().toUpperCase():"";t&&i.add(t)}return[...i]}function yx({pollIntervalMs:n=B1}={}){const[a,i]=x.useState([]),[r,t]=x.useState(null),l=x.useRef(null),u=x.useRef(!0);x.useEffect(()=>{u.current=!0;const p=async()=>{try{const h=await z1();if(!u.current)return;i($1(h)),t(null)}catch(h){if(!u.current)return;t(h instanceof Error?h:new Error(String(h)))}finally{if(!u.current)return;Number.isFinite(n)&&n>0&&(l.current=setTimeout(p,n))}};return p(),()=>{u.current=!1,l.current&&(clearTimeout(l.current),l.current=null)}},[n]);const d=x.useMemo(()=>new Set(a),[a]);return{roles:a,roleSet:d,error:r}}const Y1={running:!1,paused:!1,loaded:!1};function bx({pollIntervalMs:n=15e3}={}){const[a,i]=x.useState(Y1);return x.useEffect(()=>{let r=!0,t;const l=async()=>{try{const u=await fetch(bn("/api/sim/status"),{credentials:"include",cache:"no-store"});if(!u.ok)throw new Error(`HTTP ${u.status}`);const p=(await u.json())?.simulation||{};r&&i({running:!!p.running,paused:!!p.paused,loaded:!0})}catch{r&&i(d=>({...d,loaded:!0}))}};return l(),t=window.setInterval(l,n),()=>{r=!1,t&&window.clearInterval(t)}},[n]),a}function wx({className:n="h-5 w-5"}){return o.jsx("img",{className:n,src:"/simulation_aktiv.gif",alt:"Simulation aktiv","aria-hidden":"false"})}const W1="prot.overview.seen";function Kl(n){if(typeof n!="string"){if(n===null||typeof n>"u")return"";try{return String(n).trim()}catch{return""}}return n.trim()}function Nx(n){const a=[];if(n&&typeof n=="object"){const i=Kl(n.userId||n.id||""),r=Kl(n.username||n.name||""),t=Kl(n.role||"");if(i&&a.push(i),r&&r!==i&&a.push(r),t&&a.push(t.toUpperCase()),Array.isArray(n.roles))for(const l of n.roles){const u=typeof l=="string"?l:l&&typeof l.id=="string"?l.id:l&&typeof l.role=="string"?l.role:"",d=Kl(u||"");d&&a.push(d.toUpperCase())}}return a.length?`${W1}.${a.join("|")}`:null}function Sx(){return typeof window<"u"?window:null}function rf(n){const a=Sx();if(!a||!n)return{};try{const i=a.localStorage?.getItem(n);if(!i)return{};const r=JSON.parse(i);if(!r||typeof r!="object")return{};const t={};for(const[l,u]of Object.entries(r))l&&(typeof u=="string"?t[l]=u:Number.isFinite(u)&&(t[l]=`ts:${u}`));return t}catch{return{}}}function H1(n,a){const i=Sx();if(!(!i||!n))try{i.localStorage?.setItem(n,JSON.stringify(a||{}))}catch{}}function K1(n,a,i,r=null){if(!n)return r||{};const t=String(a??"").trim();if(!t)return r||{};const l=typeof i=="string"&&i?i:"__opened__",u=r&&typeof r=="object"?r:rf(n);if(u[t]===l)return u;const d={...u,[t]:l};return H1(n,d),d}function V1(n){if(!n||!Array.isArray(n.massnahmen))return{raw:null,encoded:null};const a=[];for(let t=0;t<n.massnahmen.length;t+=1){const l=n.massnahmen[t];if(!l||!l.done)continue;const u=typeof l.verantwortlich=="string"?l.verantwortlich.trim():"",d=u?u.toUpperCase():"",p=typeof l.massnahme=="string"?l.massnahme.trim():"",h=[d,p].filter(Boolean).join("::")||`idx:${t}`;a.push(`${h}#${t}`)}if(!a.length)return{raw:null,encoded:null};a.sort((t,l)=>t===l?0:t>l?1:-1);const i=a.join("||");let r=i;try{r=encodeURIComponent(i)}catch{}return{raw:i,encoded:r}}function kx(n){const a=Array.isArray(n?.history)?n.history:[];let i=null,r=null,t=null;for(let p=a.length-1;p>=0;p-=1){const h=a[p];if(!h||typeof h!="object")continue;const v=h.action;if(v!=="create"&&v!=="update")continue;t=v;const y=Number(h.ts);Number.isFinite(y)?i=`ts:${y}`:i=`idx:${p}:${v}:${a.length}`,!r&&typeof h.by=="string"&&h.by.trim()&&(r=h.by.trim());break}if(!r){const p=[n?.lastBy,n?.createdBy].find(h=>typeof h=="string"&&h.trim());p&&(r=p.trim())}if(!i){const p=[n?.updatedAt,n?.lastModifiedAt,n?.ts,n?.timestamp];for(const h of p){const v=Number(h);if(Number.isFinite(v)&&v>0){i=`fallback:${v}`;break}}}i||(i=`init:${a.length}:${n?.nr??""}`);const l=V1(n),u=i;return{token:l.encoded?`${u}||done:${l.encoded}`:u,by:r||null,action:t,doneSignature:l.raw}}const G1=new Set(["EL","LTSTB","LTSTBSTV","S1","S2","S3","S4","S5","S6"]),Q1=/^(1|true|ja|yes|on)$/i;function q1(n){if(n==null)return"";const a=String(n).trim();if(!a)return"";const i=a.match(/\b(S[1-6]|EL|LTSTB|LTSTBSTV)\b/i);return i?i[1].toUpperCase():a.replace(/\s+/g,"").toUpperCase()}function J1(n){if(n===!0)return!0;if(n===!1)return!1;if(typeof n=="number")return!Number.isNaN(n)&&n!==0;if(typeof n=="string"){const a=n.trim();return a?Q1.test(a):!1}return!1}function X1(n){if(!n||typeof n!="object")return!1;const a=n.uebermittlungsart||{};if(J1(a.aus))return!0;const i=typeof a.richtung=="string"?a.richtung:n.richtung;return!!(typeof i=="string"&&/aus/i.test(i))}function Z1(n){if(!n||typeof n!="object")return!1;const a=Array.isArray(n.ergehtAn)?n.ergehtAn:[];for(const r of a){const t=typeof r=="string"?r.trim():String(r??"").trim();if(!t)continue;const l=q1(t);if(!G1.has(l))return!0}return!!(typeof n.ergehtAnText=="string"?n.ergehtAnText.trim():"")}function bg(n){return X1(n)?Z1(n):!1}const Od=["EL","LtStb","S1","S2","S3","S4","S5","S6"],_c={LTSTB:{label:"LtStb",description:"Leiter Stab"},LTSTBSTV:{label:"LtStbStv",description:"Stellv. Leiter Stab"},S3:{label:"S3",description:null}},eC=Object.keys(_c);Object.fromEntries(Object.entries(_c).map(([n,a])=>[n,a.label]));const wg=(()=>{const n=_c.LTSTB;return n?`${n.label} (${n.description})`:"LtStb (Leiter Stab)"})(),Qa=()=>({confirmed:!1,by:null,byRole:null,at:null}),Ca={anvon:"prot_sugg_anvon",kanal:"prot_sugg_kanalNr",verantwortlich:"prot_sugg_ver"},Ng="prot_prefill_from_task",tC="task-card",nC="X-Protocol-Task-Override",rC="prefillToken";function aC(){if(typeof window>"u")return null;try{const n=window.location.hash||"",a=n.indexOf("?");if(a===-1)return null;const i=new URLSearchParams(n.slice(a+1)),r=i.get(rC)||i.get("prefill");if(!r)return null;const t=r.trim();return t||null}catch{return null}}function sC(n){if(!n)return"";const a=[],i=t=>{if(typeof t=="string"){const l=t.trim();l&&a.push(l)}},r=n.role;if(r&&typeof r=="object"?(i(r.displayName),i(r.label),i(r.name),i(r.id)):i(r),Array.isArray(n.roles))for(const t of n.roles)t&&typeof t=="object"?(i(t.displayName),i(t.label),i(t.name),i(t.id)):i(t);return a.length?a[0]:""}function Vl(n){const a=String(n||"").trim();if(!a)return null;const i=a.match(/\b(S[1-6]|EL|LTSTB)\b/i);return i?i[1].toUpperCase():a.replace(/\s+/g,"").toUpperCase()}function Ad(n,a=12){const i=new Set,r=[];for(const t of n){const l=String(t||"").trim();if(!(!l||i.has(l))&&(i.add(l),r.push(l),r.length>=a))break}return r}function Sg(n){let a=String(n||"").trim();if(!a)return a;const i=a.match(/^(\d{1,2})[.\-\/](\d{1,2})[.\-\/](\d{2,4})$/);if(i){const t=i[1].padStart(2,"0"),l=i[2].padStart(2,"0");return`${i[3].length===2?"20"+i[3]:i[3]}-${l}-${t}`}const r=a.match(/^(\d{1,2})(\d{1,2})(\d{2,4})$/);if(r){const t=r[1].padStart(2,"0"),l=r[2].padStart(2,"0");return`${r[3].length===2?"20"+r[3]:r[3].padStart(4,"20")}-${l}-${t}`}return a}function kg(n){let a=String(n||"").trim();if(!a)return a;const i=a.match(/^(\d{1,2})(\d{2})$/);if(i)return`${i[1].padStart(2,"0")}:${i[2]}`;const r=a.match(/^(\d{1,2})[:.](\d{1,2})$/);return r?`${r[1].padStart(2,"0")}:${r[2].padStart(2,"0")}`:a}function iC(n){if(n==null)return"";const a=String(n).trim();if(!a)return"";if(/^\d+$/.test(a)){const i=String(Number(a));return i==="0"?"":i}return a}const ra=n=>String(n??"").trim(),jg=n=>{const a=ra(n?.infoTyp).toLowerCase();return(a==="lage"||a==="lagemeldung")&&n?.uebermittlungsart?.richtung==="ein"},oC=n=>ra(n?.massnahme)===""&&ra(n?.verantwortlich)==="",jx=n=>{for(let a=0;a<n.length;a++)if(oC(n[a]))return a;return-1},lC=n=>{const a=Array.isArray(n)?[...n]:[];if(a.some(r=>ra(r?.verantwortlich).toUpperCase()==="S2"))return a;const i=jx(a);return i>=0?a[i]={...a[i],verantwortlich:"S2"}:a.push({massnahme:"",verantwortlich:"S2",done:!1}),a},Cg=()=>({datum:new Date().toISOString().slice(0,10),zeit:new Date().toTimeString().slice(0,5),uebermittlungsart:{richtung:"",kanalNr:""},anvon:{richtung:"",name:""},infoTyp:"",information:"",rueckmeldung1:"",ergehtAn:[],ergehtAnText:"",otherRecipientConfirmation:Qa(),lagebericht:"",massnahmen:Array.from({length:5},()=>({massnahme:"",verantwortlich:"",done:!1}))});function Eg(n,a){return(n===!0?"weather-mail":n===!1||n==null?null:typeof n=="object"&&n?.createdVia||null)==="weather-mail"?a===0?"S2":"":"S2"}function cC({mode:n="create",editNr:a=null,taskPrefillPayload:i=null,onRequestClose:r=null,onSaved:t=null}){const{user:l}=Ti()||{},u=x.useMemo(()=>sC(l),[l]),d=bx(),p=d.running||d.paused,[h,v]=x.useState(!1),[y,S]=x.useState(!1),[k,j]=x.useState(null),[E,C]=x.useState(!1),[F,O]=x.useState(!1),[_,$]=x.useState(null),[Z]=x.useState(()=>i?null:aC()),q=Z?`${Ng}:${Z}`:Ng,ee=!!Z,ae=typeof r=="function",{roles:se}=yx(),ie=x.useMemo(()=>{const M=new Set,z=de=>{const je=Vl(de);je&&M.add(je)};if(l){const de=l.role;if(de&&typeof de=="object"?(z(de.id),z(de.name),z(de.label)):z(de),Array.isArray(l.roles))for(const je of l.roles)je&&(typeof je=="string"?z(je):typeof je=="object"&&(z(je.id),z(je.role),z(je.name),z(je.label)))}return M},[l]),re=x.useMemo(()=>se.some(M=>M==="LTSTB"||M==="LTSTBSTV"),[se]),Ce=x.useMemo(()=>Nx(l),[l]),[fe,Me]=x.useState(!1),[Te,Ne]=x.useState(!1),[xe,L]=x.useState([]);x.useEffect(()=>{let M=!0;return(async()=>{try{if(await hx(),!M)return;const z=gx("protokoll",l),de=!re&&fi("S3",l);Me(z||de),Ne(fi("Admin",l)),L(eC.filter(je=>!(!fi(je,l)||je==="S3"&&re)))}catch{if(!M)return;Me(!1),Ne(!1),L([])}})(),()=>{M=!1}},[re,l]);const[V,Q]=x.useState(()=>{const M=Number(a);return Number.isFinite(M)&&M>0?M:null}),T=Number.isFinite(Number(V))&&Number(V)>0,[Y,H]=x.useState(T),[ye,De]=x.useState(""),[ke,Ue]=x.useState(()=>T?"pending":"not-needed"),[oe,le]=x.useState(null),me=x.useRef(null),Oe=x.useRef(null),Je=x.useRef({nr:null,hasLock:!1}),qe=x.useRef({nr:null,success:!1}),[ut,rt]=x.useState(!1),[_t,Lt]=x.useState(null),[ht,Ke]=x.useState({}),pt=x.useRef(null),Fe=x.useRef(null),Rt=x.useRef(null),Bt=x.useRef(null),Zt=x.useRef(null),en=x.useRef(null),tn=x.useRef(null),J=x.useRef(null),be=x.useRef(!1),bt=x.useRef(null),[mt,dt]=x.useState(null),sn=x.useRef(null),tt=(M,z,de=2200)=>{dt({type:M,text:z}),sn.current&&clearTimeout(sn.current),sn.current=setTimeout(()=>dt(null),de)};x.useEffect(()=>{if(n!=="create"||y){n!=="create"&&!y&&(C(!1),$(null));return}let M=null;if(i)M=i;else{let nt=null;if(Z)try{nt=localStorage.getItem(q)}catch{nt=null}if(!nt)try{nt=sessionStorage.getItem(q)}catch{nt=null}if(!nt)return;try{Z?localStorage.removeItem(q):sessionStorage.removeItem(q)}catch{}try{M=JSON.parse(nt)}catch{M=null}}if(!M||M?.source!==tC)return;const z=String(M?.description??"").trim(),de=String(M?.infoTyp??"").trim();j(M),S(!0),C(!0);const je=(()=>{const nt=ie.values().next();return!nt.done&&nt.value?nt.value:Vl(u)})();$(je||null),W(nt=>{const lt=structuredClone(nt);return z&&(lt.information=z),de&&(lt.infoTyp=de),lt.anvon=lt.anvon||{richtung:"",name:""},lt.anvon.richtung="von",u&&(lt.anvon.name=u),lt});const vt=iC(M?.originProtocolNr);vt&&De(vt),setTimeout(()=>tn.current?.focus(),0),tt?.("info","Meldungsformular aus Aufgabe geffnet  Angaben prfen und ergnzen.")},[n,y,u,ie,Z,q,i]),x.useEffect(()=>{if(!E)return;const z=(()=>{const de=ie.values().next();return!de.done&&de.value?de.value:Vl(u)})()||null;$(de=>de===z?de:z)},[E,ie,u]),x.useEffect(()=>{if(Z)try{const M=new URL(window.location.href),z=M.hash||"",de=z.indexOf("?");de>=0&&(M.hash=z.slice(0,de),window.history.replaceState(null,"",M.toString()))}catch{}},[Z]),x.useEffect(()=>{if(T&&fe){Ue("pending"),le(null);return}Ue("not-needed"),le(null),me.current&&(clearTimeout(me.current),me.current=null),Je.current={nr:null,hasLock:!1},Oe.current=null},[T,V,fe]);const[Ut,Gt]=x.useState([]),[$t,Yt]=x.useState([]),[Ft,Qt]=x.useState([]);x.useEffect(()=>{try{Gt(JSON.parse(localStorage.getItem(Ca.anvon)||"[]")),Yt(JSON.parse(localStorage.getItem(Ca.kanal)||"[]")),Qt(JSON.parse(localStorage.getItem(Ca.verantwortlich)||"[]"))}catch{}},[]);const[Be,W]=x.useState(Cg());x.useEffect(()=>{T||jg(Be)&&W(M=>{const z=Array.isArray(M.massnahmen)?[...M.massnahmen]:[];if(z.some(je=>ra(je?.verantwortlich).toUpperCase()==="S2"))return M;const de=jx(z);return de>=0?z[de]={...z[de],verantwortlich:"S2"}:z.push({massnahme:"",verantwortlich:"S2",done:!1}),{...M,massnahmen:z}})},[Be.infoTyp,Be.uebermittlungsart?.richtung,T]);const ne=!T||ke==="acquired",Ee=fe||y,ve=M=>{M&&Ke(z=>{if(!z||!z[M])return z;const de={...z};return delete de[M],de})},pe=(M,z)=>{const de=Array.isArray(M)?M:String(M).split(".");W(je=>{const vt=je?.otherRecipientConfirmation||Qa(),nt=String(vt.byRole||"").toUpperCase(),lt=!!vt.confirmed;if(!Ee||!ne||lt&&!Qe.has(nt))return je;const fn=structuredClone(je);let qt=fn;for(let Nn=0;Nn<de.length-1;Nn++)qt=qt[de[Nn]];return qt[de.at(-1)]=z,fn})},Qe=x.useMemo(()=>new Set(xe.map(M=>String(M||"").toUpperCase())),[xe]),wt=Be.otherRecipientConfirmation||Qa(),ft=String(wt.byRole||"").toUpperCase(),Et=!!wt.confirmed,at=Et?(()=>{const M=_c[ft],z=M?.label||wt.byRole||ft||"unbekannt",de=M?M.description?`${z} (${M.description})`:z:wt.byRole||ft||wg,je=wt.by||null,vt=wt.at?new Date(wt.at):null,nt=vt&&!Number.isNaN(vt.valueOf())?vt.toLocaleString("de-DE"):null;return{roleLabel:z,roleDisplay:de,by:je,whenText:nt}})():null,A=x.useMemo(()=>{const M=["MS","MELDESTELLE"];for(const z of M)if(ie.has(z))return!0;return!1},[ie]),Re=x.useMemo(()=>{const M=Be?.uebermittlungsart||{},z={...Be,uebermittlungsart:{...M,aus:M.aus||M.richtung==="aus",ein:M.ein||M.richtung==="ein"}};return bg(z)},[Be])&&!Et,Ie=Et&&!Qe.has(ft),Ve=T&&ke==="blocked",st=fi("S3",l)&&re,kt=T&&A&&Re,gt=Ee&&ne&&!Ie&&!st&&!kt,Bn=x.useMemo(()=>!E||!_?!1:ie.has(_),[E,_,ie]),Wt=Ie&&at?`Besttigt durch ${at.roleLabel}${at.by?` (${at.by})`:""}${at.whenText?` am ${at.whenText}`:""}`:null,wn=Ve?`Gerade in Bearbeitung durch ${oe?.lockedBy||oe?.lock?.lockedBy||"Unbekannt"}`:null,In=kt?"Ausgehende Meldungen an externe Empfnger mssen zuerst besttigt werden. nderungen und Druck sind bis dahin gesperrt.":null,Pr=at?[at.roleDisplay,[at.by,at.whenText].filter(Boolean).join("  ")||null].filter(Boolean):[],er=Qe.has("S3")&&!re&&(ft==="LTSTB"||ft==="LTSTBSTV"),Is=Qe.size>0,ur=()=>{wn?tt?.("error",`${wn}  nderungen sind derzeit gesperrt.`):Wt?tt?.("error",`${Wt}  nderungen nur durch diese Rolle mglich.`):tt?.("error","Keine Berechtigung (Meldestelle)")},ma=(()=>{if(Qe.has(ft))return ft;for(const M of xe){const z=String(M||"").toUpperCase();if(z)return z}return null})(),Ln=Et?Qe.has(ft)||er:Qe.size>0,Ls=Et?Qe.has(ft)||er?"Besttigung zurcknehmen":"Nur die besttigende Rolle darf zurcksetzen":Qe.size>0?"Besttigung setzen":"Besttigung nur durch berechtigte Rolle mglich",Ht=M=>{if(!fe){ur();return}if(!M&&!Et)return;if(M&&!Qe.size){tt?.("error","Keine Berechtigung zum Besttigen");return}const z=M?ma:ft;if(M&&!z){tt?.("error","Keine Berechtigung zum Besttigen");return}if(!M&&ft&&!(Qe.has(ft)||er)){tt?.("error","Nur die besttigende Rolle darf zurcksetzen");return}W(de=>{const je=structuredClone(de);if(!M)je.otherRecipientConfirmation=Qa();else{const vt=l?.displayName||l?.username||(l?.id!=null?`ID ${l.id}`:null);je.otherRecipientConfirmation={confirmed:!0,by:vt,byRole:z,at:Date.now()}}return je})};x.useEffect(()=>{if(!T||!fe)return;const M=Number(V);if(!Number.isFinite(M)||M<=0)return;let z=!1;const de=async()=>{const nt=qe.current;if(!(!(Je.current.hasLock&&Je.current.nr===M)&&(nt.nr!==M||!nt.success))){qe.current={nr:null,success:!1},Je.current={nr:null,hasLock:!1};try{await fetch(`/api/protocol/${M}/lock`,{method:"DELETE",credentials:"include"}).catch(()=>{})}catch{}}};Oe.current=de;const je=async({silent:nt=!1}={})=>{try{qe.current={nr:M,success:!1};const lt=await fetch(`/api/protocol/${M}/lock`,{method:"POST",credentials:"include"}),fn=await lt.json().catch(()=>({}));if(!lt.ok){if(Je.current={nr:null,hasLock:!1},qe.current.nr===M&&(qe.current={nr:null,success:!1}),lt.status===423)z||(Ue("blocked"),le({lockedBy:fn?.lockedBy||fn?.lock?.lockedBy||"Unbekannt"}));else if(!nt){const qt=fn?.error||`Sperren fehlgeschlagen (${lt.status})`;z||(Ue("error"),le({message:qt}))}return!1}return Je.current={nr:M,hasLock:!0},qe.current={nr:M,success:!0},z?(await de(),!0):(Ue("acquired"),le(null),!0)}catch(lt){return qe.current.nr===M&&(qe.current={nr:null,success:!1}),Je.current={nr:null,hasLock:!1},!nt&&!z&&(Ue("error"),le({message:lt?.message||String(lt)})),!1}},vt=()=>{z||(me.current&&(clearTimeout(me.current),me.current=null),me.current=setTimeout(async()=>{const nt=await je({silent:!0});z||(nt||Je.current.hasLock&&Je.current.nr===M)&&vt()},6e4))};return(async()=>await je({silent:!1})&&vt())(),()=>{z=!0,me.current&&(clearTimeout(me.current),me.current=null),Oe.current=null,de()}},[T,V,fe]),x.useEffect(()=>{if(!T){H(!1),setTimeout(()=>Rt.current?.focus(),0);return}const M=Number(V);!Number.isFinite(M)||M<=0||fe&&ke!=="acquired"&&ke!=="blocked"||(async()=>{try{const z=await fetch(`/api/protocol/${M}`,{credentials:"include"}).then(de=>de.json());if(z?.ok&&z.item){const de=z.item,je=de.uebermittlungsart||{};let vt="",nt=de.anvon||"";const lt=(de.anvon||"").trim();/^an\s*:/i.test(lt)&&(vt="an",nt=lt.replace(/^an\s*:/i,"").trim()),/^von\s*:/i.test(lt)&&(vt="von",nt=lt.replace(/^von\s*:/i,"").trim()),W({datum:de.datum||"",zeit:de.zeit||"",uebermittlungsart:{richtung:je.ein?"ein":je.aus?"aus":"",kanalNr:je.kanalNr||""},anvon:{richtung:vt||"an",name:nt},infoTyp:de.infoTyp||"Information",information:de.information||"",rueckmeldung1:de.rueckmeldung1||"",ergehtAn:Array.isArray(de.ergehtAn)?de.ergehtAn:[],ergehtAnText:de.ergehtAnText||"",otherRecipientConfirmation:(()=>{const Kt=de.otherRecipientConfirmation;if(!Kt||typeof Kt!="object"||!Kt.confirmed)return Qa();const xt=Number.isFinite(Kt.at)?Number(Kt.at):Number(new Date(Kt.at).valueOf());return{confirmed:!0,by:Kt.by||null,byRole:Kt.byRole||null,at:Number.isFinite(xt)?xt:null}})(),lagebericht:de.lagebericht||"",massnahmen:Array.from({length:5},(Kt,xt)=>{const Ot=de.massnahmen?.[xt]||{},$n=Eg(de.meta,xt),hn=Ot.verantwortlich??$n;return{massnahme:Ot.massnahme||"",verantwortlich:hn??"",done:!!Ot.done}})}),Ke({}),De(typeof de.zu=="string"?de.zu:""),Lt(de.id||null);const fn=de.meta||{},qt=fn?.createdVia==="task-board";C(!!qt),O(fn?.createdVia==="weather-mail");const Nn=Vl(fn?.createdByRole||fn?.creatorRole||fn?.createdBy||fn?.taskCreatorRole);if($(Nn||null),setTimeout(()=>Rt.current?.focus(),0),Ce){const Kt=kx(de);K1(Ce,de.nr,Kt.token)}}}finally{H(!1)}})()},[T,V,ke,fe,Ce]),x.useEffect(()=>{T&&(ke==="blocked"||ke==="error")&&H(!1)},[T,ke]),x.useEffect(()=>{T&&ke==="error"&&oe?.message&&tt?.("error",oe.message)},[T,ke,oe]),x.useEffect(()=>{if(!T||ke!=="blocked")return;const M=oe?.lockedBy||oe?.lock?.lockedBy||"Unbekannt";tt?.("error",`Gerade in Bearbeitung durch ${M}  nderungen nicht mglich.`)},[T,ke,oe]),x.useEffect(()=>{const M=()=>{const je=document.activeElement;je&&typeof je.blur=="function"&&je.blur()},z=je=>setTimeout(je,0),de=je=>{if(je.repeat)return;const vt=(je.key||"").toLowerCase(),nt=je.ctrlKey||je.metaKey;if(nt&&!je.shiftKey&&vt==="s"){if(je.preventDefault(),je.stopPropagation(),!gt){ur();return}if(be.current)return;be.current=!0,z(async()=>{M(),await new Promise(lt=>setTimeout(lt,0)),Ir().finally(()=>be.current=!1)});return}if(nt&&(je.shiftKey&&vt==="s"||vt==="enter")){if(je.preventDefault(),je.stopPropagation(),!gt){ur();return}if(be.current)return;be.current=!0,z(async()=>{M(),await new Promise(lt=>setTimeout(lt,0)),is().finally(()=>be.current=!1)});return}vt==="escape"&&(je.preventDefault(),je.stopPropagation(),z(()=>ga()))};return window.addEventListener("keydown",de,!0),document.addEventListener("keydown",de,!0),()=>{window.removeEventListener("keydown",de,!0),document.removeEventListener("keydown",de,!0)}},[]);const[_r,Gr]=x.useState(!1),[Qr,Or]=x.useState(null),Fs=x.useRef(null),ha=_r||kt&&!Bn,Ma=kt?"Ausgehende Meldungen an externe Empfnger mssen zuerst besttigt werden.":"Formular drucken  Anzahl gem 'ergeht an' + 'Sonstiger Empfnger'";function tr(){const M=Array.isArray(Be?.ergehtAn)?[...Be.ergehtAn]:[],z=(Be?.ergehtAnText||"").trim();return z&&M.push(z),M}const vr=M=>{const z=`${M}#toolbar=0&navpanes=0&scrollbar=0`;let de=Fs.current;de||(de=document.createElement("iframe"),de.style.position="fixed",de.style.width="0",de.style.height="0",de.style.border="0",de.style.visibility="hidden",document.body.appendChild(de),Fs.current=de),de.onload=()=>{try{setTimeout(()=>{de.contentWindow?.focus(),de.contentWindow?.print()},100)}catch{window.open(z,"_blank","noopener,noreferrer")?.focus()}},de.src=z},Gn=async()=>{if(_r)return;if(!fe&&!Bn){tt?.("error","Keine Berechtigung zum Drucken/Speichern");return}Or("data");const M=tr();if(!M.length){tt?.("error","Bitte Empfnger whlen oder 'Sonstiger Empfnger' ausfllen.");return}Gr(!0);try{const z=await xr();if(!z){tt?.("error","Drucken bentigt einen gespeicherten Eintrag.");return}Q(z);const je=(await fetch(`/api/protocol/${z}`,{credentials:"include"}).then(lt=>lt.json()))?.item;if(!je)throw new Error("Datensatz fr Druck nicht gefunden");if(bg(je)&&!je?.otherRecipientConfirmation?.confirmed){tt?.("error","Ausgehende Meldungen an externe Empfnger mssen zuerst besttigt werden.");return}tt?.("info","PDF wird serverseitig erzeugt ");const vt=await fetch(`/api/protocol/${z}/print`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({recipients:M,data:je})}).then(lt=>lt.json());if(!vt?.ok||!vt?.fileUrl)throw new Error(vt?.error||"PDF-Erzeugung fehlgeschlagen");await vr(vt.fileUrl);const nt=Number(vt?.pages)||M.length;tt?.("success",`Druck gestartet (${nt} Seite${nt>1?"n":""})`)}catch(z){tt?.("error",`Drucken fehlgeschlagen: ${z.message||z}`)}finally{Or(null),Gr(!1)}},Di=async()=>{if(Te&&!_r){Gr(!0),Or("blank");try{const M={datum:"",zeit:"",infoTyp:"__blank__",uebermittlungsart:{kanalNr:"",ein:!1,aus:!1},anvon:"",zu:"",information:"",rueckmeldung1:"",ergehtAn:[],ergehtAnText:"",massnahmen:Array.from({length:5},()=>({massnahme:"",verantwortlich:"",done:!1}))},z=await fetch("/api/protocol/blank/print",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({recipients:[""],data:M})}).then(je=>je.json());if(!z?.ok||!z?.fileUrl)throw new Error(z?.error||"PDF-Erzeugung fehlgeschlagen");await vr(z.fileUrl);const de=Number(z?.pages)||1;tt?.("success",`Leeres Formular  Druck gestartet (${de} Seite${de>1?"n":""})`)}catch(M){tt?.("error",`Leeres Formular konnte nicht gedruckt werden: ${M.message||M}`)}finally{Or(null),Gr(!1)}}},as=()=>{if(typeof r=="function"){r();return}ee?(window.close(),setTimeout(()=>{window.closed||(window.location.hash="/protokoll")},150)):window.location.hash="/protokoll"},ss=M=>{if(M&&typeof t=="function")try{t(M)}catch{}},ga=()=>{try{const M=Oe.current?.();M&&typeof M.then=="function"&&M.catch(()=>{})}catch{}as()},xr=async()=>{if(!gt)return V;const M=bt.current?new FormData(bt.current):null,z=structuredClone(Be);z.datum=Sg(M?.get("datum")||Be.datum),z.zeit=kg(M?.get("zeit")||Be.zeit);const de=(M?.get("anvonDir")||Be.anvon.richtung||"").toString(),je=(M?.get("anvonName")||Be.anvon.name||"").toString();z.anvon={richtung:de,name:je};const vt=(M?.get("richtung")||Be.uebermittlungsart.richtung||"").toString();z.uebermittlungsart.richtung=vt,z.uebermittlungsart.kanalNr=(M?.get("kanalNr")||Be.uebermittlungsart.kanalNr||"").toString(),z.information=(M?.get("information")||Be.information||"").toString(),z.rueckmeldung1=(M?.get("rueckmeldung1")||Be.rueckmeldung1||"").toString(),z.ergehtAnText=(M?.get("ergehtAnText")||Be.ergehtAnText||"").toString();const nt=M?.get("infoTyp");z.infoTyp=(nt??(Be.infoTyp||"")).toString();const lt=z.otherRecipientConfirmation||{};if(lt.confirmed){const xt=Number.isFinite(lt.at)?Number(lt.at):Number(new Date(lt.at).valueOf());z.otherRecipientConfirmation={confirmed:!0,by:lt.by||null,byRole:lt.byRole||null,at:Number.isFinite(xt)?xt:Date.now()}}else z.otherRecipientConfirmation=Qa();const fn=M?Array.from(M.getAll("ergehtAn")).map(String):Be.ergehtAn;z.ergehtAn=(fn.length?fn:Be.ergehtAn).map(xt=>String(xt||"").trim()).filter(Boolean),z.massnahmen=z.massnahmen.map((xt,Ot)=>{const $n=M?M.get(`m_done_${Ot}`)!==null:xt.done,hn=M?.get(`m_massnahme_${Ot}`),va=M?.get(`m_verantwortlich_${Ot}`),zs=Eg(F,Ot),Jr=va??xt.verantwortlich??zs??"";return{massnahme:(hn??xt.massnahme??"").toString(),verantwortlich:Jr==null?"":Jr.toString(),done:!!$n}}),jg(z)&&ra(z.anvon?.name).toUpperCase()!=="S2"&&(z.massnahmen=lC(z.massnahmen)),z.zu=typeof ye=="string"?ye:"",z.datum=String(z.datum||"").trim(),z.zeit=String(z.zeit||"").trim(),z.infoTyp=String(z.infoTyp||"").trim(),z.anvon.name=String(z.anvon?.name||"").trim(),z.anvon.richtung=String(z.anvon?.richtung||"").trim(),z.uebermittlungsart.richtung=String(z.uebermittlungsart?.richtung||"").trim(),z.uebermittlungsart.kanalNr=String(z.uebermittlungsart?.kanalNr||"").trim(),z.ergehtAnText=String(z.ergehtAnText||"").trim(),z.otherRecipientConfirmation.confirmed?(z.otherRecipientConfirmation.by=z.otherRecipientConfirmation.by||null,z.otherRecipientConfirmation.byRole=z.otherRecipientConfirmation.byRole||null,z.otherRecipientConfirmation.at=Number.isFinite(z.otherRecipientConfirmation.at)?Number(z.otherRecipientConfirmation.at):Date.now()):z.otherRecipientConfirmation=Qa();const qt={};z.datum||(qt.datum=!0),z.zeit||(qt.zeit=!0),z.infoTyp||(qt.infoTyp=!0),z.anvon.name||(qt.anvonName=!0),z.anvon.richtung||(qt.anvonDir=!0),z.uebermittlungsart.richtung||(qt.richtung=!0),String(z.information||"").trim()||(qt.information=!0);const Nn=[...z.ergehtAn];if(z.ergehtAnText&&Nn.push(z.ergehtAnText),Nn.length||(qt.ergehtAn=!0),Object.keys(qt).length){Ke(qt);const Ot=["datum","zeit","infoTyp","anvonName","anvonDir","richtung","information","ergehtAn"].find(va=>qt[va]),hn={datum:Bt,zeit:Zt,infoTyp:Rt,anvonName:pt,anvonDir:Fe,richtung:en,information:tn,ergehtAn:J}[Ot];return hn?.current&&setTimeout(()=>hn.current?.focus(),0),tt?.("error","Bitte alle Pflichtfelder ausfllen."),null}Ke({});const Kt={...z,zu:z.zu,uebermittlungsart:{kanalNr:(z.uebermittlungsart.kanalNr||"").trim(),ein:z.uebermittlungsart.richtung==="ein",aus:z.uebermittlungsart.richtung==="aus"},anvon:z.anvon.richtung?`${z.anvon.richtung==="an"?"An":"Von"}: ${z.anvon.name}`.trim():z.anvon.name.trim()};try{const xt=Ad([Kt.anvon,...JSON.parse(localStorage.getItem(Ca.anvon)||"[]")]),Ot=Ad([Kt.uebermittlungsart.kanalNr,...JSON.parse(localStorage.getItem(Ca.kanal)||"[]")]),$n=[...z.massnahmen.map(va=>va.verantwortlich).filter(Boolean),...JSON.parse(localStorage.getItem(Ca.verantwortlich)||"[]")],hn=Ad($n);localStorage.setItem(Ca.anvon,JSON.stringify(xt)),localStorage.setItem(Ca.kanal,JSON.stringify(Ot)),localStorage.setItem(Ca.verantwortlich,JSON.stringify(hn)),Gt(xt),Yt(Ot),Qt(hn)}catch{}if(T){const xt=await fetch(`/api/protocol/${V}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Kt)}).then(Ot=>Ot.json());if(!xt?.ok)throw new Error(xt?.error||"Speichern fehlgeschlagen");return Q(xt.nr),Lt(xt.id||_t||null),De(typeof xt.zu=="string"?xt.zu:ye),xt.nr}else{const xt={"Content-Type":"application/json",...y?{[nC]:"1"}:{}},Ot=await fetch("/api/protocol",{method:"POST",headers:xt,credentials:"include",body:JSON.stringify(Kt)}).then($n=>$n.json());if(!Ot?.ok)throw new Error(Ot?.error||"Speichern fehlgeschlagen");return Q(Ot.nr),Lt(Ot.id||null),De(typeof Ot.zu=="string"?Ot.zu:ye),Ot.nr}},Ar=()=>{if(!E)return!0;try{return window.confirm("Sind sie sicher? nderungen sind nur durch die Meldestelle oder den Leiter des Stabes mglich!")}catch{return!0}},Ir=async()=>{if(!gt){ur();return}if(!ut&&Ar()){rt(!0);try{const M=await xr();M&&(ss(M),as())}catch(M){tt("error","Fehler beim Speichern: "+M.message,4e3)}finally{rt(!1)}}},is=async()=>{if(!gt){ur();return}if(!ut&&Ar()){rt(!0);try{const M=await xr();M&&(ae?(ss(M),as()):(tt("success",`Gespeichert (NR ${M})  neuer Eintrag`),W(Cg()),Ke({}),Q(null),Lt(null),De(""),setTimeout(()=>Rt.current?.focus(),0)))}catch(M){tt("error","Fehler beim Speichern: "+M.message,4e3)}finally{rt(!1)}}},os=x.useMemo(()=>ie.has("LTSTB")||ie.has("LTSTBSTV")?!0:ie.has("S3")&&!re,[ie,re]),dr=async()=>{if(!gt)return ur(),null;if(!Ar())return null;rt(!0);try{const M=await xr();return M&&tt("success",`Gespeichert (NR ${M})`),M}catch(M){return tt("error","Fehler beim Speichern: "+M.message,4e3),null}finally{rt(!1)}},Ra=async M=>{if(ut||h)return;const z=Be.massnahmen?.[M];if(!z)return;const de=ra(z.massnahme),je=ra(z.verantwortlich);if(!de||!je){tt?.("error","Manahme und Verantwortlich mssen ausgefllt sein.");return}if(!os){tt?.("error","Keine Berechtigung (nur LtStb oder S3 bei Abwesenheit des LtStb).");return}const vt=await dr();if(vt){v(!0);try{const nt=await fetch("/api/aufgaben/ensure",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({protoNr:vt,roleId:je,text:de})}),lt=await nt.json();if(!nt.ok)throw new Error(lt?.error||`Fehler ${nt.status}`);lt.created?tt?.("success",`Aufgabe fr ${je} angelegt.`):tt?.("info",`Aufgabe fr ${je} existiert bereits.`)}catch(nt){tt?.("error",`Aufgabe anlegen fehlgeschlagen: ${nt.message}`)}finally{v(!1)}}},ls=M=>{const z=(M.key||"").toLowerCase(),de=M.ctrlKey||M.metaKey;M.repeat||(de&&!M.shiftKey&&z==="s"?(M.preventDefault(),M.stopPropagation(),Ir()):de&&(M.shiftKey&&z==="s"||z==="enter")&&(M.preventDefault(),M.stopPropagation(),is()))},qr=M=>{if(M.preventDefault(),!gt){ur();return}Ir()};if(Y)return o.jsx("div",{className:"p-4",children:"Lade"});const cs=Od.every(M=>Be.ergehtAn.includes(M)),us=M=>{gt&&(ve("ergehtAn"),pe("ergehtAn",M?[...Od]:[]))};return o.jsxs("div",{className:"protokoll-page-wrapper mx-auto w-full max-w-[1100px] relative",children:[o.jsx("div",{className:"prot-actionbar sticky top-0 z-30 -mx-2 md:mx-0 px-2 md:px-0",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur border-b rounded-t-xl px-3 py-2 flex items-center justify-between shadow-sm",children:[o.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2",children:[p&&o.jsx(wx,{className:"h-5 w-5"}),o.jsx("span",{children:T?`Protokoll  Bearbeiten (NR ${V??""}${ye?`  ZU ${ye}`:""})`:"Protokoll  Neuer Eintrag"})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:ga,className:"header-btn !bg-gradient-to-br !from-slate-500 !to-slate-600",title:"Maske schlieen und zur bersicht wechseln (ESC)",children:"Abbrechen"}),o.jsx("button",{type:"button",onClick:is,disabled:ut||!gt,className:"header-btn disabled:opacity-60",title:"Speichern und neue Maske (Strg+Shift+S oder Strg+Enter)",children:"Speichern/Neu"}),o.jsx("button",{type:"button",onClick:Ir,disabled:ut||!gt,className:"header-btn disabled:opacity-60",title:"Speichern und schlieen (Strg+S)",children:ut?"Speichern":"Speichern"}),o.jsx("button",{type:"button",onClick:Gn,disabled:ha,className:"header-btn disabled:opacity-60",title:Ma,children:_r&&Qr==="data"?"Drucken":"Drucken"}),Te&&o.jsx("button",{type:"button",onClick:Di,disabled:_r,className:"header-btn disabled:opacity-60",title:"Leeres Formular drucken",children:_r&&Qr==="blank"?"Drucken":"Leer drucken"})]})]})}),k&&o.jsxs("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-sky-300 bg-sky-50 text-sky-900 text-sm",children:["Meldung aus Aufgabe vorbereitet",k?.title?`: ${k.title}`:"","."]}),Ve&&wn&&o.jsxs("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:[wn,"  nderungen sind derzeit gesperrt."]}),In&&o.jsx("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:In}),Ie&&Wt&&o.jsxs("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:[Wt,"  nderungen nur durch diese Rolle mglich."]}),mt&&o.jsx("div",{className:"fixed right-3 top-3 z-40",children:o.jsx("div",{className:"px-3 py-2 rounded shadow text-white "+(mt.type==="success"?"bg-emerald-600":mt.type==="error"?"bg-rose-600":"bg-slate-600"),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{children:mt.text}),o.jsx("button",{className:"opacity-80 hover:opacity-100",onClick:()=>dt(null),title:"Meldung schlieen",children:""})]})})}),o.jsx("style",{children:`
        @media print {
          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          .prot-actionbar { display: none !important; }
          html, body { margin: 0 !important; }
          @page { size: A4; margin: 12mm; }
        }
      `}),o.jsx("form",{ref:bt,onKeyDown:ls,onSubmit:qr,className:"bg-white border-2 rounded-b-xl overflow-hidden shadow",children:o.jsxs("fieldset",{disabled:!gt,className:"contents",children:[o.jsxs("div",{className:"grid grid-cols-12",children:[o.jsx("div",{className:"col-span-9 px-6 py-4 border-b-2",children:o.jsx("div",{className:"text-3xl font-extrabold tracking-wide",children:"MELDUNG/INFORMATION"})}),o.jsx("div",{className:"col-span-3 border-l-2",children:o.jsxs("div",{className:"grid grid-cols-2",children:[o.jsxs("div",{className:"border-b-2",children:[o.jsx("div",{className:"px-2 py-1 text-[10px] text-gray-600 border-b-2",children:"PROTOKOLL-NR"}),o.jsx("div",{className:"px-2 py-1.5 text-center text-xl font-bold",children:V??""})]}),o.jsxs("div",{className:"border-l-2 border-b-2",children:[o.jsx("div",{className:"px-2 py-1 text-[10px] text-gray-600 border-b-2",children:"ZU"}),o.jsx("div",{className:"px-2 py-1.5 text-center text-lg font-normal",children:ye||""})]})]})}),o.jsx("div",{className:"col-span-12 border-y-2 p-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-0",children:[o.jsxs("div",{className:"col-span-6 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Datum"}),o.jsx("input",{ref:Bt,name:"datum",type:"text",className:`border rounded px-2 h-6 text-[13px] w-full ${ht.datum?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,placeholder:"yyyy-mm-dd",value:Be.datum,onChange:M=>{ve("datum"),pe("datum",M.target.value)},onBlur:M=>pe("datum",Sg(M.target.value)),title:"Datum (auch 101025 oder 10.10.2025 mglich)"})]}),o.jsxs("div",{className:"col-span-3 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Uhrzeit"}),o.jsx("input",{ref:Zt,name:"zeit",type:"text",className:`border rounded px-2 h-6 text-[13px] w-full ${ht.zeit?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,placeholder:"hh:mm",value:Be.zeit,onChange:M=>{ve("zeit"),pe("zeit",M.target.value)},onBlur:M=>pe("zeit",kg(M.target.value)),title:"Uhrzeit (915, 09:15 oder 0915 mglich)"})]}),o.jsxs("div",{className:"col-span-3 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Typ"}),o.jsxs("div",{className:`grid grid-cols-3 gap-x-4 h-6 items-center text-[13px] ${ht.infoTyp?"outline outline-2 outline-red-500 rounded-md":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{ref:Rt,type:"radio",name:"infoTyp",value:"Information",required:!0,checked:Be.infoTyp==="Information",onChange:()=>{ve("infoTyp"),pe("infoTyp","Information")}}),o.jsx("span",{children:"Info"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"radio",name:"infoTyp",value:"Auftrag",checked:Be.infoTyp==="Auftrag",onChange:()=>{ve("infoTyp"),pe("infoTyp","Auftrag")}}),o.jsx("span",{children:"Auftrag"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"radio",name:"infoTyp",value:"Lagemeldung",checked:Be.infoTyp==="Lagemeldung",onChange:()=>{ve("infoTyp"),pe("infoTyp","Lagemeldung")}}),o.jsx("span",{children:"Lage"})]})]})]})]})}),o.jsx("div",{className:"col-span-12 border-y-2 p-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-0 items-end",children:[o.jsxs("div",{className:"col-span-6 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"An/Von"}),o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("input",{ref:pt,name:"anvonName",className:`border rounded px-2 h-6 text-[13px] w-full flex-1 ${ht.anvonName?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,placeholder:"Name / Stelle",required:!0,list:"dl-anvon",value:Be.anvon.name,onChange:M=>{ve("anvonName");let z=M.target.value;const de=z.trim();/^an\s*:/i.test(de)?(ve("anvonDir"),pe(["anvon","richtung"],"an"),z=de.replace(/^an\s*:/i,"").trim()):/^von\s*:/i.test(de)&&(ve("anvonDir"),pe(["anvon","richtung"],"von"),z=de.replace(/^von\s*:/i,"").trim()),pe(["anvon","name"],z)},title:'Optional mit Prfix "an: " oder "von: "'}),o.jsxs("div",{className:`flex items-center gap-2.5 pl-2 min-w-[128px] shrink-0 text-[13px] ${ht.anvonDir?"outline outline-2 outline-red-500 rounded-md":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{ref:Fe,type:"radio",name:"anvonDir",value:"an",required:!0,checked:Be.anvon.richtung==="an",onChange:()=>{ve("anvonDir"),pe(["anvon","richtung"],"an")}}),o.jsx("span",{children:"An"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"radio",name:"anvonDir",value:"von",checked:Be.anvon.richtung==="von",onChange:()=>{ve("anvonDir"),pe(["anvon","richtung"],"von")}}),o.jsx("span",{children:"Von"})]})]})]}),o.jsx("datalist",{id:"dl-anvon",children:Ut.map(M=>o.jsx("option",{value:M},M))})]}),o.jsxs("div",{className:"col-span-3 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Kanal"}),o.jsx("input",{name:"kanalNr",className:"border rounded px-2 h-6 text-[13px] w-full",list:"dl-kanal",value:Be.uebermittlungsart.kanalNr,onChange:M=>pe(["uebermittlungsart","kanalNr"],M.target.value),title:"z. B. Funkkanal, Telefonnummer, E-Mail-Krzel "}),o.jsx("datalist",{id:"dl-kanal",children:$t.map(M=>o.jsx("option",{value:M},M))})]}),o.jsxs("div",{className:"col-span-3 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Richtung"}),o.jsxs("div",{className:`grid grid-cols-2 gap-x-4 h-6 items-center text-[13px] ${ht.richtung?"outline outline-2 outline-red-500 rounded-md":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",title:"Meldung wurde empfangen",children:[o.jsx("input",{ref:en,type:"radio",name:"richtung",value:"ein",checked:Be.uebermittlungsart.richtung==="ein",onChange:()=>{ve("richtung"),pe(["uebermittlungsart","richtung"],"ein")}}),o.jsx("span",{children:"Eingang"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",title:"Meldung wurde gesendet",children:[o.jsx("input",{type:"radio",name:"richtung",value:"aus",checked:Be.uebermittlungsart.richtung==="aus",onChange:()=>{ve("richtung"),pe(["uebermittlungsart","richtung"],"aus")}}),o.jsx("span",{children:"Ausgang"})]})]})]})]})}),o.jsxs("div",{className:"col-span-12 border-y-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Information/Auftrag"}),o.jsx("textarea",{ref:tn,name:"information",className:`border rounded px-2 py-2 w-full min-h-[420px] md:min-h-[520px] text-[15px] leading-relaxed ${ht.information?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,value:Be.information,onChange:M=>{ve("information"),pe("information",M.target.value)},title:"Sachverhalt / Meldetext"})]}),o.jsxs("div",{className:"col-span-12 border-t-2 p-2",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Rckmeldung 1"}),o.jsx("input",{name:"rueckmeldung1",className:"border rounded px-2 h-9 w-full",value:Be.rueckmeldung1,onChange:M=>pe("rueckmeldung1",M.target.value),title:"erste Rckmeldung"})]}),o.jsxs("div",{className:"col-span-12 border-t-2 p-2",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"ergeht an:"}),o.jsxs("div",{className:`flex flex-wrap items-center gap-3 rounded-md ${ht.ergehtAn?"ring-2 ring-red-500":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-2 mr-3 text-sm",title:"Alle Empfnger auswhlen / abwhlen",children:[o.jsx("input",{type:"checkbox",checked:cs,onChange:M=>us(M.target.checked),disabled:!gt}),o.jsx("span",{children:"Alle"})]}),Od.map(M=>o.jsxs("label",{className:"inline-flex items-center gap-2 mr-3 text-sm",children:[o.jsx("input",{tabIndex:-1,type:"checkbox",name:"ergehtAn",value:M,checked:Be.ergehtAn.includes(M),onChange:()=>{ve("ergehtAn");const z=new Set(Be.ergehtAn);z.has(M)?z.delete(M):z.add(M),pe("ergehtAn",[...z])},disabled:!gt,title:`Empfnger ${M} ${Be.ergehtAn.includes(M)?"entfernen":"hinzufgen"}`}),o.jsx("span",{children:M})]},M)),o.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"sonstiger Empfnger:"}),o.jsx("input",{ref:J,name:"ergehtAnText",className:`border rounded px-2 h-9 ${ht.ergehtAn?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,value:Be.ergehtAnText,onChange:M=>{ve("ergehtAn"),pe("ergehtAnText",M.target.value)},placeholder:"Name/Gruppe",readOnly:!gt})]})]}),o.jsxs("div",{className:"col-span-12 border-t-2",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 border-b-2",children:[o.jsx("div",{className:"col-span-6 p-2 font-semibold border-r",children:"Manahme"}),o.jsx("div",{className:"col-span-5 p-2 font-semibold border-r",children:"Verantwortlich"}),o.jsx("div",{className:"col-span-1 p-2 font-semibold text-center",children:"Erledigt"})]}),Be.massnahmen.map((M,z)=>o.jsxs("div",{className:"grid grid-cols-12 border-t",children:[o.jsx("div",{className:"col-span-6 p-2 border-r",children:o.jsx("input",{name:`m_massnahme_${z}`,className:"w-full border rounded px-2 h-9",value:M.massnahme,onChange:de=>{const je=[...Be.massnahmen];je[z]={...M,massnahme:de.target.value},pe("massnahmen",je)},title:`Manahme ${z+1}`})}),o.jsx("div",{className:"col-span-5 p-2 border-r",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{name:`m_verantwortlich_${z}`,className:"w-full border rounded px-2 h-9",list:"dl-ver",value:M.verantwortlich,onChange:de=>{const je=[...Be.massnahmen];je[z]={...M,verantwortlich:de.target.value},pe("massnahmen",je)},title:`Verantwortlich ${z+1}`}),os&&o.jsx("button",{type:"button",className:"px-2 h-9 text-xs rounded border bg-white hover:bg-gray-50 disabled:opacity-40",title:"Aufgabe anlegen",onClick:()=>Ra(z),disabled:h||ut||!ra(M.massnahme)||!ra(M.verantwortlich),children:""})]})}),o.jsx("div",{className:"col-span-1 p-2 flex items-center justify-center",children:o.jsx("input",{tabIndex:-1,type:"checkbox",name:`m_done_${z}`,value:"1",checked:!!M.done,onChange:de=>{const je=[...Be.massnahmen];je[z]={...M,done:de.target.checked},pe("massnahmen",je)},title:"Erledigt umschalten"})})]},z)),o.jsx("datalist",{id:"dl-ver",children:Ft.map(M=>o.jsx("option",{value:M},M))})]}),o.jsx("div",{className:"col-span-12 border-t-2 p-2",children:o.jsx("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm",children:Is?o.jsxs(o.Fragment,{children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:Et,onChange:M=>Ht(M.target.checked),disabled:!fe||!Ln,title:Ls}),o.jsx("span",{children:"besttigt:"})]}),Et&&Pr.length>0&&o.jsx("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-red-600",children:Pr.map((M,z)=>o.jsx("span",{className:z===0?"text-sm font-semibold":void 0,children:M},z))})]}):Et&&Pr.length>0?o.jsx("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-red-600 text-xs",children:Pr.map((M,z)=>o.jsx("span",{className:z===0?"font-semibold":void 0,children:M},z))}):o.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-gray-500",children:[o.jsx("span",{className:"font-medium text-gray-700",children:wg}),o.jsx("span",{children:"Besttigung nur durch berechtigte Rolle mglich"})]})})})]}),o.jsx("button",{type:"submit",className:"hidden",children:"submit"})]})})]})}function uC({open:n,mode:a="create",editNr:i=null,payload:r,onClose:t}){if(x.useEffect(()=>{if(!n)return;const u=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=u}},[n]),!n)return null;const l=()=>{typeof t=="function"&&t()};return o.jsx("div",{className:"fixed inset-0 z-[200] bg-black/50 overflow-hidden",children:o.jsx("div",{className:"min-h-full flex items-center justify-center p-2 md:p-4",children:o.jsxs("div",{className:"relative w-full max-w-5xl max-h-[calc(100vh-1rem)] md:max-h-[calc(100vh-2rem)] rounded-2xl shadow-2xl bg-white flex flex-col",children:[o.jsx("button",{type:"button",onClick:l,className:"absolute right-3 top-3 z-10 rounded-full bg-white/90 px-3 py-1 text-sm font-medium shadow hover:bg-white",title:"Meldung schlieen",children:""}),o.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain pt-10 md:pt-12 px-2 md:px-4 pb-4",children:o.jsx(cC,{mode:a,editNr:a==="edit"?i:null,onRequestClose:l,onSaved:l,taskPrefillPayload:a==="create"?r:null})})]})})})}const dC={high:"bg-red-100 border-red-300 text-red-800",medium:"bg-yellow-100 border-yellow-300 text-yellow-800",low:"bg-green-100 border-green-300 text-green-800"},Tg={low:"Gering",medium:"Mittel",high:"Hoch",critical:"Kritisch"},fC={low:"text-green-600",medium:"text-yellow-600",high:"text-orange-600",critical:"text-red-600"},Id=0;function pC(n){return n==null?null:n<=0?"< 1 Min":n===1?"1 Min":`${n} Min`}function mC(n,a=5){const i=Number.isFinite(Number(a))?Number(a):5,r=Number(n);return!Number.isFinite(r)||r<Id?Math.max(Id,Math.floor(i)):Math.max(Id,Math.floor(r))}function hC({suggestion:n,onFeedback:a,onEdit:i,onCreateTask:r,onDismiss:t}){const[l,u]=x.useState(!1),[d,p]=x.useState(n.title),[h,v]=x.useState(n.description),[y,S]=x.useState(""),[k,j]=x.useState(null),E=()=>{u(!1),i?.(n.id,{title:d,description:h})},C=async O=>{j(O),await a?.(n.id,O,y,{title:d,description:h},{title:n.title,description:n.description,targetRole:n.targetRole}),O||t?.(n.id)},F=()=>{r?.({title:d,description:h,priority:n.priority,category:n.category,reasoning:n.reasoning,suggestionId:n.id})};return o.jsxs("div",{className:`rounded-lg border p-3 mb-2 ${dC[n.priority]||"bg-gray-50 border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1",children:[l?o.jsx("input",{type:"text",value:d,onChange:O=>p(O.target.value),className:"w-full text-sm font-semibold px-2 py-1 rounded border"}):o.jsx("h4",{className:"text-sm font-semibold",children:n.title}),o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n.priority==="high"?"bg-red-200":n.priority==="medium"?"bg-yellow-200":"bg-green-200"}`,children:n.priority==="high"?"Hoch":n.priority==="medium"?"Mittel":"Niedrig"})]}),!k&&o.jsx("button",{onClick:()=>u(!l),className:"text-xs text-gray-500 hover:text-gray-700",title:l?"Abbrechen":"Bearbeiten",children:l?"":""})]}),l?o.jsx("textarea",{value:h,onChange:O=>v(O.target.value),className:"w-full mt-2 text-xs px-2 py-1 rounded border resize-none",rows:3}):o.jsx("p",{className:"text-xs mt-1 opacity-80",children:n.description}),n.reasoning&&o.jsx("p",{className:"text-xs mt-1 italic text-gray-600",children:n.reasoning}),l&&o.jsxs("div",{className:"mt-2",children:[o.jsx("input",{type:"text",placeholder:"Anmerkungen (optional)",value:y,onChange:O=>S(O.target.value),className:"w-full text-xs px-2 py-1 rounded border"}),o.jsx("button",{onClick:E,className:"mt-1 text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Speichern"})]}),k?o.jsx("div",{className:"text-xs mt-2 pt-2 border-t border-gray-200 text-center",children:k?o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-green-600 block",children:"Danke! Vorschlag wird gespeichert."}),o.jsx("button",{onClick:F,className:"text-xs py-1 px-3 rounded bg-blue-500 text-white hover:bg-blue-600",children:"Aufgabe erstellen"})]}):o.jsx("span",{className:"text-gray-500",children:"Feedback erfasst."})}):o.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200",children:[o.jsx("button",{onClick:()=>C(!0),className:"flex-1 text-xs py-1 px-2 rounded bg-green-500 text-white hover:bg-green-600",title:"Als hilfreich markieren",children:"Hilfreich"}),o.jsx("button",{onClick:F,className:"flex-1 text-xs py-1 px-2 rounded bg-blue-500 text-white hover:bg-blue-600",title:"Aufgabe aus diesem Vorschlag erstellen",children:"Aufgabe erstellen"}),o.jsx("button",{onClick:()=>C(!1),className:"flex-1 text-xs py-1 px-2 rounded bg-gray-400 text-white hover:bg-gray-500",title:"Als nicht hilfreich markieren und ausblenden",children:"Nicht hilfreich"})]})]})}function gC({role:n,onQuestionAsked:a,analysisInProgress:i}){const[r,t]=x.useState(""),[l,u]=x.useState(!1),[d,p]=x.useState(null),[h,v]=x.useState(""),[y,S]=x.useState(!1),k=l||i,j=async O=>{const _=await fetch(bn("/api/situation/question"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:O,role:n})}),$=_.headers.get("content-type")||"";return _.ok?$.includes("application/json")?await _.json():{error:"Server hat keine gltige JSON-Antwort geliefert"}:{error:$.includes("application/json")?(await _.json().catch(()=>({}))).error||`HTTP ${_.status}`:`Server-Fehler: ${_.status} ${_.statusText}`}},E=async O=>{const _=await fetch(bn("/api/situation/question/stream"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:O,role:n})}),$=_.headers.get("content-type")||"";if(!$.includes("text/event-stream"))return _.ok?$.includes("application/json")?await _.json():{error:"Unerwarteter Content-Type vom Stream-Endpoint"}:{error:$.includes("application/json")?(await _.json().catch(()=>({}))).error||`HTTP ${_.status}`:`Server-Fehler: ${_.status} ${_.statusText}`};const Z=_.body.getReader(),q=new TextDecoder;let ee="",ae="",se=null;for(;;){const{done:ie,value:re}=await Z.read();if(ie)break;ee+=q.decode(re,{stream:!0});const Ce=ee.split(`
`);ee=Ce.pop()||"";let fe=null;for(const Me of Ce){if(Me.startsWith("event: ")){fe=Me.slice(7).trim();continue}if(Me.startsWith("data: ")){const Te=Me.slice(6);try{const Ne=JSON.parse(Te);if(fe==="token"&&Ne.t!==void 0)ae+=Ne.t,v(ae);else if(fe==="done")se=Ne;else if(fe==="error")return{error:Ne.message||"Stream-Fehler"}}catch{}fe=null}}}return se?{ok:!0,...se}:ae?{ok:!0,answer:ae}:{error:"Keine Antwort vom Stream erhalten"}},C=async()=>{if(!r.trim()||l||i)return;u(!0),p(null),v(""),S(!1);const O=r.trim();try{let _;try{_=await E(O)}catch{_=await j(O)}_.error?p({error:_.error}):(p(_),v(""),a?.(_))}catch(_){p({error:String(_.message||_)})}finally{u(!1)}},F=async(O,_="")=>{if(d?.questionId){S(!0);try{await fetch(bn("/api/situation/question/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:d.questionId,question:d.question||r,answer:d.answer,helpful:O,correction:_})})}catch{}}};return o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Frage stellen"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:r,onChange:O=>t(O.target.value),placeholder:i?"Bitte warten - Analyse luft...":"Was muss ich als nchstes tun?",className:"flex-1 text-sm px-3 py-2 rounded border",onKeyDown:O=>O.key==="Enter"&&C(),disabled:k}),o.jsx("button",{onClick:C,disabled:k||!r.trim(),className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",title:i?"KI-Analyse luft - bitte warten":"Frage stellen",children:l?"...":i?"":"Fragen"})]}),i&&o.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"KI-Analyse luft gerade - Fragen werden nach Abschluss beantwortet"}),l&&h&&!d&&o.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[o.jsxs("div",{className:"text-xs text-gray-600 mb-1 flex items-center gap-2",children:[o.jsx("span",{className:"animate-pulse",children:""}),"Antwort wird generiert..."]}),o.jsxs("p",{className:"text-sm whitespace-pre-wrap",children:[h,o.jsx("span",{className:"animate-pulse text-blue-500",children:""})]})]}),d&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:d.error?o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-red-600",children:d.error}),d.debug&&o.jsxs("details",{className:"mt-2 text-xs text-gray-500",children:[o.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Debug-Info"}),o.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded overflow-auto",children:JSON.stringify(d.debug,null,2)})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:d.answer}),d.sources&&d.sources.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200",children:o.jsxs("details",{className:"text-xs text-gray-500",children:[o.jsxs("summary",{className:"cursor-pointer hover:text-gray-700",children:[" ",d.sources.length," Quelle",d.sources.length!==1?"n":""," verwendet",d.confidence&&` (${Math.round(d.confidence*100)}% Konfidenz)`]}),o.jsx("ul",{className:"mt-1 ml-4 list-disc",children:d.sources.map((O,_)=>o.jsxs("li",{className:"text-gray-600",children:[o.jsx("span",{className:"font-medium",children:O.fileName}),O.relevance&&o.jsxs("span",{className:"text-gray-400",children:[" (",O.relevance,"%)"]})]},_))})]})}),!y&&o.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-blue-200",children:[o.jsx("button",{onClick:()=>F(!0),className:"flex-1 text-xs py-1 px-2 rounded bg-green-500 text-white hover:bg-green-600",children:"Hilfreich"}),o.jsx("button",{onClick:()=>F(!1),className:"flex-1 text-xs py-1 px-2 rounded bg-gray-400 text-white hover:bg-gray-500",children:"Nicht hilfreich"})]}),y&&o.jsx("p",{className:"text-xs text-center mt-2 text-green-600",children:"Danke!"})]})})]})}const Cx="dismissed_ai_suggestions";function vC(){try{const n=localStorage.getItem(Cx);return n?JSON.parse(n):[]}catch{return[]}}function xC(n){try{localStorage.setItem(Cx,JSON.stringify(n))}catch{}}function yC({currentRole:n="LTSTB",enabled:a=!0,incidentOptions:i=[]}){const[r,t]=x.useState(!1),[l,u]=x.useState(!0),[d,p]=x.useState(!1),[h,v]=x.useState(!1),[y,S]=x.useState(()=>n&&n.trim()?n.trim().toUpperCase():"LTSTB"),[k,j]=x.useState(null),[E,C]=x.useState(!1),[F,O]=x.useState(null),_=x.useRef(null),[$,Z]=x.useState({enabled:!0,intervalMinutes:5}),q=a&&$.enabled,[ee,ae]=x.useState(()=>vC()),[se,ie]=x.useState(!1),[re,Ce]=x.useState(null);x.useEffect(()=>{n&&n.trim()&&S(n.trim().toUpperCase())},[n]);const[fe,Me]=x.useState(!1),[Te,Ne]=x.useState(null),xe=x.useCallback(async(oe=!1,le=!1)=>{if(q){C(!0),O(null);try{let me=bn(`/api/situation/analysis?role=${y}`);oe?me+="&forceRefresh=true":le&&(me+="&cacheOnly=true");const Oe=await fetch(me),Je=Oe.headers.get("content-type")||"";if(!Oe.ok){const ut=Je.includes("application/json")?(await Oe.json().catch(()=>({}))).error||`HTTP ${Oe.status}`:`Server-Fehler: ${Oe.status} ${Oe.statusText}`;O(ut);return}if(!Je.includes("application/json")){O("Server hat keine gltige JSON-Antwort geliefert");return}const qe=await Oe.json();if(qe.timer&&Ne(qe.timer),qe.noCache){j(null),Me(qe.analysisInProgress||qe.timer?.analysisInProgress||!1);return}if(qe.error){qe.isActive===!1?O("Analyse nicht verfgbar (Simulation luft)"):O(qe.error);return}j(qe),Me(qe.analysisInProgress||qe.timer?.analysisInProgress||!1)}catch(me){O(String(me.message||me))}finally{C(!1)}}},[y,q]);x.useEffect(()=>{if(!r||!q)return;let oe=null;try{oe=new EventSource(bn("/api/events")),oe.addEventListener("analysis_complete",le=>{try{const me=JSON.parse(le.data);me.roles&&me.roles.includes(y)&&xe(!1,!0)}catch{}}),oe.onerror=()=>{}}catch{}return()=>{oe&&oe.close()}},[r,q,y,xe]),x.useEffect(()=>{if(!r||!q){_.current&&(clearInterval(_.current),_.current=null);return}return xe(!1,!0),_.current=setInterval(()=>{xe(!1,!0)},1e4),()=>{_.current&&(clearInterval(_.current),_.current=null)}},[r,q,xe]),x.useEffect(()=>{let oe=!0;return(async()=>{try{const me=await fetch(bn("/api/situation/analysis-config"),{credentials:"include",cache:"no-store"});if(!me.ok)return;const Oe=await me.json().catch(()=>({})),Je=mC(Oe?.intervalMinutes,5);if(!oe)return;Z({enabled:!!Oe?.enabled,intervalMinutes:Je})}catch{}})(),()=>{oe=!1}},[]);const L=async(oe,le,me,Oe,Je)=>{try{await fetch(bn("/api/situation/suggestion/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suggestionId:oe,analysisId:k?.analysisId,helpful:le,userNotes:me,editedContent:Oe,userRole:y,suggestionTitle:Je?.title||Oe?.title,suggestionDescription:Je?.description||Oe?.description,targetRole:Je?.targetRole||y})})}catch{}},V=x.useCallback(oe=>{ae(le=>{const me=[...le,oe];return xC(me),me})},[]),Q=x.useCallback(oe=>{Ce(oe),ie(!0)},[]),T=x.useCallback(async oe=>{try{(await fetch(`/api/aufgaben?role=${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...oe,meta:{fromAiSuggestion:!0,suggestionId:re?.suggestionId}})})).ok||console.error("Fehler beim Erstellen der Aufgabe")}catch(le){console.error("Fehler beim Erstellen der Aufgabe:",le)}if(re?.suggestionId)try{await fetch(bn("/api/situation/suggestion/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suggestionId:re.suggestionId,analysisId:k?.analysisId,helpful:!0,userNotes:"Aufgabe erstellt",editedContent:{title:oe.title,description:oe.desc},userRole:y})})}catch{}ie(!1),Ce(null)},[y,k?.analysisId,re?.suggestionId]),Y=x.useMemo(()=>k||null,[k]),H=x.useMemo(()=>k?.situation||Y?.situation,[k,Y]),ye=fe&&!d,De=ye?"/KI_A_active.gif":"/KI_A.png",ke=x.useCallback(()=>{if(ye){p(!0);return}v(!0)},[ye]),Ue=x.useCallback((oe,le)=>h?o.jsx("span",{className:le,children:""}):o.jsx("img",{src:De,alt:"","aria-hidden":"true",className:`${oe} object-contain shrink-0`,onError:ke}),[h,De,ke]);return q?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed bottom-0 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${r?"translate-y-full opacity-0":"translate-y-0 opacity-100"}`,children:o.jsxs("button",{onClick:()=>{t(!0),u(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-t-lg shadow-lg hover:bg-blue-700 flex items-center gap-2",children:[Ue("w-5 h-5","text-lg"),o.jsx("span",{className:"text-sm font-medium",children:"KI-Analyse"}),k?.situation?.severity&&o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${k.situation.severity==="critical"?"bg-red-500":k.situation.severity==="high"?"bg-orange-500":k.situation.severity==="medium"?"bg-yellow-500":"bg-green-500"}`,children:Tg[k.situation.severity]})]})}),o.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-40 transform transition-transform duration-300 ease-out ${r?l?"translate-y-[calc(100%-3rem)]":"translate-y-0":"translate-y-full"}`,style:{maxHeight:"70vh"},children:o.jsxs("div",{className:"bg-white rounded-t-xl shadow-2xl border-t border-gray-200 flex flex-col",style:{height:"70vh"},children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-xl cursor-pointer",onClick:()=>u(!l),children:[o.jsxs("div",{className:"flex items-center gap-3",children:[Ue("w-6 h-6","text-xl"),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"KI-Situationsanalyse"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 text-xs opacity-90",children:[fe&&o.jsxs("span",{className:"flex items-center gap-1 text-yellow-300",children:[o.jsx("span",{className:"animate-pulse",children:""})," Analyse luft..."]}),!fe&&Te?.isAutomatic&&Te?.nextAnalysisInMinutes!==null&&o.jsxs("span",{className:"flex items-center gap-1 text-blue-200",children:[o.jsx("span",{children:""})," Nchste Analyse in: ",o.jsx("span",{className:"font-medium",children:pC(Te.nextAnalysisInMinutes)})]}),k?.timestamp?o.jsxs("span",{children:["Analyse vom: ",o.jsx("span",{className:"font-medium",children:new Date(k.timestamp).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}):!fe&&o.jsx("span",{className:"text-gray-300",children:"Noch keine Analyse durchgefhrt"}),H&&o.jsxs("span",{children:["Schweregrad: ",o.jsx("span",{className:"font-medium",children:Tg[H.severity]})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[E&&o.jsx("span",{className:"text-xs animate-pulse",children:"Lade..."}),o.jsx("button",{onClick:oe=>{oe.stopPropagation(),fe||xe(!0)},className:`p-1 hover:bg-white/20 rounded ${fe?"opacity-50 cursor-not-allowed":""}`,title:fe?"Analyse luft bereits...":"Neu analysieren",disabled:fe,children:fe?o.jsx("span",{className:"animate-spin inline-block",children:""}):""}),o.jsx("button",{onClick:oe=>{oe.stopPropagation(),u(!l)},className:"p-1 hover:bg-white/20 rounded",title:l?"Maximieren":"Minimieren",children:l?"":""}),o.jsx("button",{onClick:oe=>{oe.stopPropagation(),t(!1)},className:"p-1 hover:bg-white/20 rounded",title:"Schlieen",children:""})]})]}),!l&&o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[o.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50 px-4 py-2",children:o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Analyse fr Rolle: ",o.jsx("span",{className:"text-blue-600 font-semibold",children:y})]})}),H&&o.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:`text-lg ${fC[H.severity]}`,children:H.severity==="critical"?"":H.severity==="high"?"":H.severity==="medium"?"":""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm",children:H.summary}),H.criticalFactors?.length>0&&o.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:H.criticalFactors.map((oe,le)=>o.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:oe},le))})]})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[F?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-red-600 mb-2",children:F}),o.jsx("button",{onClick:()=>xe(!0),disabled:fe,className:"text-sm text-blue-600 hover:underline disabled:opacity-50",children:fe?"Analyse luft...":"Erneut versuchen"})]}):E&&!Y?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin text-3xl mb-2",children:""}),o.jsx("p",{className:"text-gray-500",children:"Lade Analyse..."})]}):!k&&!fe?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsxs("p",{className:"mb-2",children:["Noch keine Analyse fr ",y," durchgefhrt."]}),o.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Analysen werden automatisch im eingestellten Intervall durchgefhrt."}),o.jsx("button",{onClick:()=>xe(!0),disabled:fe,className:"text-sm px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Jetzt analysieren"})]}):!k&&fe?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin text-3xl mb-2",children:""}),o.jsx("p",{className:"text-gray-500",children:"Analyse luft..."}),o.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Das Panel wird automatisch aktualisiert wenn die Analyse fertig ist."})]}):Y?.suggestions?.length>0?o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Handlungsvorschlge fr ",y]}),Y.suggestions.filter(oe=>!ee.includes(oe.id)).map(oe=>o.jsx(hC,{suggestion:oe,onFeedback:L,onCreateTask:Q,onDismiss:V},oe.id)),Y.suggestions.filter(oe=>!ee.includes(oe.id)).length===0&&o.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Alle Vorschlge wurden bearbeitet."})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsxs("p",{children:["Keine Vorschlge fr ",y," verfgbar."]}),k?.timestamp&&o.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Letzte Analyse: ",new Date(k.timestamp).toLocaleString("de-DE")]}),o.jsx("button",{onClick:()=>xe(!0),disabled:fe,className:"mt-4 text-sm px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:fe?"Analyse luft...":"Neu analysieren"})]}),o.jsx(gC,{role:y,analysisInProgress:fe})]})]})]})}),r&&!l&&o.jsx("div",{className:"fixed inset-0 bg-black/20 z-30",onClick:()=>u(!0)}),o.jsx(dx,{open:se,onClose:()=>{ie(!1),Ce(null)},onAdded:T,incidentOptions:i,initialTitle:re?.title||"",initialDesc:re?.description||"",initialResponsible:y,initialType:re?.category||"KI-Vorschlag"})]}):null}let af=localStorage.getItem("soundEnabled")==="1",Cr=null;const Dg=window.AudioContext||window.webkitAudioContext,Ld=Dg?new Dg:null;function bC(){Cr||(Cr=new Audio("/sounds/bahnhof.mp3"),Cr.preload="auto");const n=async()=>{try{Ld&&Ld.state!=="running"&&await Ld.resume(),Cr&&(Cr.muted=!0,await Cr.play(),Cr.pause(),Cr.currentTime=0,Cr.muted=!1),af=!0,localStorage.setItem("soundEnabled","1"),window.removeEventListener("pointerdown",n),window.removeEventListener("keydown",n),window.dispatchEvent(new CustomEvent("sound:unlocked"))}catch{}};af||(window.addEventListener("pointerdown",n,{once:!0}),window.addEventListener("keydown",n,{once:!0}))}async function Ex(){if(Cr||bC(),!af){window.dispatchEvent(new CustomEvent("sound:needsUnlock"));return}try{Cr.currentTime=0,await Cr.play()}catch{}}function wC({className:n=""}){const{logout:a,user:i}=Ti(),[r,t]=x.useState(!1),l=async()=>{if(!r){t(!0);try{await a?.()}catch(d){console.error(d)}try{sessionStorage.clear()}catch{}try{localStorage.clear()}catch{}t(!1),window.location.href="/user-login"}},u=i?.displayName?`Abmelden (${i.displayName})`:"Abmelden";return o.jsxs("button",{type:"button",onClick:l,disabled:r,title:u,"aria-label":u,className:[r?"cursor-wait":"",n].filter(Boolean).join(" "),children:[o.jsx("span",{className:"sr-only",children:u}),r?o.jsxs("svg",{className:"animate-spin",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{className:"opacity-40",cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),o.jsx("path",{d:"M21 12a9 9 0 0 1-9 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M13 4H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M17 16l4-4-4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M9 12h12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}function Co({helpHref:n,helpLabel:a="i",helpTitle:i="Hilfe",helpClassName:r="",navButtons:t=[],onAdd:l,addLabel:u="",addTitle:d="Neuen Eintrag anlegen",addClassName:p="",addDisabled:h=!1,className:v="",logoffClassName:y="",children:S}){const k=!!n,j=typeof l=="function",E=Array.isArray(t)?t.filter(F=>F&&F.label&&(typeof F.onClick=="function"||F.href)):[],C=["fixed","bottom-4","right-4","flex","flex-col","items-end","gap-3","z-50","pointer-events-none",v].filter(Boolean).join(" ");return o.jsxs("div",{className:C,children:[j&&o.jsx("button",{type:"button",onClick:l,disabled:h,title:d||u,"aria-label":d||u,className:["pointer-events-auto","floating-action","fab",p].filter(Boolean).join(" "),children:o.jsx("span",{"aria-hidden":"true",children:u})}),E.map((F,O)=>{const _=F.label,$=F.title||F.label,Z=["pointer-events-auto","floating-action","nav-btn",F.className].filter(Boolean).join(" ");return F.href?o.jsx("a",{href:F.href,title:$,"aria-label":$,className:Z,children:o.jsx("span",{"aria-hidden":"true",children:_})},F.key||O):o.jsx("button",{type:"button",onClick:F.onClick,title:$,"aria-label":$,className:Z,children:o.jsx("span",{"aria-hidden":"true",children:_})},F.key||O)}),S,k&&o.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",title:i||a,"aria-label":i||a,className:["pointer-events-auto","floating-action","help-btn",r].filter(Boolean).join(" "),children:o.jsx("span",{"aria-hidden":"true",children:a})}),o.jsx(wC,{className:`pointer-events-auto floating-action logoff-btn ${y}`.trim()})]})}function NC({roleId:n,className:a,openInNewTab:i=!0,scope:r="role"}){const{user:t}=Ti()||{},l=x.useMemo(()=>Nx(t),[t]),[u,d]=x.useState({}),[p,h]=x.useState([]),v=x.useRef(0),y=x.useRef(!0),S=x.useRef(null),k=x.useRef(null);x.useEffect(()=>{if(!l){d({});return}d(rf(l))},[l]),x.useEffect(()=>{if(!l||typeof window>"u")return;const O=_=>{_?.key===l&&d(rf(l))};return window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)},[l]);const j=x.useCallback(async O=>{try{const _=await fetch("/api/protocol",{credentials:"include",signal:O});if(!_.ok)return;const $=await _.json(),Z=Array.isArray($?.items)?$.items:[];h(Z)}catch(_){if(_?.name==="AbortError")return}},[]);x.useEffect(()=>{const O=new AbortController;j(O.signal);const _=setInterval(()=>j(O.signal),3e4);return()=>{O.abort(),clearInterval(_)}},[j]),x.useEffect(()=>{let O=null,_=!1;async function $(){try{const{io:Z}=await Ug(async()=>{const{io:q}=await import("./index-Cl_BsGI8.js");return{io:q}},[]);if(_)return;O=Z({path:"/socket.io",transports:["websocket","polling"],withCredentials:!0}),k.current=O,O.on("protocol:changed",()=>{const q=new AbortController;j(q.signal)})}catch{}}return $(),()=>{_=!0,O&&(O.disconnect(),k.current=null)}},[j]);const E=x.useMemo(()=>{if(!n||!p.length)return 0;const O=n.toUpperCase();let _=0;for(const $ of p){if(!Array.isArray($?.ergehtAn)||!$.ergehtAn.some(ie=>String(ie).toUpperCase()===O))continue;const ee=kx($).token,ae=String($.nr??"");if(!ae)continue;u[ae]!==ee&&_++}return _},[n,p,u]);if(x.useEffect(()=>{const O=v.current;!y.current&&E>O&&E>0&&Ex().catch(()=>{}),v.current=E,y.current=!1},[E]),x.useEffect(()=>(S.current===null&&(S.current=document.title),E>0?document.title=`(${E}) Aufgaben`:document.title=S.current||"Aufgaben",()=>{S.current!==null&&(document.title=S.current)}),[E]),!E)return null;const C=`${E} ungelesene Meldung${E===1?"":"en"} fr ${n}  klicken zum ffnen (neuer Tab)`,F=()=>{const _=`/#${`/protokoll?role=${encodeURIComponent(n)}&scope=${encodeURIComponent(r)}`}`;i?window.open(_,"_blank","noopener,noreferrer"):window.location.href=_};return o.jsxs("button",{type:"button",onClick:F,title:C,"aria-label":C,className:`relative inline-flex items-center justify-center w-9 h-9 rounded-lg
        bg-amber-100 hover:bg-amber-200 text-amber-700 border border-amber-300
        transition-colors focus:outline-none focus:ring-2 focus:ring-amber-400 ${a||""}`,children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[o.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),o.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),o.jsx("span",{className:`absolute -top-1.5 -right-1.5 inline-flex items-center justify-center\r
          min-w-[20px] h-5 px-1 text-xs font-bold text-white bg-red-500 rounded-full\r
          ring-2 ring-white`,children:E>99?"99+":E})]})}const Xe={NEW:"Neu",IN_PROGRESS:"In Bearbeitung",DONE:"Erledigt"},Gl=[Xe.NEW,Xe.IN_PROGRESS,Xe.DONE],Mg=["neu","in-bearbeitung","erledigt"],SC=Rf(),kC=["LTSTB","LTSTBSTV"],jC="S3",CC="task-card",EC=[{key:"einsatz",label:"E",title:"Zur Einsatzbersicht",onClick:()=>{window.location.href="/"}},{key:"meldestelle",label:"M",title:"Zur Meldestelle",onClick:()=>{window.location.href="/#/protokoll"}}],Rg=n=>Pf(n),pi=n=>{if(n==null)return"";const a=String(n).trim();if(!a)return"";if(/^\d+$/.test(a)){const i=String(Number(a));return i==="0"?"0":i}return a},TC=n=>{const a=[],i=new Set;for(const r of Array.isArray(n)?n:[]){const t=pi(r);!t||i.has(t)||(i.add(t),a.push(t))}return a},Tx=n=>{if(!n)return null;const a=pi(n.nr??n.id??n.value);if(!a)return null;const i={nr:a},r=(t,l)=>{const u=n[t]??void 0;if(u==null)return;const d=String(u).trim();d&&(i[t]=d)};return r("title"),r("information"),r("infoTyp"),r("datum"),r("zeit"),r("anvon"),i},DC=n=>{const a=[],i=new Set;for(const r of Array.isArray(n)?n:[]){const t=Tx(r);!t||i.has(t.nr)||(i.add(t.nr),a.push(t))}return a},MC=()=>({options:[],map:new Map});function RC(n){const a=[],i=new Map;if(n?.columns&&typeof n.columns=="object"){const r=new Set,t=[...Mg,...Object.keys(n.columns).filter(l=>!Mg.includes(l))];for(const l of t){if(!n.columns[l]||r.has(l))continue;r.add(l);const u=n.columns[l],d=u?.name||l,p=Array.isArray(u?.items)?u.items:[];for(const h of p){const v=String(h?.id??"").trim();if(!v)continue;const y=[];h?.content&&y.push(String(h.content)),h?.ort&&y.push(String(h.ort));const S=y.length?y.join("  "):`#${v}`,k={id:v,label:S,statusKey:l,statusName:d,content:h?.content??"",ort:h?.ort??""};i.set(v,k),a.push(k)}}}return{options:a,map:i}}const Pg=n=>String(n??"").normalize("NFKD").toLowerCase().replace(/\s+/g," ").trim(),PC=n=>{if(!n)return"";const a=[],i=String(n.title??"").trim(),r=String(n.desc??"").trim(),t=String(n.responsible??"").trim();return i&&a.push(i),r&&a.push(r),t&&a.push(`Verantwortlich: ${t}`),a.join(`

`).trim()};function _C(){try{const n=typeof window<"u"?window:{},a=n.localStorage,i=[()=>n.__APP_AUTH__?.user,()=>n.__USER__,()=>a&&JSON.parse(a.getItem("auth.user")||"null")||null,()=>a&&JSON.parse(a.getItem("user")||"null")||null];for(const r of i){const t=r?.();if(t)return t}}catch{}return null}function OC(n){if(!n)return null;if(typeof n.role=="string")return n.role.trim().toUpperCase();if(n.role&&typeof n.role.id=="string")return n.role.id.trim().toUpperCase();if(Array.isArray(n.roles)&&n.roles.length){const a=n.roles[0];if(typeof a=="string")return a.trim().toUpperCase();if(a&&typeof a.id=="string")return a.id.trim().toUpperCase()}return null}function AC(n){if(!n)return[];const a=new Set,i=r=>{if(!r)return;const t=String(r).trim().toUpperCase();t&&a.add(t)};if(typeof n.role=="string"?i(n.role):n.role&&typeof n.role.id=="string"&&i(n.role.id),Array.isArray(n.roles))for(const r of n.roles)typeof r=="string"?i(r):r&&typeof r.id=="string"&&i(r.id);return[...a]}const _g=()=>crypto?.randomUUID?.()||`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,Ss=n=>n?`?role=${encodeURIComponent(n)}`:"",ks=n=>n?{"X-Role-Id":n}:{};function IC(n){return n===Xe.NEW?Xe.IN_PROGRESS:(n===Xe.IN_PROGRESS,Xe.DONE)}function LC(){const[n,a]=x.useState([]),[i,r]=x.useState(()=>MC()),[t,l]=x.useState([]),[u,d]=x.useState(!1),[p,h]=x.useState(""),[v,y]=x.useState(""),[S,k]=x.useState(""),[j,E]=x.useState(!1),[C,F]=x.useState(!1),[O,_]=x.useState("create"),[$,Z]=x.useState(null),[q,ee]=x.useState(null),[ae,se]=x.useState(null),[ie,re]=x.useState(!1),[Ce,fe]=x.useState(()=>({defaultDueOffsetMinutes:SC})),Me=bx(),Te=Me.running||Me.paused,Ne=_C(),xe=x.useMemo(()=>OC(Ne),[Ne]),L=x.useMemo(()=>AC(Ne),[Ne]),V=x.useMemo(()=>new Set(L),[L]),[Q,T]=x.useState(()=>xe||""),Y=x.useRef(!1),H=x.useRef(xe),[ye,De]=x.useState([]),{roles:ke}=yx(),Ue=x.useMemo(()=>ke.some(A=>A==="LTSTB"||A==="LTSTBSTV"),[ke]),oe=L.length>1,le=x.useMemo(()=>!!(oe||kC.some(A=>fi(A,Ne))||!Ue&&fi(jC,Ne)),[Ne,Ue,oe]),me=ye,[Oe,Je]=x.useState(new Set),qe=x.useRef(new Set),ut=x.useRef(new Set),rt=x.useCallback(A=>{if(!A)return null;const ue=A.status,Re=[Xe.NEW,Xe.IN_PROGRESS,Xe.DONE].includes(ue)?ue:(()=>{const st=typeof ue=="string"?ue.toLowerCase():"";return st.startsWith("in")?Xe.IN_PROGRESS:st.startsWith("erled")?Xe.DONE:Xe.NEW})(),Ie=DC(A.linkedProtocols??A.meta?.linkedProtocols??[]),Ve=TC(A.linkedProtocolNrs??A.meta?.linkedProtocolNrs??Ie.map(st=>st.nr)),it=A.relatedIncidentId!=null&&A.relatedIncidentId!==""?String(A.relatedIncidentId):null;return{id:A.id??A._id??A.key??_g(),clientId:A.clientId??null,title:A.title??A.name??"Aufgabe",type:A.type??A.category??"",status:Re,responsible:A.responsible??A.verantwortlich??"",desc:A.desc??A.beschreibung??"",dueAt:A.dueAt??A.due_at??A.deadline??A.frist??null,createdAt:A.createdAt??null,updatedAt:A.updatedAt??null,meta:A.meta??{},originProtocolNr:A.originProtocolNr??null,relatedIncidentId:it,incidentTitle:A.incidentTitle??null,linkedProtocolNrs:Ve,linkedProtocols:Ie}},[]),_t=x.useCallback(async(A=null)=>{if(!A?.aborted)try{const ue=await F1();if(A?.aborted)return;r(RC(ue))}catch{if(A?.aborted)return}},[]),Lt=x.useCallback(async(A=null)=>{if(!Q){l([]);return}try{const ue=await fetch(`/api/aufgaben/protocols${Ss(Q)}`,{cache:"no-store",headers:{...ks(Q)},signal:A});if(!ue.ok){if(ue.status===403){go(),l([]);return}throw new Error(`HTTP ${ue.status}`)}const Re=await ue.json();if(A?.aborted)return;const Ie=Array.isArray(Re?.items)?Re.items:[],Ve=new Set,it=[];for(const st of Ie){const kt=Tx(st)||{},gt=kt.nr||pi(st?.nr??st?.id??st?.value);!gt||Ve.has(gt)||(Ve.add(gt),it.push({nr:gt,title:kt.title??st?.title??null,infoTyp:kt.infoTyp??st?.infoTyp??null,datum:kt.datum??st?.datum??null,zeit:kt.zeit??st?.zeit??null,anvon:kt.anvon??st?.anvon??null,information:kt.information??st?.information??null}))}it.sort((st,kt)=>{const gt=Number(st.nr),Bn=Number(kt.nr);return Number.isFinite(gt)&&Number.isFinite(Bn)?Bn-gt:String(kt.nr).localeCompare(String(st.nr),"de",{numeric:!0})}),l(it)}catch(ue){if(A?.aborted||ue?.name==="AbortError")return;l([])}},[Q]);x.useEffect(()=>{let A=!0;return(async()=>{if(await hx(),!A)return;re(gx("aufgabenboard",Ne));const Ie=[...(S1()||[]).filter(Ve=>V.has(Ve.id)).filter(Ve=>{const it=String(Ve?.apps?.aufgabenboard||"").toLowerCase();return it==="edit"||it==="view"}).map(Ve=>({id:Ve.id,label:Ve.label||Ve.id}))].sort((Ve,it)=>String(Ve?.label||Ve?.id||"").localeCompare(String(it?.label||it?.id||""),"de",{sensitivity:"base"}));De(Ie)})(),()=>{A=!1}},[Ne,V]),x.useEffect(()=>{H.current!==xe&&(H.current=xe,Y.current=!1),Y.current||T(xe||"")},[xe]),x.useEffect(()=>{if(!ye.length){Q&&(Y.current=!1,T(""));return}ye.some(ue=>ue.id===Q)||(Y.current=!1,T(ye[0].id))},[ye,Q]);const ht=x.useCallback(A=>{if(!le){A?.preventDefault?.();return}const ue=String(A.target.value||"").trim().toUpperCase();Y.current=!0,T(ue)},[le]);x.useEffect(()=>{if(!Q)return;let A=!0;return(async()=>{try{const ue=await fetch(`/api/aufgaben/config${Ss(Q)}`,{cache:"no-store",headers:ks(Q)});if(!ue.ok)throw ue.status===403?oo():new Error(`HTTP ${ue.status}`);const Re=await ue.json();if(!A)return;fe({defaultDueOffsetMinutes:Rg(Re?.defaultDueOffsetMinutes)})}catch{if(!A)return;fe(ue=>({defaultDueOffsetMinutes:Rg(ue?.defaultDueOffsetMinutes)}))}})(),()=>{A=!1}},[Q]),x.useEffect(()=>{const A=new AbortController;_t(A.signal);const ue=setInterval(()=>{_t(A.signal)},3e4);return()=>{A.abort(),clearInterval(ue)}},[_t]),x.useEffect(()=>{if(!Q){l([]);return}const A=new AbortController;return Lt(A.signal),()=>A.abort()},[Q,Lt]),x.useEffect(()=>{if(!ae)return;const A=new AbortController;return Lt(A.signal),()=>A.abort()},[ae?.id,Lt]);const[Ke,pt]=x.useState(0);x.useEffect(()=>{const A=setInterval(()=>pt(ue=>ue+1),3e4);return()=>clearInterval(A)},[]);const[Fe,Rt]=x.useState(null),[Bt,Zt]=x.useState(null),en=x.useRef(null),tn=x.useRef(null),J=x.useRef(0),be=E0(oh(rv,{activationConstraint:{distance:6}}),oh(av,{activationConstraint:{delay:120,tolerance:6}})),bt=x.useRef(!0);async function mt(){if(!Q){h("Keine Rolle gefunden  bitte anmelden."),a([]);return}d(!0),h("");try{const A=await fetch(`/api/aufgaben${Ss(Q)}`,{cache:"no-store",headers:ks(Q)});if(!A.ok)throw A.status===403?oo():new Error(`HTTP ${A.status}`);const ue=await A.json(),Ie=(Array.isArray(ue?.items)?ue.items:[]).map(Ve=>rt(Ve)).filter(Ve=>Ve);a(Ie);try{const Ve=new Set(Ie.map(gt=>String(gt.id))),it=qe.current,st=[...Ve].filter(gt=>!it.has(gt)),kt=bt.current?[]:st.filter(gt=>!ut.current.has(gt));if(kt.length){Je(new Set(kt));try{await Ex()}catch{}setTimeout(()=>Je(new Set),9e3)}qe.current=Ve,bt.current=!1}catch{}}catch(A){h(String(A?.message||A))}finally{d(!1)}}x.useEffect(()=>{qe.current=new Set,bt.current=!0,Je(new Set),mt()},[Q]),x.useEffect(()=>{if(!Q)return;const A=setInterval(()=>{const ue=Date.now()-J.current;!u&&ue>5e3&&mt()},3e4);return()=>clearInterval(A)},[Q,u]);const dt=x.useCallback(async A=>{const ue=await fetch(`/api/aufgaben/${encodeURIComponent(A.id)}/edit${Ss(Q)}`,{method:"POST",headers:{"Content-Type":"application/json",...ks(Q)},credentials:"include",body:JSON.stringify(A)});if(!ue.ok)throw ue.status===403?oo():new Error(`HTTP ${ue.status}`);const Re=await ue.json();return Re?.item?rt(Re.item):null},[Q,rt]),sn=x.useCallback(async A=>{try{let Re=await dt(A);a(Ie=>{const Ve=Ie.find(st=>st.id===A.id),it=Re||rt({...Ve||{},...A});return it?(Re=it,Ie.map(st=>st.id===it.id?it:st)):Ie}),se(Ie=>!Ie||Ie.id!==A.id?Ie:Re||Ie)}catch(ue){throw h(String(ue?.message||ue)),ue}},[dt,rt]);async function tt({id:A,toStatus:ue,beforeId:Re}){try{const Ie=await fetch(`/api/aufgaben/reorder${Ss(Q)}`,{method:"POST",headers:{"Content-Type":"application/json",...ks(Q)},body:JSON.stringify({id:A,toStatus:ue,beforeId:Re,role:Q})});return Ie.status===403?(go(),!1):Ie.ok}catch{return!1}}async function Ut({id:A,toStatus:ue}){try{const Re=await fetch(`/api/aufgaben/${encodeURIComponent(A)}/status${Ss(Q)}`,{method:"POST",headers:{"Content-Type":"application/json",...ks(Q)},body:JSON.stringify({toStatus:ue,role:Q})});return Re.status===403?(go(),!1):Re.ok}catch{return!1}}async function Gt(A){const ue=_g(),Ie=(A?.relatedIncidentId!=null?String(A.relatedIncidentId).trim():"")||null,Ve=Ie?i.map.get?.(String(Ie)):null,it=(()=>{const wn=A?.incidentTitle!=null?String(A.incidentTitle).trim():"";return wn||(Ve?.label?Ve.label:null)})(),st={title:A?.title??"Aufgabe",type:A?.type??"",responsible:A?.responsible??"",desc:A?.desc??"",dueAt:A?.dueAt??null,relatedIncidentId:Ie,incidentTitle:it,status:Xe.NEW,role:Q,clientId:ue},kt=await fetch(`/api/aufgaben${Ss(Q)}`,{method:"POST",headers:{"Content-Type":"application/json",...ks(Q)},body:JSON.stringify(st)});if(!kt.ok)throw kt.status===403?oo():new Error(`HTTP ${kt.status}`);const Bn=(await kt.json())?.item||st,Wt=rt(Bn);return Wt?.id&&ut.current.add(String(Wt.id)),Wt}const $t=x.useMemo(()=>{const A=new Map;for(const ue of t){const Re=pi(ue?.nr??ue?.id??ue?.value);Re&&A.set(Re,{...ue,nr:Re})}return A},[t]),Yt=x.useMemo(()=>{const A=Pg(v),ue=S?String(S):"";return n.filter(Re=>ue&&String(Re?.relatedIncidentId??"")!==ue?!1:A?[Re.title,Re.type,Re.responsible,Re.desc,Re.incidentTitle].filter(Boolean).map(Ve=>Pg(Ve)).some(Ve=>Ve.includes(A)):!0)},[n,v,S]),Ft=x.useMemo(()=>({[Xe.NEW]:Yt.filter(A=>(A.status||Xe.NEW)===Xe.NEW),[Xe.IN_PROGRESS]:Yt.filter(A=>A.status===Xe.IN_PROGRESS),[Xe.DONE]:Yt.filter(A=>A.status===Xe.DONE)}),[Yt]);x.useMemo(()=>{const A=(i.options||[]).map(Ie=>({id:String(Ie.id),label:Ie.label||`#${Ie.id}`,statusName:Ie.statusName||Ie.statusLabel||""})),ue=new Set(A.map(Ie=>Ie.id)),Re=[];for(const Ie of n){const Ve=Ie?.relatedIncidentId?String(Ie.relatedIncidentId):"";!Ve||ue.has(Ve)||(ue.add(Ve),Re.push({id:Ve,label:Ie.incidentTitle||`#${Ve}`,statusName:""}))}return[...A,...Re].sort((Ie,Ve)=>Ie.label.localeCompare(Ve.label,"de",{sensitivity:"base"}))},[i.options,n]),x.useEffect(()=>{if(!ae)return;const A=n.find(ue=>ue.id===ae.id);A&&A!==ae&&se(A)},[n,ae]);const Qt=x.useMemo(()=>({[Xe.NEW]:Ft[Xe.NEW].map(A=>A.id),[Xe.IN_PROGRESS]:Ft[Xe.IN_PROGRESS].map(A=>A.id),[Xe.DONE]:Ft[Xe.DONE].map(A=>A.id)}),[Ft]),Be=x.useCallback(A=>A?Qt[Xe.NEW].includes(A)?Xe.NEW:Qt[Xe.IN_PROGRESS].includes(A)?Xe.IN_PROGRESS:Qt[Xe.DONE].includes(A)?Xe.DONE:null:null,[Qt]),W=x.useCallback(()=>window.confirm("Sind sie sicher?"),[]),ne=()=>{ie&&E(!0)},Ee=()=>{E(!1)};x.useEffect(()=>{!ie&&j&&E(!1)},[ie,j]);const ve=x.useCallback(A=>{if(!A)return;const ue=n.find(Re=>Re.id===A.id);se(ue||A)},[n]),pe=x.useCallback(A=>{if(!A)return;const ue=pi(A?.originProtocolNr),Re={source:CC,description:PC(A),title:String(A?.title??"").trim()||null,taskId:A?.id??null,createdAt:A?.createdAt??null,originProtocolNr:ue||null};_("create"),Z(null),ee(Re),F(!0)},[]),Qe=x.useCallback(A=>{const ue=pi(A);ue&&(se(null),_("edit"),Z(ue),ee(null),F(!0))},[]),wt=x.useCallback(A=>{if(!ie)return;const ue=IC(A?.status||Xe.NEW);ue!==A?.status&&(ue===Xe.DONE&&A?.status!==Xe.DONE&&!W()||(a(Re=>Re.map(Ie=>Ie.id===A.id?{...Ie,status:ue}:Ie)),Ut({id:A.id,toStatus:ue})))},[ie,W]),ft=x.useCallback(({active:A})=>{if(!ie)return;const ue=A?.id;en.current=Be(ue),Rt(n.find(Re=>Re.id===ue)||null)},[n,Be,ie]),Et=x.useCallback(({over:A})=>{if(!A){Zt(null);return}tn.current=A.id;const ue=A.id,Re=Gl.includes(ue)?ue:Be(ue);Zt(Re||null)},[Be]),at=x.useCallback(({active:A,over:ue})=>{if(!ie)return;Rt(null),Zt(null);const Re=ue?.id??tn.current;if(!Re)return;const Ie=A.id,Ve=en.current||Be(Ie);let it=Gl.includes(Re)?Re:Be(Re)||Ve;if(!Ve||!it)return;if(Ve!==it){if(it===Xe.DONE&&Ve!==Xe.DONE&&!W()){en.current=null,tn.current=null;return}const Wt=Gl.includes(Re)?null:Re;a(wn=>wn.map(In=>In.id===Ie?{...In,status:it}:In)),J.current=Date.now(),tt({id:Ie,toStatus:it,beforeId:Wt}),en.current=null,tn.current=null;return}const st=Ft[it],kt=st.findIndex(Wt=>Wt.id===Ie);let gt,Bn=null;if(Gl.includes(Re))gt=st.length-1;else{const Wt=st.findIndex(wn=>wn.id===Re);gt=Wt<0?st.length-1:Wt,Bn=st[gt]?.id??null}if(kt!==-1&&gt!==-1&&kt!==gt){const Wt=hf(st,kt,gt);a(wn=>[...wn.filter(Pr=>Pr.status!==it),...Wt]),J.current=Date.now(),tt({id:Ie,toStatus:it,beforeId:Bn})}en.current=null,tn.current=null},[Be,Ft,ie,W]);return o.jsxs("div",{className:"p-5 floating-actions-safe-area",children:[o.jsx(Co,{helpHref:"/Hilfe_Aufgabenboard.pdf",helpTitle:"Hilfe  Aufgabenboard",onAdd:ne,addDisabled:!ie,addTitle:ie?"Aufgabe anlegen":"Keine Berechtigung",navButtons:EC}),o.jsx("header",{className:"aufg-header mb-5 flex flex-col gap-3",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("h1",{className:"text-xl font-extrabold tracking-tight text-slate-900 flex items-center gap-2",children:[Te&&o.jsx(wx,{className:"h-5 w-5"}),o.jsx("span",{children:"Aufgaben"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Rolle"}),o.jsx("select",{value:Q,onChange:ht,className:"role-selector",disabled:!me.length||!le,"aria-label":"Rolle auswaehlen",title:le?Q?`Rolle ${Q}`:"Rolle auswaehlen":Ue?"Nur LtStb oder LtStbStv duerfen Rollen wechseln":"Nur LtStb oder LtStbStv duerfen Rollen wechseln  S3 nur, wenn LtStb abgemeldet",children:me.map(A=>o.jsx("option",{value:A.id,children:A.label||A.id},A.id))})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2.5 w-full md:w-auto md:ml-auto md:justify-end",children:[o.jsx("input",{value:v,onChange:A=>y(A.target.value),placeholder:"Suche Titel / Typ / Verantwortlich...",className:"search-input w-full sm:w-64 md:w-72 lg:w-80 max-w-full"}),o.jsx(NC,{roleId:Q}),o.jsx("button",{onClick:ne,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:!ie,title:ie?void 0:"Keine Berechtigung (Aufgabenboard)",children:"+ Neu"}),ie&&o.jsx(dx,{open:j,onClose:Ee,incidentOptions:i.options,defaultDueOffsetMinutes:Ce.defaultDueOffsetMinutes,onAdded:async A=>{try{const ue=await Gt(A);ue&&a(Re=>[ue,...Re])}catch(ue){h(String(ue?.message||ue))}}}),o.jsx("button",{onClick:()=>{mt(),_t()},className:"btn-secondary",disabled:u,children:u?"Laedt...":"Aktualisieren"})]})]})}),p&&o.jsx("div",{className:"mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-xl px-4 py-2.5",children:p}),o.jsxs(jb,{sensors:be,collisionDetection:_0,onDragStart:ft,onDragOver:Et,onDragEnd:at,children:[o.jsxs("div",{className:"kanban-grid watermark-layer",children:[o.jsx("div",{className:Bt===Xe.NEW?"drag-over":"",children:o.jsx(gd,{id:Xe.NEW,title:"Neu",count:Ft[Xe.NEW].length,itemIds:Ft[Xe.NEW].map(A=>A.id),children:Ft[Xe.NEW].map(A=>o.jsx(Pd,{item:A,onAdvance:wt,onShowInfo:ve,isNew:Oe.has(String(A.id)),incidentLookup:i.map,onCreateProtocol:pe,onOpenProtocol:Qe,tick:Ke},A.id))})}),o.jsx("div",{className:Bt===Xe.IN_PROGRESS?"drag-over":"",children:o.jsx(gd,{id:Xe.IN_PROGRESS,title:"In Bearbeitung",count:Ft[Xe.IN_PROGRESS].length,itemIds:Ft[Xe.IN_PROGRESS].map(A=>A.id),children:Ft[Xe.IN_PROGRESS].map(A=>o.jsx(Pd,{item:A,onAdvance:wt,onShowInfo:ve,isNew:Oe.has(String(A.id)),incidentLookup:i.map,onCreateProtocol:pe,onOpenProtocol:Qe,tick:Ke},A.id))})}),o.jsx("div",{className:Bt===Xe.DONE?"drag-over":"",children:o.jsx(gd,{id:Xe.DONE,title:"Erledigt",count:Ft[Xe.DONE].length,itemIds:Ft[Xe.DONE].map(A=>A.id),children:Ft[Xe.DONE].map(A=>o.jsx(Pd,{item:A,onAdvance:wt,onShowInfo:ve,isNew:Oe.has(String(A.id)),incidentLookup:i.map,onCreateProtocol:pe,onOpenProtocol:Qe,tick:Ke},A.id))})})]}),o.jsx(Yb,{children:Fe?o.jsxs("div",{className:"drag-overlay rounded-2xl bg-white p-4 w-[300px]",children:[o.jsx("div",{className:"text-[10px] text-slate-400 leading-4 font-medium mb-1",children:Fe.createdAt?new Date(Fe.createdAt).toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1}):""}),o.jsx("div",{className:"font-bold text-sm text-slate-900 mb-1 truncate",children:Fe.title}),Fe.type&&o.jsx("span",{className:"card-type-badge",children:Fe.type})]}):null})]}),ae?o.jsx(y1,{open:!!ae,item:ae,onClose:()=>se(null),onSave:sn,canEdit:ie,incidentOptions:i.options,incidentLookup:i.map,protocolOptions:t,protocolLookup:$t,onCreateProtocol:pe,onOpenProtocol:Qe}):null,o.jsx(uC,{open:C,mode:O,editNr:$,payload:q,onClose:()=>{F(!1),_("create"),Z(null),ee(null)}}),o.jsx(yC,{currentRole:Q,enabled:!0})]})}const FC=[{key:"aufgaben",label:"Aufgaben",path:"/aufgaben"},{key:"meldestelle",label:"Meldestelle",path:"/#/protokoll"},{key:"einsatzstellen",label:"Einsatzstellen",path:"/"},{key:"admin",label:"Admin",path:"/user-admin"},{key:"status",label:"Status",path:"/status"}],zC=(n,a)=>a?Af(a,n):n;function Og(){const{login:n}=Ti(),[a,i]=x.useState(""),[r,t]=x.useState(""),[l,u]=x.useState(""),[d,p]=x.useState(null),h=x.useMemo(()=>Oo(),[]),v=x.useMemo(()=>{const j=h||"";return FC.map(E=>({...E,url:j?zC(j,E.path):E.path}))},[h]),y=async j=>{if(!(!j||d)){u(""),p(j.key);try{await n(a,r),j.url&&(window.location.href=j.url)}catch(E){u(E.message||"Fehler")}finally{p(null)}}},S=j=>{j.preventDefault(),v[0]&&y(v[0])},k=String(l||"").toUpperCase().includes("MASTER_LOCKED");return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[o.jsx(Co,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/"},addTitle:"Zur Einsatzbersicht"}),o.jsxs("form",{onSubmit:S,className:"bg-white shadow rounded-2xl p-6 w-[380px]",children:[o.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Anmeldung"}),o.jsx("label",{className:"block mb-2 text-sm",children:"Benutzername"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 mb-3",value:a,onChange:j=>i(j.target.value),autoFocus:!0,autoComplete:"username"}),o.jsx("label",{className:"block mb-2 text-sm",children:"Passwort"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 mb-3",type:"password",value:r,onChange:j=>t(j.target.value),autoComplete:"current-password"}),l&&o.jsx("div",{className:"text-red-600 text-sm mb-2",children:l}),k&&o.jsxs("div",{className:"text-sm text-blue-700 mb-2",children:["Master ist gesperrt. ",o.jsx("a",{className:"underline",href:"/user-firststart",children:"Hier Master setzen/entsperren"}),"."]}),o.jsx("div",{className:"h-px bg-gray-200 my-4"}),o.jsx("div",{className:"grid gap-2",children:v.map(j=>{const E=d===j.key,C=!!d&&d!==j.key;return o.jsx("button",{type:"button",onClick:()=>y(j),disabled:C||E,className:"w-full rounded-xl py-2 border bg-gray-900 text-white transition hover:bg-gray-800 disabled:opacity-70 disabled:cursor-not-allowed",children:E?`Login  ${j.label}`:`Login  ${j.label}`},j.key)})}),o.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Gltig bis die Browser-Sitzung geschlossen wird."})]})]})}const sf={bboxFilterEnabled:!1,bboxFilterMode:"request_only",bboxFilterDocTypes:["address"]},Ag={enabled:!0,knowledgeTopK:8,knowledgeMaxChars:6e3,knowledgeScoreThreshold:.2,knowledgeUseMMR:!0,sessionTopK:6,sessionMaxChars:3e3,disasterSummaryMaxLength:2e3,totalMaxChars:1e4};function UC(n){const a=n?.geo||{},i=Array.isArray(a.bboxFilterDocTypes)&&a.bboxFilterDocTypes.length?a.bboxFilterDocTypes:sf.bboxFilterDocTypes;return{...n,geo:{...sf,...a,bboxFilterDocTypes:i}}}function BC(n){const a=Object.entries(n||{});return a.length?Object.fromEntries(a.map(([i,r])=>[i,UC(r)])):{}}function js({data:n,dataKey:a,label:i,unit:r,color:t,minY:l=0,maxY:u=100,height:d=120}){if(!n||n.length===0)return o.jsx("div",{className:"text-xs text-gray-500 text-center py-4",children:"Keine Daten verfgbar"});const p=400,h={top:20,right:50,bottom:30,left:50},v=p-h.left-h.right,y=d-h.top-h.bottom,S=Math.max(...n.map(re=>re.timestamp)),k=0,j=S-k||1,E=n.map(re=>re[a]).filter(re=>re!=null);if(E.length===0)return o.jsxs("div",{className:"text-xs text-gray-500 text-center py-4",children:["Keine ",i,"-Daten"]});const C=Math.min(...E),F=Math.max(...E),O=Math.min(l,C*.9),_=Math.max(u,F*1.1),$=_-O||1,Z=n.filter(re=>re[a]!==null&&re[a]!==void 0).map(re=>{const Ce=h.left+(re.timestamp-k)/j*v,fe=h.top+y-(re[a]-O)/$*y;return{x:Ce,y:fe,value:re[a],time:re.timestamp}}),q=Z.map((re,Ce)=>`${Ce===0?"M":"L"} ${re.x} ${re.y}`).join(" "),ee=q+` L ${Z[Z.length-1].x} ${h.top+y} L ${Z[0].x} ${h.top+y} Z`,ae=[O,O+$/2,_].map(re=>({value:Math.round(re),y:h.top+y-(re-O)/$*y})),se=[],ie=Math.ceil(S/4e3)*1e3;for(let re=0;re<=S;re+=ie||2e3)se.push({value:(re/1e3).toFixed(0)+"s",x:h.left+(re-k)/j*v});return o.jsxs("div",{className:"bg-gray-900 rounded p-2",children:[o.jsxs("div",{className:"text-xs text-gray-400 mb-1 flex justify-between",children:[o.jsx("span",{children:i}),o.jsxs("span",{children:["Min: ",Math.round(C),r," | Max: ",Math.round(F),r]})]}),o.jsxs("svg",{width:"100%",height:d,viewBox:`0 0 ${p} ${d}`,preserveAspectRatio:"xMidYMid meet",children:[ae.map((re,Ce)=>o.jsx("line",{x1:h.left,y1:re.y,x2:p-h.right,y2:re.y,stroke:"#374151",strokeWidth:"1",strokeDasharray:"4,4"},`grid-y-${Ce}`)),o.jsx("path",{d:ee,fill:t,fillOpacity:"0.2"}),o.jsx("path",{d:q,fill:"none",stroke:t,strokeWidth:"2"}),Z.map((re,Ce)=>o.jsx("circle",{cx:re.x,cy:re.y,r:"4",fill:t,stroke:"#1f2937",strokeWidth:"1",children:o.jsxs("title",{children:[re.value,r," @ ",(re.time/1e3).toFixed(1),"s"]})},Ce)),o.jsx("line",{x1:h.left,y1:h.top,x2:h.left,y2:h.top+y,stroke:"#4B5563",strokeWidth:"1"}),ae.map((re,Ce)=>o.jsxs("text",{x:h.left-8,y:re.y+4,fontSize:"10",fill:"#9CA3AF",textAnchor:"end",children:[re.value,r]},`y-${Ce}`)),o.jsx("line",{x1:h.left,y1:h.top+y,x2:p-h.right,y2:h.top+y,stroke:"#4B5563",strokeWidth:"1"}),se.map((re,Ce)=>o.jsx("text",{x:re.x,y:h.top+y+15,fontSize:"10",fill:"#9CA3AF",textAnchor:"middle",children:re.value},`x-${Ce}`))]})]})}function $C(){const[n,a]=x.useState(!0),[i,r]=x.useState(null),[t,l]=x.useState(""),[u,d]=x.useState(""),[p,h]=x.useState(!1),[v,y]=x.useState(null),[S,k]=x.useState({}),[j,E]=x.useState({}),[C,F]=x.useState([]),[O,_]=x.useState(null),[$,Z]=x.useState(!1),[q,ee]=x.useState(null),[ae,se]=x.useState([]),ie=x.useRef(null),[re,Ce]=x.useState(300),[fe,Me]=x.useState(5e3),Te=x.useRef(fe),Ne=x.useRef(re);x.useEffect(()=>{Te.current=fe},[fe]),x.useEffect(()=>{Ne.current=re},[re]);const[xe,L]=x.useState({}),[V,Q]=x.useState(null),[T,Y]=x.useState("Was ist 2+2?"),[H,ye]=x.useState(null),[De,ke]=x.useState(!1),[Ue,oe]=x.useState(""),[le,me]=x.useState("chat"),[Oe,Je]=x.useState(!1),[qe,ut]=x.useState(null),[rt,_t]=x.useState(!1),[Lt,ht]=x.useState([]),[Ke,pt]=x.useState(null),[Fe,Rt]=x.useState(""),[Bt,Zt]=x.useState(!1),[en,tn]=x.useState(!1);x.useEffect(()=>{J();const W=setInterval(be,fe),ne=setInterval(()=>{p&&J()},3e3);return()=>{clearInterval(W),clearInterval(ne)}},[p,fe]);async function J(){p||a(!0),d("");try{const W=await fetch(bn("/api/llm/config"),{credentials:"include"}),ne=await W.json();if(!W.ok)throw new Error(ne.error||"Fehler beim Laden der Config");y(ne.globalModelOverride);const Ee=BC(ne.tasks||{});k(Ee),L(Ee),ne.defaults?.tasks&&E(ne.defaults.tasks);const ve=await fetch(bn("/api/llm/models"),{credentials:"include"}),pe=await ve.json();if(!ve.ok)throw new Error(pe.error||"Fehler beim Laden der Modelle");F(pe.models||[]),await be(),h(!1)}catch(W){W instanceof TypeError||W.name==="TypeError"||W.message&&W.message.toLowerCase().includes("network")?(d(Hl),h(!0)):(d(W.message||"Fehler beim Laden der Daten"),h(!1))}finally{a(!1)}}async function be(){Z(!0);try{const W=await fetch(bn("/api/llm/gpu"),{credentials:"include"}),ne=await W.json();if(W.ok&&(_(ne.gpuStatus),ne.gpuStatus?.available&&ne.gpuStatus?.gpus?.length>0)){const pe=ne.gpuStatus.gpus[0],Qe=Date.now();ie.current===null&&(ie.current=Qe);const ft={timestamp:Qe-ie.current,utilizationPercent:pe.utilizationPercent,memoryUsedMb:pe.memoryUsedMb,temperatureCelsius:pe.temperatureCelsius};se(Et=>{const at=Te.current/1e3,A=Math.ceil(Ne.current/at);return[...Et,ft].slice(-A)})}const Ee=await fetch(bn("/api/llm/system"),{credentials:"include"}),ve=await Ee.json();Ee.ok&&ee(ve.systemStatus)}catch{}finally{Z(!1)}}async function bt(){r("global"),d(""),l("");try{const W=await fetch(bn("/api/llm/global-model"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:v})}),ne=await W.json();if(!W.ok)throw new Error(ne.error||"Fehler beim Speichern");l(ne.message||"Globales Modell gespeichert"),await J()}catch(W){W instanceof TypeError||W.name==="TypeError"||W.message&&W.message.toLowerCase().includes("network")?d(Hl):d(W.message||"Fehler beim Speichern")}finally{r(null)}}async function mt(W){r(W),d(""),l("");try{const ne=xe[W],Ee=await fetch(bn("/api/llm/task-config"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskType:W,updates:ne})}),ve=await Ee.json();if(!Ee.ok)throw new Error(ve.error||"Fehler beim Speichern");l(`Task "${W}" gespeichert`),await J()}catch(ne){ne instanceof TypeError||ne.name==="TypeError"||ne.message&&ne.message.toLowerCase().includes("network")?d(Hl):d(ne.message||"Fehler beim Speichern")}finally{r(null)}}async function dt(){_t(!0);try{const ne=(await fetch(bn("/api/llm/test-with-metrics-stream"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:V,question:T||"Testfrage",taskType:le,previewOnly:!0})})).body.getReader(),Ee=new TextDecoder;let ve="";for(;;){const{done:pe,value:Qe}=await ne.read();if(pe)break;ve+=Ee.decode(Qe,{stream:!0});const wt=ve.split(`

`);for(const ft of wt){const Et=ft.match(/data: (.+)/);if(Et)try{const at=JSON.parse(Et[1]);if(at.rawRequest&&at.rawRequest.messages){const A=at.rawRequest.messages.find(Re=>Re.role==="system"),ue=at.rawRequest.messages.find(Re=>Re.role==="user");ut({systemPrompt:A?.content||"",userPrompt:ue?.content||""}),ne.cancel();return}}catch{}}}}catch(W){console.error("Fehler beim Laden der Prompts:",W)}finally{_t(!1)}}async function sn(){try{const ne=await(await fetch(bn("/api/llm/prompt-templates"),{credentials:"include"})).json();ne.ok&&ht(ne.templates||[])}catch(W){console.error("Fehler beim Laden der Prompt-Templates:",W)}}async function tt(W){Zt(!0);try{const Ee=await(await fetch(bn(`/api/llm/prompt-templates/${encodeURIComponent(W)}`),{credentials:"include"})).json();Ee.ok&&(pt(W),Rt(Ee.content))}catch(ne){console.error("Fehler beim Laden des Templates:",ne)}finally{Zt(!1)}}async function Ut(){if(Ke){tn(!0);try{const ne=await(await fetch(bn(`/api/llm/prompt-templates/${encodeURIComponent(Ke)}`),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:Fe})})).json();ne.ok?l("Template gespeichert"):d(ne.error||"Fehler beim Speichern")}catch{d("Fehler beim Speichern des Templates")}finally{tn(!1)}}}async function Gt(W){ke(!0),ye(null),oe("");try{const ne=await fetch(bn("/api/llm/test-with-metrics-stream"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:W,question:T,taskType:le,editedPrompts:qe})});if(!ne.ok){const Qe=await ne.json();throw new Error(Qe.error||"Test fehlgeschlagen")}const Ee=ne.body.getReader(),ve=new TextDecoder;let pe="";for(;;){const{done:Qe,value:wt}=await Ee.read();if(Qe)break;pe+=ve.decode(wt,{stream:!0});const ft=pe.split(`
`);pe=ft.pop()||"";for(const Et of ft){if(Et.startsWith("event: ")){const at=Et.slice(7).trim();continue}if(Et.startsWith("data: ")){const at=Et.slice(6);try{const A=JSON.parse(at);A.token!==void 0&&oe(ue=>ue+A.token),A.ok!==void 0&&A.answer!==void 0&&ye(A),A.error!==void 0&&A.ok===!1&&ye(A)}catch{}}}}}catch(ne){ne instanceof TypeError||ne.name==="TypeError"||ne.message&&ne.message.toLowerCase().includes("network")?ye({error:Hl}):ye({error:ne.message||"Test fehlgeschlagen"})}finally{ke(!1)}}function $t(W,ne,Ee){L(ve=>({...ve,[W]:{...ve[W],[ne]:Ee}}))}function Yt(W,ne,Ee){L(ve=>({...ve,[W]:{...ve[W],rag:{...ve[W]?.rag||Ag,[ne]:Ee}}}))}function Ft(W){const ne=j[W]?.rag||Ag;L(Ee=>({...Ee,[W]:{...Ee[W],rag:{...ne}}}))}function Qt(W){const ne=S[W],Ee=xe[W];return!ne||!Ee?!1:JSON.stringify(ne)!==JSON.stringify(Ee)}if(n)return o.jsx("div",{className:"p-4 text-gray-500",children:"Lade Konfiguration"});const Be=[{key:"start",label:"Start",description:"Erstes Szenario"},{key:"operations",label:"Operations",description:"Laufende Simulation"},{key:"chat",label:"Chat",description:"QA-Chat"},{key:"situation-question",label:"Situation-Question",description:"Fragen zur Lage"},{key:"analysis",label:"Analysis",description:"KI-Situationsanalyse"},{key:"summarization",label:"Summarization",description:"Kontext-Zusammenfassung"},{key:"default",label:"Default",description:"Fallback"}];return o.jsxs("div",{className:"space-y-6",children:[u&&o.jsxs("div",{className:"text-rose-700 text-sm bg-rose-50 p-3 rounded border border-rose-200",children:[u,p&&o.jsxs("div",{className:"mt-2 text-amber-700 flex items-center gap-2",children:[o.jsx("span",{className:"animate-spin",children:""}),o.jsx("span",{children:"Versuche automatisch erneut, Verbindung herzustellen..."})]})]}),t&&o.jsx("div",{className:"text-emerald-700 text-sm bg-emerald-50 p-3 rounded border border-emerald-200",children:t}),o.jsxs("div",{className:"border rounded p-4 bg-gradient-to-r from-gray-50 to-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," System-Status"]}),o.jsxs("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-white",onClick:be,disabled:$,children:[$?"":""," Aktualisieren"]})]}),o.jsxs("div",{className:"space-y-3",children:[O&&O.available&&O.gpus?o.jsxs(o.Fragment,{children:[O.gpus.map((W,ne)=>o.jsxs("div",{className:"bg-white rounded p-3 border",children:[o.jsx("div",{className:"font-medium text-sm mb-2",children:W.name}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"GPU-Auslastung"}),o.jsxs("div",{className:"text-lg font-bold",style:{color:W.utilizationPercent>80?"#dc2626":"#10b981"},children:[W.utilizationPercent??"","%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Temperatur"}),o.jsxs("div",{className:"text-lg font-bold",style:{color:W.temperatureCelsius>75?"#dc2626":"#10b981"},children:[W.temperatureCelsius??"","C"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"VRAM"}),o.jsx("div",{className:"text-lg font-bold",children:W.memoryUsedMb&&W.memoryTotalMb?`${(W.memoryUsedMb/1024).toFixed(1)} / ${(W.memoryTotalMb/1024).toFixed(1)} GB`:""}),W.memoryUsedMb&&W.memoryTotalMb&&o.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full",style:{width:`${W.memoryUsedMb/W.memoryTotalMb*100}%`,backgroundColor:W.memoryUsedMb/W.memoryTotalMb>.9?"#dc2626":"#10b981"}})})]})]})]},ne)),O.warning&&o.jsxs("div",{className:"text-amber-700 text-xs bg-amber-50 p-2 rounded",children:[" ",O.warning]})]}):o.jsxs("div",{className:"text-sm text-gray-500 bg-white rounded p-3 border",children:["GPU: ",O?.error||"Nicht verfgbar"]}),q&&q.available?o.jsxs("div",{className:"bg-white rounded p-3 border",children:[o.jsxs("div",{className:"font-medium text-sm mb-2",children:["System (",q.hostname,")"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"CPU-Auslastung"}),o.jsxs("div",{className:"text-lg font-bold",style:{color:q.cpu.usagePercent>80?"#dc2626":"#3b82f6"},children:[q.cpu.usagePercent??"","%"]}),o.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[q.cpu.count," Kerne"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Load Avg (1/5/15)"}),o.jsxs("div",{className:"text-sm font-medium mt-1",children:[q.cpu.loadAverage?.oneMin??""," / ",q.cpu.loadAverage?.fiveMin??""," / ",q.cpu.loadAverage?.fifteenMin??""]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Arbeitsspeicher"}),o.jsx("div",{className:"text-lg font-bold",children:q.memory.usedMb&&q.memory.totalMb?`${(q.memory.usedMb/1024).toFixed(1)} / ${(q.memory.totalMb/1024).toFixed(1)} GB`:""}),q.memory.usedMb&&q.memory.totalMb&&o.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full",style:{width:`${q.memory.usagePercent}%`,backgroundColor:q.memory.usagePercent>90?"#dc2626":"#3b82f6"}})})]})]})]}):o.jsxs("div",{className:"text-sm text-gray-500 bg-white rounded p-3 border",children:["System: ",q?.error||"Nicht verfgbar"]}),O?.available&&ae.length>0&&o.jsxs("div",{className:"space-y-3 mt-4",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2 flex justify-between items-center",children:[o.jsxs("span",{children:["Verlauf (",(()=>{const W=Math.floor((ae[ae.length-1]?.timestamp||0)/1e3);return W>=3600?`${Math.floor(W/3600)}h ${Math.floor(W%3600/60)}m`:W>=60?`${Math.floor(W/60)}m ${W%60}s`:`${W}s`})(),")"]}),o.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Intervall:"}),o.jsxs("select",{className:"text-xs px-2 py-1 border rounded bg-white text-gray-700",value:fe,onChange:W=>{const ne=Number(W.target.value);Me(ne),se([]),ie.current=null},children:[o.jsx("option",{value:2e3,children:"2s"}),o.jsx("option",{value:5e3,children:"5s"}),o.jsx("option",{value:1e4,children:"10s"}),o.jsx("option",{value:3e4,children:"30s"}),o.jsx("option",{value:6e4,children:"60s"})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Zeitraum:"}),o.jsxs("select",{className:"text-xs px-2 py-1 border rounded bg-white text-gray-700",value:re,onChange:W=>{const ne=Number(W.target.value);Ce(ne);const Ee=fe/1e3,ve=Math.ceil(ne/Ee);se(pe=>pe.slice(-ve))},children:[o.jsx("option",{value:300,children:"5 Min"}),o.jsx("option",{value:900,children:"15 Min"}),o.jsx("option",{value:1800,children:"30 Min"}),o.jsx("option",{value:3600,children:"1 Std"}),o.jsx("option",{value:7200,children:"2 Std"}),o.jsx("option",{value:14400,children:"4 Std"}),o.jsx("option",{value:28800,children:"8 Std"})]})]}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-white text-gray-600",onClick:()=>{se([]),ie.current=null},children:"Lschen"})]})]}),(()=>{const W=ae.map(ve=>ve.utilizationPercent).filter(ve=>ve!=null),ne=ae.map(ve=>ve.memoryUsedMb).filter(ve=>ve!=null),Ee=ae.map(ve=>ve.temperatureCelsius).filter(ve=>ve!=null);return o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[W.length>0&&o.jsxs("div",{className:"bg-emerald-50 rounded p-3 border border-emerald-200",children:[o.jsx("div",{className:"text-xs text-emerald-700 font-medium mb-2",children:"GPU-Auslastung"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Min"}),o.jsxs("div",{className:"text-lg font-bold text-emerald-700",children:[Math.round(Math.min(...W)),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max"}),o.jsxs("div",{className:"text-lg font-bold text-emerald-700",children:[Math.round(Math.max(...W)),"%"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[" ",Math.round(W.reduce((ve,pe)=>ve+pe,0)/W.length),"%"]})]}),ne.length>0&&o.jsxs("div",{className:"bg-purple-50 rounded p-3 border border-purple-200",children:[o.jsx("div",{className:"text-xs text-purple-700 font-medium mb-2",children:"VRAM-Nutzung"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Min"}),o.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[(Math.min(...ne)/1024).toFixed(1)," GB"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max"}),o.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[(Math.max(...ne)/1024).toFixed(1)," GB"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[" ",(ne.reduce((ve,pe)=>ve+pe,0)/ne.length/1024).toFixed(1)," GB"]})]}),Ee.length>0&&o.jsxs("div",{className:"bg-amber-50 rounded p-3 border border-amber-200",children:[o.jsx("div",{className:"text-xs text-amber-700 font-medium mb-2",children:"GPU-Temperatur"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Min"}),o.jsxs("div",{className:"text-lg font-bold text-amber-700",children:[Math.round(Math.min(...Ee)),"C"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max"}),o.jsxs("div",{className:"text-lg font-bold text-amber-700",children:[Math.round(Math.max(...Ee)),"C"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[" ",Math.round(Ee.reduce((ve,pe)=>ve+pe,0)/Ee.length),"C"]})]})]})})(),o.jsx(js,{data:ae,dataKey:"utilizationPercent",label:"GPU-Auslastung",unit:"%",color:"#10B981",minY:0,maxY:100,height:120}),o.jsx(js,{data:ae,dataKey:"memoryUsedMb",label:"VRAM-Nutzung",unit:" MiB",color:"#8B5CF6",minY:0,maxY:O.gpus?.[0]?.memoryTotalMb||8192,height:120}),o.jsx(js,{data:ae,dataKey:"temperatureCelsius",label:"GPU-Temperatur",unit:"C",color:"#F59E0B",minY:0,maxY:100,height:120})]})]})]}),o.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Globales Modell-Override"}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Optional: berschreibt alle task-spezifischen Modelle. Leer lassen fr task-spezifische Konfiguration."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"text",className:"border rounded px-3 py-2 flex-1 font-mono text-sm",value:v||"",onChange:W=>y(W.target.value||null),placeholder:"z.B. einfo-balanced (leer = deaktiviert)",disabled:i==="global"}),o.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:bt,disabled:i==="global",children:i==="global"?"Speichere...":"Speichern"})]}),v&&o.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[" Aktiv: Alle Tasks verwenden ",o.jsx("b",{children:v})]})]}),o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Task-Konfigurationen"}),o.jsx("div",{className:"text-xs text-gray-600 mb-4",children:"Jeder Task kann individuelle Parameter haben. Nur aktiv wenn globales Override leer ist."}),o.jsx("div",{className:"space-y-6",children:Be.map(W=>{const ne=xe[W.key]||{},Ee=ne.geo||sf,ve=Qt(W.key);return o.jsxs("details",{className:"border rounded bg-white",open:W.key==="chat",children:[o.jsxs("summary",{className:"cursor-pointer p-3 font-medium hover:bg-gray-50 flex items-center justify-between",children:[o.jsxs("span",{children:[W.label," ",o.jsxs("span",{className:"text-xs text-gray-500",children:["(",W.description,")"]})]}),ve&&o.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded",children:"Ungespeichert"})]}),o.jsxs("div",{className:"p-4 border-t space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Modell"}),o.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2 font-mono text-sm",value:ne.model||"",onChange:pe=>$t(W.key,"model",pe.target.value),placeholder:"z.B. einfo-balanced"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Temperature"}),o.jsx("input",{type:"number",step:"0.01",min:"0",max:"2",className:"w-full border rounded px-3 py-2",value:ne.temperature??0,onChange:pe=>$t(W.key,"temperature",Number(pe.target.value))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"0.0 = deterministisch, 1.0 = kreativ"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Tokens"}),o.jsx("input",{type:"number",step:"100",min:"100",max:"8000",className:"w-full border rounded px-3 py-2",value:ne.maxTokens??0,onChange:pe=>$t(W.key,"maxTokens",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timeout (ms)"}),o.jsx("input",{type:"number",step:"1000",min:"10000",max:"600000",className:"w-full border rounded px-3 py-2",value:ne.timeout??0,onChange:pe=>$t(W.key,"timeout",Number(pe.target.value))}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((ne.timeout||0)/1e3).toFixed(0),"s"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Num GPU (Layers)"}),o.jsx("input",{type:"number",min:"0",max:"99",className:"w-full border rounded px-3 py-2",value:ne.numGpu??0,onChange:pe=>$t(W.key,"numGpu",Number(pe.target.value))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"0 = CPU, 20+ = GPU"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Context Size"}),o.jsx("input",{type:"number",step:"512",min:"512",max:"32768",className:"w-full border rounded px-3 py-2",value:ne.numCtx??0,onChange:pe=>$t(W.key,"numCtx",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Top P"}),o.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",className:"w-full border rounded px-3 py-2",value:ne.topP??0,onChange:pe=>$t(W.key,"topP",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Top K"}),o.jsx("input",{type:"number",min:"1",max:"100",className:"w-full border rounded px-3 py-2",value:ne.topK??0,onChange:pe=>$t(W.key,"topK",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Repeat Penalty"}),o.jsx("input",{type:"number",step:"0.01",min:"1",max:"2",className:"w-full border rounded px-3 py-2",value:ne.repeatPenalty??0,onChange:pe=>$t(W.key,"repeatPenalty",Number(pe.target.value))})]})]}),o.jsxs("div",{className:"pt-3 border-t space-y-3",children:[o.jsx("div",{className:"font-medium text-sm",children:"Geo / BBOX Filter"}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:Ee.bboxFilterEnabled??!1,onChange:pe=>$t(W.key,"geo",{...Ee,bboxFilterEnabled:pe.target.checked})}),o.jsx("span",{children:"BBOX-Filter aktiv (Adressen/Geo)"})]}),Ee.bboxFilterEnabled&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"BBOX-Filter-Modus"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Ee.bboxFilterMode||"request_only",onChange:pe=>$t(W.key,"geo",{...Ee,bboxFilterMode:pe.target.value}),children:[o.jsx("option",{value:"request_only",children:"Nur wenn BBOX im Request gesetzt"}),o.jsx("option",{value:"auto_municipality",children:"Automatisch ber Gemeinde (municipality_index)"}),o.jsx("option",{value:"both",children:"Request-BBOX bevorzugen, sonst Gemeinde"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium mb-1",children:"Dokumenttypen"}),o.jsx("div",{className:"flex flex-wrap gap-3 text-sm",children:[{key:"address",label:"Adresse"},{key:"poi",label:"POI"},{key:"building",label:"Gebude"}].map(pe=>{const Qe=Ee.bboxFilterDocTypes?.includes(pe.key);return o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:Qe,onChange:wt=>{const ft=new Set(Ee.bboxFilterDocTypes||[]);wt.target.checked?ft.add(pe.key):ft.delete(pe.key),$t(W.key,"geo",{...Ee,bboxFilterDocTypes:Array.from(ft)})}}),o.jsx("span",{children:pe.label})]},pe.key)})})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Serverseitig: Treffer ohne Koordinaten werden fr die ausgewhlten Typen nicht bercksichtigt, wenn BBOX aktiv ist."})]})]}),o.jsxs("div",{className:"pt-3 border-t space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"font-medium text-sm",children:"RAG / Context Limits"}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-gray-50 text-gray-600",onClick:()=>Ft(W.key),title:"RAG-Einstellungen auf Defaults zurcksetzen",children:"Auf Defaults zurcksetzen"})]}),o.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Chars  grob Tokens*34 (je nach Sprache/Format). totalMaxChars ist ein Sicherheitsdeckel."}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4",checked:ne.rag?.enabled??!0,onChange:pe=>Yt(W.key,"enabled",pe.target.checked)}),o.jsx("span",{children:"RAG aktiviert"})]}),ne.rag?.enabled!==!1&&o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Knowledge TopK"}),o.jsx("input",{type:"number",min:"0",max:"100",className:"w-full border rounded px-3 py-2",value:ne.rag?.knowledgeTopK??8,onChange:pe=>Yt(W.key,"knowledgeTopK",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Knowledge MaxChars"}),o.jsx("input",{type:"number",min:"0",max:"50000",step:"500",className:"w-full border rounded px-3 py-2",value:ne.rag?.knowledgeMaxChars??6e3,onChange:pe=>Yt(W.key,"knowledgeMaxChars",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Knowledge Score Threshold"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.01",className:"w-full border rounded px-3 py-2",value:ne.rag?.knowledgeScoreThreshold??.2,onChange:pe=>Yt(W.key,"knowledgeScoreThreshold",Number(pe.target.value))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"0 = alles, 1 = nur perfekte Treffer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Session TopK"}),o.jsx("input",{type:"number",min:"0",max:"100",className:"w-full border rounded px-3 py-2",value:ne.rag?.sessionTopK??6,onChange:pe=>Yt(W.key,"sessionTopK",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Session MaxChars"}),o.jsx("input",{type:"number",min:"0",max:"50000",step:"500",className:"w-full border rounded px-3 py-2",value:ne.rag?.sessionMaxChars??3e3,onChange:pe=>Yt(W.key,"sessionMaxChars",Number(pe.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Disaster Summary MaxLength"}),o.jsx("input",{type:"number",min:"0",max:"50000",step:"500",className:"w-full border rounded px-3 py-2",value:ne.rag?.disasterSummaryMaxLength??2e3,onChange:pe=>Yt(W.key,"disasterSummaryMaxLength",Number(pe.target.value))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total MaxChars (Sicherheitsdeckel)"}),o.jsx("input",{type:"number",min:"0",max:"50000",step:"1000",className:"w-full border rounded px-3 py-2",value:ne.rag?.totalMaxChars??1e4,onChange:pe=>Yt(W.key,"totalMaxChars",Number(pe.target.value))})]})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:()=>mt(W.key),disabled:i===W.key||!ve,children:i===W.key?"Speichere...":"Speichern"}),o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:()=>L(pe=>({...pe,[W.key]:S[W.key]})),disabled:!ve,children:"Zurcksetzen"}),o.jsx("button",{type:"button",className:"ml-auto px-4 py-2 border rounded hover:bg-gray-50 text-blue-600",onClick:()=>Q(ne.model),children:"Modell testen"})]})]})]},W.key)})})]}),o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Verfgbare Ollama-Modelle"}),C.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"Keine Modelle gefunden oder Ollama nicht erreichbar"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Gre"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Gendert"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsx("tbody",{children:C.map(W=>o.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[o.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:W.name}),o.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:W.size?`${(W.size/1024/1024/1024).toFixed(2)} GB`:""}),o.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:W.modified_at?new Date(W.modified_at).toLocaleString("de-AT",{hour12:!1}):""}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-800 text-xs",onClick:()=>Q(W.name),children:"Testen"})})]},W.name))})]})})]}),V&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"font-medium text-lg",children:["Modell testen: ",V]}),o.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",onClick:()=>{Q(null),ye(null),oe(""),ut(null),Je(!1)},children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Task-Typ"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:le,onChange:W=>{me(W.target.value),ut(null),Je(!1)},disabled:De,children:[o.jsx("option",{value:"chat",children:"Chat (QA)"}),o.jsx("option",{value:"situation-question",children:"Situation-Question (Fragen zur Lage)"}),o.jsx("option",{value:"analysis",children:"Analysis (KI-Situationsanalyse)"}),o.jsx("option",{value:"summarization",children:"Summarization (Kontext-Zusammenfassung)"}),o.jsx("option",{value:"operations",children:"Operations (Simulation)"}),o.jsx("option",{value:"start",children:"Start (Szenario-Start)"}),o.jsx("option",{value:"default",children:"Default"})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Der Task-Typ bestimmt welche Prompts und Parameter verwendet werden"}),le==="analysis"&&o.jsx("div",{className:"text-xs text-amber-600 mt-2 bg-amber-50 p-2 rounded",children:'Hinweis: Bei aktivierter "LLM-Zusammenfassung" wird vor der Analysis zuerst ein Summarization-Aufruf gemacht. Whlen Sie "Summarization" um diesen ersten Aufruf separat zu testen.'}),le==="situation-question"&&o.jsx("div",{className:"text-xs text-blue-600 mt-2 bg-blue-50 p-2 rounded",children:"Hinweis: Im Live-Betrieb verwendet die Fragebeantwortung den Cache der letzten timergesteuerten Analyse (kein zustzlicher LLM-Aufruf). Im Test hier wird ein neuer Summarization-Aufruf gemacht, um aktuelle Daten zu verwenden."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Testfrage"}),o.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",value:T,onChange:W=>Y(W.target.value),disabled:De})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:()=>Gt(V),disabled:De||!T.trim(),children:De?"Teste...":"Test starten"}),o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50 text-gray-700",onClick:()=>{Oe||dt(),Je(!Oe)},disabled:De||rt,children:rt?"Lade...":Oe?"Prompts ausblenden":"Prompts anzeigen/bearbeiten"})]}),Oe&&qe&&o.jsxs("div",{className:"border rounded p-4 bg-gray-50 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-medium text-sm",children:"Prompts bearbeiten vor dem Senden"}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-white",onClick:()=>ut(null),children:"Zurcksetzen"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["System-Prompt",o.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["(",qe.systemPrompt.length," Zeichen)"]})]}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs min-h-[200px] max-h-[400px] overflow-auto resize-y",value:qe.systemPrompt,onChange:W=>ut(ne=>({...ne,systemPrompt:W.target.value})),disabled:De})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["User-Prompt",o.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["(",qe.userPrompt.length," Zeichen)"]})]}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs min-h-[200px] max-h-[400px] overflow-auto resize-y",value:qe.userPrompt,onChange:W=>ut(ne=>({...ne,userPrompt:W.target.value})),disabled:De})]}),o.jsx("div",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded",children:"Hinweis: nderungen an den Prompts gelten nur fr diesen Test und werden nicht gespeichert."})]}),De&&Ue&&o.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[o.jsxs("div",{className:"text-xs text-gray-600 mb-1 flex items-center gap-2",children:[o.jsx("span",{className:"animate-pulse",children:""}),"Antwort wird generiert..."]}),o.jsxs("div",{className:"text-sm whitespace-pre-wrap bg-white p-2 rounded border min-h-[60px]",children:[Ue,o.jsx("span",{className:"animate-pulse text-blue-500",children:""})]})]}),H&&o.jsx("div",{className:"border rounded p-4 bg-gray-50 space-y-4",children:H.error?o.jsxs("div",{className:"text-red-600",children:[o.jsx("div",{className:"font-medium",children:"Fehler:"}),o.jsx("div",{className:"text-sm mt-1",children:H.error}),H.debug&&o.jsxs("details",{className:"mt-2 text-xs text-gray-500",children:[o.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Debug-Info"}),o.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded overflow-auto text-gray-700",children:JSON.stringify(H.debug,null,2)})]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs text-gray-600 mb-1 flex justify-between items-center",children:[o.jsx("span",{children:"Antwort:"}),o.jsxs("span",{className:"text-gray-400",children:[H.answer?.length||0," Zeichen"]})]}),o.jsx("div",{className:"text-sm whitespace-pre-wrap bg-white p-3 rounded border max-h-[400px] overflow-y-auto",children:H.answer})]}),H.modelParams&&o.jsxs("div",{className:"bg-indigo-50 rounded p-3 border border-indigo-200",children:[o.jsxs("div",{className:"text-xs text-indigo-700 font-medium mb-2",children:["Verwendete Modell-Parameter",H.taskType&&o.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-indigo-200 rounded text-indigo-800",children:["Task: ",H.taskType]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Temperature"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.temperature??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max Tokens"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.maxTokens??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Context Size"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.numCtx??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Num GPU"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.numGpu??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Top P"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.topP??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Top K"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.topK??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Repeat Penalty"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.repeatPenalty??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Timeout"}),o.jsx("div",{className:"font-bold text-indigo-900",children:H.modelParams.timeout?`${(H.modelParams.timeout/1e3).toFixed(0)}s`:""})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dauer"}),o.jsx("div",{className:"text-lg font-bold text-blue-700",children:H.duration?`${(H.duration/1e3).toFixed(2)}s`:""})]}),H.stats?.gpuUtilization&&o.jsxs("div",{className:"bg-emerald-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"GPU Max"}),o.jsxs("div",{className:"text-lg font-bold text-emerald-700",children:[H.stats.gpuUtilization.max??"","%"]})]}),H.stats?.memoryUsedMb&&o.jsxs("div",{className:"bg-purple-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"VRAM Peak"}),o.jsx("div",{className:"text-lg font-bold text-purple-700",children:H.stats.memoryUsedMb.max?`${(H.stats.memoryUsedMb.max/1024).toFixed(1)} GB`:""})]}),H.stats?.cpuUsage&&o.jsxs("div",{className:"bg-sky-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"CPU Max"}),o.jsxs("div",{className:"text-lg font-bold text-sky-700",children:[H.stats.cpuUsage.max??"","%"]})]}),H.stats?.ramUsedMb&&o.jsxs("div",{className:"bg-amber-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"RAM Peak"}),o.jsx("div",{className:"text-lg font-bold text-amber-700",children:H.stats.ramUsedMb.max?`${(H.stats.ramUsedMb.max/1024).toFixed(1)} GB`:""})]})]}),H.metrics&&H.metrics.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Metriken-Verlauf"}),o.jsx(js,{data:H.metrics,dataKey:"utilizationPercent",label:"GPU-Auslastung",unit:"%",color:"#10B981",minY:0,maxY:100,height:140}),o.jsx(js,{data:H.metrics,dataKey:"memoryUsedMb",label:"VRAM-Nutzung",unit:" MiB",color:"#8B5CF6",minY:0,maxY:H.stats?.memoryTotalMb||8192,height:140}),o.jsx(js,{data:H.metrics,dataKey:"cpuUsagePercent",label:"CPU-Auslastung",unit:"%",color:"#0EA5E9",minY:0,maxY:100,height:140}),o.jsx(js,{data:H.metrics,dataKey:"ramUsedMb",label:"Arbeitsspeicher",unit:" MiB",color:"#F59E0B",minY:0,maxY:H.stats?.ramTotalMb||32768,height:140}),o.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[H.metrics.length," Messpunkte (2s Intervall)"]})]}),H.stats&&o.jsx("div",{className:"text-xs text-gray-600 bg-gray-100 rounded p-2",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"GPU:"})," ","Min ",H.stats.gpuUtilization?.min??"","% |"," ","Max ",H.stats.gpuUtilization?.max??"","% |"," ","Avg ",H.stats.gpuUtilization?.avg??"","%"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"VRAM:"})," ","Min ",H.stats.memoryUsedMb?.min?(H.stats.memoryUsedMb.min/1024).toFixed(1):""," GB |"," ","Max ",H.stats.memoryUsedMb?.max?(H.stats.memoryUsedMb.max/1024).toFixed(1):""," GB |"," ","Total ",H.stats.memoryTotalMb?(H.stats.memoryTotalMb/1024).toFixed(1):""," GB"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"CPU:"})," ","Min ",H.stats.cpuUsage?.min??"","% |"," ","Max ",H.stats.cpuUsage?.max??"","% |"," ","Avg ",H.stats.cpuUsage?.avg??"","%"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"RAM:"})," ","Min ",H.stats.ramUsedMb?.min?(H.stats.ramUsedMb.min/1024).toFixed(1):""," GB |"," ","Max ",H.stats.ramUsedMb?.max?(H.stats.ramUsedMb.max/1024).toFixed(1):""," GB |"," ","Total ",H.stats.ramTotalMb?(H.stats.ramTotalMb/1024).toFixed(1):""," GB"]})]})}),o.jsxs("div",{className:"space-y-2 mt-4",children:[H.rawRequest&&o.jsxs("details",{className:"border rounded",children:[o.jsx("summary",{className:"px-3 py-2 bg-gray-100 cursor-pointer hover:bg-gray-200 text-sm font-medium text-gray-700",children:"RAW Request (Ollama API)"}),o.jsxs("div",{className:"p-3 text-xs bg-gray-50 overflow-auto max-h-96 text-gray-800 space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:"Optionen:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs",children:JSON.stringify({model:H.rawRequest.model,stream:H.rawRequest.stream,format:H.rawRequest.format,options:H.rawRequest.options},null,2)})]}),H.rawRequest.messages?.map((W,ne)=>o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:W.role==="system"?"System-Prompt:":"User-Prompt:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs whitespace-pre-wrap break-words",children:W.content})]},ne))]})]}),H.rawResponse&&o.jsxs("details",{className:"border rounded",children:[o.jsx("summary",{className:"px-3 py-2 bg-gray-100 cursor-pointer hover:bg-gray-200 text-sm font-medium text-gray-700",children:"RAW Response (Ollama API)"}),o.jsxs("div",{className:"p-3 text-xs bg-gray-50 overflow-auto max-h-96 text-gray-800 space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:"Metadaten:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs",children:JSON.stringify({model:H.rawResponse.model,created_at:H.rawResponse.created_at,done:H.rawResponse.done,total_duration:H.rawResponse.total_duration,eval_count:H.rawResponse.eval_count},null,2)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:"Antwort:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs whitespace-pre-wrap break-words",children:H.rawResponse.message?.content})]})]})]})]})]})})]})})}),o.jsxs("div",{className:"border rounded p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-medium",children:"Prompt-Templates bearbeiten"}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-gray-50",onClick:sn,children:"Templates laden"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-4",children:"Hier knnen Sie die Prompt-Templates fr verschiedene Task-Typen direkt bearbeiten. nderungen werden sofort wirksam. Ein Backup wird automatisch erstellt."}),Lt.length===0?o.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:'Klicken Sie auf "Templates laden" um die verfgbaren Templates anzuzeigen.'}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Template auswhlen"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Ke||"",onChange:W=>{W.target.value?tt(W.target.value):(pt(null),Rt(""))},disabled:Bt,children:[o.jsx("option",{value:"",children:"-- Template whlen --"}),Lt.map(W=>o.jsx("option",{value:W.name,children:W.displayName},W.name))]})]}),Ke&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:Ke}),o.jsxs("span",{className:"text-xs text-gray-500",children:[Fe.length," Zeichen"]})]}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs h-80",value:Fe,onChange:W=>Rt(W.target.value),disabled:Bt||en,placeholder:"Template-Inhalt..."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:Ut,disabled:en||!Fe,children:en?"Speichere...":"Template speichern"}),o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:()=>tt(Ke),disabled:Bt,children:"Zurcksetzen"})]}),o.jsx("div",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded",children:'Hinweis: nderungen werden sofort wirksam. Ein Backup der vorherigen Version wird automatisch im Ordner "backups" erstellt.'})]})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:J,disabled:n||i,children:"Neu laden"})})]})}const Yr={name:"",keywords:"",weight:.2},YC={min_score:.6,max_individual_incidents:3,fallback_top_n_incidents:5,show_score:!1},Ql={base_score:.5,factors:[{name:"Offene Fragen",pattern:"\\?",weight:.3,learnable:!0,custom:!1},{name:"Personen in Gefahr",keywords:["eingeklemmt","vermisst","kind","kinder","verletzte","bewusstlos"],weight:.5,learnable:!0,custom:!1},{name:"Evakuierung",keywords:["evaku","rumung","rumen"],weight:.45,learnable:!0,custom:!1},{name:"Infrastruktur kritisch",keywords:["strom","wasserwerk","damm","brcke","gas","bahn","bb"],weight:.35,learnable:!0,custom:!1}]};function Ig({factors:n,showAdd:a,newFactor:i,onShowAdd:r,onAddFactor:t,onCancelAdd:l,onNewFactorChange:u,onUpdateWeight:d,onRemove:p}){return o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("div",{className:"text-xs font-medium mb-2",children:"Scoring-Faktoren (Keywords):"}),o.jsx("div",{className:"space-y-2",children:n.map((h,v)=>o.jsxs("div",{className:"flex items-center gap-2 text-xs bg-white p-2 rounded border",children:[o.jsx("span",{className:"font-medium min-w-[120px]",children:h.name}),o.jsx("span",{className:"text-gray-500 flex-1",children:h.keywords?h.keywords.join(", "):h.pattern||"-"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{children:"Gewicht:"}),o.jsx("input",{type:"number",min:"-1",max:"2",step:"0.05",value:h.weight,onChange:y=>d(v,y.target.value),className:"w-16 px-1 py-0.5 border rounded text-xs"})]}),h.custom&&o.jsx("button",{type:"button",onClick:()=>p(v),className:"text-red-600 hover:text-red-800 px-1",title:"Faktor entfernen",children:"X"}),h.learnable&&o.jsx("span",{className:"text-blue-500 text-[10px]",title:"Wird durch ML angepasst",children:"ML"})]},v))}),a?o.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:[o.jsx("div",{className:"text-xs font-medium mb-2",children:"Neuen Faktor hinzufgen:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",placeholder:"Name (z.B. 'Evakuierung')",value:i.name,onChange:h=>u({name:h.target.value}),className:"w-full px-2 py-1 border rounded text-xs"}),o.jsx("input",{type:"text",placeholder:"Keywords (kommagetrennt, z.B. 'evakuieren, rumung, verlassen')",value:i.keywords,onChange:h=>u({keywords:h.target.value}),className:"w-full px-2 py-1 border rounded text-xs"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-xs",children:"Gewicht:"}),o.jsx("input",{type:"number",min:"-1",max:"2",step:"0.05",value:i.weight,onChange:h=>u({weight:h.target.value}),className:"w-20 px-2 py-1 border rounded text-xs"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:t,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs",children:"Hinzufgen"}),o.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded text-xs",children:"Abbrechen"})]})]})]}):o.jsx("button",{type:"button",onClick:r,className:"mt-2 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs",children:"+ Eigenen Faktor hinzufgen"})]})}function WC({locked:n=!1}){const[a,i]=x.useState(!0),[r,t]=x.useState(""),[l,u]=x.useState(null),[d,p]=x.useState(null),[h,v]=x.useState(null),[y,S]=x.useState(!1),[k,j]=x.useState(null),[E,C]=x.useState(!1),[F,O]=x.useState({R2_PROTOKOLL_RELEVANZ:!1,R5_STABS_FOKUS:!1}),[_,$]=x.useState({R2_PROTOKOLL_RELEVANZ:{...Yr},R5_STABS_FOKUS:{...Yr}}),[Z,q]=x.useState(!1),[ee,ae]=x.useState(null),[se,ie]=x.useState(!1),[re,Ce]=x.useState(""),[fe,Me]=x.useState(null),[Te,Ne]=x.useState(!1),[xe,L]=x.useState({}),[V,Q]=x.useState(!1);x.useEffect(()=>{H(),ye(),De(),T(),ke()},[]);async function T(){try{const J=await fetch("/api/admin/filtering-rules/ai-analysis-config",{credentials:"include"}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Laden fehlgeschlagen");ae(be)}catch(J){console.warn("AI-Analyse-Konfiguration laden fehlgeschlagen:",J.message),ae({enabled:!0,intervalMinutes:5,contextMode:"rules",llmSummarization:{enabled:!1,model:"llama3.1:8b",maxTokens:1500,temperature:.3,timeout:6e4}})}}async function Y(J){try{ie(!0),Ce("");const be={...ee,...J};J.llmSummarization&&(be.llmSummarization={...ee.llmSummarization,...J.llmSummarization});const bt=await fetch("/api/admin/filtering-rules/ai-analysis-config",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(be)}),mt=await bt.json();if(!bt.ok||mt.error)throw new Error(mt.error||"Speichern fehlgeschlagen");ae(mt.config),Ce("Konfiguration gespeichert"),setTimeout(()=>Ce(""),3e3)}catch(be){t(be.message||"Speichern fehlgeschlagen")}finally{ie(!1)}}async function H(){try{i(!0);const J=await fetch("/api/admin/filtering-rules/status",{credentials:"include"}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Laden fehlgeschlagen");u(be),t("")}catch(J){t(J.message||"Status laden fehlgeschlagen")}finally{i(!1)}}async function ye(){try{const J=await fetch("/api/admin/filtering-rules/learned",{credentials:"include"}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Laden fehlgeschlagen");p(be.learned_weights||{})}catch(J){console.warn("Learned weights laden fehlgeschlagen:",J.message)}}async function De(){try{const J=await fetch("/api/admin/filtering-rules",{credentials:"include"}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Laden fehlgeschlagen");v(be),j(JSON.parse(JSON.stringify(be)))}catch(J){console.warn("Regeln laden fehlgeschlagen:",J.message)}}async function ke(){try{const J=await fetch("/api/admin/filtering-rules/scenario",{credentials:"include"}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Laden fehlgeschlagen");Me(be),L(be)}catch(J){console.warn("Szenario laden fehlgeschlagen:",J.message)}}async function Ue(){try{Q(!0);const J=await fetch("/api/admin/filtering-rules/scenario",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(xe)}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Speichern fehlgeschlagen");Me(xe),Ne(!1),t(""),await H()}catch(J){t(J.message||"Szenario speichern fehlgeschlagen")}finally{Q(!1)}}async function oe(){if(k)try{C(!0);const J=await fetch("/api/admin/filtering-rules",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(k)}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Speichern fehlgeschlagen");v(k),S(!1),t(""),await H()}catch(J){t(J.message||"Speichern fehlgeschlagen")}finally{C(!1)}}function le(){j(JSON.parse(JSON.stringify(h))),S(!1),O({R2_PROTOKOLL_RELEVANZ:!1,R5_STABS_FOKUS:!1}),$({R2_PROTOKOLL_RELEVANZ:{...Yr},R5_STABS_FOKUS:{...Yr}})}function me(J){k?.rules?.[J]&&j(be=>({...be,rules:{...be.rules,[J]:{...be.rules[J],enabled:!be.rules[J].enabled}}}))}function Oe(J,be,bt){k?.rules?.[J]&&j(mt=>({...mt,rules:{...mt.rules,[J]:{...mt.rules[J],output:{...mt.rules[J].output,[be]:bt}}}}))}function Je(J,be){$(bt=>({...bt,[J]:{...Yr,...bt[J]||{},...be}}))}function qe(J){return J==="R5_STABS_FOKUS"?{base_score:Ql.base_score,factors:[...Ql.factors]}:{base_score:.5,factors:[]}}function ut(J){const be=_[J]||Yr;if(!be.name.trim()||!be.keywords.trim())return;const bt=be.keywords.split(",").map(dt=>dt.trim()).filter(dt=>dt);if(bt.length===0)return;const mt={name:be.name.trim(),keywords:bt,weight:parseFloat(be.weight)||.2,learnable:!0,custom:!0};j(dt=>{const sn=dt.rules[J],tt=sn.scoring?{...sn.scoring,factors:[...sn.scoring.factors||[]]}:qe(J),Ut=[...tt.factors||[],mt];return{...dt,rules:{...dt.rules,[J]:{...sn,scoring:{...tt,factors:Ut}}}}}),Je(J,{...Yr}),O(dt=>({...dt,[J]:!1}))}function rt(J,be){j(bt=>{const mt=bt.rules[J],dt=mt.scoring?{...mt.scoring,factors:[...mt.scoring.factors||[]]}:qe(J);return{...bt,rules:{...bt.rules,[J]:{...mt,scoring:{...dt,factors:dt.factors.filter((sn,tt)=>tt!==be)}}}}})}function _t(J,be,bt){j(mt=>{const dt=mt.rules[J],sn=dt.scoring?{...dt.scoring,factors:[...dt.scoring.factors||[]]}:qe(J);return{...mt,rules:{...mt.rules,[J]:{...dt,scoring:{...sn,factors:sn.factors.map((tt,Ut)=>Ut===be?{...tt,weight:parseFloat(bt)||0}:tt)}}}}})}async function Lt(){if(confirm("Alle gelernten Gewichte zurcksetzen? Dies kann nicht rckgngig gemacht werden."))try{i(!0);const J=await fetch("/api/admin/filtering-rules/reset-learned",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({confirmReset:!0})}),be=await J.json();if(!J.ok||be.error)throw new Error(be.error||"Reset fehlgeschlagen");await ye(),t(""),alert("Gelernte Gewichte erfolgreich zurckgesetzt.")}catch(J){t(J.message||"Reset fehlgeschlagen")}finally{i(!1)}}if(a&&!l)return o.jsx("div",{className:"text-sm text-gray-500",children:"Lade Filterregeln-Status..."});const ht=l?.lastAnalysis,Ke=ht?.appliedRules,pt=ht?.fingerprint,Fe=y?k:h,Rt=Fe?.rules?.R5_STABS_FOKUS,Bt={...YC,...Rt?.output||{}},en=(Rt?.scoring||Ql)?.factors||Ql.factors,tn=Fe?.rules?.R2_PROTOKOLL_RELEVANZ?.scoring?.factors||[];return o.jsxs("div",{className:"space-y-4 text-sm",children:[r&&o.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700",children:r}),ee&&o.jsxs("div",{className:"border rounded p-4 bg-gradient-to-r from-purple-50 to-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"font-medium text-base flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," KI-Analyse Context-Modus"]}),re&&o.jsx("span",{className:"text-green-600 text-xs",children:re})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4 p-3 bg-white rounded border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm",children:"Kontext-Aufbereitung fr KI-Analyse"}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Whlen Sie, wie die Lage-Daten fr die KI-Analyse aufbereitet werden sollen."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",className:`px-3 py-2 rounded text-sm font-medium transition-colors ${ee.contextMode!=="llm"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:se||n,onClick:()=>Y({contextMode:"rules"}),children:"Regelbasiert (R1-R5)"}),o.jsx("button",{type:"button",className:`px-3 py-2 rounded text-sm font-medium transition-colors ${ee.contextMode==="llm"?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:se||n,onClick:()=>Y({contextMode:"llm"}),children:"LLM-Zusammenfassung"})]})]}),o.jsx("div",{className:`p-3 rounded border ${ee.contextMode==="llm"?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:ee.contextMode==="llm"?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-purple-800 mb-1",children:"LLM-Zusammenfassung aktiv (2. LLM-Call)"}),o.jsx("div",{className:"text-gray-700",children:"Ein schnelles Chat-Modell fasst die aktuelle Lage zusammen, bevor sie an das Analyse-Modell bergeben wird. Dies kann flexibler sein als regelbasierte Filterung, bentigt aber mehr Rechenzeit."}),o.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["Modell: ",o.jsx("strong",{children:ee.llmSummarization?.model||"llama3.1:8b"})," | Temp: ",ee.llmSummarization?.temperature||.3," | Max Tokens: ",ee.llmSummarization?.maxTokens||1500]})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"Regelbasierte Filterung aktiv"}),o.jsx("div",{className:"text-gray-700",children:"Die 5 Filterregeln (R1-R5) werden angewendet, um die relevantesten Daten fr die KI-Analyse auszuwhlen. Schneller und vorhersehbarer als LLM-Zusammenfassung."})]})}),ee.contextMode==="llm"&&o.jsxs("div",{className:"p-3 bg-white rounded border",children:[o.jsx("div",{className:"font-medium text-sm mb-2",children:"LLM-Summarization Einstellungen"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Modell:"}),o.jsxs("select",{value:ee.llmSummarization?.model||"llama3.1:8b",onChange:J=>Y({llmSummarization:{model:J.target.value}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:se||n,children:[o.jsx("option",{value:"llama3.1:8b",children:"llama3.1:8b (schnell)"}),o.jsx("option",{value:"einfo-balanced",children:"einfo-balanced"}),o.jsx("option",{value:"einfo-analysis",children:"einfo-analysis"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Temperatur:"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:ee.llmSummarization?.temperature||.3,onChange:J=>Y({llmSummarization:{temperature:parseFloat(J.target.value)||.3}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:se||n})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Max Tokens:"}),o.jsx("input",{type:"number",min:"500",max:"4000",step:"100",value:ee.llmSummarization?.maxTokens||1500,onChange:J=>Y({llmSummarization:{maxTokens:parseInt(J.target.value)||1500}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:se||n})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Timeout (ms):"}),o.jsx("input",{type:"number",min:"10000",max:"120000",step:"5000",value:ee.llmSummarization?.timeout||6e4,onChange:J=>Y({llmSummarization:{timeout:parseInt(J.target.value)||6e4}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:se||n})]})]})]})]})]}),Fe?.rules&&o.jsxs("div",{className:"border rounded p-4 bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"font-medium text-base",children:"Filterregeln konfigurieren"}),y?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-500 hover:bg-gray-600 text-white text-sm",onClick:le,children:"Abbrechen"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white text-sm disabled:opacity-60",disabled:E,onClick:oe,children:E?"Speichern...":"Speichern"})]}):o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white text-sm disabled:opacity-60",disabled:n||a,onClick:()=>S(!0),children:"Bearbeiten"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:`border rounded p-3 ${Fe.rules.R1_ABSCHNITTE_PRIORITAET?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Fe.rules.R1_ABSCHNITTE_PRIORITAET?.enabled||!1,onChange:()=>me("R1_ABSCHNITTE_PRIORITAET"),className:"w-4 h-4"}):Fe.rules.R1_ABSCHNITTE_PRIORITAET?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R1 Abschnitte-Prioritt"})]}),y&&Fe.rules.R1_ABSCHNITTE_PRIORITAET?.enabled&&o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("label",{children:"Max Abschnitte:"}),o.jsx("input",{type:"number",min:"1",max:"20",value:Fe.rules.R1_ABSCHNITTE_PRIORITAET?.output?.max_items||5,onChange:J=>Oe("R1_ABSCHNITTE_PRIORITAET","max_items",parseInt(J.target.value)||5),className:"w-16 px-2 py-1 border rounded"})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Fe.rules.R1_ABSCHNITTE_PRIORITAET?.description})]}),o.jsxs("div",{className:`border rounded p-3 ${Fe.rules.R2_PROTOKOLL_RELEVANZ?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Fe.rules.R2_PROTOKOLL_RELEVANZ?.enabled||!1,onChange:()=>me("R2_PROTOKOLL_RELEVANZ"),className:"w-4 h-4"}):Fe.rules.R2_PROTOKOLL_RELEVANZ?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R2 Protokoll-Relevanz"})]}),y&&Fe.rules.R2_PROTOKOLL_RELEVANZ?.enabled&&o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Max Eintrge:"}),o.jsx("input",{type:"number",min:"1",max:"50",value:Fe.rules.R2_PROTOKOLL_RELEVANZ?.output?.max_entries||10,onChange:J=>Oe("R2_PROTOKOLL_RELEVANZ","max_entries",parseInt(J.target.value)||10),className:"w-16 px-2 py-1 border rounded"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Min Score:"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:Fe.rules.R2_PROTOKOLL_RELEVANZ?.output?.min_score||.6,onChange:J=>Oe("R2_PROTOKOLL_RELEVANZ","min_score",parseFloat(J.target.value)||.6),className:"w-16 px-2 py-1 border rounded"})]})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Fe.rules.R2_PROTOKOLL_RELEVANZ?.description}),y&&Fe.rules.R2_PROTOKOLL_RELEVANZ?.enabled&&o.jsx(Ig,{factors:tn,showAdd:F.R2_PROTOKOLL_RELEVANZ,newFactor:_.R2_PROTOKOLL_RELEVANZ||Yr,onShowAdd:()=>O(J=>({...J,R2_PROTOKOLL_RELEVANZ:!0})),onAddFactor:()=>ut("R2_PROTOKOLL_RELEVANZ"),onCancelAdd:()=>{O(J=>({...J,R2_PROTOKOLL_RELEVANZ:!1})),Je("R2_PROTOKOLL_RELEVANZ",{...Yr})},onNewFactorChange:J=>Je("R2_PROTOKOLL_RELEVANZ",J),onUpdateWeight:(J,be)=>_t("R2_PROTOKOLL_RELEVANZ",J,be),onRemove:J=>rt("R2_PROTOKOLL_RELEVANZ",J)})]}),o.jsxs("div",{className:`border rounded p-3 ${Fe.rules.R3_TRENDS_ERKENNUNG?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Fe.rules.R3_TRENDS_ERKENNUNG?.enabled||!1,onChange:()=>me("R3_TRENDS_ERKENNUNG"),className:"w-4 h-4"}):Fe.rules.R3_TRENDS_ERKENNUNG?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R3 Trends-Erkennung"})]}),y&&Fe.rules.R3_TRENDS_ERKENNUNG?.enabled&&o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("label",{children:"Prognose-Horizont (Min):"}),o.jsx("input",{type:"number",min:"30",max:"480",step:"30",value:Fe.rules.R3_TRENDS_ERKENNUNG?.output?.forecast_horizon_minutes||120,onChange:J=>Oe("R3_TRENDS_ERKENNUNG","forecast_horizon_minutes",parseInt(J.target.value)||120),className:"w-20 px-2 py-1 border rounded"})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Fe.rules.R3_TRENDS_ERKENNUNG?.description})]}),o.jsxs("div",{className:`border rounded p-3 ${Fe.rules.R4_RESSOURCEN_STATUS?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Fe.rules.R4_RESSOURCEN_STATUS?.enabled||!1,onChange:()=>me("R4_RESSOURCEN_STATUS"),className:"w-4 h-4"}):Fe.rules.R4_RESSOURCEN_STATUS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R4 Ressourcen-Status"})]})}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Fe.rules.R4_RESSOURCEN_STATUS?.description})]}),o.jsxs("div",{className:`border rounded p-3 ${Fe.rules.R5_STABS_FOKUS?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Fe.rules.R5_STABS_FOKUS?.enabled||!1,onChange:()=>me("R5_STABS_FOKUS"),className:"w-4 h-4"}):Fe.rules.R5_STABS_FOKUS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R5 Stabs-Fokus"})]}),y&&Fe.rules.R5_STABS_FOKUS?.enabled&&o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Max Einzeleinstze (kritisch):"}),o.jsx("input",{type:"number",min:"0",max:"50",value:Bt.max_individual_incidents,onChange:J=>Oe("R5_STABS_FOKUS","max_individual_incidents",parseInt(J.target.value)||0),className:"w-16 px-2 py-1 border rounded"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Fallback Top-N Einstze:"}),o.jsx("input",{type:"number",min:"0",max:"50",value:Bt.fallback_top_n_incidents,onChange:J=>Oe("R5_STABS_FOKUS","fallback_top_n_incidents",parseInt(J.target.value)||0),className:"w-16 px-2 py-1 border rounded"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Min Score:"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:Bt.min_score,onChange:J=>Oe("R5_STABS_FOKUS","min_score",parseFloat(J.target.value)||0),className:"w-16 px-2 py-1 border rounded"})]})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Fe.rules.R5_STABS_FOKUS?.description}),y&&Fe.rules.R5_STABS_FOKUS?.enabled&&o.jsx(Ig,{factors:en,showAdd:F.R5_STABS_FOKUS,newFactor:_.R5_STABS_FOKUS||Yr,onShowAdd:()=>O(J=>({...J,R5_STABS_FOKUS:!0})),onAddFactor:()=>ut("R5_STABS_FOKUS"),onCancelAdd:()=>{O(J=>({...J,R5_STABS_FOKUS:!1})),Je("R5_STABS_FOKUS",{...Yr})},onNewFactorChange:J=>Je("R5_STABS_FOKUS",J),onUpdateWeight:(J,be)=>_t("R5_STABS_FOKUS",J,be),onRemove:J=>rt("R5_STABS_FOKUS",J)})]})]})]}),o.jsxs("div",{className:"border rounded p-4 bg-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"font-medium text-base",children:"Szenario-Konfiguration"}),Te?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:Ue,disabled:V,className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:V?"...":"Speichern"}),o.jsx("button",{onClick:()=>{L(fe||{}),Ne(!1)},className:"text-xs px-2 py-1 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Abbrechen"})]}):o.jsx("button",{onClick:()=>Ne(!0),disabled:n,className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Bearbeiten"})]}),Te?o.jsxs("div",{className:"grid gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-600 mb-1",children:"Art des Ereignisses:"}),o.jsxs("select",{value:xe.artDesEreignisses||"",onChange:J=>L({...xe,artDesEreignisses:J.target.value}),className:"w-full p-2 border rounded text-sm",children:[o.jsx("option",{value:"",children:"-- Bitte whlen --"}),o.jsx("option",{value:"Hochwasser",children:"Hochwasser"}),o.jsx("option",{value:"Sturm",children:"Sturm"}),o.jsx("option",{value:"Schnee",children:"Schnee/Winterdienst"}),o.jsx("option",{value:"Brand",children:"Brand/Waldbrand"}),o.jsx("option",{value:"Mure",children:"Mure/Hangrutschung"}),o.jsx("option",{value:"Verkehrsunfall",children:"Verkehrsunfall (gro)"}),o.jsx("option",{value:"Technischer Einsatz",children:"Technischer Einsatz"}),o.jsx("option",{value:"Sonstiges",children:"Sonstiges"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-600 mb-1",children:"Geografischer Bereich:"}),o.jsx("input",{type:"text",value:xe.geografischerBereich||"",onChange:J=>L({...xe,geografischerBereich:J.target.value}),placeholder:"z.B. Bezirk Feldkirchen",className:"w-full p-2 border rounded text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-600 mb-1",children:"Wetter (optional):"}),o.jsx("input",{type:"text",value:xe.wetter||"",onChange:J=>L({...xe,wetter:J.target.value}),placeholder:"z.B. Dauerregen, starker Wind",className:"w-full p-2 border rounded text-sm"})]})]}):o.jsxs("div",{className:"grid gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Art des Ereignisses:"})," ",o.jsx("strong",{children:fe?.artDesEreignisses||"Nicht definiert"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Geografischer Bereich:"})," ",fe?.geografischerBereich||"Nicht definiert"]}),fe?.wetter&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Wetter:"})," ",fe.wetter]})]})]}),ht?o.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[o.jsx("div",{className:"font-medium text-base mb-3",children:"Letzte Analyse-Details"}),o.jsxs("div",{className:"grid gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Zeitstempel:"})," ",o.jsx("code",{className:"text-xs bg-white px-1 rounded",children:new Date(ht.timestamp).toLocaleString("de-AT",{hour12:!1})})]}),pt&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Disaster:"})," ",o.jsx("strong",{children:pt.disaster_type||"unbekannt"}),pt.phase&&o.jsxs("span",{className:"text-gray-500",children:[" (",pt.phase,")"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Abschnitte:"})," ",pt.total_sections," gesamt",pt.critical_sections>0&&o.jsxs("span",{className:"text-red-600 font-medium",children:[" (",pt.critical_sections," kritisch)"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Geograf. Verteilung:"})," ",o.jsx("span",{className:"capitalize",children:pt.geographic_pattern||"unbekannt"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Trend:"})," ",o.jsx("span",{className:"capitalize",children:pt.trend_direction||"stabil"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Ressourcen-Auslastung:"})," ",pt.utilization_percent,"%"]})]}),o.jsxs("div",{className:"mt-2 pt-2 border-t",children:[o.jsx("span",{className:"text-gray-600",children:"Token-Nutzung:"})," ",o.jsx("strong",{children:ht.tokensUsed.toLocaleString("de-AT")})," / ",ht.tokensLimit.toLocaleString("de-AT"),o.jsxs("span",{className:"text-gray-500 ml-2",children:["(",Math.round(ht.tokensUsed/ht.tokensLimit*100),"% genutzt)"]})]})]})]}):o.jsx("div",{className:"border rounded p-4 bg-gray-50 text-gray-500",children:"Noch keine Analyse durchgefhrt."}),Ke&&o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("div",{className:"font-medium text-base mb-3",children:"Angewendete Regeln"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[Ke.R1_ABSCHNITTE?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:Ke.R1_ABSCHNITTE?.enabled?"":"text-gray-400",children:"R1 Abschnitte-Prioritt"})]}),Ke.R1_ABSCHNITTE?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[Ke.R1_ABSCHNITTE.items_shown," / ",Ke.R1_ABSCHNITTE.max_items," Abschnitte"]})]}),o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[Ke.R2_PROTOKOLL?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:Ke.R2_PROTOKOLL?.enabled?"":"text-gray-400",children:"R2 Protokoll-Relevanz"})]}),Ke.R2_PROTOKOLL?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[Ke.R2_PROTOKOLL.items_shown," / ",Ke.R2_PROTOKOLL.max_items," Eintrge"]})]}),o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[Ke.R3_TRENDS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:Ke.R3_TRENDS?.enabled?"":"text-gray-400",children:"R3 Trends-Erkennung"})]}),Ke.R3_TRENDS?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600 capitalize",children:[Ke.R3_TRENDS.direction," (",Ke.R3_TRENDS.strength,")"]})]}),o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[Ke.R4_RESSOURCEN?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:Ke.R4_RESSOURCEN?.enabled?"":"text-gray-400",children:"R4 Ressourcen-Status"})]}),Ke.R4_RESSOURCEN?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[Ke.R4_RESSOURCEN.utilization,"% Auslastung",Ke.R4_RESSOURCEN.shortage&&o.jsx("span",{className:"text-red-600 ml-2",children:"Engpass!"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[Ke.R5_STABS_FOKUS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:Ke.R5_STABS_FOKUS?.enabled?"":"text-gray-400",children:"R5 Stabs-Fokus"})]}),Ke.R5_STABS_FOKUS?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[Ke.R5_STABS_FOKUS.individual_incidents_shown," Einzeleinstze",Ke.R5_STABS_FOKUS.fallback_used&&o.jsx("span",{className:"ml-2 text-orange-600",children:"Fallback aktiv"})]})]})]})]}),d&&Object.keys(d).length>0&&o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("div",{className:"font-medium text-base mb-3",children:"Gelernte Gewichte"}),d.protocol_factors&&Object.keys(d.protocol_factors).length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Protokoll-Faktoren:"}),Object.entries(d.protocol_factors).map(([J,be])=>o.jsxs("div",{className:"border-l-2 border-blue-400 pl-3 py-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium",children:J}),o.jsxs("span",{className:"text-xs text-gray-600",children:[be.initial_weight?.toFixed(2)," -> ",be.current_weight?.toFixed(2)]})]}),be.success_rate!==void 0&&o.jsxs("div",{className:"text-xs text-gray-500",children:["Erfolgsrate: ",(be.success_rate*100).toFixed(1),"% (",be.helpful_count,"/",be.feedback_count," Feedbacks)"]})]},J))]}),o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-sm disabled:opacity-60",disabled:n||a,onClick:Lt,children:"Gelernte Gewichte zurcksetzen"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Setzt alle gelernten Gewichte auf ihre Ausgangswerte zurck"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60",disabled:n||a,onClick:()=>{H(),ye(),De()},children:"Aktualisieren"}),o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 hover:bg-gray-700 text-white",onClick:()=>q(!0),children:"Hilfe zur Regel-Erstellung"})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-4 pt-4 border-t",children:[o.jsx("strong",{children:"Info:"})," Das Hybrid-Filtersystem kombiniert regelbasierte Filterung (R1-R5) mit Context-Fingerprinting und maschinellem Lernen. Gelernte Gewichte werden automatisch basierend auf Feedback angepasst und bleiben ber Neustarts hinweg erhalten."]}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Hilfe: Filterregeln konfigurieren"}),o.jsx("button",{type:"button",onClick:()=>q(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"px-6 py-4 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Was sind Filterregeln?"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Filterregeln bestimmen, welche Informationen dem KI-Chatbot zur Verfgung gestellt werden. Sie helfen dabei, die relevantesten Daten auszuwhlen und unwichtige Informationen auszublenden. So erhlt der Chatbot genau die Informationen, die er braucht, um hilfreiche Antworten zu geben."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Die 5 Standard-Regeln"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border rounded p-3 bg-green-50",children:[o.jsx("h4",{className:"font-medium text-green-800",children:"R1: Abschnitte-Prioritt"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Sortiert und filtert Einsatz-Abschnitte nach Wichtigkeit. Abschnitte mit kritischen Einstzen, vielen Einstzen oder viel Personal werden priorisiert."}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.jsx("strong",{children:"Einstellung:"}),' "Max Abschnitte" bestimmt, wie viele Abschnitte maximal angezeigt werden.']})]}),o.jsxs("div",{className:"border rounded p-3 bg-blue-50",children:[o.jsx("h4",{className:"font-medium text-blue-800",children:"R2: Protokoll-Relevanz"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Bewertet Protokoll-Eintrge nach Relevanz anhand von Schlsselwrtern. Eintrge mit Fragen, dringenden Meldungen oder Ressourcen-Anfragen werden hher bewertet."}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.jsx("strong",{children:"Einstellungen:"}),o.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[o.jsx("li",{children:'"Max Eintrge" - Maximale Anzahl der Protokoll-Eintrge'}),o.jsx("li",{children:'"Min Score" - Mindest-Relevanz (0-1). Hher = nur sehr relevante Eintrge'})]})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-purple-50",children:[o.jsx("h4",{className:"font-medium text-purple-800",children:"R3: Trends-Erkennung"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Erkennt Entwicklungstrends im Einsatzgeschehen (steigend, stabil, fallend) und erstellt Prognosen fr die kommenden Stunden."}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.jsx("strong",{children:"Einstellung:"}),' "Prognose-Horizont" bestimmt, wie weit in die Zukunft prognostiziert wird (in Minuten).']})]}),o.jsxs("div",{className:"border rounded p-3 bg-orange-50",children:[o.jsx("h4",{className:"font-medium text-orange-800",children:"R4: Ressourcen-Status"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Analysiert die Auslastung der verfgbaren Ressourcen (Fahrzeuge, Personal) und erkennt Engpsse automatisch."})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-100",children:[o.jsx("h4",{className:"font-medium text-gray-800",children:"R5: Stabs-Fokus (Standard: AUS)"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Spezialansicht fr Stabsarbeit. Aggregiert Daten auf Abschnitts-Ebene und zeigt nur kritische Einzeleinstze an. Fr strategische bersicht statt operative Details."})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"So aktivieren/deaktivieren Sie Regeln"}),o.jsxs("ol",{className:"list-decimal ml-5 text-sm text-gray-700 space-y-2",children:[o.jsxs("li",{children:["Klicken Sie auf den Button ",o.jsx("strong",{children:'"Bearbeiten"'})," oben rechts im Regel-Bereich"]}),o.jsx("li",{children:"Setzen oder entfernen Sie das Hkchen bei der gewnschten Regel"}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Speichern"'})," um die nderungen zu bernehmen"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"So passen Sie Regel-Parameter an"}),o.jsxs("ol",{className:"list-decimal ml-5 text-sm text-gray-700 space-y-2",children:[o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Bearbeiten"'})]}),o.jsx("li",{children:"Bei aktivierten Regeln erscheinen Eingabefelder fr die Parameter"}),o.jsxs("li",{children:["ndern Sie die Werte nach Bedarf:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Max Abschnitte/Eintrge:"})," Weniger = kompaktere bersicht, mehr = detailliertere Information"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Min Score:"})," 0.0 bis 1.0 - Je hher, desto strenger die Filterung"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Prognose-Horizont:"})," In Minuten, z.B. 120 = 2 Stunden Vorausschau"]})]})]}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Speichern"'})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"So fgen Sie eigene Schlsselwrter hinzu (R2)"}),o.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Sie knnen eigene Begriffe definieren, die Protokoll-Eintrge als wichtig markieren sollen. Das ist ntzlich fr organisationsspezifische Begriffe oder aktuelle Ereignisse."}),o.jsxs("ol",{className:"list-decimal ml-5 text-sm text-gray-700 space-y-2",children:[o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Bearbeiten"'})]}),o.jsxs("li",{children:["Scrollen Sie zur Regel ",o.jsx("strong",{children:"R2 Protokoll-Relevanz"})]}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"+ Eigenen Faktor hinzufgen"'})]}),o.jsxs("li",{children:["Geben Sie einen ",o.jsx("strong",{children:"Namen"}),' ein (z.B. "Evakuierung")']}),o.jsxs("li",{children:["Geben Sie ",o.jsx("strong",{children:"Schlsselwrter"}),' kommagetrennt ein (z.B. "evakuieren, rumung, verlassen, evakuierung")']}),o.jsxs("li",{children:["Stellen Sie das ",o.jsx("strong",{children:"Gewicht"})," ein:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"0.1 - 0.2:"})," Niedrige Prioritt (leichte Erhhung der Relevanz)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"0.3 - 0.4:"})," Mittlere Prioritt (deutliche Erhhung)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"0.5+:"})," Hohe Prioritt (starke Erhhung)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Negative Werte:"})," Verringert die Relevanz (z.B. fr unwichtige Routine-Meldungen)"]})]})]}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Hinzufgen"'})," und dann ",o.jsx("strong",{children:'"Speichern"'})]})]}),o.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm",children:[o.jsx("strong",{children:"Beispiele fr ntzliche eigene Faktoren:"}),o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Evakuierung"})," (evakuieren, rumung, verlassen) - Gewicht: 0.5"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Verletzte"})," (verletzte, verletzt, sanitter, rettung) - Gewicht: 0.4"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Routine"})," (routinemeldung, standard, planmig) - Gewicht: -0.2"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Maschinelles Lernen (ML)"}),o.jsxs("p",{className:"text-sm text-gray-700",children:["Faktoren mit dem ",o.jsx("span",{className:"text-blue-500 font-medium",children:"ML"}),"-Symbol werden automatisch durch Benutzer-Feedback verbessert. Wenn Chatbot-Antworten als hilfreich oder nicht hilfreich markiert werden, passt das System die Gewichte dieser Faktoren automatisch an."]}),o.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:["Die ",o.jsx("strong",{children:'"Gelernte Gewichte"'})," Sektion zeigt, wie sich die Gewichte durch Feedback verndert haben. Mit ",o.jsx("strong",{children:'"Gelernte Gewichte zurcksetzen"'})," knnen Sie alle Anpassungen rckgngig machen."]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Tipps fr optimale Einstellungen"}),o.jsxs("ul",{className:"list-disc ml-5 text-sm text-gray-700 space-y-1",children:[o.jsxs("li",{children:["Beginnen Sie mit den ",o.jsx("strong",{children:"Standard-Einstellungen"})," und passen Sie nach Bedarf an"]}),o.jsxs("li",{children:["Bei ",o.jsx("strong",{children:"groen Einsatzlagen"}),": Reduzieren Sie Max-Werte fr kompaktere bersicht"]}),o.jsxs("li",{children:["Bei ",o.jsx("strong",{children:"wenig Einstzen"}),": Erhhen Sie Max-Werte fr mehr Details"]}),o.jsxs("li",{children:["Der ",o.jsx("strong",{children:"Min Score"})," bei R2 sollte zwischen 0.5 und 0.7 liegen"]}),o.jsxs("li",{children:["Aktivieren Sie ",o.jsx("strong",{children:"R5 Stabs-Fokus"})," nur fr strategische Stabsarbeit"]}),o.jsxs("li",{children:["Testen Sie nderungen im ",o.jsx("strong",{children:"Chatbot"})," um die Auswirkungen zu sehen"]})]})]})]}),o.jsx("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4",children:o.jsx("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Schlieen"})})]})})]})}function of(n){const a=[],i=r=>{const t=typeof r=="string"?r:r&&typeof r.id=="string"?r.id:r&&typeof r.role=="string"?r.role:r&&typeof r.label=="string"?r.label:"",l=String(t||"").trim();l&&!a.includes(l)&&a.push(l)};return n&&(i(n.role),Array.isArray(n.roles)&&n.roles.forEach(i)),a}const Fd=n=>of(n).some(a=>a.toUpperCase()==="ADMIN");async function Lo(n,a,i){const r=await fetch(`/api/user${a}`,{method:n,credentials:"include",headers:i?{"Content-Type":"application/json"}:void 0,body:i?JSON.stringify(i):void 0}),t=await r.text(),l=t?(()=>{try{return JSON.parse(t)}catch{return{error:t}}})():{};if(!r.ok){const u=new Error(l?.error||r.statusText);throw u.status=r.status,u.data=l,u}return l}const zd=n=>Lo("GET",n),so=(n,a)=>Lo("POST",n,a),Lg=(n,a)=>Lo("PUT",n,a),HC=(n,a)=>Lo("PATCH",n,a),KC=n=>Lo("DELETE",n),ql=n=>{if(typeof n=="string"){const a=n.trim().toLowerCase();if(["all","alle","alles","gesamt","voll"].includes(a))return"all";if(["interval","intervall","window","range","zeitraum"].includes(a))return"interval"}return n===!0?"all":"interval"},VC=(n,a)=>{if(typeof n=="string"){const i=n.match(/filename="([^"]+)"/);if(i?.[1])return i[1]}return a},Fg=()=>({id:null,label:"",to:"",subject:"",text:"",mode:"interval",intervalMinutes:"60",timeOfDay:"08:00",attachmentPath:"",enabled:!0}),zg=()=>({id:null,label:"",url:"",method:"GET",body:"",mode:"interval",intervalMinutes:"60",timeOfDay:"08:00",enabled:!0});function GC(){const{user:n}=Ti(),[a,i]=x.useState(!1),[r,t]=x.useState(!0),[l,u]=x.useState(""),[d,p]=x.useState(""),[h,v]=x.useState([]),[y,S]=x.useState([]),[k,j]=x.useState({has:!1,updatedAt:null}),[E,C]=x.useState({enabled:!1,intervalSec:30,demoMode:!1}),[F,O]=x.useState({enabled:!1,intervalSec:"30",demoMode:!1}),[_,$]=x.useState(!1),[Z,q]=x.useState(!1),[ee,ae]=x.useState({enabled:!1,intervalMinutes:10,lastRunAt:null,entryScope:"interval",scope:"interval"}),[se,ie]=x.useState({enabled:!1,intervalMinutes:"10",entryScope:"interval"}),[re,Ce]=x.useState(!1),[fe,Me]=x.useState({enabled:!0,intervalMinutes:5,useRagContext:!1}),[Te,Ne]=x.useState({enabled:!0,intervalMinutes:"5",useRagContext:!1}),[xe,L]=x.useState(!1),[V,Q]=x.useState([]),[T,Y]=x.useState(Fg()),[H,ye]=x.useState(!1),[De,ke]=x.useState(!1),[Ue,oe]=x.useState([]),[le,me]=x.useState(zg()),[Oe,Je]=x.useState(!1),[qe,ut]=x.useState(!1),[rt,_t]=x.useState({chatbot:{running:!1},worker:{running:!1}}),[Lt,ht]=x.useState(!1),Ke=async()=>{try{const b=await fetch("/api/user/admin/chatbot/status",{credentials:"include",cache:"no-store"});if(!b.ok)return null;const N=await b.json().catch(()=>({}));return N.ok===!1?null:(_t(N),N)}catch{return null}},[pt,Fe]=x.useState({intervalMs:3e4,enabled:!0}),[Rt,Bt]=x.useState({intervalSec:"30",enabled:!0}),[Zt,en]=x.useState(!1),[tn,J]=x.useState([]),[be,bt]=x.useState(!1),[mt,dt]=x.useState(!1),[sn,tt]=x.useState(!1),[Ut,Gt]=x.useState(null),[$t,Yt]=x.useState(!1),[Ft,Qt]=x.useState(""),[Be,W]=x.useState({host:"127.0.0.1",port:5432,database:"",user:"",schema:"public",sslMode:"disabled",statementTimeoutMs:5e3,maxRows:200,logSql:!1,logResponse:!1,logErrors:!0,persistLogs:!0,maskSensitive:!0,passwordSet:!1}),[ne,Ee]=x.useState({...Be,password:""}),[ve,pe]=x.useState(!1),[Qe,wt]=x.useState({status:"UNKNOWN"}),[ft,Et]=x.useState(!1),[at,A]=x.useState("SELECT version()"),[ue,Re]=x.useState(null),[Ie,Ve]=x.useState(!1),[it,st]=x.useState([]),[kt,gt]=x.useState(!1),[Bn,Wt]=x.useState(!1),[wn,In]=x.useState(""),[Pr,er]=x.useState(""),Is=b=>{if(!b)return null;const B=String(b).trim().match(/^([a-z0-9_-]+)[:.]([a-z]+)$/i);if(!B)return null;const ce=B[1].toLowerCase(),_e=B[2].toLowerCase();return["none","view","edit"].includes(_e)?{app:ce,level:_e}:null},ur=(b=[])=>{const N={};for(const B of b){const ce=Is(B);if(!ce)continue;const _e=N[ce.app];N[ce.app]=_e==="edit"||ce.level==="edit"?"edit":ce.level}return N},ma=b=>{if(typeof b=="string")return{id:b,label:b,apps:{}};const N=b?.id??b?.label??"",B=b?.apps&&Object.keys(b.apps).length?{...b.apps}:ur(b?.capabilities||[]);return{id:N,label:b?.label??N,apps:B}},Ln=x.useMemo(()=>(h||[]).map(b=>typeof b=="string"?b:b&&typeof b=="object"?b.id??b.label??"":"").filter(Boolean),[h]),Ls=x.useMemo(()=>Ln.map(b=>({key:b,label:b})),[Ln]),Ht=x.useMemo(()=>{const b=new Set(["einsatzboard","aufgabenboard","protokoll"]);for(const N of h||[])(typeof N=="object"&&N?.apps?Object.keys(N.apps):Array.isArray(N?.capabilities)?Object.keys(ur(N.capabilities)):[]).forEach(ce=>b.add(ce));return Array.from(b)},[h]),_r=["none","view","edit"],Gr=(b,N,B)=>{v(ce=>{const _e=Array.isArray(ce)?ce.slice():[],ct=_e.findIndex(Sn=>(typeof Sn=="string"?Sn:Sn?.id??Sn?.label)===b);if(ct<0)return ce;const nn=ma(_e[ct]),yr=_r.includes(B)?B:"none",Qn={...nn.apps||{}};return yr==="none"?delete Qn[N]:Qn[N]=yr,_e[ct]={...nn,apps:Qn},_e})},Qr=()=>Y(Fg()),Or=b=>{if(!b){Qr();return}Y({id:b.id||null,label:b.label||"",to:b.to||"",subject:b.subject||"",text:b.text||"",mode:b.mode==="time"?"time":"interval",intervalMinutes:String(b.intervalMinutes??""),timeOfDay:b.timeOfDay||"08:00",attachmentPath:b.attachmentPath||"",enabled:b.enabled!==!1})};async function Fs(){ke(!0);try{const b=await fetch("/api/mail/schedule",{credentials:"include",cache:"no-store"}),N=await b.json().catch(()=>({}));if(!b.ok||N?.error)throw new Error(N?.error||"Zeitplne konnten nicht geladen werden.");Q(Array.isArray(N.schedules)?N.schedules:[])}catch(b){p(N=>N||b.message||"Fehler beim Laden der Mail-Zeitplne")}finally{ke(!1)}}const ha=()=>me(zg()),Ma=b=>{if(!b){ha();return}me({id:b.id||null,label:b.label||"",url:b.url||"",method:b.method||"GET",body:b.body||"",mode:b.mode==="time"?"time":"interval",intervalMinutes:String(b.intervalMinutes??""),timeOfDay:b.timeOfDay||"08:00",enabled:b.enabled!==!1})};async function tr(){ut(!0);try{const b=await fetch("/api/http/schedule",{credentials:"include",cache:"no-store"}),N=await b.json().catch(()=>({}));if(!b.ok||N?.error)throw new Error(N?.error||"Zeitplne konnten nicht geladen werden.");oe(Array.isArray(N.schedules)?N.schedules:[])}catch(b){p(N=>N||b.message||"Fehler beim Laden der API-Zeitplne")}finally{ut(!1)}}async function vr(){t(!0),p("");try{const b=await zd("/roles");v(b.roles||[]);const N=await zd("/users");S(N.users||[]),i(!1);try{const B=await zd("/fetcher");j({has:!!(B?.has||B?.ok||B?.present),updatedAt:B?.updatedAt??B?.ts??null})}catch{}try{const B=await fetch("/api/import/auto-config",{credentials:"include",cache:"no-store"});if(B.ok){const ce=await B.json().catch(()=>({})),_e=M(ce.intervalSec,30);C({enabled:!!ce.enabled,intervalSec:_e,demoMode:!!ce.demoMode}),O({enabled:!!ce.enabled,intervalSec:String(_e),demoMode:!!ce.demoMode})}}catch{}try{const B=await fetch("/api/protocol/auto-print-config",{credentials:"include",cache:"no-store"});if(B.ok){const ce=await B.json().catch(()=>({})),_e=Number(ce.intervalMinutes),ct=Number.isFinite(_e)&&_e>0?Math.floor(_e):10,nn=Number(ce.lastRunAt),yr=Number.isFinite(nn)&&nn>0?nn:null,Qn=typeof ce.entryScope=="string"?ce.entryScope:typeof ce.scope=="string"?ce.scope:typeof ce.mode=="string"?ce.mode:null,Sn=ql(Qn),Pa={enabled:!!ce.enabled,intervalMinutes:ct,lastRunAt:yr,entryScope:Sn,scope:Sn};ae(Pa),ie({enabled:Pa.enabled,intervalMinutes:String(Pa.intervalMinutes||""),entryScope:Pa.entryScope})}}catch{}try{const B=await fetch("/api/situation/analysis-config",{credentials:"include",cache:"no-store"});if(B.ok){const ce=await B.json().catch(()=>({})),_e=z(ce.intervalMinutes,5);Me({enabled:!!ce.enabled,intervalMinutes:_e,useRagContext:!!ce.useRagContext}),Ne({enabled:!!ce.enabled,intervalMinutes:String(_e),useRagContext:!!ce.useRagContext})}}catch{}try{await Fs(),await tr()}catch{}try{const B=await fetch("/api/user/admin/worker/config",{credentials:"include",cache:"no-store"});if(B.ok){const ce=await B.json();ce.ok!==!1&&ce.config&&(Fe(ce.config),Bt({intervalSec:String((ce.config.intervalMs||3e4)/1e3),enabled:ce.config.enabled!==!1}))}}catch{}try{await Ke()}catch{}try{const B=await fetch("/api/user/admin/knowledge/files",{credentials:"include",cache:"no-store"});if(B.ok){const ce=await B.json();ce.ok!==!1&&J(ce.files||[])}}catch{}try{const B=await vx();Gt(B)}catch{}try{const B=await fetch("/api/admin/postgis/config",{credentials:"include",cache:"no-store"});if(B.ok){const ce=await B.json();ce.ok&&ce.config&&(W(ce.config),Ee({...ce.config,password:""}))}}catch{}}catch(b){b.status===423?i(!0):p(b.message||"Fehler beim Laden")}finally{t(!1)}}if(x.useEffect(()=>{vr()},[]),x.useEffect(()=>{const b=setInterval(()=>{Ke().catch(()=>{})},5e3);return()=>clearInterval(b)},[]),x.useEffect(()=>{if(!Bn||!kt)return;const b=setInterval(async()=>{try{const B=await(await fetch("/api/admin/postgis/logs?limit=200",{credentials:"include",cache:"no-store"})).json();B.ok&&st(B.logs||[])}catch{}},3e3);return()=>clearInterval(b)},[Bn,kt]),x.useEffect(()=>{n&&!Fd(n)&&go()},[n]),!n)return null;if(!Fd(n))return o.jsxs("div",{className:"p-4 text-red-700",children:[o.jsx(Co,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/"},addTitle:"Zur Einsatzbersicht"}),_f]});async function Gn(b){b.preventDefault(),p(""),u("");const N=b.target;try{await so("/master/setup",{password:N.master.value,adminUser:N.adminUser.value,adminPass:N.adminPass.value}),u("Master gesetzt & Admin angelegt."),N.reset(),await vr()}catch(B){p(B.message||"Fehler")}}async function Di(b){b.preventDefault(),p(""),u("");const N=b.target;try{await so("/master/unlock",{password:N.master.value}),u("Master entsperrt."),N.reset(),await vr()}catch(B){p(B.message||"Master ungltig")}}async function as(){if(confirm("Board wirklich zurcksetzen?")){p(""),u(""),q(!0);try{await U1(),u("Board zurckgesetzt.")}catch(b){p(b?.message||"Reset fehlgeschlagen.")}finally{q(!1)}}}async function ss(){p(""),u("");const b=(h||[]).map(ma);if(!b.some(N=>N.id==="Admin")){const N=Object.fromEntries(Ht.map(B=>[B,"edit"]));b.unshift({id:"Admin",label:"Administrator",apps:N})}try{const N=await Lg("/roles",{roles:b}),B=Array.isArray(N?.roles)?N.roles:b;v(B.map(ma)),u("Rollen gespeichert.")}catch(N){p(N.message||"Fehler beim Speichern der Rollen")}}function ga(b){b!=="Admin"&&v(N=>(N||[]).filter(B=>typeof B=="string"?B!==b:B&&typeof B=="object"?(B.id??B.label)!==b:!0))}function xr(b){const N=String(b||"").trim();!N||N.toLowerCase()==="admin"||v(B=>new Set(Ln).has(N)?B:[...B||[],{id:N,label:N,apps:{}}])}async function Ar(b){b.preventDefault(),p(""),u("");const N=b.target;try{const B=Array.from(N.roles?.selectedOptions||[]).map(ce=>String(ce.value||"").trim()).filter(Boolean);if(!B.length){p("Bitte mindestens eine Rolle whlen.");return}await so("/users",{username:N.u.value,password:N.p.value,displayName:N.d.value,roles:B}),N.reset(),N.roles&&Array.from(N.roles.options||[]).forEach((ce,_e)=>{ce.selected=_e===0}),u("Benutzer angelegt."),await vr()}catch(B){p(B.message||"Fehler beim Anlegen")}}async function Ir(b,N){if(window.confirm(`Benutzer '${N}' wirklich lschen?`)){p(""),u("");try{await KC(`/users/${b}`),u("Benutzer gelscht."),await vr()}catch(B){p(B.message||"Lschen fehlgeschlagen")}}}const[is,os]=x.useState(null),[dr,Ra]=x.useState({displayName:"",roles:[],password:""});function ls(b){os(b.id),Ra({displayName:b.displayName??b.username??"",roles:(()=>{const N=of(b);return N.length?N:Ln.length?[Ln[0]]:[]})(),password:""})}function qr(){os(null),Ra({displayName:"",roles:[],password:""})}function cs(b,N){Ra(B=>({...B,[b]:N}))}async function us(b){if(b){p(""),u(""),t(!0);try{const N=Array.isArray(dr.roles)?dr.roles.filter(Boolean):[];if(!N.length){p("Benutzer bentigt mindestens eine Rolle."),t(!1);return}const B={displayName:dr.displayName,roles:N},ce=(dr.password||"").trim();ce&&(B.password=ce),await HC(`/users/${b}`,B),u("Benutzer aktualisiert."),await vr(),qr()}catch(N){p(N.message||"Aktualisieren fehlgeschlagen")}finally{t(!1)}}}function M(b,N=30){const B=Number.isFinite(Number(N))?Number(N):30,ce=Number(b);return!Number.isFinite(ce)||ce<=0?Math.max(5,Math.min(3600,Math.floor(B))):Math.max(5,Math.min(3600,Math.floor(ce)))}function z(b,N=5){const B=Number.isFinite(Number(N))?Number(N):5,ce=Number(b);return!Number.isFinite(ce)||ce<0?Math.max(0,Math.floor(B)):Math.max(0,Math.floor(ce))}function de(b){const N=M(b?.intervalSec,E.intervalSec||30),B={enabled:!!b?.enabled,intervalSec:N,demoMode:!!b?.demoMode};C(B),O({enabled:B.enabled,intervalSec:String(B.intervalSec),demoMode:B.demoMode})}async function je(b,N="Auto-Import Einstellungen gespeichert."){if(_)return;p(""),u(""),$(!0);const B={enabled:!!b.enabled,intervalSec:M(b.intervalSec,E.intervalSec||30),demoMode:!!b.demoMode};try{const ce=await fetch("/api/import/auto-config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),_e=await ce.json().catch(()=>({}));if(!ce.ok||_e?.error)throw new Error(_e?.error||"Speichern fehlgeschlagen");de({enabled:_e.enabled,intervalSec:_e.intervalSec,demoMode:_e.demoMode}),u(N)}catch(ce){p(ce.message||"Speichern fehlgeschlagen")}finally{$(!1)}}const vt=async()=>{const b=!F.demoMode;await je({...F,demoMode:b},b?"Demomodus aktiviert. Fetcher wird beim Import nicht gestartet.":"Demomodus deaktiviert. Fetcher startet beim Import wieder.")},nt=async()=>{await je({...F,enabled:!F.enabled})},lt=async()=>{await je(F)};async function fn(){if(Zt)return;const b=Number.parseInt(Rt.intervalSec,10);if(!Number.isFinite(b)||b<5){p("Worker-Intervall muss mindestens 5 Sekunden sein.");return}p(""),u(""),en(!0);try{const N=await fetch("/api/user/admin/worker/config",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({intervalMs:b*1e3,enabled:Rt.enabled})}),B=await N.json().catch(()=>({}));if(!N.ok||B?.error)throw new Error(B?.error||"Speichern fehlgeschlagen");B.config&&(Fe(B.config),Bt({intervalSec:String((B.config.intervalMs||3e4)/1e3),enabled:B.config.enabled!==!1})),u(B.message||"Worker-Intervall gespeichert.")}catch(N){p(N.message||"Speichern fehlgeschlagen")}finally{en(!1)}}async function qt(){if(xe)return;const b=Number.parseInt(Te.intervalMinutes,10);if(!Number.isFinite(b)||b<0){p("Intervall fr die KI-Analyse muss eine Zahl  0 sein (0 = nur manuelle Auslsung).");return}const N=Math.max(0,b);p(""),u(""),L(!0);try{const B=await fetch("/api/situation/analysis-config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!!Te.enabled,intervalMinutes:N,useRagContext:!!Te.useRagContext})}),ce=await B.json().catch(()=>({}));if(!B.ok||ce?.error)throw new Error(ce?.error||"Speichern fehlgeschlagen");const _e=z(ce.intervalMinutes,N),ct={enabled:!!ce.enabled,intervalMinutes:_e,useRagContext:!!ce.useRagContext};Me(ct),Ne({enabled:ct.enabled,intervalMinutes:Number.isFinite(ct.intervalMinutes)?String(ct.intervalMinutes):"",useRagContext:ct.useRagContext}),u("KI-Analyse Einstellungen gespeichert.")}catch(B){p(B.message||"Speichern fehlgeschlagen")}finally{L(!1)}}async function Nn(){if(re)return;const b=Number.parseInt(se.intervalMinutes,10);if(!Number.isFinite(b)||b<=0){p("Intervall fr den Auto-Druck muss eine Zahl  1 sein.");return}const N=Math.max(1,b),B=ql(se.entryScope);p(""),u(""),Ce(!0);try{const ce=await fetch("/api/protocol/auto-print-config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!!se.enabled,intervalMinutes:N,entryScope:B,scope:B})}),_e=await ce.json().catch(()=>({}));if(!ce.ok||_e?.error)throw new Error(_e?.error||"Speichern fehlgeschlagen");const ct=Number(_e.intervalMinutes),nn=Number.isFinite(ct)&&ct>0?Math.floor(ct):N,yr=Number(_e.lastRunAt),Qn=ql(_e.entryScope??_e.scope??_e.mode),Sn={enabled:!!_e.enabled,intervalMinutes:nn,lastRunAt:Number.isFinite(yr)&&yr>0?yr:null,entryScope:Qn,scope:Qn};ae(Sn),ie({enabled:Sn.enabled,intervalMinutes:String(Sn.intervalMinutes||""),entryScope:Sn.entryScope}),u("Auto-Druck Einstellungen gespeichert.")}catch(ce){p(ce.message||"Speichern fehlgeschlagen")}finally{Ce(!1)}}async function Kt(b){if(b.preventDefault(),H)return;const N=Number.parseInt(T.intervalMinutes,10),B={label:T.label||"",to:T.to,subject:T.subject,text:T.text,mode:T.mode==="time"?"time":"interval",intervalMinutes:Number.isFinite(N)?N:T.intervalMinutes,timeOfDay:T.timeOfDay,attachmentPath:T.attachmentPath,enabled:!!T.enabled};p(""),u(""),ye(!0);try{const ce=T.id?`/api/mail/schedule/${encodeURIComponent(T.id)}`:"/api/mail/schedule",_e=T.id?"PUT":"POST",ct=await fetch(ce,{method:_e,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),nn=await ct.json().catch(()=>({}));if(!ct.ok||nn?.error)throw new Error(nn?.error||"Speichern fehlgeschlagen");Q(Array.isArray(nn.schedules)?nn.schedules:[]),Qr(),u(T.id?"Zeitplan aktualisiert.":"Zeitplan angelegt.")}catch(ce){p(ce.message||"Speichern fehlgeschlagen")}finally{ye(!1)}}async function xt(b){if(b){p(""),u("");try{const N=await fetch(`/api/mail/schedule/${encodeURIComponent(b)}`,{method:"DELETE",credentials:"include"}),B=await N.json().catch(()=>({}));if(!N.ok||B?.error)throw new Error(B?.error||"Lschen fehlgeschlagen");Q(Array.isArray(B.schedules)?B.schedules:[]),T.id===b&&Qr(),u("Zeitplan gelscht.")}catch(N){p(N.message||"Lschen fehlgeschlagen")}}}async function Ot(b){if(b){p(""),u("");try{const N=await fetch(`/api/mail/schedule/${encodeURIComponent(b)}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetLastSent:!0})}),B=await N.json().catch(()=>({}));if(!N.ok||B?.error)throw new Error(B?.error||"Aktualisierung fehlgeschlagen");Q(Array.isArray(B.schedules)?B.schedules:[]),u("Letzter Versandzeitpunkt zurckgesetzt.")}catch(N){p(N.message||"Aktualisierung fehlgeschlagen")}}}async function $n(b){if(b.preventDefault(),!Oe){p(""),u("");try{Je(!0);const N=(le.url||"").trim();if(!N)throw new Error("Bitte eine URL angeben.");const B={label:le.label,url:N,method:le.method,body:le.body,mode:le.mode,intervalMinutes:Number(le.intervalMinutes),timeOfDay:le.timeOfDay,enabled:!!le.enabled},ce=!!le.id,_e=await fetch(ce?`/api/http/schedule/${encodeURIComponent(le.id)}`:"/api/http/schedule",{method:ce?"PUT":"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),ct=await _e.json().catch(()=>({}));if(!_e.ok||ct?.error)throw new Error(ct?.error||"Speichern fehlgeschlagen");oe(Array.isArray(ct.schedules)?ct.schedules:[]),ha(),u(ce?"API-Zeitplan aktualisiert.":"API-Zeitplan angelegt.")}catch(N){p(N.message||"Speichern fehlgeschlagen")}finally{Je(!1)}}}async function hn(b){if(b){p(""),u("");try{const N=await fetch(`/api/http/schedule/${encodeURIComponent(b)}`,{method:"DELETE",credentials:"include"}),B=await N.json().catch(()=>({}));if(!N.ok||B?.error)throw new Error(B?.error||"Lschen fehlgeschlagen");oe(Array.isArray(B.schedules)?B.schedules:[]),le.id===b&&ha(),u("API-Zeitplan gelscht.")}catch(N){p(N.message||"Lschen fehlgeschlagen")}}}async function va(b){if(b){p(""),u("");try{const N=await fetch(`/api/http/schedule/${encodeURIComponent(b)}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetLastRun:!0})}),B=await N.json().catch(()=>({}));if(!N.ok||B?.error)throw new Error(B?.error||"Aktualisierung fehlgeschlagen");oe(Array.isArray(B.schedules)?B.schedules:[]),u("Letzter Aufrufzeitpunkt zurckgesetzt.")}catch(N){p(N.message||"Aktualisierung fehlgeschlagen")}}}const zs=ee.lastRunAt?new Date(ee.lastRunAt).toLocaleString("de-AT",{hour12:!1}):null,Jr=b=>{const N=Number(b);return!Number.isFinite(N)||N<=0?"":new Date(N).toLocaleString("de-AT",{hour12:!1})},Oc=!!T.id,Fo=b=>{const N=Number(b);return!Number.isFinite(N)||N<=0?"":new Date(N).toLocaleString("de-AT",{hour12:!1})},Us=!!le.id;return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx(Co,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/"},addTitle:"Zur Einsatzbersicht"}),o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"User Admin"}),o.jsx("button",{type:"button",onClick:as,className:"px-3 py-1.5 rounded-md bg-gray-700 hover:bg-gray-800 text-white disabled:opacity-60",disabled:Z||a,children:Z?"Reset luft":"Reset"})]}),(l||d||a)&&o.jsxs("div",{className:"space-y-1",children:[a&&o.jsx("div",{className:"text-amber-700",children:"Gesperrt (Master-Lock aktiv)."}),d&&o.jsx("div",{className:"text-rose-700",children:d}),l&&o.jsx("div",{className:"text-emerald-700",children:l})]}),o.jsxs("details",{className:"border rounded p-3",children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Master-Key initial setzen"}),o.jsxs("form",{onSubmit:Gn,className:"mt-3 grid gap-2 max-w-xl",children:[o.jsx("input",{name:"master",placeholder:"Neuer Master-Key",className:"border px-2 py-1 rounded"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{name:"adminUser",placeholder:"Admin Benutzer (z. B. admin)",className:"border px-2 py-1 rounded"}),o.jsx("input",{name:"adminPass",placeholder:"Admin Passwort",className:"border px-2 py-1 rounded"})]}),o.jsx("button",{className:"border rounded px-3 py-1 w-48",children:"Setzen"})]})]}),o.jsxs("details",{className:"border rounded p-3",open:a,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Master entsperren (nach Server-Neustart)"}),o.jsxs("form",{onSubmit:Di,className:"mt-3 grid gap-2 max-w-sm",children:[o.jsx("input",{name:"master",placeholder:"Master-Key",className:"border px-2 py-1 rounded"}),o.jsx("button",{className:"border rounded px-3 py-1 w-32",children:"Entsperren"})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Rollen (Admin + weitere)"}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[Ls.length===0&&o.jsx("span",{className:"text-gray-500 text-sm",children:" keine Rollen geladen "}),Ls.map(b=>o.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full border ${b.label==="Admin"?"bg-slate-100 border-slate-300 text-slate-700":"bg-gray-50 border-gray-300 text-gray-700"}`,children:[b.label,b.label!=="Admin"&&o.jsx("button",{type:"button",onClick:()=>ga(b.label),className:"ml-1 text-gray-500 hover:text-red-600",title:"Rolle entfernen",children:""})]},b.key))]}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("input",{id:"addRole",placeholder:"Rolle hinzufgen",className:"border px-2 py-1 rounded",onKeyDown:b=>{b.key==="Enter"&&(b.preventDefault(),xr(b.currentTarget.value),b.currentTarget.value="")}}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:()=>{const b=document.getElementById("addRole");if(!b)return;const N=b.value.trim();N&&(xr(N),b.value="")},children:"Hinzufgen"}),o.jsx("div",{className:"ml-auto",children:o.jsx("button",{className:"border rounded px-3 py-1",onClick:ss,disabled:a||r,children:"Rollen speichern"})})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Hinweis: ",o.jsx("b",{children:"Admin"})," kann nicht gelscht werden."]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Rechte pro Rolle"}),o.jsx("div",{className:"mt-3 overflow-x-auto",children:o.jsxs("table",{className:"min-w-[720px] w-full text-sm border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500",children:[o.jsx("th",{className:"px-2",children:"Rolle"}),Ht.map(b=>o.jsx("th",{className:"px-2 capitalize",children:b},b))]})}),o.jsx("tbody",{children:Ln.map(b=>{const N=(h||[]).find(ce=>(typeof ce=="string"?ce:ce?.id??ce?.label)===b),B=ma(N);return o.jsxs("tr",{className:"bg-white shadow-sm rounded",children:[o.jsx("td",{className:"px-2 py-1 font-medium",children:b}),Ht.map(ce=>{const _e=B.apps?.[ce]??"none";return o.jsx("td",{className:"px-2 py-1",children:o.jsx("select",{value:_e,onChange:ct=>Gr(b,ce,ct.target.value),className:"border rounded px-2 py-1",disabled:a||r||b==="Admin",title:b==="Admin"?"Admin ist immer edit":void 0,children:_r.map(ct=>o.jsx("option",{value:ct,children:ct},ct))})},ce)})]},b)})})]})}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:ss,disabled:a||r,children:"Rechte speichern"})})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Benutzer"}),o.jsxs("form",{onSubmit:Ar,className:"mt-3 grid grid-cols-5 gap-2 items-start max-w-5xl",children:[o.jsx("input",{name:"u",placeholder:"username",className:"border px-2 py-1 rounded",disabled:a}),o.jsx("input",{name:"p",placeholder:"passwort",className:"border px-2 py-1 rounded",disabled:a}),o.jsx("input",{name:"d",placeholder:"Anzeigename",className:"border px-2 py-1 rounded",disabled:a}),o.jsx("select",{name:"roles",multiple:!0,size:Math.min(6,Math.max(Ln.length||0,3)),className:"border px-2 py-1 rounded min-h-[6rem]",defaultValue:Ln.length?[Ln[0]]:[],disabled:a,children:Ln.map(b=>o.jsx("option",{value:b,children:b},b))},Ln.join("|")),o.jsx("button",{className:"border rounded px-3 py-1",disabled:a,children:"Anlegen"})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Mehrfachauswahl ber Strg (Windows) bzw.  (macOS) mglich."}),o.jsx("div",{className:"mt-4",children:y.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:" keine Benutzer "}):o.jsxs("table",{className:"text-sm w-full max-w-5xl border-separate border-spacing-y-1",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-gray-500",children:[o.jsx("th",{className:"px-2",children:"ID"}),o.jsx("th",{className:"px-2",children:"Benutzername"}),o.jsx("th",{className:"px-2",children:"Rollen"}),o.jsx("th",{className:"px-2",children:"Anzeigename"}),o.jsx("th",{className:"px-2 w-40",children:"Aktionen"})]})}),o.jsx("tbody",{children:y.map(b=>{const N=is===b.id,B=of(b),ce=Fd(b);return o.jsxs("tr",{className:"bg-white border rounded",children:[o.jsx("td",{className:"px-2 py-1",children:b.id}),o.jsx("td",{className:"px-2 py-1",children:b.username}),o.jsx("td",{className:"px-2 py-1",children:N?o.jsx("select",{multiple:!0,size:Math.min(4,Math.max(Ln.length||0,2)),value:dr.roles,onChange:_e=>cs("roles",Array.from(_e.target.selectedOptions||[]).map(ct=>String(ct.value||"").trim()).filter(Boolean)),className:"border rounded px-2 py-1 w-full min-h-[4rem]",disabled:a||r,children:Ln.map(_e=>o.jsx("option",{value:_e,children:_e},_e))}):B.length?B.join(", "):""}),o.jsx("td",{className:"px-2 py-1",children:N?o.jsx("input",{value:dr.displayName,onChange:_e=>cs("displayName",_e.target.value),className:"border rounded px-2 py-1 w-full",disabled:a||r}):b.displayName||""}),o.jsx("td",{className:"px-2 py-1 space-x-2",children:N?o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"password",placeholder:"neues Passwort (optional)",value:dr.password,onChange:_e=>cs("password",_e.target.value),className:"border rounded px-2 py-1 w-40 mr-2",disabled:a||r}),o.jsx("button",{className:"px-2 py-1 rounded border border-emerald-300 text-emerald-700 hover:bg-emerald-50",onClick:()=>us(b.id),disabled:a||r,title:"nderungen speichern",children:"Speichern"}),o.jsx("button",{className:"px-2 py-1 rounded border",onClick:qr,disabled:r,title:"Abbrechen",children:"Abbrechen"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded border",onClick:()=>ls(b),disabled:a||r,title:"Benutzer bearbeiten",children:"Bearbeiten"}),o.jsx("button",{className:"px-2 py-1 rounded border border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>Ir(b.id,b.username),disabled:a||ce,title:ce?"Admin kann nicht gelscht werden":"Benutzer lschen",children:"Lschen"})]})})]},b.id)})})]})})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Import-Einstellungen"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!F.enabled,onChange:nt,disabled:a||_}),"Auto-Import aktivieren"]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"Intervall (Sekunden)"}),o.jsx("input",{type:"number",min:5,max:3600,className:"border px-2 py-1 rounded w-24",value:F.intervalSec,onChange:b=>{const N=b.target.value.replace(/[^0-9]/g,"");O(B=>({...B,intervalSec:N}))},disabled:a||_})]}),o.jsx("button",{type:"button",onClick:lt,disabled:a||_,className:"px-3 py-1 rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",children:"Speichern"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!F.demoMode,onChange:vt,disabled:a||_}),"Demomodus (Fetcher beim Import nicht starten)"]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Bei aktivem Demomodus wird der Fetcher fr manuelle und automatische Importe nicht aufgerufen."})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Auto-Druck (Protokoll)"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!se.enabled,onChange:b=>ie(N=>({...N,enabled:b.target.checked})),disabled:a||re}),"Automatischen Druck aktivieren"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{htmlFor:"autoPrintInterval",className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{id:"autoPrintInterval",type:"number",min:1,className:"border px-2 py-1 rounded w-24",value:se.intervalMinutes,onChange:b=>{const N=b.target.value.replace(/[^0-9]/g,"");ie(B=>({...B,intervalMinutes:N}))},disabled:a||re})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{htmlFor:"autoPrintScope",className:"text-sm text-gray-700",children:"Umfang"}),o.jsxs("select",{id:"autoPrintScope",className:"border px-2 py-1 rounded w-64",value:se.entryScope,onChange:b=>{const N=ql(b.target.value);ie(B=>({...B,entryScope:N}))},disabled:a||re,children:[o.jsx("option",{value:"interval",children:"Nur Meldungen im Intervall"}),o.jsx("option",{value:"all",children:"Alle Meldungen"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:se.entryScope==="all"?"Es werden alle vorhandenen Protokollmeldungen gedruckt.":"Es werden nur Meldungen gedruckt, die seit dem letzten Lauf erfasst wurden."}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[o.jsx("span",{children:"Letzter Lauf:"}),o.jsx("span",{children:zs||""})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:Nn,disabled:a||re,children:"Einstellungen speichern"})})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"KI-Analyse"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!Te.enabled,onChange:b=>Ne(N=>({...N,enabled:b.target.checked})),disabled:a||xe}),"KI-Analyse aktivieren"]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!Te.useRagContext,onChange:b=>Ne(N=>({...N,useRagContext:b.target.checked})),disabled:a||xe}),"RAG-Wissensdatenbank einbeziehen (SOPs, Richtlinien)"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{htmlFor:"analysisInterval",className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{id:"analysisInterval",type:"number",min:0,className:"border px-2 py-1 rounded w-24",value:Te.intervalMinutes,onChange:b=>{const N=b.target.value.replace(/[^0-9]/g,"");Ne(B=>({...B,intervalMinutes:N}))},disabled:a||xe})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:qt,disabled:a||xe,children:"Einstellungen speichern"})}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Aktuell: ",fe.enabled?"aktiv":"deaktiviert","  ",fe.intervalMinutes," min  RAG: ",fe.useRagContext?"aktiviert":"deaktiviert"]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Zeitgesteuerter Mailversand"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Versand an hinterlegte Empfnger mit festem Intervall oder tglicher Uhrzeit. Anhnge werden vom Serverpfad geladen."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500",children:[o.jsx("th",{className:"px-2",children:"Titel / Betreff"}),o.jsx("th",{className:"px-2",children:"Empfnger"}),o.jsx("th",{className:"px-2",children:"Rhythmus"}),o.jsx("th",{className:"px-2",children:"Anhang"}),o.jsx("th",{className:"px-2",children:"Letzter Versand"}),o.jsx("th",{className:"px-2",children:"Aktiv"}),o.jsx("th",{className:"px-2",children:"Aktionen"})]})}),o.jsx("tbody",{children:V.length===0?o.jsx("tr",{children:o.jsx("td",{className:"px-2 py-2 text-gray-500",colSpan:7,children:" keine Zeitplne hinterlegt "})}):V.map(b=>o.jsxs("tr",{className:"bg-white shadow-sm rounded",children:[o.jsx("td",{className:"px-2 py-2 font-medium",children:b.label||b.subject||"(ohne Titel)"}),o.jsx("td",{className:"px-2 py-2",children:b.to}),o.jsx("td",{className:"px-2 py-2",children:b.mode==="time"?`tglich ${b.timeOfDay||""}`:`${b.intervalMinutes||""} min`}),o.jsx("td",{className:"px-2 py-2 break-all",children:b.attachmentPath||""}),o.jsx("td",{className:"px-2 py-2 text-xs text-gray-600",children:Jr(b.lastSentAt)}),o.jsx("td",{className:"px-2 py-2 text-center",children:b.enabled!==!1?"Ja":"Nein"}),o.jsxs("td",{className:"px-2 py-2 space-x-2 whitespace-nowrap",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>Or(b),disabled:H,children:"Bearbeiten"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>Ot(b.id),disabled:H,children:"Zurcksetzen"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>xt(b.id),disabled:H,children:"Lschen"})]})]},b.id))})]})}),De&&o.jsx("div",{className:"text-xs text-gray-500",children:"Lade Zeitplne "}),o.jsxs("form",{onSubmit:Kt,className:"grid gap-3 lg:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Titel (optional)"}),o.jsx("input",{className:"border px-2 py-1 rounded",value:T.label,onChange:b=>Y(N=>({...N,label:b.target.value})),disabled:H})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Empfnger"}),o.jsx("input",{className:"border px-2 py-1 rounded",type:"email",required:!0,value:T.to,onChange:b=>Y(N=>({...N,to:b.target.value})),disabled:H})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Betreff"}),o.jsx("input",{className:"border px-2 py-1 rounded",required:!0,value:T.subject,onChange:b=>Y(N=>({...N,subject:b.target.value})),disabled:H})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Mailtext"}),o.jsx("textarea",{className:"border px-2 py-1 rounded min-h-[120px]",required:!0,value:T.text,onChange:b=>Y(N=>({...N,text:b.target.value})),disabled:H})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Versandart"}),o.jsxs("select",{className:"border px-2 py-1 rounded",value:T.mode,onChange:b=>Y(N=>({...N,mode:b.target.value==="time"?"time":"interval"})),disabled:H,children:[o.jsx("option",{value:"interval",children:"Intervall (Minuten)"}),o.jsx("option",{value:"time",children:"Uhrzeit (tglich)"})]})]}),T.mode==="time"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Uhrzeit (HH:MM)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-40",type:"time",value:T.timeOfDay,onChange:b=>Y(N=>({...N,timeOfDay:b.target.value})),disabled:H})]}):o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-32",type:"number",min:1,value:T.intervalMinutes,onChange:b=>{const N=b.target.value.replace(/[^0-9]/g,"");Y(B=>({...B,intervalMinutes:N}))},disabled:H})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Anhang (Serverpfad)"}),o.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"prints/uebersicht/feldkirchen_show-all_24h.svg",value:T.attachmentPath,onChange:b=>Y(N=>({...N,attachmentPath:b.target.value})),disabled:H})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[o.jsx("input",{type:"checkbox",checked:!!T.enabled,onChange:b=>Y(N=>({...N,enabled:b.target.checked})),disabled:H}),"Aktiv"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"submit",className:"border rounded px-3 py-1",disabled:H,children:Oc?"Zeitplan speichern":"Zeitplan anlegen"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:Qr,disabled:H,children:"Neu"})]})]})]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Zeitgesteuerte API-Calls"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ruft hinterlegte URLs im gewnschten Rhythmus auf (GET/POST/PUT/PATCH/DELETE). Antwortinhalt wird verworfen, Fehler werden protokolliert."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500",children:[o.jsx("th",{className:"px-2",children:"Titel"}),o.jsx("th",{className:"px-2",children:"URL"}),o.jsx("th",{className:"px-2",children:"Methode"}),o.jsx("th",{className:"px-2",children:"Rhythmus"}),o.jsx("th",{className:"px-2",children:"Letzter Aufruf"}),o.jsx("th",{className:"px-2",children:"Aktiv"}),o.jsx("th",{className:"px-2",children:"Aktionen"})]})}),o.jsx("tbody",{children:Ue.length===0?o.jsx("tr",{children:o.jsx("td",{className:"px-2 py-2 text-gray-500",colSpan:7,children:" keine Zeitplne hinterlegt "})}):Ue.map(b=>o.jsxs("tr",{className:"bg-white shadow-sm rounded",children:[o.jsx("td",{className:"px-2 py-2 font-medium",children:b.label||"(ohne Titel)"}),o.jsx("td",{className:"px-2 py-2 break-all",children:b.url}),o.jsx("td",{className:"px-2 py-2",children:b.method||"GET"}),o.jsx("td",{className:"px-2 py-2",children:b.mode==="time"?`tglich ${b.timeOfDay||""}`:`${b.intervalMinutes||""} min`}),o.jsx("td",{className:"px-2 py-2 text-xs text-gray-600",children:Fo(b.lastRunAt)}),o.jsx("td",{className:"px-2 py-2 text-center",children:b.enabled!==!1?"Ja":"Nein"}),o.jsxs("td",{className:"px-2 py-2 space-x-2 whitespace-nowrap",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>Ma(b),disabled:Oe,children:"Bearbeiten"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>va(b.id),disabled:Oe,children:"Zurcksetzen"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>hn(b.id),disabled:Oe,children:"Lschen"})]})]},b.id))})]})}),qe&&o.jsx("div",{className:"text-xs text-gray-500",children:"Lade Zeitplne "}),o.jsxs("form",{onSubmit:$n,className:"grid gap-3 lg:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Titel (optional)"}),o.jsx("input",{className:"border px-2 py-1 rounded",value:le.label,onChange:b=>me(N=>({...N,label:b.target.value})),disabled:Oe})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"URL"}),o.jsx("input",{className:"border px-2 py-1 rounded",type:"text",required:!0,placeholder:"https://example.com/webhook",value:le.url,onChange:b=>me(N=>({...N,url:b.target.value})),disabled:Oe})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"HTTP-Methode"}),o.jsxs("select",{className:"border px-2 py-1 rounded w-40",value:le.method,onChange:b=>me(N=>({...N,method:b.target.value})),disabled:Oe,children:[o.jsx("option",{value:"GET",children:"GET"}),o.jsx("option",{value:"POST",children:"POST"}),o.jsx("option",{value:"PUT",children:"PUT"}),o.jsx("option",{value:"PATCH",children:"PATCH"}),o.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),le.method&&le.method!=="GET"&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Request-Body (optional, wird unverndert gesendet)"}),o.jsx("textarea",{className:"border px-2 py-1 rounded min-h-[80px]",placeholder:"z. B. JSON",value:le.body,onChange:b=>me(N=>({...N,body:b.target.value})),disabled:Oe})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Aufrufart"}),o.jsxs("select",{className:"border px-2 py-1 rounded",value:le.mode,onChange:b=>me(N=>({...N,mode:b.target.value==="time"?"time":"interval"})),disabled:Oe,children:[o.jsx("option",{value:"interval",children:"Intervall (Minuten)"}),o.jsx("option",{value:"time",children:"Uhrzeit (tglich)"})]})]}),le.mode==="time"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Uhrzeit (HH:MM)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-40",type:"time",value:le.timeOfDay,onChange:b=>me(N=>({...N,timeOfDay:b.target.value})),disabled:Oe})]}):o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-32",type:"number",min:1,value:le.intervalMinutes,onChange:b=>{const N=b.target.value.replace(/[^0-9]/g,"");me(B=>({...B,intervalMinutes:N}))},disabled:Oe})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[o.jsx("input",{type:"checkbox",checked:!!le.enabled,onChange:b=>me(N=>({...N,enabled:b.target.checked})),disabled:Oe}),"Aktiv"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"submit",className:"border rounded px-3 py-1",disabled:Oe,children:Us?"Zeitplan speichern":"Zeitplan anlegen"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:ha,disabled:Oe,children:"Neu"})]})]})]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Fetcher-Zugangsdaten (global)"}),o.jsxs("div",{className:"mt-3 text-sm",children:["Status:"," ",k.has?o.jsx("b",{className:"text-emerald-700",children:"gesetzt"}):o.jsx("b",{className:"text-rose-700",children:"fehlt"}),k.updatedAt&&o.jsxs(o.Fragment,{children:["  zuletzt gendert: ",o.jsx("code",{children:new Date(k.updatedAt).toLocaleString("de-AT",{hour12:!1})})]})]}),o.jsxs("form",{onSubmit:async b=>{b.preventDefault(),p(""),u("");const N=b.target;try{await Lg("/fetcher",{username:N.u.value,password:N.p.value}),N.reset(),u("Fetcher-Creds gespeichert (global)."),await vr()}catch(B){p(B.message||"Speichern fehlgeschlagen")}},className:"mt-3 grid grid-cols-3 gap-2 items-center max-w-4xl",children:[o.jsx("input",{name:"u",placeholder:"Fetcher Benutzername",className:"border px-2 py-1 rounded",disabled:a}),o.jsx("input",{name:"p",placeholder:"Fetcher Passwort",className:"border px-2 py-1 rounded",disabled:a}),o.jsx("button",{className:"border rounded px-3 py-1",disabled:a,children:"Speichern"})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Diese Zugangsdaten gelten fr ",o.jsx("b",{children:"alle Benutzer"}),". Start/Stopp nutzt immer den globalen Satz."]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Wartung (Admin)"}),o.jsxs("div",{className:"mt-3 grid gap-2 max-w-xl",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"border rounded px-3 py-1",disabled:a||r,onClick:async()=>{p(""),u(""),t(!0);try{const b=await so("/admin/initialsetup");u(b?.ok?b.message||"Initialsetup erfolgreich.":"Initialsetup ausgefhrt.")}catch(b){p(b.message||"Initialsetup fehlgeschlagen")}finally{t(!1)}},title:'Kopiert *.csv & *.json aus "data/initial" nach "data" (berschreibt).',children:"Initialsetup"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",disabled:a||r,onClick:async()=>{p(""),u(""),t(!0);try{const b=await so("/admin/archive"),N=b?.file||b?.filename||"archive.zip";u(`Archiv erstellt: ${N}`);const B=`/api/user/admin/archive/download/${encodeURIComponent(N)}`,ce=document.createElement("a");ce.href=B,ce.download=N,document.body.appendChild(ce),ce.click(),ce.remove()}catch(b){p(b.message||"Archiv-Erstellung fehlgeschlagen")}finally{t(!1)}},title:'Packt *.csv & *.json aus "data" in eine ZIP unter "data/archive" (mit Zeitstempel) und ldt es herunter.',children:"Archive"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",disabled:a||r,onClick:async()=>{p(""),u(""),t(!0);try{const b=await fetch("/api/user/admin/logs/download",{credentials:"include"});if(!b.ok){const ct=await b.text();let nn="Log-Download fehlgeschlagen";try{nn=JSON.parse(ct)?.error||nn}catch{ct&&(nn=ct)}throw new Error(nn)}const N=await b.blob(),B=VC(b.headers.get("Content-Disposition"),"logs.zip"),ce=window.URL.createObjectURL(N),_e=document.createElement("a");_e.href=ce,_e.download=B,document.body.appendChild(_e),_e.click(),_e.remove(),window.URL.revokeObjectURL(ce),u("Logfiles heruntergeladen.")}catch(b){p(b.message||"Log-Download fehlgeschlagen")}finally{t(!1)}},title:"Ldt alle Logfiles als ZIP herunter.",children:"Logfiles herunterladen"})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Hinweis: Nur ",o.jsx("b",{children:"Admin"}),". Initialsetup berschreibt bestehende Dateien im Datenverzeichnis."]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Chatbot & Worker"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${rt.chatbot?.ready?"bg-green-500":rt.chatbot?.running?"bg-yellow-500":"bg-gray-400"}`}),o.jsxs("span",{children:["Chatbot: ",o.jsx("b",{children:rt.chatbot?.ready?"Luft":rt.chatbot?.running?"Startet...":"Gestoppt"})]}),rt.chatbot?.pid&&o.jsxs("span",{className:"text-xs text-gray-500",children:["(PID: ",rt.chatbot.pid,")"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${rt.worker?.running?"bg-green-500":"bg-gray-400"}`}),o.jsxs("span",{children:["Worker: ",o.jsx("b",{children:rt.worker?.running?"Luft":"Gestoppt"})]}),rt.worker?.pid&&o.jsxs("span",{className:"text-xs text-gray-500",children:["(PID: ",rt.worker.pid,")"]})]}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded text-xs",disabled:Lt,onClick:async()=>{ht(!0),await Ke(),ht(!1)},children:"Status aktualisieren"})]}),o.jsxs("div",{className:"grid gap-2 text-xs text-gray-600",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"min-w-[70px] font-medium text-gray-700",children:"Chatbot"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",disabled:a||Lt||rt.chatbot?.running,onClick:async()=>{p(""),u(""),ht(!0);try{const b=await fetch("/api/user/admin/chatbot/server/start",{method:"POST",credentials:"include"}),N=await b.json();if(!b.ok||N.error)throw new Error(N.error||"Start fehlgeschlagen");const B=N.status??(N.chatbot||N.worker?N:null);B?_t(B):await Ke(),u("Chatbot gestartet.")}catch(b){p(b.message||"Start fehlgeschlagen")}finally{ht(!1)}},children:"Starten"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white disabled:opacity-60",disabled:a||Lt||!rt.chatbot?.running,onClick:async()=>{p(""),u(""),ht(!0);try{const b=await fetch("/api/user/admin/chatbot/server/stop",{method:"POST",credentials:"include"}),N=await b.json();if(!b.ok||N.error)throw new Error(N.error||"Stop fehlgeschlagen");const B=N.status??(N.chatbot||N.worker?N:null);B?_t(B):await Ke(),u("Chatbot gestoppt.")}catch(b){p(b.message||"Stop fehlgeschlagen")}finally{ht(!1)}},children:"Stoppen"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"min-w-[70px] font-medium text-gray-700",children:"Worker"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",disabled:a||Lt||rt.worker?.running,onClick:async()=>{p(""),u(""),ht(!0);try{const b=await fetch("/api/user/admin/chatbot/worker/start",{method:"POST",credentials:"include"}),N=await b.json();if(!b.ok||N.error)throw new Error(N.error||"Start fehlgeschlagen");const B=N.status??(N.chatbot||N.worker?N:null);B?_t(B):await Ke(),u("Worker gestartet.")}catch(b){p(b.message||"Start fehlgeschlagen")}finally{ht(!1)}},children:"Starten"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white disabled:opacity-60",disabled:a||Lt||!rt.worker?.running,onClick:async()=>{p(""),u(""),ht(!0);try{const b=await fetch("/api/user/admin/chatbot/worker/stop",{method:"POST",credentials:"include"}),N=await b.json();if(!b.ok||N.error)throw new Error(N.error||"Stop fehlgeschlagen");const B=N.status??(N.chatbot||N.worker?N:null);B?_t(B):await Ke(),u("Worker gestoppt.")}catch(b){p(b.message||"Stop fehlgeschlagen")}finally{ht(!1)}},children:"Stoppen"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Chatbot-Server (Port 3100) und Simulations-Worker lassen sich getrennt starten/stoppen."})]})]}),o.jsxs("details",{className:"border rounded p-3",children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Worker-Intervall Einstellung"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("p",{className:"text-gray-600",children:["Aktuelles Intervall: ",o.jsxs("strong",{children:[(pt.intervalMs/1e3).toFixed(1),"s"]}),rt.worker?.running&&o.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"(Worker luft, nderung wird in ~10s bernommen)"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{className:"font-medium",children:"Intervall (Sekunden):"}),o.jsx("input",{type:"number",min:"5",step:"1",className:"border rounded px-2 py-1 w-24",disabled:a||Zt,value:Rt.intervalSec,onChange:b=>Bt({...Rt,intervalSec:b.target.value})}),o.jsx("button",{type:"button",className:"px-4 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60",disabled:a||Zt,onClick:fn,children:Zt?"Speichert...":"Speichern"})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Min. 5 Sekunden. Der Worker berwacht die Config-Datei und passt das Intervall automatisch an."})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Knowledge-Basis (RAG)"}),o.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"font-medium",children:"Neue Dateien hochladen"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("input",{type:"file",multiple:!0,accept:".txt,.pdf,.json,.jsonl,.md",disabled:sn||a,onChange:async b=>{const N=b.target.files;if(!(!N||N.length===0)){p(""),u(""),tt(!0);try{const B=new FormData,_e=b.target.closest(".space-y-2")?.querySelector("[data-knowledge-subdir]")?.value?.trim()||"";_e&&B.append("targetSubdir",_e);for(const Sn of N)B.append("files",Sn);const ct=await fetch("/api/user/admin/knowledge/upload-multiple",{method:"POST",credentials:"include",body:B}),nn=await ct.json();if(!ct.ok||nn.error)throw new Error(nn.error||"Upload fehlgeschlagen");u(nn.message||`${nn.count} Datei(en) hochgeladen`);const Qn=await(await fetch("/api/user/admin/knowledge/files",{credentials:"include"})).json();Qn.ok!==!1&&J(Qn.files||[])}catch(B){p(B.message||"Upload fehlgeschlagen")}finally{tt(!1),b.target.value=""}}},className:"block flex-1 text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-xs text-gray-600 whitespace-nowrap",children:"Unterordner (optional):"}),o.jsx("input",{type:"text","data-knowledge-subdir":"true",placeholder:"z.B. s2/hochwasser",disabled:sn||a,className:"border rounded px-2 py-1 text-xs flex-1 max-w-xs"})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Erlaubte Dateitypen: .txt, .pdf, .json, .jsonl, .md (max. 50MB pro Datei)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60",disabled:mt||a,onClick:async()=>{p(""),u(""),dt(!0);try{const b=await fetch("/api/user/admin/knowledge/ingest",{method:"POST",credentials:"include"}),N=await b.json();if(!b.ok||N.error)throw new Error(N.error||"Ingest fehlgeschlagen");u("Knowledge-Index erfolgreich aktualisiert.")}catch(b){p(b.message||"Ingest fehlgeschlagen")}finally{dt(!1)}},children:mt?"Indexierung luft":"Ingest starten"}),o.jsx("button",{type:"button",className:"px-3 py-2 border rounded",disabled:be,onClick:async()=>{bt(!0);try{const N=await(await fetch("/api/user/admin/knowledge/files",{credentials:"include"})).json();N.ok!==!1&&J(N.files||[])}catch{}bt(!1)},children:"Liste aktualisieren"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"font-medium",children:"Vorhandene Knowledge-Dateien"}),be?o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Lade"}):tn.length===0?o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:" keine Dateien vorhanden "}):o.jsx("div",{className:"mt-2 max-h-64 overflow-y-auto border rounded",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1 text-left",children:"Pfad"}),o.jsx("th",{className:"px-2 py-1 text-right",children:"Gre"}),o.jsx("th",{className:"px-2 py-1 text-right",children:"Gendert"}),o.jsx("th",{className:"px-2 py-1"})]})}),o.jsx("tbody",{children:tn.map(b=>{const N=b.relPath||b.name;return o.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 py-1 font-mono",title:N,children:N}),o.jsx("td",{className:"px-2 py-1 text-right text-gray-500 whitespace-nowrap",children:b.size<1024?`${b.size} B`:b.size<1048576?`${(b.size/1024).toFixed(1)} KB`:`${(b.size/1048576).toFixed(1)} MB`}),o.jsx("td",{className:"px-2 py-1 text-right text-gray-500 whitespace-nowrap",children:new Date(b.modified).toLocaleString("de-AT",{hour12:!1})}),o.jsx("td",{className:"px-2 py-1 text-right",children:o.jsx("button",{type:"button",className:"text-red-600 hover:text-red-800",onClick:async()=>{if(window.confirm(`Datei "${N}" wirklich lschen?`)){p(""),u("");try{const B=await fetch(`/api/user/admin/knowledge/files/${encodeURIComponent(b.name)}?relPath=${encodeURIComponent(N)}`,{method:"DELETE",credentials:"include"}),ce=await B.json();if(!B.ok||ce.error)throw new Error(ce.error||"Lschen fehlgeschlagen");J(_e=>_e.filter(ct=>(ct.relPath||ct.name)!==N)),u(`Datei "${N}" gelscht.`)}catch(B){p(B.message||"Lschen fehlgeschlagen")}}},children:"Lschen"})})]},N)})})]})})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Nach dem Hochladen neuer Dateien muss ",o.jsx("b",{children:"Ingest"})," gestartet werden, um den Index zu aktualisieren."]})]})]}),o.jsxs("details",{className:"border rounded p-3",children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"UI Theme (Farben & Wasserzeichen)"}),o.jsxs("div",{className:"mt-3 space-y-4",children:[Ft&&o.jsx("div",{className:"text-sm text-green-700 bg-green-50 px-3 py-1.5 rounded",children:Ft}),Ut&&o.jsxs(o.Fragment,{children:[o.jsxs("fieldset",{className:"border rounded p-3 space-y-2",children:[o.jsx("legend",{className:"font-medium text-sm px-1",children:"Farben"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(Ut.colors||{}).map(([b,N])=>o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-600",children:b.replace(/_/g," ")}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:N.startsWith("#")?N:"#000000",disabled:a,onChange:B=>Gt(ce=>({...ce,colors:{...ce.colors,[b]:B.target.value}})),className:"w-8 h-8 rounded cursor-pointer border"}),o.jsx("input",{type:"text",value:N,disabled:a,onChange:B=>Gt(ce=>({...ce,colors:{...ce.colors,[b]:B.target.value}})),className:"flex-1 text-xs border rounded px-2 py-1"})]})]},b))})]}),o.jsxs("fieldset",{className:"border rounded p-3 space-y-3",children:[o.jsx("legend",{className:"font-medium text-sm px-1",children:"Wasserzeichen"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-600",children:"Bild-Pfad"}),o.jsx("input",{type:"text",value:Ut.watermark?.image||"",disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,image:b.target.value}})),className:"border rounded px-2 py-1 text-xs"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsxs("span",{className:"font-medium text-slate-600",children:["Deckkraft (01): ",Ut.watermark?.opacity??.18]}),o.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:Ut.watermark?.opacity??.18,disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,opacity:parseFloat(b.target.value)}})),className:"w-full"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-600",children:"Groesse (vw)"}),o.jsx("input",{type:"number",min:"10",max:"200",value:Ut.watermark?.sizeVw??90,disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,sizeVw:Number(b.target.value)}})),className:"border rounded px-2 py-1 text-xs"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-600",children:"Max. Groesse (px)"}),o.jsx("input",{type:"number",min:"100",max:"2000",value:Ut.watermark?.maxPx??900,disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,maxPx:Number(b.target.value)}})),className:"border rounded px-2 py-1 text-xs"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-600",children:"Position X (0100%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:Ut.watermark?.posX??50,disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,posX:Number(b.target.value)}})),className:"border rounded px-2 py-1 text-xs"})]}),o.jsxs("label",{className:"flex flex-col gap-1 text-xs",children:[o.jsx("span",{className:"font-medium text-slate-600",children:"Position Y (0100%)"}),o.jsx("input",{type:"number",min:"0",max:"100",value:Ut.watermark?.posY??50,disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,posY:Number(b.target.value)}})),className:"border rounded px-2 py-1 text-xs"})]}),o.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[o.jsx("input",{type:"checkbox",checked:Ut.watermark?.grayscale??!0,disabled:a,onChange:b=>Gt(N=>({...N,watermark:{...N.watermark,grayscale:b.target.checked}}))}),o.jsx("span",{className:"font-medium text-slate-600",children:"Graustufen"})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",disabled:a||$t,className:"px-3 py-1.5 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm disabled:opacity-60",onClick:async()=>{Yt(!0),Qt("");try{const b=await vg(Ut);Gt(b),nc(b),Qt("Theme gespeichert."),setTimeout(()=>Qt(""),3e3)}catch(b){Qt("Fehler: "+(b.message||"Unbekannt"))}finally{Yt(!1)}},children:$t?"Speichern":"Speichern"}),o.jsx("button",{type:"button",disabled:a||$t,className:"px-3 py-1.5 rounded-md bg-gray-200 hover:bg-gray-300 text-sm disabled:opacity-60",onClick:async()=>{const b={...O1};Gt(b),Yt(!0),Qt("");try{const N=await vg(b);Gt(N),nc(N),Qt("Auf Standardwerte zurueckgesetzt."),setTimeout(()=>Qt(""),3e3)}catch(N){Qt("Fehler: "+(N.message||"Unbekannt"))}finally{Yt(!1)}},children:"Zuruecksetzen"}),o.jsx("button",{type:"button",disabled:a,className:"px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200 text-sm disabled:opacity-60",onClick:()=>{nc(Ut),Qt("Vorschau angewendet (nicht gespeichert)."),setTimeout(()=>Qt(""),3e3)},children:"Vorschau"})]})]}),!Ut&&!r&&o.jsx("div",{className:"text-sm text-gray-500",children:"Theme konnte nicht geladen werden."})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Hybrid-Filtersystem (Regeln + Context-Fingerprint + Lernen)"}),o.jsx("div",{className:"mt-3",children:o.jsx(WC,{locked:a})})]}),o.jsxs("details",{className:"border rounded p-3",children:[o.jsxs("summary",{className:"cursor-pointer font-medium flex items-center gap-2",children:["PostGIS (Geo-Pipeline)",o.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-semibold ${Qe.status==="CONNECTED"?"bg-green-100 text-green-800":Qe.status==="FAILED"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:Qe.status})]}),o.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[wn&&o.jsx("div",{className:"text-green-700 bg-green-50 border border-green-200 rounded px-3 py-1",children:wn}),Pr&&o.jsx("div",{className:"text-red-700 bg-red-50 border border-red-200 rounded px-3 py-1",children:Pr}),o.jsxs("fieldset",{className:"border rounded p-3 space-y-2",children:[o.jsx("legend",{className:"text-xs font-semibold text-gray-500 px-1",children:"Verbindung"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Host"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1 text-sm",value:ne.host||"",onChange:b=>Ee(N=>({...N,host:b.target.value})),disabled:a||ve})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Port"}),o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1 text-sm",value:ne.port||"",onChange:b=>Ee(N=>({...N,port:b.target.value})),disabled:a||ve})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Database"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1 text-sm",value:ne.database||"",onChange:b=>Ee(N=>({...N,database:b.target.value})),disabled:a||ve})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Schema"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1 text-sm",value:ne.schema||"",onChange:b=>Ee(N=>({...N,schema:b.target.value})),disabled:a||ve})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"User"}),o.jsx("input",{type:"text",className:"w-full border rounded px-2 py-1 text-sm",value:ne.user||"",onChange:b=>Ee(N=>({...N,user:b.target.value})),disabled:a||ve})]}),o.jsxs("label",{className:"block",children:[o.jsxs("span",{className:"text-xs text-gray-500",children:["Password ",Be.passwordSet&&!ne.password?"(gesetzt)":""]}),o.jsx("input",{type:"password",className:"w-full border rounded px-2 py-1 text-sm",value:ne.password||"",placeholder:Be.passwordSet?"********":"",onChange:b=>Ee(N=>({...N,password:b.target.value})),disabled:a||ve,autoComplete:"off"})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"SSL Mode"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1 text-sm",value:ne.sslMode||"disabled",onChange:b=>Ee(N=>({...N,sslMode:b.target.value})),disabled:a||ve,children:[o.jsx("option",{value:"disabled",children:"disabled"}),o.jsx("option",{value:"require",children:"require (unsicher, self-signed)"}),o.jsx("option",{value:"verify-full",children:"verify-full"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 pt-1",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Statement Timeout (ms)"}),o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1 text-sm",value:ne.statementTimeoutMs||"",onChange:b=>Ee(N=>({...N,statementTimeoutMs:b.target.value})),disabled:a||ve,min:"100",max:"60000"})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Max Rows"}),o.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1 text-sm",value:ne.maxRows||"",onChange:b=>Ee(N=>({...N,maxRows:b.target.value})),disabled:a||ve,min:"1",max:"10000"})]})]})]}),o.jsxs("fieldset",{className:"border rounded p-3 space-y-2",children:[o.jsx("legend",{className:"text-xs font-semibold text-gray-500 px-1",children:"Logging"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",checked:!!ne.logSql,onChange:b=>Ee(N=>({...N,logSql:b.target.checked})),disabled:a||ve}),o.jsx("span",{children:"SQL loggen"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",checked:!!ne.logResponse,onChange:b=>Ee(N=>({...N,logResponse:b.target.checked})),disabled:a||ve}),o.jsx("span",{children:"Response loggen"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",checked:ne.logErrors!==!1,onChange:b=>Ee(N=>({...N,logErrors:b.target.checked})),disabled:a||ve}),o.jsx("span",{children:"Auch Fehler loggen"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",checked:ne.persistLogs!==!1,onChange:b=>Ee(N=>({...N,persistLogs:b.target.checked})),disabled:a||ve}),o.jsx("span",{children:"Persistente Logs speichern"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",checked:ne.maskSensitive!==!1,onChange:b=>Ee(N=>({...N,maskSensitive:b.target.checked})),disabled:a||ve}),o.jsx("span",{children:"Maskierung sensibler Daten"})]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{type:"button",disabled:a||ve,className:"px-3 py-1.5 rounded-md bg-blue-600 hover:bg-blue-700 text-white text-sm disabled:opacity-60",onClick:async()=>{pe(!0),er(""),In("");try{const b=await fetch("/api/admin/postgis/config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),N=await b.json();if(!b.ok||!N.ok)throw new Error(N.error||"Speichern fehlgeschlagen");W(N.config),Ee({...N.config,password:""}),In("Konfiguration gespeichert."),setTimeout(()=>In(""),4e3)}catch(b){er(b.message)}finally{pe(!1)}},children:"Speichern"}),o.jsx("button",{type:"button",disabled:a||ft,className:"px-3 py-1.5 rounded-md bg-green-600 hover:bg-green-700 text-white text-sm disabled:opacity-60",onClick:async()=>{Et(!0),er(""),In("");try{const N=await(await fetch("/api/admin/postgis/test",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})).json();wt({status:N.ok?"CONNECTED":"FAILED",durationMs:N.durationMs,serverVersion:N.serverVersion,testedAt:N.testedAt,error:N.error}),N.ok?(In(`Verbunden (${N.durationMs}ms)${N.serverVersion?"  PostgreSQL "+N.serverVersion:""}`),setTimeout(()=>In(""),6e3)):er(N.error||"Verbindung fehlgeschlagen")}catch(b){wt({status:"FAILED",error:b.message}),er(b.message)}finally{Et(!1)}},children:ft?"Teste":"Verbindung testen"})]}),Qe.status!=="UNKNOWN"&&o.jsxs("div",{className:`rounded p-2 text-xs ${Qe.status==="CONNECTED"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("span",{children:["Status: ",o.jsx("strong",{children:Qe.status})]}),Qe.durationMs!=null&&o.jsxs("span",{children:["Latenz: ",Qe.durationMs,"ms"]}),Qe.serverVersion&&o.jsxs("span",{children:["Version: ",Qe.serverVersion]}),Qe.testedAt&&o.jsxs("span",{children:["Zeitpunkt: ",new Date(Qe.testedAt).toLocaleString("de-DE")]})]}),Qe.error&&o.jsx("div",{className:"mt-1 text-red-700",children:Qe.error})]}),o.jsxs("fieldset",{className:"border rounded p-3 space-y-2",children:[o.jsx("legend",{className:"text-xs font-semibold text-gray-500 px-1",children:"Test-SQL ausfuehren (nur SELECT)"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-1 text-sm font-mono",rows:3,value:at,onChange:b=>A(b.target.value),disabled:a||Ie,placeholder:"SELECT * FROM spatial_ref_sys LIMIT 5"}),o.jsx("button",{type:"button",disabled:a||Ie||!at.trim(),className:"px-3 py-1.5 rounded-md bg-indigo-600 hover:bg-indigo-700 text-white text-sm disabled:opacity-60",onClick:async()=>{Ve(!0),Re(null),er("");try{const b=await fetch("/api/admin/postgis/query",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:at})}),N=await b.json();if(!b.ok||!N.ok)throw new Error(N.error||"Query fehlgeschlagen");Re(N)}catch(b){er(b.message)}finally{Ve(!1)}},children:Ie?"Laeuft":"Run"}),ue&&o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:[ue.rowCount," Zeile(n) in ",ue.durationMs,"ms"]}),o.jsx("div",{className:"overflow-auto max-h-80 border rounded",children:o.jsxs("table",{className:"min-w-full text-xs font-mono",children:[o.jsx("thead",{className:"bg-gray-100 sticky top-0",children:o.jsx("tr",{children:(ue.columns||[]).map((b,N)=>o.jsx("th",{className:"px-2 py-1 text-left border-b font-semibold",children:b},N))})}),o.jsx("tbody",{children:(ue.rows||[]).map((b,N)=>o.jsx("tr",{className:N%2?"bg-gray-50":"",children:(ue.columns||[]).map((B,ce)=>o.jsx("td",{className:"px-2 py-0.5 border-b whitespace-nowrap max-w-xs truncate",children:b[B]==null?o.jsx("span",{className:"text-gray-400 italic",children:"NULL"}):String(b[B])},ce))},N))})]})})]})]}),o.jsxs("fieldset",{className:"border rounded p-3 space-y-2",children:[o.jsx("legend",{className:"text-xs font-semibold text-gray-500 px-1",children:"Letzte Logs"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-xs bg-gray-100 hover:bg-gray-200",onClick:async()=>{gt(!0);try{const N=await(await fetch("/api/admin/postgis/logs?limit=200",{credentials:"include",cache:"no-store"})).json();N.ok&&st(N.logs||[])}catch{}},children:"Logs laden"}),o.jsxs("label",{className:"inline-flex items-center gap-1 text-xs",children:[o.jsx("input",{type:"checkbox",checked:Bn,onChange:b=>Wt(b.target.checked)}),"Live-Refresh (3s)"]}),it.length>0&&o.jsx("button",{type:"button",className:"px-2 py-1 rounded text-xs bg-gray-100 hover:bg-gray-200",onClick:()=>{const b=it.map(N=>JSON.stringify(N)).join(`
`);navigator.clipboard.writeText(b).catch(()=>{})},children:"Copy All"})]}),kt&&o.jsxs("div",{className:"overflow-auto max-h-64 border rounded bg-gray-50 p-2 font-mono text-xs space-y-1",children:[it.length===0&&o.jsx("div",{className:"text-gray-400",children:"Keine Logs vorhanden."}),it.slice().reverse().map((b,N)=>o.jsxs("div",{className:`p-1.5 rounded ${b.success?"bg-white":"bg-red-50"} border border-gray-200 flex flex-col gap-0.5`,children:[o.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[o.jsx("span",{className:`font-semibold ${b.success?"text-green-700":"text-red-700"}`,children:b.success?"OK":"ERR"}),o.jsx("span",{className:"text-gray-400",children:b.timestamp}),o.jsxs("span",{className:"text-gray-500",children:["[",b.action,"]"]}),b.durationMs!=null&&o.jsxs("span",{children:[b.durationMs,"ms"]}),b.rowCount!=null&&o.jsxs("span",{children:[b.rowCount," rows"]}),o.jsx("span",{className:"text-gray-400",children:b.user}),o.jsx("button",{type:"button",className:"ml-auto text-gray-400 hover:text-gray-700 text-xs",onClick:()=>navigator.clipboard.writeText(JSON.stringify(b,null,2)).catch(()=>{}),children:"Copy"})]}),b.sql&&o.jsxs("div",{className:"text-gray-600 truncate",children:["SQL: ",b.sql]}),b.error&&o.jsxs("div",{className:"text-red-600 truncate",children:["Fehler: ",b.error]}),b.sampleRows&&o.jsxs("div",{className:"text-gray-500 truncate",children:["Rows: ",JSON.stringify(b.sampleRows).slice(0,200),b.truncated?" ":""]})]},N))]})]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"KI-Modell-Verwaltung"}),o.jsx("div",{className:"mt-3",children:o.jsx($C,{})})]}),r&&o.jsx("div",{className:"text-sm text-gray-500",children:"Lade"})]})}function QC(){const[n,a]=x.useState(!1),[i,r]=x.useState(""),[t,l]=x.useState("");if(x.useEffect(()=>{(async()=>{try{if((await _1())?.hasMaster){window.location.href="/user-login";return}}catch{}a(!0)})()},[]),!n)return null;async function u(d){d.preventDefault(),r(""),l("");const p=d.target;try{await P1(p.master.value,p.adminUser.value,p.adminPass.value),l("Master gesetzt & Admin angelegt. Weiter zu /user-login.")}catch(h){r(h.message||"Fehler")}}return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[o.jsx(Co,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/user-login"},addTitle:"Zur Anmeldung"}),o.jsxs("div",{className:"bg-white shadow rounded-2xl p-6 w-[520px] space-y-6",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Erststart"}),t&&o.jsx("div",{className:"text-green-700 text-sm",children:t}),i&&o.jsx("div",{className:"text-red-700 text-sm",children:i}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"1) Master-Key initial setzen (einmalig)"}),o.jsxs("form",{onSubmit:u,className:"mt-3 grid gap-2",children:[o.jsx("input",{name:"master",placeholder:"Neuer Master-Key",className:"border rounded px-3 py-2"}),o.jsx("input",{name:"adminUser",placeholder:"Admin Benutzer (z. B. admin)",className:"border rounded px-3 py-2"}),o.jsx("input",{name:"adminPass",placeholder:"Admin Passwort",className:"border rounded px-3 py-2"}),o.jsx("button",{className:"border rounded px-3 py-2 bg-gray-900 text-white",children:"Master setzen & Admin anlegen"})]})]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Hinweis: Diese Seite ist nur sichtbar, solange noch kein Master/kein Admin existiert."})]})]})}async function qC(){const n=document.getElementById("root");if(!n)return;const a=d0.createRoot(n),i=window.location.pathname.replace(/\/+$/,""),r=l=>o.jsx(_d,{children:o.jsx(L1,{fallback:o.jsx(Og,{}),children:l})});if(i==="/user-firststart"){a.render(o.jsx(_d,{children:o.jsx(QC,{})}));return}if(i==="/user-login"){a.render(o.jsx(_d,{children:o.jsx(Og,{})}));return}if(i==="/user-admin"){a.render(r(o.jsx(GC,{})));return}if(i==="/aufgaben"||i==="/aufg"){a.render(r(o.jsx(LC,{})));return}const{default:t}=await Ug(async()=>{const{default:l}=await import("./App-oJcXN6ca.js");return{default:l}},__vite__mapDeps([0,1]));a.render(r(o.jsx(t,{})))}qC();export{av as $,rE as A,Ex as B,ts as C,E0 as D,oh as E,Co as F,jb as G,Qb as H,Vb as I,cE as J,iE as K,lE as L,mE as M,Yb as N,A0 as O,cC as P,_0 as Q,K as R,wx as S,eE as T,NC as U,tE as V,oE as W,fE as X,U1 as Y,dE as Z,aE as _,nw as a,rv as a0,hf as a1,sE as b,dv as c,Ti as d,Nx as e,K1 as f,Eo as g,bg as h,kx as i,o as j,F1 as k,rf as l,JC as m,bx as n,hx as o,gx as p,fi as q,x as r,pE as s,yx as t,Tb as u,bC as v,nE as w,XC as x,ZC as y,uE as z};
