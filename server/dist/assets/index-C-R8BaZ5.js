(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(t){if(t.ep)return;t.ep=!0;const l=i(t);fetch(t.href,l)}})();const Yx="modulepreload",Wx=function(n){return"/"+n},Bm={},Hx=function(s,i,r){let t=Promise.resolve();if(i&&i.length>0){let p=function(h){return Promise.all(h.map(v=>Promise.resolve(v).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");t=p(i.map(h=>{if(h=Wx(h),h in Bm)return;Bm[h]=!0;const v=h.endsWith(".css"),y=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":Yx,v||(N.as="script"),N.crossOrigin="",N.href=h,d&&N.setAttribute("nonce",d),document.head.appendChild(N),v)return new Promise((C,k)=>{N.addEventListener("load",C),N.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function l(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return t.then(u=>{for(const d of u||[])d.status==="rejected"&&l(d.reason);return s().catch(l)})};function mo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ju={exports:{}},Yi={},Xu={exports:{}},bt={};var $m;function Kx(){if($m)return bt;$m=1;var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),t=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function N(b){return b===null||typeof b!="object"?null:(b=y&&b[y]||b["@@iterator"],typeof b=="function"?b:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,E={};function j(b,L,oe){this.props=b,this.context=L,this.refs=E,this.updater=oe||C}j.prototype.isReactComponent={},j.prototype.setState=function(b,L){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,L,"setState")},j.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function I(){}I.prototype=j.prototype;function $(b,L,oe){this.props=b,this.context=L,this.refs=E,this.updater=oe||C}var Y=$.prototype=new I;Y.constructor=$,k(Y,j.prototype),Y.isPureReactComponent=!0;var B=Array.isArray,Z=Object.prototype.hasOwnProperty,ee={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function re(b,L,oe){var he,je={},ke=null,Le=null;if(L!=null)for(he in L.ref!==void 0&&(Le=L.ref),L.key!==void 0&&(ke=""+L.key),L)Z.call(L,he)&&!J.hasOwnProperty(he)&&(je[he]=L[he]);var Se=arguments.length-2;if(Se===1)je.children=oe;else if(1<Se){for(var ue=Array(Se),xe=0;xe<Se;xe++)ue[xe]=arguments[xe+2];je.children=ue}if(b&&b.defaultProps)for(he in Se=b.defaultProps,Se)je[he]===void 0&&(je[he]=Se[he]);return{$$typeof:n,type:b,key:ke,ref:Le,props:je,_owner:ee.current}}function te(b,L){return{$$typeof:n,type:b.type,key:L,ref:b.ref,props:b.props,_owner:b._owner}}function ie(b){return typeof b=="object"&&b!==null&&b.$$typeof===n}function ne(b){var L={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(oe){return L[oe]})}var Ce=/\/+/g;function ve(b,L){return typeof b=="object"&&b!==null&&b.key!=null?ne(""+b.key):L.toString(36)}function Te(b,L,oe,he,je){var ke=typeof b;(ke==="undefined"||ke==="boolean")&&(b=null);var Le=!1;if(b===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(b.$$typeof){case n:case s:Le=!0}}if(Le)return Le=b,je=je(Le),b=he===""?"."+ve(Le,0):he,B(je)?(oe="",b!=null&&(oe=b.replace(Ce,"$&/")+"/"),Te(je,L,oe,"",function(xe){return xe})):je!=null&&(ie(je)&&(je=te(je,oe+(!je.key||Le&&Le.key===je.key?"":(""+je.key).replace(Ce,"$&/")+"/")+b)),L.push(je)),1;if(Le=0,he=he===""?".":he+":",B(b))for(var Se=0;Se<b.length;Se++){ke=b[Se];var ue=he+ve(ke,Se);Le+=Te(ke,L,oe,ue,je)}else if(ue=N(b),typeof ue=="function")for(b=ue.call(b),Se=0;!(ke=b.next()).done;)ke=ke.value,ue=he+ve(ke,Se++),Le+=Te(ke,L,oe,ue,je);else if(ke==="object")throw L=String(b),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Le}function Ee(b,L,oe){if(b==null)return b;var he=[],je=0;return Te(b,he,"","",function(ke){return L.call(oe,ke,je++)}),he}function be(b){if(b._status===-1){var L=b._result;L=L(),L.then(function(oe){(b._status===0||b._status===-1)&&(b._status=1,b._result=oe)},function(oe){(b._status===0||b._status===-1)&&(b._status=2,b._result=oe)}),b._status===-1&&(b._status=0,b._result=L)}if(b._status===1)return b._result.default;throw b._result}var we={current:null},O={transition:null},W={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:O,ReactCurrentOwner:ee};function F(){throw Error("act(...) is not supported in production builds of React.")}return bt.Children={map:Ee,forEach:function(b,L,oe){Ee(b,function(){L.apply(this,arguments)},oe)},count:function(b){var L=0;return Ee(b,function(){L++}),L},toArray:function(b){return Ee(b,function(L){return L})||[]},only:function(b){if(!ie(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},bt.Component=j,bt.Fragment=i,bt.Profiler=t,bt.PureComponent=$,bt.StrictMode=r,bt.Suspense=p,bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,bt.act=F,bt.cloneElement=function(b,L,oe){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var he=k({},b.props),je=b.key,ke=b.ref,Le=b._owner;if(L!=null){if(L.ref!==void 0&&(ke=L.ref,Le=ee.current),L.key!==void 0&&(je=""+L.key),b.type&&b.type.defaultProps)var Se=b.type.defaultProps;for(ue in L)Z.call(L,ue)&&!J.hasOwnProperty(ue)&&(he[ue]=L[ue]===void 0&&Se!==void 0?Se[ue]:L[ue])}var ue=arguments.length-2;if(ue===1)he.children=oe;else if(1<ue){Se=Array(ue);for(var xe=0;xe<ue;xe++)Se[xe]=arguments[xe+2];he.children=Se}return{$$typeof:n,type:b.type,key:je,ref:ke,props:he,_owner:Le}},bt.createContext=function(b){return b={$$typeof:u,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:l,_context:b},b.Consumer=b},bt.createElement=re,bt.createFactory=function(b){var L=re.bind(null,b);return L.type=b,L},bt.createRef=function(){return{current:null}},bt.forwardRef=function(b){return{$$typeof:d,render:b}},bt.isValidElement=ie,bt.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:be}},bt.memo=function(b,L){return{$$typeof:h,type:b,compare:L===void 0?null:L}},bt.startTransition=function(b){var L=O.transition;O.transition={};try{b()}finally{O.transition=L}},bt.unstable_act=F,bt.useCallback=function(b,L){return we.current.useCallback(b,L)},bt.useContext=function(b){return we.current.useContext(b)},bt.useDebugValue=function(){},bt.useDeferredValue=function(b){return we.current.useDeferredValue(b)},bt.useEffect=function(b,L){return we.current.useEffect(b,L)},bt.useId=function(){return we.current.useId()},bt.useImperativeHandle=function(b,L,oe){return we.current.useImperativeHandle(b,L,oe)},bt.useInsertionEffect=function(b,L){return we.current.useInsertionEffect(b,L)},bt.useLayoutEffect=function(b,L){return we.current.useLayoutEffect(b,L)},bt.useMemo=function(b,L){return we.current.useMemo(b,L)},bt.useReducer=function(b,L,oe){return we.current.useReducer(b,L,oe)},bt.useRef=function(b){return we.current.useRef(b)},bt.useState=function(b){return we.current.useState(b)},bt.useSyncExternalStore=function(b,L,oe){return we.current.useSyncExternalStore(b,L,oe)},bt.useTransition=function(){return we.current.useTransition()},bt.version="18.3.1",bt}var Ym;function Gd(){return Ym||(Ym=1,Xu.exports=Kx()),Xu.exports}var Wm;function Vx(){if(Wm)return Yi;Wm=1;var n=Gd(),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,t=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,p,h){var v,y={},N=null,C=null;h!==void 0&&(N=""+h),p.key!==void 0&&(N=""+p.key),p.ref!==void 0&&(C=p.ref);for(v in p)r.call(p,v)&&!l.hasOwnProperty(v)&&(y[v]=p[v]);if(d&&d.defaultProps)for(v in p=d.defaultProps,p)y[v]===void 0&&(y[v]=p[v]);return{$$typeof:s,type:d,key:N,ref:C,props:y,_owner:t.current}}return Yi.Fragment=i,Yi.jsx=u,Yi.jsxs=u,Yi}var Hm;function Qx(){return Hm||(Hm=1,Ju.exports=Vx()),Ju.exports}var o=Qx(),x=Gd();const K=mo(x);var jl={},Zu={exports:{}},rr={},ed={exports:{}},td={};var Km;function Gx(){return Km||(Km=1,(function(n){function s(O,W){var F=O.length;O.push(W);e:for(;0<F;){var b=F-1>>>1,L=O[b];if(0<t(L,W))O[b]=W,O[F]=L,F=b;else break e}}function i(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],F=O.pop();if(F!==W){O[0]=F;e:for(var b=0,L=O.length,oe=L>>>1;b<oe;){var he=2*(b+1)-1,je=O[he],ke=he+1,Le=O[ke];if(0>t(je,F))ke<L&&0>t(Le,je)?(O[b]=Le,O[ke]=F,b=ke):(O[b]=je,O[he]=F,b=he);else if(ke<L&&0>t(Le,F))O[b]=Le,O[ke]=F,b=ke;else break e}}return W}function t(O,W){var F=O.sortIndex-W.sortIndex;return F!==0?F:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var p=[],h=[],v=1,y=null,N=3,C=!1,k=!1,E=!1,j=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(O){for(var W=i(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=O)r(h),W.sortIndex=W.expirationTime,s(p,W);else break;W=i(h)}}function B(O){if(E=!1,Y(O),!k)if(i(p)!==null)k=!0,be(Z);else{var W=i(h);W!==null&&we(B,W.startTime-O)}}function Z(O,W){k=!1,E&&(E=!1,I(re),re=-1),C=!0;var F=N;try{for(Y(W),y=i(p);y!==null&&(!(y.expirationTime>W)||O&&!ne());){var b=y.callback;if(typeof b=="function"){y.callback=null,N=y.priorityLevel;var L=b(y.expirationTime<=W);W=n.unstable_now(),typeof L=="function"?y.callback=L:y===i(p)&&r(p),Y(W)}else r(p);y=i(p)}if(y!==null)var oe=!0;else{var he=i(h);he!==null&&we(B,he.startTime-W),oe=!1}return oe}finally{y=null,N=F,C=!1}}var ee=!1,J=null,re=-1,te=5,ie=-1;function ne(){return!(n.unstable_now()-ie<te)}function Ce(){if(J!==null){var O=n.unstable_now();ie=O;var W=!0;try{W=J(!0,O)}finally{W?ve():(ee=!1,J=null)}}else ee=!1}var ve;if(typeof $=="function")ve=function(){$(Ce)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ee=Te.port2;Te.port1.onmessage=Ce,ve=function(){Ee.postMessage(null)}}else ve=function(){j(Ce,0)};function be(O){J=O,ee||(ee=!0,ve())}function we(O,W){re=j(function(){O(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_continueExecution=function(){k||C||(k=!0,be(Z))},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return i(p)},n.unstable_next=function(O){switch(N){case 1:case 2:case 3:var W=3;break;default:W=N}var F=N;N=W;try{return O()}finally{N=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=N;N=O;try{return W()}finally{N=F}},n.unstable_scheduleCallback=function(O,W,F){var b=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?b+F:b):F=b,O){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=F+L,O={id:v++,callback:W,priorityLevel:O,startTime:F,expirationTime:L,sortIndex:-1},F>b?(O.sortIndex=F,s(h,O),i(p)===null&&O===i(h)&&(E?(I(re),re=-1):E=!0,we(B,F-b))):(O.sortIndex=L,s(p,O),k||C||(k=!0,be(Z))),O},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(O){var W=N;return function(){var F=N;N=W;try{return O.apply(this,arguments)}finally{N=F}}}})(td)),td}var Vm;function qx(){return Vm||(Vm=1,ed.exports=Gx()),ed.exports}var Qm;function Jx(){if(Qm)return rr;Qm=1;var n=Gd(),s=qx();function i(e){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+e,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+e+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,t={};function l(e,a){u(e,a),u(e+"Capture",a)}function u(e,a){for(t[e]=a,e=0;e<a.length;e++)r.add(a[e])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},y={};function N(e){return p.call(y,e)?!0:p.call(v,e)?!1:h.test(e)?y[e]=!0:(v[e]=!0,!1)}function C(e,a,c,f){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,a,c,f){if(a===null||typeof a>"u"||C(e,a,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function E(e,a,c,f,m,g,w){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=e,this.type=a,this.sanitizeURL=g,this.removeEmptyString=w}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new E(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var a=e[0];j[a]=new E(a,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new E(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new E(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new E(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new E(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new E(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new E(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new E(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function $(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var a=e.replace(I,$);j[a]=new E(a,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var a=e.replace(I,$);j[a]=new E(a,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var a=e.replace(I,$);j[a]=new E(a,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new E(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new E(e,1,!1,e.toLowerCase(),null,!0,!0)});function Y(e,a,c,f){var m=j.hasOwnProperty(a)?j[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,c,m,f)&&(c=null),f||m===null?N(a)&&(c===null?e.removeAttribute(a):e.setAttribute(a,""+c)):m.mustUseProperty?e[m.propertyName]=c===null?m.type===3?!1:"":c:(a=m.attributeName,f=m.attributeNamespace,c===null?e.removeAttribute(a):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?e.setAttributeNS(f,a,c):e.setAttribute(a,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ee=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),re=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),ne=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),O=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=O&&e[O]||e["@@iterator"],typeof e=="function"?e:null)}var F=Object.assign,b;function L(e){if(b===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);b=a&&a[1]||""}return`
`+b+e}var oe=!1;function he(e,a){if(!e||oe)return"";oe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var f=X}Reflect.construct(e,[],a)}else{try{a.call()}catch(X){f=X}e.call(a.prototype)}else{try{throw Error()}catch(X){f=X}e()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var m=X.stack.split(`
`),g=f.stack.split(`
`),w=m.length-1,M=g.length-1;1<=w&&0<=M&&m[w]!==g[M];)M--;for(;1<=w&&0<=M;w--,M--)if(m[w]!==g[M]){if(w!==1||M!==1)do if(w--,M--,0>M||m[w]!==g[M]){var _=`
`+m[w].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=w&&0<=M);break}}}finally{oe=!1,Error.prepareStackTrace=c}return(e=e?e.displayName||e.name:"")?L(e):""}function je(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function ke(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J:return"Fragment";case ee:return"Portal";case te:return"Profiler";case re:return"StrictMode";case ve:return"Suspense";case Te:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ne:return(e.displayName||"Context")+".Consumer";case ie:return(e._context.displayName||"Context")+".Provider";case Ce:var a=e.render;return e=e.displayName,e||(e=a.displayName||a.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ee:return a=e.displayName||null,a!==null?a:ke(e.type)||"Memo";case be:a=e._payload,e=e._init;try{return ke(e(a))}catch{}}return null}function Le(e){var a=e.type;switch(e.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=a.render,e=e.displayName||e.name||"",a.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(a);case 8:return a===re?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Se(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ue(e){var a=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function xe(e){var a=ue(e)?"checked":"value",c=Object.getOwnPropertyDescriptor(e.constructor.prototype,a),f=""+e[a];if(!e.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(e,a,{configurable:!0,get:function(){return m.call(this)},set:function(w){f=""+w,g.call(this,w)}}),Object.defineProperty(e,a,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){e._valueTracker=null,delete e[a]}}}}function He(e){e._valueTracker||(e._valueTracker=xe(e))}function Xe(e){if(!e)return!1;var a=e._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return e&&(f=ue(e)?e.checked?"true":"false":e.value),e=f,e!==c?(a.setValue(e),!0):!1}function gt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Nt(e,a){var c=a.checked;return F({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??e._wrapperState.initialChecked})}function Ze(e,a){var c=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;c=Se(a.value!=null?a.value:c),e._wrapperState={initialChecked:f,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ft(e,a){a=a.checked,a!=null&&Y(e,"checked",a,!1)}function Et(e,a){Ft(e,a);var c=Se(a.value),f=a.type;if(c!=null)f==="number"?(c===0&&e.value===""||e.value!=c)&&(e.value=""+c):e.value!==""+c&&(e.value=""+c);else if(f==="submit"||f==="reset"){e.removeAttribute("value");return}a.hasOwnProperty("value")?We(e,a.type,c):a.hasOwnProperty("defaultValue")&&We(e,a.type,Se(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(e.defaultChecked=!!a.defaultChecked)}function ft(e,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+e._wrapperState.initialValue,c||a===e.value||(e.value=a),e.defaultValue=a}c=e.name,c!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,c!==""&&(e.name=c)}function We(e,a,c){(a!=="number"||gt(e.ownerDocument)!==e)&&(c==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+c&&(e.defaultValue=""+c))}var st=Array.isArray;function Ae(e,a,c,f){if(e=e.options,a){a={};for(var m=0;m<c.length;m++)a["$"+c[m]]=!0;for(c=0;c<e.length;c++)m=a.hasOwnProperty("$"+e[c].value),e[c].selected!==m&&(e[c].selected=m),m&&f&&(e[c].defaultSelected=!0)}else{for(c=""+Se(c),a=null,m=0;m<e.length;m++){if(e[m].value===c){e[m].selected=!0,f&&(e[m].defaultSelected=!0);return}a!==null||e[m].disabled||(a=e[m])}a!==null&&(a.selected=!0)}}function At(e,a){if(a.dangerouslySetInnerHTML!=null)throw Error(i(91));return F({},a,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bt(e,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(i(92));if(st(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),c=a}e._wrapperState={initialValue:Se(c)}}function qt(e,a){var c=Se(a.value),f=Se(a.defaultValue);c!=null&&(c=""+c,c!==e.value&&(e.value=c),a.defaultValue==null&&e.defaultValue!==c&&(e.defaultValue=c)),f!=null&&(e.defaultValue=""+f)}function $t(e){var a=e.textContent;a===e._wrapperState.initialValue&&a!==""&&a!==null&&(e.value=a)}function Kt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function q(e,a){return e==null||e==="http://www.w3.org/1999/xhtml"?Kt(a):e==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ye,xt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,f,m){MSApp.execUnsafeLocalFunction(function(){return e(a,c,f,m)})}:e})(function(e,a){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=a;else{for(ye=ye||document.createElement("div"),ye.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;a.firstChild;)e.appendChild(a.firstChild)}});function pt(e,a){if(a){var c=e.firstChild;if(c&&c===e.lastChild&&c.nodeType===3){c.nodeValue=a;return}}e.textContent=a}var rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rn=["Webkit","ms","Moz","O"];Object.keys(rt).forEach(function(e){rn.forEach(function(a){a=a+e.charAt(0).toUpperCase()+e.substring(1),rt[a]=rt[e]})});function ot(e,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||rt.hasOwnProperty(e)&&rt[e]?(""+a).trim():a+"px"}function en(e,a){e=e.style;for(var c in a)if(a.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=ot(c,a[c],f);c==="float"&&(c="cssFloat"),f?e.setProperty(c,m):e[c]=m}}var Wn=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pn(e,a){if(a){if(Wn[e]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(i(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(i(61))}if(a.style!=null&&typeof a.style!="object")throw Error(i(62))}}function Q(e,a){if(e.indexOf("-")===-1)return typeof a.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var de=null;function qe(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ae=null,vt=null,lt=null;function Ut(e){if(e=Di(e)){if(typeof ae!="function")throw Error(i(280));var a=e.stateNode;a&&(a=Uo(a),ae(e.stateNode,e.type,a))}}function tt(e){vt?lt?lt.push(e):lt=[e]:vt=e}function Ke(){if(vt){var e=vt,a=lt;if(lt=vt=null,Ut(e),a)for(e=0;e<a.length;e++)Ut(a[e])}}function it(e,a){return e(a)}function ct(){}var ut=!1;function Yt(e,a,c){if(ut)return e(a,c);ut=!0;try{return it(e,a,c)}finally{ut=!1,(vt!==null||lt!==null)&&(ct(),Ke())}}function wt(e,a){var c=e.stateNode;if(c===null)return null;var f=Uo(c);if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(e=e.type,f=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!f;break e;default:e=!1}if(e)return null;if(c&&typeof c!="function")throw Error(i(231,a,typeof c));return c}var A=!1;if(d)try{var le={};Object.defineProperty(le,"passive",{get:function(){A=!0}}),window.addEventListener("test",le,le),window.removeEventListener("test",le,le)}catch{A=!1}function Me(e,a,c,f,m,g,w,M,_){var X=Array.prototype.slice.call(arguments,3);try{a.apply(c,X)}catch(me){this.onError(me)}}var Oe=!1,$e=null,nt=!1,Je=null,kt={onError:function(e){Oe=!0,$e=e}};function at(e,a,c,f,m,g,w,M,_){Oe=!1,$e=null,Me.apply(kt,arguments)}function Fn(e,a,c,f,m,g,w,M,_){if(at.apply(this,arguments),Oe){if(Oe){var X=$e;Oe=!1,$e=null}else throw Error(i(198));nt||(nt=!0,Je=X)}}function Wt(e){var a=e,c=e;if(e.alternate)for(;a.return;)a=a.return;else{e=a;do a=e,(a.flags&4098)!==0&&(c=a.return),e=a.return;while(e)}return a.tag===3?c:null}function gn(e){if(e.tag===13){var a=e.memoizedState;if(a===null&&(e=e.alternate,e!==null&&(a=e.memoizedState)),a!==null)return a.dehydrated}return null}function qn(e){if(Wt(e)!==e)throw Error(i(188))}function zr(e){var a=e.alternate;if(!a){if(a=Wt(e),a===null)throw Error(i(188));return a!==e?null:e}for(var c=e,f=a;;){var m=c.return;if(m===null)break;var g=m.alternate;if(g===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===c)return qn(m),e;if(g===f)return qn(m),a;g=g.sibling}throw Error(i(188))}if(c.return!==f.return)c=m,f=g;else{for(var w=!1,M=m.child;M;){if(M===c){w=!0,c=m,f=g;break}if(M===f){w=!0,f=m,c=g;break}M=M.sibling}if(!w){for(M=g.child;M;){if(M===c){w=!0,c=g,f=m;break}if(M===f){w=!0,f=g,c=m;break}M=M.sibling}if(!w)throw Error(i(189))}}if(c.alternate!==f)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?e:a}function Ur(e){return e=zr(e),e!==null?Wa(e):null}function Wa(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var a=Wa(e);if(a!==null)return a;e=e.sibling}return null}var Nr=s.unstable_scheduleCallback,va=s.unstable_cancelCallback,di=s.unstable_shouldYield,fi=s.unstable_requestPaint,Jt=s.unstable_now,Br=s.unstable_getCurrentPriorityLevel,$r=s.unstable_ImmediatePriority,Ha=s.unstable_UserBlockingPriority,kr=s.unstable_NormalPriority,xs=s.unstable_LowPriority,ws=s.unstable_IdlePriority,ya=null,Jn=null;function bs(e){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(ya,e,void 0,(e.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:Ss,pi=Math.log,Ka=Math.LN2;function Ss(e){return e>>>=0,e===0?32:31-(pi(e)/Ka|0)|0}var aa=64,S=4194304;function T(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function H(e,a){var c=e.pendingLanes;if(c===0)return 0;var f=0,m=e.suspendedLanes,g=e.pingedLanes,w=c&268435455;if(w!==0){var M=w&~m;M!==0?f=T(M):(g&=w,g!==0&&(f=T(g)))}else w=c&~m,w!==0?f=T(w):g!==0&&(f=T(g));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,g=a&-a,m>=g||m===16&&(g&4194240)!==0))return a;if((f&4)!==0&&(f|=c&16),a=e.entangledLanes,a!==0)for(e=e.entanglements,a&=f;0<a;)c=31-Hn(a),m=1<<c,f|=e[c],a&=~m;return f}function se(e,a){switch(e){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Re(e,a){for(var c=e.suspendedLanes,f=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes;0<g;){var w=31-Hn(g),M=1<<w,_=m[w];_===-1?((M&c)===0||(M&f)!==0)&&(m[w]=se(M,a)):_<=a&&(e.expiredLanes|=M),g&=~M}}function mt(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vt(){var e=aa;return aa<<=1,(aa&4194240)===0&&(aa=64),e}function _n(e){for(var a=[],c=0;31>c;c++)a.push(e);return a}function P(e,a,c){e.pendingLanes|=a,a!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,a=31-Hn(a),e[a]=c}function U(e,a){var c=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;var f=e.eventTimes;for(e=e.expirationTimes;0<c;){var m=31-Hn(c),g=1<<m;a[m]=0,f[m]=-1,e[m]=-1,c&=~g}}function ce(e,a){var c=e.entangledLanes|=a;for(e=e.entanglements;c;){var f=31-Hn(c),m=1<<f;m&a|e[f]&a&&(e[f]|=a),c&=~m}}var pe=0;function Dt(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var dt,ht,vn,ln,jr,mn=!1,Tt=[],_t=null,On=null,yn=null,Cr=new Map,Va=new Map,Er=[],dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kf(e,a){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":yn=null;break;case"pointerover":case"pointerout":Cr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Va.delete(a.pointerId)}}function mi(e,a,c,f,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:g,targetContainers:[m]},a!==null&&(a=Di(a),a!==null&&ht(a)),e):(e.eventSystemFlags|=f,a=e.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),e)}function fy(e,a,c,f,m){switch(a){case"focusin":return _t=mi(_t,e,a,c,f,m),!0;case"dragenter":return On=mi(On,e,a,c,f,m),!0;case"mouseover":return yn=mi(yn,e,a,c,f,m),!0;case"pointerover":var g=m.pointerId;return Cr.set(g,mi(Cr.get(g)||null,e,a,c,f,m)),!0;case"gotpointercapture":return g=m.pointerId,Va.set(g,mi(Va.get(g)||null,e,a,c,f,m)),!0}return!1}function jf(e){var a=Qa(e.target);if(a!==null){var c=Wt(a);if(c!==null){if(a=c.tag,a===13){if(a=gn(c),a!==null){e.blockedOn=a,jr(e.priority,function(){vn(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){e.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Co(e){if(e.blockedOn!==null)return!1;for(var a=e.targetContainers;0<a.length;){var c=kc(e.domEventName,e.eventSystemFlags,a[0],e.nativeEvent);if(c===null){c=e.nativeEvent;var f=new c.constructor(c.type,c);de=f,c.target.dispatchEvent(f),de=null}else return a=Di(c),a!==null&&ht(a),e.blockedOn=c,!1;a.shift()}return!0}function Cf(e,a,c){Co(e)&&c.delete(a)}function py(){mn=!1,_t!==null&&Co(_t)&&(_t=null),On!==null&&Co(On)&&(On=null),yn!==null&&Co(yn)&&(yn=null),Cr.forEach(Cf),Va.forEach(Cf)}function hi(e,a){e.blockedOn===a&&(e.blockedOn=null,mn||(mn=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,py)))}function gi(e){function a(m){return hi(m,e)}if(0<Tt.length){hi(Tt[0],e);for(var c=1;c<Tt.length;c++){var f=Tt[c];f.blockedOn===e&&(f.blockedOn=null)}}for(_t!==null&&hi(_t,e),On!==null&&hi(On,e),yn!==null&&hi(yn,e),Cr.forEach(a),Va.forEach(a),c=0;c<Er.length;c++)f=Er[c],f.blockedOn===e&&(f.blockedOn=null);for(;0<Er.length&&(c=Er[0],c.blockedOn===null);)jf(c),c.blockedOn===null&&Er.shift()}var Ns=B.ReactCurrentBatchConfig,Eo=!0;function my(e,a,c,f){var m=pe,g=Ns.transition;Ns.transition=null;try{pe=1,Nc(e,a,c,f)}finally{pe=m,Ns.transition=g}}function hy(e,a,c,f){var m=pe,g=Ns.transition;Ns.transition=null;try{pe=4,Nc(e,a,c,f)}finally{pe=m,Ns.transition=g}}function Nc(e,a,c,f){if(Eo){var m=kc(e,a,c,f);if(m===null)Bc(e,a,f,Do,c),kf(e,f);else if(fy(m,e,a,c,f))f.stopPropagation();else if(kf(e,f),a&4&&-1<dy.indexOf(e)){for(;m!==null;){var g=Di(m);if(g!==null&&dt(g),g=kc(e,a,c,f),g===null&&Bc(e,a,f,Do,c),g===m)break;m=g}m!==null&&f.stopPropagation()}else Bc(e,a,f,null,c)}}var Do=null;function kc(e,a,c,f){if(Do=null,e=qe(f),e=Qa(e),e!==null)if(a=Wt(e),a===null)e=null;else if(c=a.tag,c===13){if(e=gn(a),e!==null)return e;e=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;e=null}else a!==e&&(e=null);return Do=e,null}function Ef(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Br()){case $r:return 1;case Ha:return 4;case kr:case xs:return 16;case ws:return 536870912;default:return 16}default:return 16}}var xa=null,jc=null,To=null;function Df(){if(To)return To;var e,a=jc,c=a.length,f,m="value"in xa?xa.value:xa.textContent,g=m.length;for(e=0;e<c&&a[e]===m[e];e++);var w=c-e;for(f=1;f<=w&&a[c-f]===m[g-f];f++);return To=m.slice(e,1<f?1-f:void 0)}function Mo(e){var a=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&a===13&&(e=13)):e=a,e===10&&(e=13),32<=e||e===13?e:0}function Ro(){return!0}function Tf(){return!1}function ir(e){function a(c,f,m,g,w){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var M in e)e.hasOwnProperty(M)&&(c=e[M],this[M]=c?c(g):g[M]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ro:Tf,this.isPropagationStopped=Tf,this}return F(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),a}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=ir(ks),vi=F({},ks,{view:0,detail:0}),gy=ir(vi),Ec,Dc,yi,Po=F({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yi&&(yi&&e.type==="mousemove"?(Ec=e.screenX-yi.screenX,Dc=e.screenY-yi.screenY):Dc=Ec=0,yi=e),Ec)},movementY:function(e){return"movementY"in e?e.movementY:Dc}}),Mf=ir(Po),vy=F({},Po,{dataTransfer:0}),yy=ir(vy),xy=F({},vi,{relatedTarget:0}),Tc=ir(xy),wy=F({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),by=ir(wy),Sy=F({},ks,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ny=ir(Sy),ky=F({},ks,{data:0}),Rf=ir(ky),jy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(e){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(e):(e=Ey[e])?!!a[e]:!1}function Mc(){return Dy}var Ty=F({},vi,{key:function(e){if(e.key){var a=jy[e.key]||e.key;if(a!=="Unidentified")return a}return e.type==="keypress"?(e=Mo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mc,charCode:function(e){return e.type==="keypress"?Mo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),My=ir(Ty),Ry=F({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pf=ir(Ry),Py=F({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mc}),_y=ir(Py),Oy=F({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ay=ir(Oy),Iy=F({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ly=ir(Iy),Fy=[9,13,27,32],Rc=d&&"CompositionEvent"in window,xi=null;d&&"documentMode"in document&&(xi=document.documentMode);var zy=d&&"TextEvent"in window&&!xi,_f=d&&(!Rc||xi&&8<xi&&11>=xi),Of=" ",Af=!1;function If(e,a){switch(e){case"keyup":return Fy.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var js=!1;function Uy(e,a){switch(e){case"compositionend":return Lf(a);case"keypress":return a.which!==32?null:(Af=!0,Of);case"textInput":return e=a.data,e===Of&&Af?null:e;default:return null}}function By(e,a){if(js)return e==="compositionend"||!Rc&&If(e,a)?(e=Df(),To=jc=xa=null,js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _f&&a.locale!=="ko"?null:a.data;default:return null}}var $y={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a==="input"?!!$y[e.type]:a==="textarea"}function zf(e,a,c,f){tt(f),a=Lo(a,"onChange"),0<a.length&&(c=new Cc("onChange","change",null,c,f),e.push({event:c,listeners:a}))}var wi=null,bi=null;function Yy(e){rp(e,0)}function _o(e){var a=Ms(e);if(Xe(a))return e}function Wy(e,a){if(e==="change")return a}var Uf=!1;if(d){var Pc;if(d){var _c="oninput"in document;if(!_c){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),_c=typeof Bf.oninput=="function"}Pc=_c}else Pc=!1;Uf=Pc&&(!document.documentMode||9<document.documentMode)}function $f(){wi&&(wi.detachEvent("onpropertychange",Yf),bi=wi=null)}function Yf(e){if(e.propertyName==="value"&&_o(bi)){var a=[];zf(a,bi,e,qe(e)),Yt(Yy,a)}}function Hy(e,a,c){e==="focusin"?($f(),wi=a,bi=c,wi.attachEvent("onpropertychange",Yf)):e==="focusout"&&$f()}function Ky(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _o(bi)}function Vy(e,a){if(e==="click")return _o(a)}function Qy(e,a){if(e==="input"||e==="change")return _o(a)}function Gy(e,a){return e===a&&(e!==0||1/e===1/a)||e!==e&&a!==a}var Dr=typeof Object.is=="function"?Object.is:Gy;function Si(e,a){if(Dr(e,a))return!0;if(typeof e!="object"||e===null||typeof a!="object"||a===null)return!1;var c=Object.keys(e),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!p.call(a,m)||!Dr(e[m],a[m]))return!1}return!0}function Wf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hf(e,a){var c=Wf(e);e=0;for(var f;c;){if(c.nodeType===3){if(f=e+c.textContent.length,e<=a&&f>=a)return{node:c,offset:a-e};e=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Wf(c)}}function Kf(e,a){return e&&a?e===a?!0:e&&e.nodeType===3?!1:a&&a.nodeType===3?Kf(e,a.parentNode):"contains"in e?e.contains(a):e.compareDocumentPosition?!!(e.compareDocumentPosition(a)&16):!1:!1}function Vf(){for(var e=window,a=gt();a instanceof e.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)e=a.contentWindow;else break;a=gt(e.document)}return a}function Oc(e){var a=e&&e.nodeName&&e.nodeName.toLowerCase();return a&&(a==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||a==="textarea"||e.contentEditable==="true")}function qy(e){var a=Vf(),c=e.focusedElem,f=e.selectionRange;if(a!==c&&c&&c.ownerDocument&&Kf(c.ownerDocument.documentElement,c)){if(f!==null&&Oc(c)){if(a=f.start,e=f.end,e===void 0&&(e=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(e,c.value.length);else if(e=(a=c.ownerDocument||document)&&a.defaultView||window,e.getSelection){e=e.getSelection();var m=c.textContent.length,g=Math.min(f.start,m);f=f.end===void 0?g:Math.min(f.end,m),!e.extend&&g>f&&(m=f,f=g,g=m),m=Hf(c,g);var w=Hf(c,f);m&&w&&(e.rangeCount!==1||e.anchorNode!==m.node||e.anchorOffset!==m.offset||e.focusNode!==w.node||e.focusOffset!==w.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),e.removeAllRanges(),g>f?(e.addRange(a),e.extend(w.node,w.offset)):(a.setEnd(w.node,w.offset),e.addRange(a)))}}for(a=[],e=c;e=e.parentNode;)e.nodeType===1&&a.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)e=a[c],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jy=d&&"documentMode"in document&&11>=document.documentMode,Cs=null,Ac=null,Ni=null,Ic=!1;function Qf(e,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ic||Cs==null||Cs!==gt(f)||(f=Cs,"selectionStart"in f&&Oc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ni&&Si(Ni,f)||(Ni=f,f=Lo(Ac,"onSelect"),0<f.length&&(a=new Cc("onSelect","select",null,a,c),e.push({event:a,listeners:f}),a.target=Cs)))}function Oo(e,a){var c={};return c[e.toLowerCase()]=a.toLowerCase(),c["Webkit"+e]="webkit"+a,c["Moz"+e]="moz"+a,c}var Es={animationend:Oo("Animation","AnimationEnd"),animationiteration:Oo("Animation","AnimationIteration"),animationstart:Oo("Animation","AnimationStart"),transitionend:Oo("Transition","TransitionEnd")},Lc={},Gf={};d&&(Gf=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Ao(e){if(Lc[e])return Lc[e];if(!Es[e])return e;var a=Es[e],c;for(c in a)if(a.hasOwnProperty(c)&&c in Gf)return Lc[e]=a[c];return e}var qf=Ao("animationend"),Jf=Ao("animationiteration"),Xf=Ao("animationstart"),Zf=Ao("transitionend"),ep=new Map,tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wa(e,a){ep.set(e,a),l(a,[e])}for(var Fc=0;Fc<tp.length;Fc++){var zc=tp[Fc],Xy=zc.toLowerCase(),Zy=zc[0].toUpperCase()+zc.slice(1);wa(Xy,"on"+Zy)}wa(qf,"onAnimationEnd"),wa(Jf,"onAnimationIteration"),wa(Xf,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(Zf,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ex=new Set("cancel close invalid load scroll toggle".split(" ").concat(ki));function np(e,a,c){var f=e.type||"unknown-event";e.currentTarget=c,Fn(f,a,void 0,e),e.currentTarget=null}function rp(e,a){a=(a&4)!==0;for(var c=0;c<e.length;c++){var f=e[c],m=f.event;f=f.listeners;e:{var g=void 0;if(a)for(var w=f.length-1;0<=w;w--){var M=f[w],_=M.instance,X=M.currentTarget;if(M=M.listener,_!==g&&m.isPropagationStopped())break e;np(m,M,X),g=_}else for(w=0;w<f.length;w++){if(M=f[w],_=M.instance,X=M.currentTarget,M=M.listener,_!==g&&m.isPropagationStopped())break e;np(m,M,X),g=_}}}if(nt)throw e=Je,nt=!1,Je=null,e}function Xt(e,a){var c=a[Vc];c===void 0&&(c=a[Vc]=new Set);var f=e+"__bubble";c.has(f)||(ap(a,e,2,!1),c.add(f))}function Uc(e,a,c){var f=0;a&&(f|=4),ap(c,e,f,a)}var Io="_reactListening"+Math.random().toString(36).slice(2);function ji(e){if(!e[Io]){e[Io]=!0,r.forEach(function(c){c!=="selectionchange"&&(ex.has(c)||Uc(c,!1,e),Uc(c,!0,e))});var a=e.nodeType===9?e:e.ownerDocument;a===null||a[Io]||(a[Io]=!0,Uc("selectionchange",!1,a))}}function ap(e,a,c,f){switch(Ef(a)){case 1:var m=my;break;case 4:m=hy;break;default:m=Nc}c=m.bind(null,a,c,e),m=void 0,!A||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?e.addEventListener(a,c,{capture:!0,passive:m}):e.addEventListener(a,c,!0):m!==void 0?e.addEventListener(a,c,{passive:m}):e.addEventListener(a,c,!1)}function Bc(e,a,c,f,m){var g=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var M=f.stateNode.containerInfo;if(M===m||M.nodeType===8&&M.parentNode===m)break;if(w===4)for(w=f.return;w!==null;){var _=w.tag;if((_===3||_===4)&&(_=w.stateNode.containerInfo,_===m||_.nodeType===8&&_.parentNode===m))return;w=w.return}for(;M!==null;){if(w=Qa(M),w===null)return;if(_=w.tag,_===5||_===6){f=g=w;continue e}M=M.parentNode}}f=f.return}Yt(function(){var X=g,me=qe(c),ge=[];e:{var fe=ep.get(e);if(fe!==void 0){var _e=Cc,Ue=e;switch(e){case"keypress":if(Mo(c)===0)break e;case"keydown":case"keyup":_e=My;break;case"focusin":Ue="focus",_e=Tc;break;case"focusout":Ue="blur",_e=Tc;break;case"beforeblur":case"afterblur":_e=Tc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Mf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=_y;break;case qf:case Jf:case Xf:_e=by;break;case Zf:_e=Ay;break;case"scroll":_e=gy;break;case"wheel":_e=Ly;break;case"copy":case"cut":case"paste":_e=Ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Pf}var Be=(a&4)!==0,dn=!Be&&e==="scroll",V=Be?fe!==null?fe+"Capture":null:fe;Be=[];for(var z=X,G;z!==null;){G=z;var Ne=G.stateNode;if(G.tag===5&&Ne!==null&&(G=Ne,V!==null&&(Ne=wt(z,V),Ne!=null&&Be.push(Ci(z,Ne,G)))),dn)break;z=z.return}0<Be.length&&(fe=new _e(fe,Ue,null,c,me),ge.push({event:fe,listeners:Be}))}}if((a&7)===0){e:{if(fe=e==="mouseover"||e==="pointerover",_e=e==="mouseout"||e==="pointerout",fe&&c!==de&&(Ue=c.relatedTarget||c.fromElement)&&(Qa(Ue)||Ue[sa]))break e;if((_e||fe)&&(fe=me.window===me?me:(fe=me.ownerDocument)?fe.defaultView||fe.parentWindow:window,_e?(Ue=c.relatedTarget||c.toElement,_e=X,Ue=Ue?Qa(Ue):null,Ue!==null&&(dn=Wt(Ue),Ue!==dn||Ue.tag!==5&&Ue.tag!==6)&&(Ue=null)):(_e=null,Ue=X),_e!==Ue)){if(Be=Mf,Ne="onMouseLeave",V="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(Be=Pf,Ne="onPointerLeave",V="onPointerEnter",z="pointer"),dn=_e==null?fe:Ms(_e),G=Ue==null?fe:Ms(Ue),fe=new Be(Ne,z+"leave",_e,c,me),fe.target=dn,fe.relatedTarget=G,Ne=null,Qa(me)===X&&(Be=new Be(V,z+"enter",Ue,c,me),Be.target=G,Be.relatedTarget=dn,Ne=Be),dn=Ne,_e&&Ue)t:{for(Be=_e,V=Ue,z=0,G=Be;G;G=Ds(G))z++;for(G=0,Ne=V;Ne;Ne=Ds(Ne))G++;for(;0<z-G;)Be=Ds(Be),z--;for(;0<G-z;)V=Ds(V),G--;for(;z--;){if(Be===V||V!==null&&Be===V.alternate)break t;Be=Ds(Be),V=Ds(V)}Be=null}else Be=null;_e!==null&&sp(ge,fe,_e,Be,!1),Ue!==null&&dn!==null&&sp(ge,dn,Ue,Be,!0)}}e:{if(fe=X?Ms(X):window,_e=fe.nodeName&&fe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&fe.type==="file")var Ye=Wy;else if(Ff(fe))if(Uf)Ye=Qy;else{Ye=Ky;var Qe=Hy}else(_e=fe.nodeName)&&_e.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&(Ye=Vy);if(Ye&&(Ye=Ye(e,X))){zf(ge,Ye,c,me);break e}Qe&&Qe(e,fe,X),e==="focusout"&&(Qe=fe._wrapperState)&&Qe.controlled&&fe.type==="number"&&We(fe,"number",fe.value)}switch(Qe=X?Ms(X):window,e){case"focusin":(Ff(Qe)||Qe.contentEditable==="true")&&(Cs=Qe,Ac=X,Ni=null);break;case"focusout":Ni=Ac=Cs=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Qf(ge,c,me);break;case"selectionchange":if(Jy)break;case"keydown":case"keyup":Qf(ge,c,me)}var Ge;if(Rc)e:{switch(e){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else js?If(e,c)&&(et="onCompositionEnd"):e==="keydown"&&c.keyCode===229&&(et="onCompositionStart");et&&(_f&&c.locale!=="ko"&&(js||et!=="onCompositionStart"?et==="onCompositionEnd"&&js&&(Ge=Df()):(xa=me,jc="value"in xa?xa.value:xa.textContent,js=!0)),Qe=Lo(X,et),0<Qe.length&&(et=new Rf(et,e,null,c,me),ge.push({event:et,listeners:Qe}),Ge?et.data=Ge:(Ge=Lf(c),Ge!==null&&(et.data=Ge)))),(Ge=zy?Uy(e,c):By(e,c))&&(X=Lo(X,"onBeforeInput"),0<X.length&&(me=new Rf("onBeforeInput","beforeinput",null,c,me),ge.push({event:me,listeners:X}),me.data=Ge))}rp(ge,a)})}function Ci(e,a,c){return{instance:e,listener:a,currentTarget:c}}function Lo(e,a){for(var c=a+"Capture",f=[];e!==null;){var m=e,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=wt(e,c),g!=null&&f.unshift(Ci(e,g,m)),g=wt(e,a),g!=null&&f.push(Ci(e,g,m))),e=e.return}return f}function Ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sp(e,a,c,f,m){for(var g=a._reactName,w=[];c!==null&&c!==f;){var M=c,_=M.alternate,X=M.stateNode;if(_!==null&&_===f)break;M.tag===5&&X!==null&&(M=X,m?(_=wt(c,g),_!=null&&w.unshift(Ci(c,_,M))):m||(_=wt(c,g),_!=null&&w.push(Ci(c,_,M)))),c=c.return}w.length!==0&&e.push({event:a,listeners:w})}var tx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function ip(e){return(typeof e=="string"?e:""+e).replace(tx,`
`).replace(nx,"")}function Fo(e,a,c){if(a=ip(a),ip(e)!==a&&c)throw Error(i(425))}function zo(){}var $c=null,Yc=null;function Wc(e,a){return e==="textarea"||e==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(e){return op.resolve(null).then(e).catch(sx)}:Hc;function sx(e){setTimeout(function(){throw e})}function Kc(e,a){var c=a,f=0;do{var m=c.nextSibling;if(e.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){e.removeChild(m),gi(a);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);gi(a)}function ba(e){for(;e!=null;e=e.nextSibling){var a=e.nodeType;if(a===1||a===3)break;if(a===8){if(a=e.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return e}function lp(e){e=e.previousSibling;for(var a=0;e;){if(e.nodeType===8){var c=e.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return e;a--}else c==="/$"&&a++}e=e.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Ts,Ei="__reactProps$"+Ts,sa="__reactContainer$"+Ts,Vc="__reactEvents$"+Ts,ix="__reactListeners$"+Ts,ox="__reactHandles$"+Ts;function Qa(e){var a=e[Yr];if(a)return a;for(var c=e.parentNode;c;){if(a=c[sa]||c[Yr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(e=lp(e);e!==null;){if(c=e[Yr])return c;e=lp(e)}return a}e=c,c=e.parentNode}return null}function Di(e){return e=e[Yr]||e[sa],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ms(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Uo(e){return e[Ei]||null}var Qc=[],Rs=-1;function Sa(e){return{current:e}}function Zt(e){0>Rs||(e.current=Qc[Rs],Qc[Rs]=null,Rs--)}function Qt(e,a){Rs++,Qc[Rs]=e.current,e.current=a}var Na={},zn=Sa(Na),Xn=Sa(!1),Ga=Na;function Ps(e,a){var c=e.type.contextTypes;if(!c)return Na;var f=e.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in c)m[g]=a[g];return f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=m),m}function Zn(e){return e=e.childContextTypes,e!=null}function Bo(){Zt(Xn),Zt(zn)}function cp(e,a,c){if(zn.current!==Na)throw Error(i(168));Qt(zn,a),Qt(Xn,c)}function up(e,a,c){var f=e.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(i(108,Le(e)||"Unknown",m));return F({},c,f)}function $o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Na,Ga=zn.current,Qt(zn,e),Qt(Xn,Xn.current),!0}function dp(e,a,c){var f=e.stateNode;if(!f)throw Error(i(169));c?(e=up(e,a,Ga),f.__reactInternalMemoizedMergedChildContext=e,Zt(Xn),Zt(zn),Qt(zn,e)):Zt(Xn),Qt(Xn,c)}var ia=null,Yo=!1,Gc=!1;function fp(e){ia===null?ia=[e]:ia.push(e)}function lx(e){Yo=!0,fp(e)}function ka(){if(!Gc&&ia!==null){Gc=!0;var e=0,a=pe;try{var c=ia;for(pe=1;e<c.length;e++){var f=c[e];do f=f(!0);while(f!==null)}ia=null,Yo=!1}catch(m){throw ia!==null&&(ia=ia.slice(e+1)),Nr($r,ka),m}finally{pe=a,Gc=!1}}return null}var _s=[],Os=0,Wo=null,Ho=0,dr=[],fr=0,qa=null,oa=1,la="";function Ja(e,a){_s[Os++]=Ho,_s[Os++]=Wo,Wo=e,Ho=a}function pp(e,a,c){dr[fr++]=oa,dr[fr++]=la,dr[fr++]=qa,qa=e;var f=oa;e=la;var m=32-Hn(f)-1;f&=~(1<<m),c+=1;var g=32-Hn(a)+m;if(30<g){var w=m-m%5;g=(f&(1<<w)-1).toString(32),f>>=w,m-=w,oa=1<<32-Hn(a)+m|c<<m|f,la=g+e}else oa=1<<g|c<<m|f,la=e}function qc(e){e.return!==null&&(Ja(e,1),pp(e,1,0))}function Jc(e){for(;e===Wo;)Wo=_s[--Os],_s[Os]=null,Ho=_s[--Os],_s[Os]=null;for(;e===qa;)qa=dr[--fr],dr[fr]=null,la=dr[--fr],dr[fr]=null,oa=dr[--fr],dr[fr]=null}var or=null,lr=null,tn=!1,Tr=null;function mp(e,a){var c=gr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=e,a=e.deletions,a===null?(e.deletions=[c],e.flags|=16):a.push(c)}function hp(e,a){switch(e.tag){case 5:var c=e.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(e.stateNode=a,or=e,lr=ba(a.firstChild),!0):!1;case 6:return a=e.pendingProps===""||a.nodeType!==3?null:a,a!==null?(e.stateNode=a,or=e,lr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=qa!==null?{id:oa,overflow:la}:null,e.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=gr(18,null,null,0),c.stateNode=a,c.return=e,e.child=c,or=e,lr=null,!0):!1;default:return!1}}function Xc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zc(e){if(tn){var a=lr;if(a){var c=a;if(!hp(e,a)){if(Xc(e))throw Error(i(418));a=ba(c.nextSibling);var f=or;a&&hp(e,a)?mp(f,c):(e.flags=e.flags&-4097|2,tn=!1,or=e)}}else{if(Xc(e))throw Error(i(418));e.flags=e.flags&-4097|2,tn=!1,or=e}}}function gp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;or=e}function Ko(e){if(e!==or)return!1;if(!tn)return gp(e),tn=!0,!1;var a;if((a=e.tag!==3)&&!(a=e.tag!==5)&&(a=e.type,a=a!=="head"&&a!=="body"&&!Wc(e.type,e.memoizedProps)),a&&(a=lr)){if(Xc(e))throw vp(),Error(i(418));for(;a;)mp(e,a),a=ba(a.nextSibling)}if(gp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,a=0;e;){if(e.nodeType===8){var c=e.data;if(c==="/$"){if(a===0){lr=ba(e.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}e=e.nextSibling}lr=null}}else lr=or?ba(e.stateNode.nextSibling):null;return!0}function vp(){for(var e=lr;e;)e=ba(e.nextSibling)}function As(){lr=or=null,tn=!1}function eu(e){Tr===null?Tr=[e]:Tr.push(e)}var cx=B.ReactCurrentBatchConfig;function Ti(e,a,c){if(e=c.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(i(309));var f=c.stateNode}if(!f)throw Error(i(147,e));var m=f,g=""+e;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===g?a.ref:(a=function(w){var M=m.refs;w===null?delete M[g]:M[g]=w},a._stringRef=g,a)}if(typeof e!="string")throw Error(i(284));if(!c._owner)throw Error(i(290,e))}return e}function Vo(e,a){throw e=Object.prototype.toString.call(a),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e))}function yp(e){var a=e._init;return a(e._payload)}function xp(e){function a(V,z){if(e){var G=V.deletions;G===null?(V.deletions=[z],V.flags|=16):G.push(z)}}function c(V,z){if(!e)return null;for(;z!==null;)a(V,z),z=z.sibling;return null}function f(V,z){for(V=new Map;z!==null;)z.key!==null?V.set(z.key,z):V.set(z.index,z),z=z.sibling;return V}function m(V,z){return V=Pa(V,z),V.index=0,V.sibling=null,V}function g(V,z,G){return V.index=G,e?(G=V.alternate,G!==null?(G=G.index,G<z?(V.flags|=2,z):G):(V.flags|=2,z)):(V.flags|=1048576,z)}function w(V){return e&&V.alternate===null&&(V.flags|=2),V}function M(V,z,G,Ne){return z===null||z.tag!==6?(z=Hu(G,V.mode,Ne),z.return=V,z):(z=m(z,G),z.return=V,z)}function _(V,z,G,Ne){var Ye=G.type;return Ye===J?me(V,z,G.props.children,Ne,G.key):z!==null&&(z.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===be&&yp(Ye)===z.type)?(Ne=m(z,G.props),Ne.ref=Ti(V,z,G),Ne.return=V,Ne):(Ne=vl(G.type,G.key,G.props,null,V.mode,Ne),Ne.ref=Ti(V,z,G),Ne.return=V,Ne)}function X(V,z,G,Ne){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=Ku(G,V.mode,Ne),z.return=V,z):(z=m(z,G.children||[]),z.return=V,z)}function me(V,z,G,Ne,Ye){return z===null||z.tag!==7?(z=ss(G,V.mode,Ne,Ye),z.return=V,z):(z=m(z,G),z.return=V,z)}function ge(V,z,G){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Hu(""+z,V.mode,G),z.return=V,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Z:return G=vl(z.type,z.key,z.props,null,V.mode,G),G.ref=Ti(V,null,z),G.return=V,G;case ee:return z=Ku(z,V.mode,G),z.return=V,z;case be:var Ne=z._init;return ge(V,Ne(z._payload),G)}if(st(z)||W(z))return z=ss(z,V.mode,G,null),z.return=V,z;Vo(V,z)}return null}function fe(V,z,G,Ne){var Ye=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return Ye!==null?null:M(V,z,""+G,Ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Z:return G.key===Ye?_(V,z,G,Ne):null;case ee:return G.key===Ye?X(V,z,G,Ne):null;case be:return Ye=G._init,fe(V,z,Ye(G._payload),Ne)}if(st(G)||W(G))return Ye!==null?null:me(V,z,G,Ne,null);Vo(V,G)}return null}function _e(V,z,G,Ne,Ye){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return V=V.get(G)||null,M(z,V,""+Ne,Ye);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case Z:return V=V.get(Ne.key===null?G:Ne.key)||null,_(z,V,Ne,Ye);case ee:return V=V.get(Ne.key===null?G:Ne.key)||null,X(z,V,Ne,Ye);case be:var Qe=Ne._init;return _e(V,z,G,Qe(Ne._payload),Ye)}if(st(Ne)||W(Ne))return V=V.get(G)||null,me(z,V,Ne,Ye,null);Vo(z,Ne)}return null}function Ue(V,z,G,Ne){for(var Ye=null,Qe=null,Ge=z,et=z=0,jn=null;Ge!==null&&et<G.length;et++){Ge.index>et?(jn=Ge,Ge=null):jn=Ge.sibling;var Ot=fe(V,Ge,G[et],Ne);if(Ot===null){Ge===null&&(Ge=jn);break}e&&Ge&&Ot.alternate===null&&a(V,Ge),z=g(Ot,z,et),Qe===null?Ye=Ot:Qe.sibling=Ot,Qe=Ot,Ge=jn}if(et===G.length)return c(V,Ge),tn&&Ja(V,et),Ye;if(Ge===null){for(;et<G.length;et++)Ge=ge(V,G[et],Ne),Ge!==null&&(z=g(Ge,z,et),Qe===null?Ye=Ge:Qe.sibling=Ge,Qe=Ge);return tn&&Ja(V,et),Ye}for(Ge=f(V,Ge);et<G.length;et++)jn=_e(Ge,V,et,G[et],Ne),jn!==null&&(e&&jn.alternate!==null&&Ge.delete(jn.key===null?et:jn.key),z=g(jn,z,et),Qe===null?Ye=jn:Qe.sibling=jn,Qe=jn);return e&&Ge.forEach(function(_a){return a(V,_a)}),tn&&Ja(V,et),Ye}function Be(V,z,G,Ne){var Ye=W(G);if(typeof Ye!="function")throw Error(i(150));if(G=Ye.call(G),G==null)throw Error(i(151));for(var Qe=Ye=null,Ge=z,et=z=0,jn=null,Ot=G.next();Ge!==null&&!Ot.done;et++,Ot=G.next()){Ge.index>et?(jn=Ge,Ge=null):jn=Ge.sibling;var _a=fe(V,Ge,Ot.value,Ne);if(_a===null){Ge===null&&(Ge=jn);break}e&&Ge&&_a.alternate===null&&a(V,Ge),z=g(_a,z,et),Qe===null?Ye=_a:Qe.sibling=_a,Qe=_a,Ge=jn}if(Ot.done)return c(V,Ge),tn&&Ja(V,et),Ye;if(Ge===null){for(;!Ot.done;et++,Ot=G.next())Ot=ge(V,Ot.value,Ne),Ot!==null&&(z=g(Ot,z,et),Qe===null?Ye=Ot:Qe.sibling=Ot,Qe=Ot);return tn&&Ja(V,et),Ye}for(Ge=f(V,Ge);!Ot.done;et++,Ot=G.next())Ot=_e(Ge,V,et,Ot.value,Ne),Ot!==null&&(e&&Ot.alternate!==null&&Ge.delete(Ot.key===null?et:Ot.key),z=g(Ot,z,et),Qe===null?Ye=Ot:Qe.sibling=Ot,Qe=Ot);return e&&Ge.forEach(function($x){return a(V,$x)}),tn&&Ja(V,et),Ye}function dn(V,z,G,Ne){if(typeof G=="object"&&G!==null&&G.type===J&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Z:e:{for(var Ye=G.key,Qe=z;Qe!==null;){if(Qe.key===Ye){if(Ye=G.type,Ye===J){if(Qe.tag===7){c(V,Qe.sibling),z=m(Qe,G.props.children),z.return=V,V=z;break e}}else if(Qe.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===be&&yp(Ye)===Qe.type){c(V,Qe.sibling),z=m(Qe,G.props),z.ref=Ti(V,Qe,G),z.return=V,V=z;break e}c(V,Qe);break}else a(V,Qe);Qe=Qe.sibling}G.type===J?(z=ss(G.props.children,V.mode,Ne,G.key),z.return=V,V=z):(Ne=vl(G.type,G.key,G.props,null,V.mode,Ne),Ne.ref=Ti(V,z,G),Ne.return=V,V=Ne)}return w(V);case ee:e:{for(Qe=G.key;z!==null;){if(z.key===Qe)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){c(V,z.sibling),z=m(z,G.children||[]),z.return=V,V=z;break e}else{c(V,z);break}else a(V,z);z=z.sibling}z=Ku(G,V.mode,Ne),z.return=V,V=z}return w(V);case be:return Qe=G._init,dn(V,z,Qe(G._payload),Ne)}if(st(G))return Ue(V,z,G,Ne);if(W(G))return Be(V,z,G,Ne);Vo(V,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,z!==null&&z.tag===6?(c(V,z.sibling),z=m(z,G),z.return=V,V=z):(c(V,z),z=Hu(G,V.mode,Ne),z.return=V,V=z),w(V)):c(V,z)}return dn}var Is=xp(!0),wp=xp(!1),Qo=Sa(null),Go=null,Ls=null,tu=null;function nu(){tu=Ls=Go=null}function ru(e){var a=Qo.current;Zt(Qo),e._currentValue=a}function au(e,a,c){for(;e!==null;){var f=e.alternate;if((e.childLanes&a)!==a?(e.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),e===c)break;e=e.return}}function Fs(e,a){Go=e,tu=Ls=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&a)!==0&&(er=!0),e.firstContext=null)}function pr(e){var a=e._currentValue;if(tu!==e)if(e={context:e,memoizedValue:a,next:null},Ls===null){if(Go===null)throw Error(i(308));Ls=e,Go.dependencies={lanes:0,firstContext:e}}else Ls=Ls.next=e;return a}var Xa=null;function su(e){Xa===null?Xa=[e]:Xa.push(e)}function bp(e,a,c,f){var m=a.interleaved;return m===null?(c.next=c,su(a)):(c.next=m.next,m.next=c),a.interleaved=c,ca(e,f)}function ca(e,a){e.lanes|=a;var c=e.alternate;for(c!==null&&(c.lanes|=a),c=e,e=e.return;e!==null;)e.childLanes|=a,c=e.alternate,c!==null&&(c.childLanes|=a),c=e,e=e.return;return c.tag===3?c.stateNode:null}var ja=!1;function iu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sp(e,a){e=e.updateQueue,a.updateQueue===e&&(a.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ua(e,a){return{eventTime:e,lane:a,tag:0,payload:null,callback:null,next:null}}function Ca(e,a,c){var f=e.updateQueue;if(f===null)return null;if(f=f.shared,(Mt&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,ca(e,c)}return m=f.interleaved,m===null?(a.next=a,su(f)):(a.next=m.next,m.next=a),f.interleaved=a,ca(e,c)}function qo(e,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var f=a.lanes;f&=e.pendingLanes,c|=f,a.lanes=c,ce(e,c)}}function Np(e,a){var c=e.updateQueue,f=e.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var w={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};g===null?m=g=w:g=g.next=w,c=c.next}while(c!==null);g===null?m=g=a:g=g.next=a}else m=g=a;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:f.shared,effects:f.effects},e.updateQueue=c;return}e=c.lastBaseUpdate,e===null?c.firstBaseUpdate=a:e.next=a,c.lastBaseUpdate=a}function Jo(e,a,c,f){var m=e.updateQueue;ja=!1;var g=m.firstBaseUpdate,w=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var _=M,X=_.next;_.next=null,w===null?g=X:w.next=X,w=_;var me=e.alternate;me!==null&&(me=me.updateQueue,M=me.lastBaseUpdate,M!==w&&(M===null?me.firstBaseUpdate=X:M.next=X,me.lastBaseUpdate=_))}if(g!==null){var ge=m.baseState;w=0,me=X=_=null,M=g;do{var fe=M.lane,_e=M.eventTime;if((f&fe)===fe){me!==null&&(me=me.next={eventTime:_e,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var Ue=e,Be=M;switch(fe=a,_e=c,Be.tag){case 1:if(Ue=Be.payload,typeof Ue=="function"){ge=Ue.call(_e,ge,fe);break e}ge=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Be.payload,fe=typeof Ue=="function"?Ue.call(_e,ge,fe):Ue,fe==null)break e;ge=F({},ge,fe);break e;case 2:ja=!0}}M.callback!==null&&M.lane!==0&&(e.flags|=64,fe=m.effects,fe===null?m.effects=[M]:fe.push(M))}else _e={eventTime:_e,lane:fe,tag:M.tag,payload:M.payload,callback:M.callback,next:null},me===null?(X=me=_e,_=ge):me=me.next=_e,w|=fe;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;fe=M,M=fe.next,fe.next=null,m.lastBaseUpdate=fe,m.shared.pending=null}}while(!0);if(me===null&&(_=ge),m.baseState=_,m.firstBaseUpdate=X,m.lastBaseUpdate=me,a=m.shared.interleaved,a!==null){m=a;do w|=m.lane,m=m.next;while(m!==a)}else g===null&&(m.shared.lanes=0);ts|=w,e.lanes=w,e.memoizedState=ge}}function kp(e,a,c){if(e=a.effects,a.effects=null,e!==null)for(a=0;a<e.length;a++){var f=e[a],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(i(191,m));m.call(f)}}}var Mi={},Wr=Sa(Mi),Ri=Sa(Mi),Pi=Sa(Mi);function Za(e){if(e===Mi)throw Error(i(174));return e}function ou(e,a){switch(Qt(Pi,a),Qt(Ri,e),Qt(Wr,Mi),e=a.nodeType,e){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:q(null,"");break;default:e=e===8?a.parentNode:a,a=e.namespaceURI||null,e=e.tagName,a=q(a,e)}Zt(Wr),Qt(Wr,a)}function zs(){Zt(Wr),Zt(Ri),Zt(Pi)}function jp(e){Za(Pi.current);var a=Za(Wr.current),c=q(a,e.type);a!==c&&(Qt(Ri,e),Qt(Wr,c))}function lu(e){Ri.current===e&&(Zt(Wr),Zt(Ri))}var an=Sa(0);function Xo(e){for(var a=e;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var cu=[];function uu(){for(var e=0;e<cu.length;e++)cu[e]._workInProgressVersionPrimary=null;cu.length=0}var Zo=B.ReactCurrentDispatcher,du=B.ReactCurrentBatchConfig,es=0,sn=null,xn=null,Nn=null,el=!1,_i=!1,Oi=0,ux=0;function Un(){throw Error(i(321))}function fu(e,a){if(a===null)return!1;for(var c=0;c<a.length&&c<e.length;c++)if(!Dr(e[c],a[c]))return!1;return!0}function pu(e,a,c,f,m,g){if(es=g,sn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Zo.current=e===null||e.memoizedState===null?mx:hx,e=c(f,m),_i){g=0;do{if(_i=!1,Oi=0,25<=g)throw Error(i(301));g+=1,Nn=xn=null,a.updateQueue=null,Zo.current=gx,e=c(f,m)}while(_i)}if(Zo.current=rl,a=xn!==null&&xn.next!==null,es=0,Nn=xn=sn=null,el=!1,a)throw Error(i(300));return e}function mu(){var e=Oi!==0;return Oi=0,e}function Hr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?sn.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function mr(){if(xn===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=xn.next;var a=Nn===null?sn.memoizedState:Nn.next;if(a!==null)Nn=a,xn=e;else{if(e===null)throw Error(i(310));xn=e,e={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Nn===null?sn.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}function Ai(e,a){return typeof a=="function"?a(e):a}function hu(e){var a=mr(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=e;var f=xn,m=f.baseQueue,g=c.pending;if(g!==null){if(m!==null){var w=m.next;m.next=g.next,g.next=w}f.baseQueue=m=g,c.pending=null}if(m!==null){g=m.next,f=f.baseState;var M=w=null,_=null,X=g;do{var me=X.lane;if((es&me)===me)_!==null&&(_=_.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:e(f,X.action);else{var ge={lane:me,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};_===null?(M=_=ge,w=f):_=_.next=ge,sn.lanes|=me,ts|=me}X=X.next}while(X!==null&&X!==g);_===null?w=f:_.next=M,Dr(f,a.memoizedState)||(er=!0),a.memoizedState=f,a.baseState=w,a.baseQueue=_,c.lastRenderedState=f}if(e=c.interleaved,e!==null){m=e;do g=m.lane,sn.lanes|=g,ts|=g,m=m.next;while(m!==e)}else m===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function gu(e){var a=mr(),c=a.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=e;var f=c.dispatch,m=c.pending,g=a.memoizedState;if(m!==null){c.pending=null;var w=m=m.next;do g=e(g,w.action),w=w.next;while(w!==m);Dr(g,a.memoizedState)||(er=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),c.lastRenderedState=g}return[g,f]}function Cp(){}function Ep(e,a){var c=sn,f=mr(),m=a(),g=!Dr(f.memoizedState,m);if(g&&(f.memoizedState=m,er=!0),f=f.queue,vu(Mp.bind(null,c,f,e),[e]),f.getSnapshot!==a||g||Nn!==null&&Nn.memoizedState.tag&1){if(c.flags|=2048,Ii(9,Tp.bind(null,c,f,m,a),void 0,null),kn===null)throw Error(i(349));(es&30)!==0||Dp(c,a,m)}return m}function Dp(e,a,c){e.flags|=16384,e={getSnapshot:a,value:c},a=sn.updateQueue,a===null?(a={lastEffect:null,stores:null},sn.updateQueue=a,a.stores=[e]):(c=a.stores,c===null?a.stores=[e]:c.push(e))}function Tp(e,a,c,f){a.value=c,a.getSnapshot=f,Rp(a)&&Pp(e)}function Mp(e,a,c){return c(function(){Rp(a)&&Pp(e)})}function Rp(e){var a=e.getSnapshot;e=e.value;try{var c=a();return!Dr(e,c)}catch{return!0}}function Pp(e){var a=ca(e,1);a!==null&&_r(a,e,1,-1)}function _p(e){var a=Hr();return typeof e=="function"&&(e=e()),a.memoizedState=a.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:e},a.queue=e,e=e.dispatch=px.bind(null,sn,e),[a.memoizedState,e]}function Ii(e,a,c,f){return e={tag:e,create:a,destroy:c,deps:f,next:null},a=sn.updateQueue,a===null?(a={lastEffect:null,stores:null},sn.updateQueue=a,a.lastEffect=e.next=e):(c=a.lastEffect,c===null?a.lastEffect=e.next=e:(f=c.next,c.next=e,e.next=f,a.lastEffect=e)),e}function Op(){return mr().memoizedState}function tl(e,a,c,f){var m=Hr();sn.flags|=e,m.memoizedState=Ii(1|a,c,void 0,f===void 0?null:f)}function nl(e,a,c,f){var m=mr();f=f===void 0?null:f;var g=void 0;if(xn!==null){var w=xn.memoizedState;if(g=w.destroy,f!==null&&fu(f,w.deps)){m.memoizedState=Ii(a,c,g,f);return}}sn.flags|=e,m.memoizedState=Ii(1|a,c,g,f)}function Ap(e,a){return tl(8390656,8,e,a)}function vu(e,a){return nl(2048,8,e,a)}function Ip(e,a){return nl(4,2,e,a)}function Lp(e,a){return nl(4,4,e,a)}function Fp(e,a){if(typeof a=="function")return e=e(),a(e),function(){a(null)};if(a!=null)return e=e(),a.current=e,function(){a.current=null}}function zp(e,a,c){return c=c!=null?c.concat([e]):null,nl(4,4,Fp.bind(null,a,e),c)}function yu(){}function Up(e,a){var c=mr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&fu(a,f[1])?f[0]:(c.memoizedState=[e,a],e)}function Bp(e,a){var c=mr();a=a===void 0?null:a;var f=c.memoizedState;return f!==null&&a!==null&&fu(a,f[1])?f[0]:(e=e(),c.memoizedState=[e,a],e)}function $p(e,a,c){return(es&21)===0?(e.baseState&&(e.baseState=!1,er=!0),e.memoizedState=c):(Dr(c,a)||(c=Vt(),sn.lanes|=c,ts|=c,e.baseState=!0),a)}function dx(e,a){var c=pe;pe=c!==0&&4>c?c:4,e(!0);var f=du.transition;du.transition={};try{e(!1),a()}finally{pe=c,du.transition=f}}function Yp(){return mr().memoizedState}function fx(e,a,c){var f=Ma(e);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Wp(e))Hp(a,c);else if(c=bp(e,a,c,f),c!==null){var m=Vn();_r(c,e,f,m),Kp(c,a,f)}}function px(e,a,c){var f=Ma(e),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Wp(e))Hp(a,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var w=a.lastRenderedState,M=g(w,c);if(m.hasEagerState=!0,m.eagerState=M,Dr(M,w)){var _=a.interleaved;_===null?(m.next=m,su(a)):(m.next=_.next,_.next=m),a.interleaved=m;return}}catch{}c=bp(e,a,m,f),c!==null&&(m=Vn(),_r(c,e,f,m),Kp(c,a,f))}}function Wp(e){var a=e.alternate;return e===sn||a!==null&&a===sn}function Hp(e,a){_i=el=!0;var c=e.pending;c===null?a.next=a:(a.next=c.next,c.next=a),e.pending=a}function Kp(e,a,c){if((c&4194240)!==0){var f=a.lanes;f&=e.pendingLanes,c|=f,a.lanes=c,ce(e,c)}}var rl={readContext:pr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},mx={readContext:pr,useCallback:function(e,a){return Hr().memoizedState=[e,a===void 0?null:a],e},useContext:pr,useEffect:Ap,useImperativeHandle:function(e,a,c){return c=c!=null?c.concat([e]):null,tl(4194308,4,Fp.bind(null,a,e),c)},useLayoutEffect:function(e,a){return tl(4194308,4,e,a)},useInsertionEffect:function(e,a){return tl(4,2,e,a)},useMemo:function(e,a){var c=Hr();return a=a===void 0?null:a,e=e(),c.memoizedState=[e,a],e},useReducer:function(e,a,c){var f=Hr();return a=c!==void 0?c(a):a,f.memoizedState=f.baseState=a,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},f.queue=e,e=e.dispatch=fx.bind(null,sn,e),[f.memoizedState,e]},useRef:function(e){var a=Hr();return e={current:e},a.memoizedState=e},useState:_p,useDebugValue:yu,useDeferredValue:function(e){return Hr().memoizedState=e},useTransition:function(){var e=_p(!1),a=e[0];return e=dx.bind(null,e[1]),Hr().memoizedState=e,[a,e]},useMutableSource:function(){},useSyncExternalStore:function(e,a,c){var f=sn,m=Hr();if(tn){if(c===void 0)throw Error(i(407));c=c()}else{if(c=a(),kn===null)throw Error(i(349));(es&30)!==0||Dp(f,a,c)}m.memoizedState=c;var g={value:c,getSnapshot:a};return m.queue=g,Ap(Mp.bind(null,f,g,e),[e]),f.flags|=2048,Ii(9,Tp.bind(null,f,g,c,a),void 0,null),c},useId:function(){var e=Hr(),a=kn.identifierPrefix;if(tn){var c=la,f=oa;c=(f&~(1<<32-Hn(f)-1)).toString(32)+c,a=":"+a+"R"+c,c=Oi++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=ux++,a=":"+a+"r"+c.toString(32)+":";return e.memoizedState=a},unstable_isNewReconciler:!1},hx={readContext:pr,useCallback:Up,useContext:pr,useEffect:vu,useImperativeHandle:zp,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:Bp,useReducer:hu,useRef:Op,useState:function(){return hu(Ai)},useDebugValue:yu,useDeferredValue:function(e){var a=mr();return $p(a,xn.memoizedState,e)},useTransition:function(){var e=hu(Ai)[0],a=mr().memoizedState;return[e,a]},useMutableSource:Cp,useSyncExternalStore:Ep,useId:Yp,unstable_isNewReconciler:!1},gx={readContext:pr,useCallback:Up,useContext:pr,useEffect:vu,useImperativeHandle:zp,useInsertionEffect:Ip,useLayoutEffect:Lp,useMemo:Bp,useReducer:gu,useRef:Op,useState:function(){return gu(Ai)},useDebugValue:yu,useDeferredValue:function(e){var a=mr();return xn===null?a.memoizedState=e:$p(a,xn.memoizedState,e)},useTransition:function(){var e=gu(Ai)[0],a=mr().memoizedState;return[e,a]},useMutableSource:Cp,useSyncExternalStore:Ep,useId:Yp,unstable_isNewReconciler:!1};function Mr(e,a){if(e&&e.defaultProps){a=F({},a),e=e.defaultProps;for(var c in e)a[c]===void 0&&(a[c]=e[c]);return a}return a}function xu(e,a,c,f){a=e.memoizedState,c=c(f,a),c=c==null?a:F({},a,c),e.memoizedState=c,e.lanes===0&&(e.updateQueue.baseState=c)}var al={isMounted:function(e){return(e=e._reactInternals)?Wt(e)===e:!1},enqueueSetState:function(e,a,c){e=e._reactInternals;var f=Vn(),m=Ma(e),g=ua(f,m);g.payload=a,c!=null&&(g.callback=c),a=Ca(e,g,m),a!==null&&(_r(a,e,m,f),qo(a,e,m))},enqueueReplaceState:function(e,a,c){e=e._reactInternals;var f=Vn(),m=Ma(e),g=ua(f,m);g.tag=1,g.payload=a,c!=null&&(g.callback=c),a=Ca(e,g,m),a!==null&&(_r(a,e,m,f),qo(a,e,m))},enqueueForceUpdate:function(e,a){e=e._reactInternals;var c=Vn(),f=Ma(e),m=ua(c,f);m.tag=2,a!=null&&(m.callback=a),a=Ca(e,m,f),a!==null&&(_r(a,e,f,c),qo(a,e,f))}};function Vp(e,a,c,f,m,g,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(f,g,w):a.prototype&&a.prototype.isPureReactComponent?!Si(c,f)||!Si(m,g):!0}function Qp(e,a,c){var f=!1,m=Na,g=a.contextType;return typeof g=="object"&&g!==null?g=pr(g):(m=Zn(a)?Ga:zn.current,f=a.contextTypes,g=(f=f!=null)?Ps(e,m):Na),a=new a(c,g),e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=al,e.stateNode=a,a._reactInternals=e,f&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=m,e.__reactInternalMemoizedMaskedChildContext=g),a}function Gp(e,a,c,f){e=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==e&&al.enqueueReplaceState(a,a.state,null)}function wu(e,a,c,f){var m=e.stateNode;m.props=c,m.state=e.memoizedState,m.refs={},iu(e);var g=a.contextType;typeof g=="object"&&g!==null?m.context=pr(g):(g=Zn(a)?Ga:zn.current,m.context=Ps(e,g)),m.state=e.memoizedState,g=a.getDerivedStateFromProps,typeof g=="function"&&(xu(e,a,g,c),m.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&al.enqueueReplaceState(m,m.state,null),Jo(e,c,m,f),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308)}function Us(e,a){try{var c="",f=a;do c+=je(f),f=f.return;while(f);var m=c}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:e,source:a,stack:m,digest:null}}function bu(e,a,c){return{value:e,source:null,stack:c??null,digest:a??null}}function Su(e,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var vx=typeof WeakMap=="function"?WeakMap:Map;function qp(e,a,c){c=ua(-1,c),c.tag=3,c.payload={element:null};var f=a.value;return c.callback=function(){dl||(dl=!0,Lu=f),Su(e,a)},c}function Jp(e,a,c){c=ua(-1,c),c.tag=3;var f=e.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;c.payload=function(){return f(m)},c.callback=function(){Su(e,a)}}var g=e.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(c.callback=function(){Su(e,a),typeof f!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var w=a.stack;this.componentDidCatch(a.value,{componentStack:w!==null?w:""})}),c}function Xp(e,a,c){var f=e.pingCache;if(f===null){f=e.pingCache=new vx;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(c)||(m.add(c),e=Rx.bind(null,e,a,c),a.then(e,e))}function Zp(e){do{var a;if((a=e.tag===13)&&(a=e.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return e;e=e.return}while(e!==null);return null}function em(e,a,c,f,m){return(e.mode&1)===0?(e===a?e.flags|=65536:(e.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=ua(-1,1),a.tag=2,Ca(c,a,1))),c.lanes|=1),e):(e.flags|=65536,e.lanes=m,e)}var yx=B.ReactCurrentOwner,er=!1;function Kn(e,a,c,f){a.child=e===null?wp(a,null,c,f):Is(a,e.child,c,f)}function tm(e,a,c,f,m){c=c.render;var g=a.ref;return Fs(a,m),f=pu(e,a,c,f,g,m),c=mu(),e!==null&&!er?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~m,da(e,a,m)):(tn&&c&&qc(a),a.flags|=1,Kn(e,a,f,m),a.child)}function nm(e,a,c,f,m){if(e===null){var g=c.type;return typeof g=="function"&&!Wu(g)&&g.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=g,rm(e,a,g,f,m)):(e=vl(c.type,null,f,a,a.mode,m),e.ref=a.ref,e.return=a,a.child=e)}if(g=e.child,(e.lanes&m)===0){var w=g.memoizedProps;if(c=c.compare,c=c!==null?c:Si,c(w,f)&&e.ref===a.ref)return da(e,a,m)}return a.flags|=1,e=Pa(g,f),e.ref=a.ref,e.return=a,a.child=e}function rm(e,a,c,f,m){if(e!==null){var g=e.memoizedProps;if(Si(g,f)&&e.ref===a.ref)if(er=!1,a.pendingProps=f=g,(e.lanes&m)!==0)(e.flags&131072)!==0&&(er=!0);else return a.lanes=e.lanes,da(e,a,m)}return Nu(e,a,c,f,m)}function am(e,a,c){var f=a.pendingProps,m=f.children,g=e!==null?e.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt($s,cr),cr|=c;else{if((c&1073741824)===0)return e=g!==null?g.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:e,cachePool:null,transitions:null},a.updateQueue=null,Qt($s,cr),cr|=e,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=g!==null?g.baseLanes:c,Qt($s,cr),cr|=f}else g!==null?(f=g.baseLanes|c,a.memoizedState=null):f=c,Qt($s,cr),cr|=f;return Kn(e,a,m,c),a.child}function sm(e,a){var c=a.ref;(e===null&&c!==null||e!==null&&e.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Nu(e,a,c,f,m){var g=Zn(c)?Ga:zn.current;return g=Ps(a,g),Fs(a,m),c=pu(e,a,c,f,g,m),f=mu(),e!==null&&!er?(a.updateQueue=e.updateQueue,a.flags&=-2053,e.lanes&=~m,da(e,a,m)):(tn&&f&&qc(a),a.flags|=1,Kn(e,a,c,m),a.child)}function im(e,a,c,f,m){if(Zn(c)){var g=!0;$o(a)}else g=!1;if(Fs(a,m),a.stateNode===null)il(e,a),Qp(a,c,f),wu(a,c,f,m),f=!0;else if(e===null){var w=a.stateNode,M=a.memoizedProps;w.props=M;var _=w.context,X=c.contextType;typeof X=="object"&&X!==null?X=pr(X):(X=Zn(c)?Ga:zn.current,X=Ps(a,X));var me=c.getDerivedStateFromProps,ge=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function";ge||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==f||_!==X)&&Gp(a,w,f,X),ja=!1;var fe=a.memoizedState;w.state=fe,Jo(a,f,w,m),_=a.memoizedState,M!==f||fe!==_||Xn.current||ja?(typeof me=="function"&&(xu(a,c,me,f),_=a.memoizedState),(M=ja||Vp(a,c,M,f,fe,_,X))?(ge||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(a.flags|=4194308)):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=_),w.props=f,w.state=_,w.context=X,f=M):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{w=a.stateNode,Sp(e,a),M=a.memoizedProps,X=a.type===a.elementType?M:Mr(a.type,M),w.props=X,ge=a.pendingProps,fe=w.context,_=c.contextType,typeof _=="object"&&_!==null?_=pr(_):(_=Zn(c)?Ga:zn.current,_=Ps(a,_));var _e=c.getDerivedStateFromProps;(me=typeof _e=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==ge||fe!==_)&&Gp(a,w,f,_),ja=!1,fe=a.memoizedState,w.state=fe,Jo(a,f,w,m);var Ue=a.memoizedState;M!==ge||fe!==Ue||Xn.current||ja?(typeof _e=="function"&&(xu(a,c,_e,f),Ue=a.memoizedState),(X=ja||Vp(a,c,X,f,fe,Ue,_)||!1)?(me||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,Ue,_),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,Ue,_)),typeof w.componentDidUpdate=="function"&&(a.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof w.componentDidUpdate!="function"||M===e.memoizedProps&&fe===e.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&fe===e.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ue),w.props=f,w.state=Ue,w.context=_,f=X):(typeof w.componentDidUpdate!="function"||M===e.memoizedProps&&fe===e.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&fe===e.memoizedState||(a.flags|=1024),f=!1)}return ku(e,a,c,f,g,m)}function ku(e,a,c,f,m,g){sm(e,a);var w=(a.flags&128)!==0;if(!f&&!w)return m&&dp(a,c,!1),da(e,a,g);f=a.stateNode,yx.current=a;var M=w&&typeof c.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,e!==null&&w?(a.child=Is(a,e.child,null,g),a.child=Is(a,null,M,g)):Kn(e,a,M,g),a.memoizedState=f.state,m&&dp(a,c,!0),a.child}function om(e){var a=e.stateNode;a.pendingContext?cp(e,a.pendingContext,a.pendingContext!==a.context):a.context&&cp(e,a.context,!1),ou(e,a.containerInfo)}function lm(e,a,c,f,m){return As(),eu(m),a.flags|=256,Kn(e,a,c,f),a.child}var ju={dehydrated:null,treeContext:null,retryLane:0};function Cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function cm(e,a,c){var f=a.pendingProps,m=an.current,g=!1,w=(a.flags&128)!==0,M;if((M=w)||(M=e!==null&&e.memoizedState===null?!1:(m&2)!==0),M?(g=!0,a.flags&=-129):(e===null||e.memoizedState!==null)&&(m|=1),Qt(an,m&1),e===null)return Zc(a),e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((a.mode&1)===0?a.lanes=1:e.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(w=f.children,e=f.fallback,g?(f=a.mode,g=a.child,w={mode:"hidden",children:w},(f&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=yl(w,f,0,null),e=ss(e,f,c,null),g.return=a,e.return=a,g.sibling=e,a.child=g,a.child.memoizedState=Cu(c),a.memoizedState=ju,e):Eu(a,w));if(m=e.memoizedState,m!==null&&(M=m.dehydrated,M!==null))return xx(e,a,w,f,M,m,c);if(g){g=f.fallback,w=a.mode,m=e.child,M=m.sibling;var _={mode:"hidden",children:f.children};return(w&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=_,a.deletions=null):(f=Pa(m,_),f.subtreeFlags=m.subtreeFlags&14680064),M!==null?g=Pa(M,g):(g=ss(g,w,c,null),g.flags|=2),g.return=a,f.return=a,f.sibling=g,a.child=f,f=g,g=a.child,w=e.child.memoizedState,w=w===null?Cu(c):{baseLanes:w.baseLanes|c,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=e.childLanes&~c,a.memoizedState=ju,f}return g=e.child,e=g.sibling,f=Pa(g,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=c),f.return=a,f.sibling=null,e!==null&&(c=a.deletions,c===null?(a.deletions=[e],a.flags|=16):c.push(e)),a.child=f,a.memoizedState=null,f}function Eu(e,a){return a=yl({mode:"visible",children:a},e.mode,0,null),a.return=e,e.child=a}function sl(e,a,c,f){return f!==null&&eu(f),Is(a,e.child,null,c),e=Eu(a,a.pendingProps.children),e.flags|=2,a.memoizedState=null,e}function xx(e,a,c,f,m,g,w){if(c)return a.flags&256?(a.flags&=-257,f=bu(Error(i(422))),sl(e,a,w,f)):a.memoizedState!==null?(a.child=e.child,a.flags|=128,null):(g=f.fallback,m=a.mode,f=yl({mode:"visible",children:f.children},m,0,null),g=ss(g,m,w,null),g.flags|=2,f.return=a,g.return=a,f.sibling=g,a.child=f,(a.mode&1)!==0&&Is(a,e.child,null,w),a.child.memoizedState=Cu(w),a.memoizedState=ju,g);if((a.mode&1)===0)return sl(e,a,w,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var M=f.dgst;return f=M,g=Error(i(419)),f=bu(g,f,void 0),sl(e,a,w,f)}if(M=(w&e.childLanes)!==0,er||M){if(f=kn,f!==null){switch(w&-w){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|w))!==0?0:m,m!==0&&m!==g.retryLane&&(g.retryLane=m,ca(e,m),_r(f,e,m,-1))}return Yu(),f=bu(Error(i(421))),sl(e,a,w,f)}return m.data==="$?"?(a.flags|=128,a.child=e.child,a=Px.bind(null,e),m._reactRetry=a,null):(e=g.treeContext,lr=ba(m.nextSibling),or=a,tn=!0,Tr=null,e!==null&&(dr[fr++]=oa,dr[fr++]=la,dr[fr++]=qa,oa=e.id,la=e.overflow,qa=a),a=Eu(a,f.children),a.flags|=4096,a)}function um(e,a,c){e.lanes|=a;var f=e.alternate;f!==null&&(f.lanes|=a),au(e.return,a,c)}function Du(e,a,c,f,m){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=f,g.tail=c,g.tailMode=m)}function dm(e,a,c){var f=a.pendingProps,m=f.revealOrder,g=f.tail;if(Kn(e,a,f.children,c),f=an.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=a.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&um(e,c,a);else if(e.tag===19)um(e,c,a);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break e;for(;e.sibling===null;){if(e.return===null||e.return===a)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}f&=1}if(Qt(an,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(c=a.child,m=null;c!==null;)e=c.alternate,e!==null&&Xo(e)===null&&(m=c),c=c.sibling;c=m,c===null?(m=a.child,a.child=null):(m=c.sibling,c.sibling=null),Du(a,!1,m,c,g);break;case"backwards":for(c=null,m=a.child,a.child=null;m!==null;){if(e=m.alternate,e!==null&&Xo(e)===null){a.child=m;break}e=m.sibling,m.sibling=c,c=m,m=e}Du(a,!0,c,null,g);break;case"together":Du(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function il(e,a){(a.mode&1)===0&&e!==null&&(e.alternate=null,a.alternate=null,a.flags|=2)}function da(e,a,c){if(e!==null&&(a.dependencies=e.dependencies),ts|=a.lanes,(c&a.childLanes)===0)return null;if(e!==null&&a.child!==e.child)throw Error(i(153));if(a.child!==null){for(e=a.child,c=Pa(e,e.pendingProps),a.child=c,c.return=a;e.sibling!==null;)e=e.sibling,c=c.sibling=Pa(e,e.pendingProps),c.return=a;c.sibling=null}return a.child}function wx(e,a,c){switch(a.tag){case 3:om(a),As();break;case 5:jp(a);break;case 1:Zn(a.type)&&$o(a);break;case 4:ou(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;Qt(Qo,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Qt(an,an.current&1),a.flags|=128,null):(c&a.child.childLanes)!==0?cm(e,a,c):(Qt(an,an.current&1),e=da(e,a,c),e!==null?e.sibling:null);Qt(an,an.current&1);break;case 19:if(f=(c&a.childLanes)!==0,(e.flags&128)!==0){if(f)return dm(e,a,c);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Qt(an,an.current),f)break;return null;case 22:case 23:return a.lanes=0,am(e,a,c)}return da(e,a,c)}var fm,Tu,pm,mm;fm=function(e,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Tu=function(){},pm=function(e,a,c,f){var m=e.memoizedProps;if(m!==f){e=a.stateNode,Za(Wr.current);var g=null;switch(c){case"input":m=Nt(e,m),f=Nt(e,f),g=[];break;case"select":m=F({},m,{value:void 0}),f=F({},f,{value:void 0}),g=[];break;case"textarea":m=At(e,m),f=At(e,f),g=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(e.onclick=zo)}Pn(c,f);var w;c=null;for(X in m)if(!f.hasOwnProperty(X)&&m.hasOwnProperty(X)&&m[X]!=null)if(X==="style"){var M=m[X];for(w in M)M.hasOwnProperty(w)&&(c||(c={}),c[w]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(t.hasOwnProperty(X)?g||(g=[]):(g=g||[]).push(X,null));for(X in f){var _=f[X];if(M=m?.[X],f.hasOwnProperty(X)&&_!==M&&(_!=null||M!=null))if(X==="style")if(M){for(w in M)!M.hasOwnProperty(w)||_&&_.hasOwnProperty(w)||(c||(c={}),c[w]="");for(w in _)_.hasOwnProperty(w)&&M[w]!==_[w]&&(c||(c={}),c[w]=_[w])}else c||(g||(g=[]),g.push(X,c)),c=_;else X==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,M=M?M.__html:void 0,_!=null&&M!==_&&(g=g||[]).push(X,_)):X==="children"?typeof _!="string"&&typeof _!="number"||(g=g||[]).push(X,""+_):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(t.hasOwnProperty(X)?(_!=null&&X==="onScroll"&&Xt("scroll",e),g||M===_||(g=[])):(g=g||[]).push(X,_))}c&&(g=g||[]).push("style",c);var X=g;(a.updateQueue=X)&&(a.flags|=4)}},mm=function(e,a,c,f){c!==f&&(a.flags|=4)};function Li(e,a){if(!tn)switch(e.tailMode){case"hidden":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?e.tail=null:c.sibling=null;break;case"collapsed":c=e.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||e.tail===null?e.tail=null:e.tail.sibling=null:f.sibling=null}}function Bn(e){var a=e.alternate!==null&&e.alternate.child===e.child,c=0,f=0;if(a)for(var m=e.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=f,e.childLanes=c,a}function bx(e,a,c){var f=a.pendingProps;switch(Jc(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(a),null;case 1:return Zn(a.type)&&Bo(),Bn(a),null;case 3:return f=a.stateNode,zs(),Zt(Xn),Zt(zn),uu(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(e===null||e.child===null)&&(Ko(a)?a.flags|=4:e===null||e.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Tr!==null&&(Uu(Tr),Tr=null))),Tu(e,a),Bn(a),null;case 5:lu(a);var m=Za(Pi.current);if(c=a.type,e!==null&&a.stateNode!=null)pm(e,a,c,f,m),e.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(i(166));return Bn(a),null}if(e=Za(Wr.current),Ko(a)){f=a.stateNode,c=a.type;var g=a.memoizedProps;switch(f[Yr]=a,f[Ei]=g,e=(a.mode&1)!==0,c){case"dialog":Xt("cancel",f),Xt("close",f);break;case"iframe":case"object":case"embed":Xt("load",f);break;case"video":case"audio":for(m=0;m<ki.length;m++)Xt(ki[m],f);break;case"source":Xt("error",f);break;case"img":case"image":case"link":Xt("error",f),Xt("load",f);break;case"details":Xt("toggle",f);break;case"input":Ze(f,g),Xt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!g.multiple},Xt("invalid",f);break;case"textarea":Bt(f,g),Xt("invalid",f)}Pn(c,g),m=null;for(var w in g)if(g.hasOwnProperty(w)){var M=g[w];w==="children"?typeof M=="string"?f.textContent!==M&&(g.suppressHydrationWarning!==!0&&Fo(f.textContent,M,e),m=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(g.suppressHydrationWarning!==!0&&Fo(f.textContent,M,e),m=["children",""+M]):t.hasOwnProperty(w)&&M!=null&&w==="onScroll"&&Xt("scroll",f)}switch(c){case"input":He(f),ft(f,g,!0);break;case"textarea":He(f),$t(f);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(f.onclick=zo)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{w=m.nodeType===9?m:m.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Kt(c)),e==="http://www.w3.org/1999/xhtml"?c==="script"?(e=w.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof f.is=="string"?e=w.createElement(c,{is:f.is}):(e=w.createElement(c),c==="select"&&(w=e,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):e=w.createElementNS(e,c),e[Yr]=a,e[Ei]=f,fm(e,a,!1,!1),a.stateNode=e;e:{switch(w=Q(c,f),c){case"dialog":Xt("cancel",e),Xt("close",e),m=f;break;case"iframe":case"object":case"embed":Xt("load",e),m=f;break;case"video":case"audio":for(m=0;m<ki.length;m++)Xt(ki[m],e);m=f;break;case"source":Xt("error",e),m=f;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),m=f;break;case"details":Xt("toggle",e),m=f;break;case"input":Ze(e,f),m=Nt(e,f),Xt("invalid",e);break;case"option":m=f;break;case"select":e._wrapperState={wasMultiple:!!f.multiple},m=F({},f,{value:void 0}),Xt("invalid",e);break;case"textarea":Bt(e,f),m=At(e,f),Xt("invalid",e);break;default:m=f}Pn(c,m),M=m;for(g in M)if(M.hasOwnProperty(g)){var _=M[g];g==="style"?en(e,_):g==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&xt(e,_)):g==="children"?typeof _=="string"?(c!=="textarea"||_!=="")&&pt(e,_):typeof _=="number"&&pt(e,""+_):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(t.hasOwnProperty(g)?_!=null&&g==="onScroll"&&Xt("scroll",e):_!=null&&Y(e,g,_,w))}switch(c){case"input":He(e),ft(e,f,!1);break;case"textarea":He(e),$t(e);break;case"option":f.value!=null&&e.setAttribute("value",""+Se(f.value));break;case"select":e.multiple=!!f.multiple,g=f.value,g!=null?Ae(e,!!f.multiple,g,!1):f.defaultValue!=null&&Ae(e,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(e.onclick=zo)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Bn(a),null;case 6:if(e&&a.stateNode!=null)mm(e,a,e.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(i(166));if(c=Za(Pi.current),Za(Wr.current),Ko(a)){if(f=a.stateNode,c=a.memoizedProps,f[Yr]=a,(g=f.nodeValue!==c)&&(e=or,e!==null))switch(e.tag){case 3:Fo(f.nodeValue,c,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fo(f.nodeValue,c,(e.mode&1)!==0)}g&&(a.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Yr]=a,a.stateNode=f}return Bn(a),null;case 13:if(Zt(an),f=a.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tn&&lr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)vp(),As(),a.flags|=98560,g=!1;else if(g=Ko(a),f!==null&&f.dehydrated!==null){if(e===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Yr]=a}else As(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bn(a),g=!1}else Tr!==null&&(Uu(Tr),Tr=null),g=!0;if(!g)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=c,a):(f=f!==null,f!==(e!==null&&e.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(e===null||(an.current&1)!==0?wn===0&&(wn=3):Yu())),a.updateQueue!==null&&(a.flags|=4),Bn(a),null);case 4:return zs(),Tu(e,a),e===null&&ji(a.stateNode.containerInfo),Bn(a),null;case 10:return ru(a.type._context),Bn(a),null;case 17:return Zn(a.type)&&Bo(),Bn(a),null;case 19:if(Zt(an),g=a.memoizedState,g===null)return Bn(a),null;if(f=(a.flags&128)!==0,w=g.rendering,w===null)if(f)Li(g,!1);else{if(wn!==0||e!==null&&(e.flags&128)!==0)for(e=a.child;e!==null;){if(w=Xo(e),w!==null){for(a.flags|=128,Li(g,!1),f=w.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=c,c=a.child;c!==null;)g=c,e=f,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=e,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,e=w.dependencies,g.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),c=c.sibling;return Qt(an,an.current&1|2),a.child}e=e.sibling}g.tail!==null&&Jt()>Ys&&(a.flags|=128,f=!0,Li(g,!1),a.lanes=4194304)}else{if(!f)if(e=Xo(w),e!==null){if(a.flags|=128,f=!0,c=e.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),Li(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!tn)return Bn(a),null}else 2*Jt()-g.renderingStartTime>Ys&&c!==1073741824&&(a.flags|=128,f=!0,Li(g,!1),a.lanes=4194304);g.isBackwards?(w.sibling=a.child,a.child=w):(c=g.last,c!==null?c.sibling=w:a.child=w,g.last=w)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Jt(),a.sibling=null,c=an.current,Qt(an,f?c&1|2:c&1),a):(Bn(a),null);case 22:case 23:return $u(),f=a.memoizedState!==null,e!==null&&e.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(cr&1073741824)!==0&&(Bn(a),a.subtreeFlags&6&&(a.flags|=8192)):Bn(a),null;case 24:return null;case 25:return null}throw Error(i(156,a.tag))}function Sx(e,a){switch(Jc(a),a.tag){case 1:return Zn(a.type)&&Bo(),e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 3:return zs(),Zt(Xn),Zt(zn),uu(),e=a.flags,(e&65536)!==0&&(e&128)===0?(a.flags=e&-65537|128,a):null;case 5:return lu(a),null;case 13:if(Zt(an),e=a.memoizedState,e!==null&&e.dehydrated!==null){if(a.alternate===null)throw Error(i(340));As()}return e=a.flags,e&65536?(a.flags=e&-65537|128,a):null;case 19:return Zt(an),null;case 4:return zs(),null;case 10:return ru(a.type._context),null;case 22:case 23:return $u(),null;case 24:return null;default:return null}}var ol=!1,$n=!1,Nx=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Bs(e,a){var c=e.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){cn(e,a,f)}else c.current=null}function Mu(e,a,c){try{c()}catch(f){cn(e,a,f)}}var hm=!1;function kx(e,a){if($c=Eo,e=Vf(),Oc(e)){if("selectionStart"in e)var c={start:e.selectionStart,end:e.selectionEnd};else e:{c=(c=e.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,g=f.focusNode;f=f.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var w=0,M=-1,_=-1,X=0,me=0,ge=e,fe=null;t:for(;;){for(var _e;ge!==c||m!==0&&ge.nodeType!==3||(M=w+m),ge!==g||f!==0&&ge.nodeType!==3||(_=w+f),ge.nodeType===3&&(w+=ge.nodeValue.length),(_e=ge.firstChild)!==null;)fe=ge,ge=_e;for(;;){if(ge===e)break t;if(fe===c&&++X===m&&(M=w),fe===g&&++me===f&&(_=w),(_e=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=_e}c=M===-1||_===-1?null:{start:M,end:_}}else c=null}c=c||{start:0,end:0}}else c=null;for(Yc={focusedElem:e,selectionRange:c},Eo=!1,Fe=a;Fe!==null;)if(a=Fe,e=a.child,(a.subtreeFlags&1028)!==0&&e!==null)e.return=a,Fe=e;else for(;Fe!==null;){a=Fe;try{var Ue=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ue!==null){var Be=Ue.memoizedProps,dn=Ue.memoizedState,V=a.stateNode,z=V.getSnapshotBeforeUpdate(a.elementType===a.type?Be:Mr(a.type,Be),dn);V.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Ne){cn(a,a.return,Ne)}if(e=a.sibling,e!==null){e.return=a.return,Fe=e;break}Fe=a.return}return Ue=hm,hm=!1,Ue}function Fi(e,a,c){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&e)===e){var g=m.destroy;m.destroy=void 0,g!==void 0&&Mu(a,c,g)}m=m.next}while(m!==f)}}function ll(e,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.create;c.destroy=f()}c=c.next}while(c!==a)}}function Ru(e){var a=e.ref;if(a!==null){var c=e.stateNode;switch(e.tag){case 5:e=c;break;default:e=c}typeof a=="function"?a(e):a.current=e}}function gm(e){var a=e.alternate;a!==null&&(e.alternate=null,gm(a)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(a=e.stateNode,a!==null&&(delete a[Yr],delete a[Ei],delete a[Vc],delete a[ix],delete a[ox])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vm(e){return e.tag===5||e.tag===3||e.tag===4}function ym(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pu(e,a,c){var f=e.tag;if(f===5||f===6)e=e.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(e,a):c.insertBefore(e,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(e,c)):(a=c,a.appendChild(e)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=zo));else if(f!==4&&(e=e.child,e!==null))for(Pu(e,a,c),e=e.sibling;e!==null;)Pu(e,a,c),e=e.sibling}function _u(e,a,c){var f=e.tag;if(f===5||f===6)e=e.stateNode,a?c.insertBefore(e,a):c.appendChild(e);else if(f!==4&&(e=e.child,e!==null))for(_u(e,a,c),e=e.sibling;e!==null;)_u(e,a,c),e=e.sibling}var An=null,Rr=!1;function Ea(e,a,c){for(c=c.child;c!==null;)xm(e,a,c),c=c.sibling}function xm(e,a,c){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(ya,c)}catch{}switch(c.tag){case 5:$n||Bs(c,a);case 6:var f=An,m=Rr;An=null,Ea(e,a,c),An=f,Rr=m,An!==null&&(Rr?(e=An,c=c.stateNode,e.nodeType===8?e.parentNode.removeChild(c):e.removeChild(c)):An.removeChild(c.stateNode));break;case 18:An!==null&&(Rr?(e=An,c=c.stateNode,e.nodeType===8?Kc(e.parentNode,c):e.nodeType===1&&Kc(e,c),gi(e)):Kc(An,c.stateNode));break;case 4:f=An,m=Rr,An=c.stateNode.containerInfo,Rr=!0,Ea(e,a,c),An=f,Rr=m;break;case 0:case 11:case 14:case 15:if(!$n&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var g=m,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Mu(c,a,w),m=m.next}while(m!==f)}Ea(e,a,c);break;case 1:if(!$n&&(Bs(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(M){cn(c,a,M)}Ea(e,a,c);break;case 21:Ea(e,a,c);break;case 22:c.mode&1?($n=(f=$n)||c.memoizedState!==null,Ea(e,a,c),$n=f):Ea(e,a,c);break;default:Ea(e,a,c)}}function wm(e){var a=e.updateQueue;if(a!==null){e.updateQueue=null;var c=e.stateNode;c===null&&(c=e.stateNode=new Nx),a.forEach(function(f){var m=_x.bind(null,e,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Pr(e,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var g=e,w=a,M=w;e:for(;M!==null;){switch(M.tag){case 5:An=M.stateNode,Rr=!1;break e;case 3:An=M.stateNode.containerInfo,Rr=!0;break e;case 4:An=M.stateNode.containerInfo,Rr=!0;break e}M=M.return}if(An===null)throw Error(i(160));xm(g,w,m),An=null,Rr=!1;var _=m.alternate;_!==null&&(_.return=null),m.return=null}catch(X){cn(m,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)bm(a,e),a=a.sibling}function bm(e,a){var c=e.alternate,f=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pr(a,e),Kr(e),f&4){try{Fi(3,e,e.return),ll(3,e)}catch(Be){cn(e,e.return,Be)}try{Fi(5,e,e.return)}catch(Be){cn(e,e.return,Be)}}break;case 1:Pr(a,e),Kr(e),f&512&&c!==null&&Bs(c,c.return);break;case 5:if(Pr(a,e),Kr(e),f&512&&c!==null&&Bs(c,c.return),e.flags&32){var m=e.stateNode;try{pt(m,"")}catch(Be){cn(e,e.return,Be)}}if(f&4&&(m=e.stateNode,m!=null)){var g=e.memoizedProps,w=c!==null?c.memoizedProps:g,M=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{M==="input"&&g.type==="radio"&&g.name!=null&&Ft(m,g),Q(M,w);var X=Q(M,g);for(w=0;w<_.length;w+=2){var me=_[w],ge=_[w+1];me==="style"?en(m,ge):me==="dangerouslySetInnerHTML"?xt(m,ge):me==="children"?pt(m,ge):Y(m,me,ge,X)}switch(M){case"input":Et(m,g);break;case"textarea":qt(m,g);break;case"select":var fe=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!g.multiple;var _e=g.value;_e!=null?Ae(m,!!g.multiple,_e,!1):fe!==!!g.multiple&&(g.defaultValue!=null?Ae(m,!!g.multiple,g.defaultValue,!0):Ae(m,!!g.multiple,g.multiple?[]:"",!1))}m[Ei]=g}catch(Be){cn(e,e.return,Be)}}break;case 6:if(Pr(a,e),Kr(e),f&4){if(e.stateNode===null)throw Error(i(162));m=e.stateNode,g=e.memoizedProps;try{m.nodeValue=g}catch(Be){cn(e,e.return,Be)}}break;case 3:if(Pr(a,e),Kr(e),f&4&&c!==null&&c.memoizedState.isDehydrated)try{gi(a.containerInfo)}catch(Be){cn(e,e.return,Be)}break;case 4:Pr(a,e),Kr(e);break;case 13:Pr(a,e),Kr(e),m=e.child,m.flags&8192&&(g=m.memoizedState!==null,m.stateNode.isHidden=g,!g||m.alternate!==null&&m.alternate.memoizedState!==null||(Iu=Jt())),f&4&&wm(e);break;case 22:if(me=c!==null&&c.memoizedState!==null,e.mode&1?($n=(X=$n)||me,Pr(a,e),$n=X):Pr(a,e),Kr(e),f&8192){if(X=e.memoizedState!==null,(e.stateNode.isHidden=X)&&!me&&(e.mode&1)!==0)for(Fe=e,me=e.child;me!==null;){for(ge=Fe=me;Fe!==null;){switch(fe=Fe,_e=fe.child,fe.tag){case 0:case 11:case 14:case 15:Fi(4,fe,fe.return);break;case 1:Bs(fe,fe.return);var Ue=fe.stateNode;if(typeof Ue.componentWillUnmount=="function"){f=fe,c=fe.return;try{a=f,Ue.props=a.memoizedProps,Ue.state=a.memoizedState,Ue.componentWillUnmount()}catch(Be){cn(f,c,Be)}}break;case 5:Bs(fe,fe.return);break;case 22:if(fe.memoizedState!==null){km(ge);continue}}_e!==null?(_e.return=fe,Fe=_e):km(ge)}me=me.sibling}e:for(me=null,ge=e;;){if(ge.tag===5){if(me===null){me=ge;try{m=ge.stateNode,X?(g=m.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(M=ge.stateNode,_=ge.memoizedProps.style,w=_!=null&&_.hasOwnProperty("display")?_.display:null,M.style.display=ot("display",w))}catch(Be){cn(e,e.return,Be)}}}else if(ge.tag===6){if(me===null)try{ge.stateNode.nodeValue=X?"":ge.memoizedProps}catch(Be){cn(e,e.return,Be)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===e)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===e)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===e)break e;me===ge&&(me=null),ge=ge.return}me===ge&&(me=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Pr(a,e),Kr(e),f&4&&wm(e);break;case 21:break;default:Pr(a,e),Kr(e)}}function Kr(e){var a=e.flags;if(a&2){try{e:{for(var c=e.return;c!==null;){if(vm(c)){var f=c;break e}c=c.return}throw Error(i(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(pt(m,""),f.flags&=-33);var g=ym(e);_u(e,g,m);break;case 3:case 4:var w=f.stateNode.containerInfo,M=ym(e);Pu(e,M,w);break;default:throw Error(i(161))}}catch(_){cn(e,e.return,_)}e.flags&=-3}a&4096&&(e.flags&=-4097)}function jx(e,a,c){Fe=e,Sm(e)}function Sm(e,a,c){for(var f=(e.mode&1)!==0;Fe!==null;){var m=Fe,g=m.child;if(m.tag===22&&f){var w=m.memoizedState!==null||ol;if(!w){var M=m.alternate,_=M!==null&&M.memoizedState!==null||$n;M=ol;var X=$n;if(ol=w,($n=_)&&!X)for(Fe=m;Fe!==null;)w=Fe,_=w.child,w.tag===22&&w.memoizedState!==null?jm(m):_!==null?(_.return=w,Fe=_):jm(m);for(;g!==null;)Fe=g,Sm(g),g=g.sibling;Fe=m,ol=M,$n=X}Nm(e)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,Fe=g):Nm(e)}}function Nm(e){for(;Fe!==null;){var a=Fe;if((a.flags&8772)!==0){var c=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:$n||ll(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!$n)if(c===null)f.componentDidMount();else{var m=a.elementType===a.type?c.memoizedProps:Mr(a.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var g=a.updateQueue;g!==null&&kp(a,g,f);break;case 3:var w=a.updateQueue;if(w!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}kp(a,w,c)}break;case 5:var M=a.stateNode;if(c===null&&a.flags&4){c=M;var _=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&c.focus();break;case"img":_.src&&(c.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var me=X.memoizedState;if(me!==null){var ge=me.dehydrated;ge!==null&&gi(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}$n||a.flags&512&&Ru(a)}catch(fe){cn(a,a.return,fe)}}if(a===e){Fe=null;break}if(c=a.sibling,c!==null){c.return=a.return,Fe=c;break}Fe=a.return}}function km(e){for(;Fe!==null;){var a=Fe;if(a===e){Fe=null;break}var c=a.sibling;if(c!==null){c.return=a.return,Fe=c;break}Fe=a.return}}function jm(e){for(;Fe!==null;){var a=Fe;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{ll(4,a)}catch(_){cn(a,c,_)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(_){cn(a,m,_)}}var g=a.return;try{Ru(a)}catch(_){cn(a,g,_)}break;case 5:var w=a.return;try{Ru(a)}catch(_){cn(a,w,_)}}}catch(_){cn(a,a.return,_)}if(a===e){Fe=null;break}var M=a.sibling;if(M!==null){M.return=a.return,Fe=M;break}Fe=a.return}}var Cx=Math.ceil,cl=B.ReactCurrentDispatcher,Ou=B.ReactCurrentOwner,hr=B.ReactCurrentBatchConfig,Mt=0,kn=null,hn=null,In=0,cr=0,$s=Sa(0),wn=0,zi=null,ts=0,ul=0,Au=0,Ui=null,tr=null,Iu=0,Ys=1/0,fa=null,dl=!1,Lu=null,Da=null,fl=!1,Ta=null,pl=0,Bi=0,Fu=null,ml=-1,hl=0;function Vn(){return(Mt&6)!==0?Jt():ml!==-1?ml:ml=Jt()}function Ma(e){return(e.mode&1)===0?1:(Mt&2)!==0&&In!==0?In&-In:cx.transition!==null?(hl===0&&(hl=Vt()),hl):(e=pe,e!==0||(e=window.event,e=e===void 0?16:Ef(e.type)),e)}function _r(e,a,c,f){if(50<Bi)throw Bi=0,Fu=null,Error(i(185));P(e,c,f),((Mt&2)===0||e!==kn)&&(e===kn&&((Mt&2)===0&&(ul|=c),wn===4&&Ra(e,In)),nr(e,f),c===1&&Mt===0&&(a.mode&1)===0&&(Ys=Jt()+500,Yo&&ka()))}function nr(e,a){var c=e.callbackNode;Re(e,a);var f=H(e,e===kn?In:0);if(f===0)c!==null&&va(c),e.callbackNode=null,e.callbackPriority=0;else if(a=f&-f,e.callbackPriority!==a){if(c!=null&&va(c),a===1)e.tag===0?lx(Em.bind(null,e)):fp(Em.bind(null,e)),ax(function(){(Mt&6)===0&&ka()}),c=null;else{switch(Dt(f)){case 1:c=$r;break;case 4:c=Ha;break;case 16:c=kr;break;case 536870912:c=ws;break;default:c=kr}c=Am(c,Cm.bind(null,e))}e.callbackPriority=a,e.callbackNode=c}}function Cm(e,a){if(ml=-1,hl=0,(Mt&6)!==0)throw Error(i(327));var c=e.callbackNode;if(Ws()&&e.callbackNode!==c)return null;var f=H(e,e===kn?In:0);if(f===0)return null;if((f&30)!==0||(f&e.expiredLanes)!==0||a)a=gl(e,f);else{a=f;var m=Mt;Mt|=2;var g=Tm();(kn!==e||In!==a)&&(fa=null,Ys=Jt()+500,rs(e,a));do try{Tx();break}catch(M){Dm(e,M)}while(!0);nu(),cl.current=g,Mt=m,hn!==null?a=0:(kn=null,In=0,a=wn)}if(a!==0){if(a===2&&(m=mt(e),m!==0&&(f=m,a=zu(e,m))),a===1)throw c=zi,rs(e,0),Ra(e,f),nr(e,Jt()),c;if(a===6)Ra(e,f);else{if(m=e.current.alternate,(f&30)===0&&!Ex(m)&&(a=gl(e,f),a===2&&(g=mt(e),g!==0&&(f=g,a=zu(e,g))),a===1))throw c=zi,rs(e,0),Ra(e,f),nr(e,Jt()),c;switch(e.finishedWork=m,e.finishedLanes=f,a){case 0:case 1:throw Error(i(345));case 2:as(e,tr,fa);break;case 3:if(Ra(e,f),(f&130023424)===f&&(a=Iu+500-Jt(),10<a)){if(H(e,0)!==0)break;if(m=e.suspendedLanes,(m&f)!==f){Vn(),e.pingedLanes|=e.suspendedLanes&m;break}e.timeoutHandle=Hc(as.bind(null,e,tr,fa),a);break}as(e,tr,fa);break;case 4:if(Ra(e,f),(f&4194240)===f)break;for(a=e.eventTimes,m=-1;0<f;){var w=31-Hn(f);g=1<<w,w=a[w],w>m&&(m=w),f&=~g}if(f=m,f=Jt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Cx(f/1960))-f,10<f){e.timeoutHandle=Hc(as.bind(null,e,tr,fa),f);break}as(e,tr,fa);break;case 5:as(e,tr,fa);break;default:throw Error(i(329))}}}return nr(e,Jt()),e.callbackNode===c?Cm.bind(null,e):null}function zu(e,a){var c=Ui;return e.current.memoizedState.isDehydrated&&(rs(e,a).flags|=256),e=gl(e,a),e!==2&&(a=tr,tr=c,a!==null&&Uu(a)),e}function Uu(e){tr===null?tr=e:tr.push.apply(tr,e)}function Ex(e){for(var a=e;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],g=m.getSnapshot;m=m.value;try{if(!Dr(g(),m))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ra(e,a){for(a&=~Au,a&=~ul,e.suspendedLanes|=a,e.pingedLanes&=~a,e=e.expirationTimes;0<a;){var c=31-Hn(a),f=1<<c;e[c]=-1,a&=~f}}function Em(e){if((Mt&6)!==0)throw Error(i(327));Ws();var a=H(e,0);if((a&1)===0)return nr(e,Jt()),null;var c=gl(e,a);if(e.tag!==0&&c===2){var f=mt(e);f!==0&&(a=f,c=zu(e,f))}if(c===1)throw c=zi,rs(e,0),Ra(e,a),nr(e,Jt()),c;if(c===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=a,as(e,tr,fa),nr(e,Jt()),null}function Bu(e,a){var c=Mt;Mt|=1;try{return e(a)}finally{Mt=c,Mt===0&&(Ys=Jt()+500,Yo&&ka())}}function ns(e){Ta!==null&&Ta.tag===0&&(Mt&6)===0&&Ws();var a=Mt;Mt|=1;var c=hr.transition,f=pe;try{if(hr.transition=null,pe=1,e)return e()}finally{pe=f,hr.transition=c,Mt=a,(Mt&6)===0&&ka()}}function $u(){cr=$s.current,Zt($s)}function rs(e,a){e.finishedWork=null,e.finishedLanes=0;var c=e.timeoutHandle;if(c!==-1&&(e.timeoutHandle=-1,rx(c)),hn!==null)for(c=hn.return;c!==null;){var f=c;switch(Jc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Bo();break;case 3:zs(),Zt(Xn),Zt(zn),uu();break;case 5:lu(f);break;case 4:zs();break;case 13:Zt(an);break;case 19:Zt(an);break;case 10:ru(f.type._context);break;case 22:case 23:$u()}c=c.return}if(kn=e,hn=e=Pa(e.current,null),In=cr=a,wn=0,zi=null,Au=ul=ts=0,tr=Ui=null,Xa!==null){for(a=0;a<Xa.length;a++)if(c=Xa[a],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,g=c.pending;if(g!==null){var w=g.next;g.next=m,f.next=w}c.pending=f}Xa=null}return e}function Dm(e,a){do{var c=hn;try{if(nu(),Zo.current=rl,el){for(var f=sn.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}el=!1}if(es=0,Nn=xn=sn=null,_i=!1,Oi=0,Ou.current=null,c===null||c.return===null){wn=1,zi=a,hn=null;break}e:{var g=e,w=c.return,M=c,_=a;if(a=In,M.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var X=_,me=M,ge=me.tag;if((me.mode&1)===0&&(ge===0||ge===11||ge===15)){var fe=me.alternate;fe?(me.updateQueue=fe.updateQueue,me.memoizedState=fe.memoizedState,me.lanes=fe.lanes):(me.updateQueue=null,me.memoizedState=null)}var _e=Zp(w);if(_e!==null){_e.flags&=-257,em(_e,w,M,g,a),_e.mode&1&&Xp(g,X,a),a=_e,_=X;var Ue=a.updateQueue;if(Ue===null){var Be=new Set;Be.add(_),a.updateQueue=Be}else Ue.add(_);break e}else{if((a&1)===0){Xp(g,X,a),Yu();break e}_=Error(i(426))}}else if(tn&&M.mode&1){var dn=Zp(w);if(dn!==null){(dn.flags&65536)===0&&(dn.flags|=256),em(dn,w,M,g,a),eu(Us(_,M));break e}}g=_=Us(_,M),wn!==4&&(wn=2),Ui===null?Ui=[g]:Ui.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,a&=-a,g.lanes|=a;var V=qp(g,_,a);Np(g,V);break e;case 1:M=_;var z=g.type,G=g.stateNode;if((g.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(Da===null||!Da.has(G)))){g.flags|=65536,a&=-a,g.lanes|=a;var Ne=Jp(g,M,a);Np(g,Ne);break e}}g=g.return}while(g!==null)}Rm(c)}catch(Ye){a=Ye,hn===c&&c!==null&&(hn=c=c.return);continue}break}while(!0)}function Tm(){var e=cl.current;return cl.current=rl,e===null?rl:e}function Yu(){(wn===0||wn===3||wn===2)&&(wn=4),kn===null||(ts&268435455)===0&&(ul&268435455)===0||Ra(kn,In)}function gl(e,a){var c=Mt;Mt|=2;var f=Tm();(kn!==e||In!==a)&&(fa=null,rs(e,a));do try{Dx();break}catch(m){Dm(e,m)}while(!0);if(nu(),Mt=c,cl.current=f,hn!==null)throw Error(i(261));return kn=null,In=0,wn}function Dx(){for(;hn!==null;)Mm(hn)}function Tx(){for(;hn!==null&&!di();)Mm(hn)}function Mm(e){var a=Om(e.alternate,e,cr);e.memoizedProps=e.pendingProps,a===null?Rm(e):hn=a,Ou.current=null}function Rm(e){var a=e;do{var c=a.alternate;if(e=a.return,(a.flags&32768)===0){if(c=bx(c,a,cr),c!==null){hn=c;return}}else{if(c=Sx(c,a),c!==null){c.flags&=32767,hn=c;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wn=6,hn=null;return}}if(a=a.sibling,a!==null){hn=a;return}hn=a=e}while(a!==null);wn===0&&(wn=5)}function as(e,a,c){var f=pe,m=hr.transition;try{hr.transition=null,pe=1,Mx(e,a,c,f)}finally{hr.transition=m,pe=f}return null}function Mx(e,a,c,f){do Ws();while(Ta!==null);if((Mt&6)!==0)throw Error(i(327));c=e.finishedWork;var m=e.finishedLanes;if(c===null)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var g=c.lanes|c.childLanes;if(U(e,g),e===kn&&(hn=kn=null,In=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||fl||(fl=!0,Am(kr,function(){return Ws(),null})),g=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||g){g=hr.transition,hr.transition=null;var w=pe;pe=1;var M=Mt;Mt|=4,Ou.current=null,kx(e,c),bm(c,e),qy(Yc),Eo=!!$c,Yc=$c=null,e.current=c,jx(c),fi(),Mt=M,pe=w,hr.transition=g}else e.current=c;if(fl&&(fl=!1,Ta=e,pl=m),g=e.pendingLanes,g===0&&(Da=null),bs(c.stateNode),nr(e,Jt()),a!==null)for(f=e.onRecoverableError,c=0;c<a.length;c++)m=a[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(dl)throw dl=!1,e=Lu,Lu=null,e;return(pl&1)!==0&&e.tag!==0&&Ws(),g=e.pendingLanes,(g&1)!==0?e===Fu?Bi++:(Bi=0,Fu=e):Bi=0,ka(),null}function Ws(){if(Ta!==null){var e=Dt(pl),a=hr.transition,c=pe;try{if(hr.transition=null,pe=16>e?16:e,Ta===null)var f=!1;else{if(e=Ta,Ta=null,pl=0,(Mt&6)!==0)throw Error(i(331));var m=Mt;for(Mt|=4,Fe=e.current;Fe!==null;){var g=Fe,w=g.child;if((Fe.flags&16)!==0){var M=g.deletions;if(M!==null){for(var _=0;_<M.length;_++){var X=M[_];for(Fe=X;Fe!==null;){var me=Fe;switch(me.tag){case 0:case 11:case 15:Fi(8,me,g)}var ge=me.child;if(ge!==null)ge.return=me,Fe=ge;else for(;Fe!==null;){me=Fe;var fe=me.sibling,_e=me.return;if(gm(me),me===X){Fe=null;break}if(fe!==null){fe.return=_e,Fe=fe;break}Fe=_e}}}var Ue=g.alternate;if(Ue!==null){var Be=Ue.child;if(Be!==null){Ue.child=null;do{var dn=Be.sibling;Be.sibling=null,Be=dn}while(Be!==null)}}Fe=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Fe=w;else e:for(;Fe!==null;){if(g=Fe,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Fi(9,g,g.return)}var V=g.sibling;if(V!==null){V.return=g.return,Fe=V;break e}Fe=g.return}}var z=e.current;for(Fe=z;Fe!==null;){w=Fe;var G=w.child;if((w.subtreeFlags&2064)!==0&&G!==null)G.return=w,Fe=G;else e:for(w=z;Fe!==null;){if(M=Fe,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:ll(9,M)}}catch(Ye){cn(M,M.return,Ye)}if(M===w){Fe=null;break e}var Ne=M.sibling;if(Ne!==null){Ne.return=M.return,Fe=Ne;break e}Fe=M.return}}if(Mt=m,ka(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(ya,e)}catch{}f=!0}return f}finally{pe=c,hr.transition=a}}return!1}function Pm(e,a,c){a=Us(c,a),a=qp(e,a,1),e=Ca(e,a,1),a=Vn(),e!==null&&(P(e,1,a),nr(e,a))}function cn(e,a,c){if(e.tag===3)Pm(e,e,c);else for(;a!==null;){if(a.tag===3){Pm(a,e,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Da===null||!Da.has(f))){e=Us(c,e),e=Jp(a,e,1),a=Ca(a,e,1),e=Vn(),a!==null&&(P(a,1,e),nr(a,e));break}}a=a.return}}function Rx(e,a,c){var f=e.pingCache;f!==null&&f.delete(a),a=Vn(),e.pingedLanes|=e.suspendedLanes&c,kn===e&&(In&c)===c&&(wn===4||wn===3&&(In&130023424)===In&&500>Jt()-Iu?rs(e,0):Au|=c),nr(e,a)}function _m(e,a){a===0&&((e.mode&1)===0?a=1:(a=S,S<<=1,(S&130023424)===0&&(S=4194304)));var c=Vn();e=ca(e,a),e!==null&&(P(e,a,c),nr(e,c))}function Px(e){var a=e.memoizedState,c=0;a!==null&&(c=a.retryLane),_m(e,c)}function _x(e,a){var c=0;switch(e.tag){case 13:var f=e.stateNode,m=e.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=e.stateNode;break;default:throw Error(i(314))}f!==null&&f.delete(a),_m(e,c)}var Om;Om=function(e,a,c){if(e!==null)if(e.memoizedProps!==a.pendingProps||Xn.current)er=!0;else{if((e.lanes&c)===0&&(a.flags&128)===0)return er=!1,wx(e,a,c);er=(e.flags&131072)!==0}else er=!1,tn&&(a.flags&1048576)!==0&&pp(a,Ho,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;il(e,a),e=a.pendingProps;var m=Ps(a,zn.current);Fs(a,c),m=pu(null,a,f,e,m,c);var g=mu();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zn(f)?(g=!0,$o(a)):g=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,iu(a),m.updater=al,a.stateNode=m,m._reactInternals=a,wu(a,f,e,c),a=ku(null,a,f,!0,g,c)):(a.tag=0,tn&&g&&qc(a),Kn(null,a,m,c),a=a.child),a;case 16:f=a.elementType;e:{switch(il(e,a),e=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=Ax(f),e=Mr(f,e),m){case 0:a=Nu(null,a,f,e,c);break e;case 1:a=im(null,a,f,e,c);break e;case 11:a=tm(null,a,f,e,c);break e;case 14:a=nm(null,a,f,Mr(f.type,e),c);break e}throw Error(i(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Mr(f,m),Nu(e,a,f,m,c);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Mr(f,m),im(e,a,f,m,c);case 3:e:{if(om(a),e===null)throw Error(i(387));f=a.pendingProps,g=a.memoizedState,m=g.element,Sp(e,a),Jo(a,f,null,c);var w=a.memoizedState;if(f=w.element,g.isDehydrated)if(g={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){m=Us(Error(i(423)),a),a=lm(e,a,f,c,m);break e}else if(f!==m){m=Us(Error(i(424)),a),a=lm(e,a,f,c,m);break e}else for(lr=ba(a.stateNode.containerInfo.firstChild),or=a,tn=!0,Tr=null,c=wp(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(As(),f===m){a=da(e,a,c);break e}Kn(e,a,f,c)}a=a.child}return a;case 5:return jp(a),e===null&&Zc(a),f=a.type,m=a.pendingProps,g=e!==null?e.memoizedProps:null,w=m.children,Wc(f,m)?w=null:g!==null&&Wc(f,g)&&(a.flags|=32),sm(e,a),Kn(e,a,w,c),a.child;case 6:return e===null&&Zc(a),null;case 13:return cm(e,a,c);case 4:return ou(a,a.stateNode.containerInfo),f=a.pendingProps,e===null?a.child=Is(a,null,f,c):Kn(e,a,f,c),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Mr(f,m),tm(e,a,f,m,c);case 7:return Kn(e,a,a.pendingProps,c),a.child;case 8:return Kn(e,a,a.pendingProps.children,c),a.child;case 12:return Kn(e,a,a.pendingProps.children,c),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,g=a.memoizedProps,w=m.value,Qt(Qo,f._currentValue),f._currentValue=w,g!==null)if(Dr(g.value,w)){if(g.children===m.children&&!Xn.current){a=da(e,a,c);break e}}else for(g=a.child,g!==null&&(g.return=a);g!==null;){var M=g.dependencies;if(M!==null){w=g.child;for(var _=M.firstContext;_!==null;){if(_.context===f){if(g.tag===1){_=ua(-1,c&-c),_.tag=2;var X=g.updateQueue;if(X!==null){X=X.shared;var me=X.pending;me===null?_.next=_:(_.next=me.next,me.next=_),X.pending=_}}g.lanes|=c,_=g.alternate,_!==null&&(_.lanes|=c),au(g.return,c,a),M.lanes|=c;break}_=_.next}}else if(g.tag===10)w=g.type===a.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(i(341));w.lanes|=c,M=w.alternate,M!==null&&(M.lanes|=c),au(w,c,a),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===a){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Kn(e,a,m.children,c),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,Fs(a,c),m=pr(m),f=f(m),a.flags|=1,Kn(e,a,f,c),a.child;case 14:return f=a.type,m=Mr(f,a.pendingProps),m=Mr(f.type,m),nm(e,a,f,m,c);case 15:return rm(e,a,a.type,a.pendingProps,c);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:Mr(f,m),il(e,a),a.tag=1,Zn(f)?(e=!0,$o(a)):e=!1,Fs(a,c),Qp(a,f,m),wu(a,f,m,c),ku(null,a,f,!0,e,c);case 19:return dm(e,a,c);case 22:return am(e,a,c)}throw Error(i(156,a.tag))};function Am(e,a){return Nr(e,a)}function Ox(e,a,c,f){this.tag=e,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(e,a,c,f){return new Ox(e,a,c,f)}function Wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ax(e){if(typeof e=="function")return Wu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ce)return 11;if(e===Ee)return 14}return 2}function Pa(e,a){var c=e.alternate;return c===null?(c=gr(e.tag,a,e.key,e.mode),c.elementType=e.elementType,c.type=e.type,c.stateNode=e.stateNode,c.alternate=e,e.alternate=c):(c.pendingProps=a,c.type=e.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=e.flags&14680064,c.childLanes=e.childLanes,c.lanes=e.lanes,c.child=e.child,c.memoizedProps=e.memoizedProps,c.memoizedState=e.memoizedState,c.updateQueue=e.updateQueue,a=e.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=e.sibling,c.index=e.index,c.ref=e.ref,c}function vl(e,a,c,f,m,g){var w=2;if(f=e,typeof e=="function")Wu(e)&&(w=1);else if(typeof e=="string")w=5;else e:switch(e){case J:return ss(c.children,m,g,a);case re:w=8,m|=8;break;case te:return e=gr(12,c,a,m|2),e.elementType=te,e.lanes=g,e;case ve:return e=gr(13,c,a,m),e.elementType=ve,e.lanes=g,e;case Te:return e=gr(19,c,a,m),e.elementType=Te,e.lanes=g,e;case we:return yl(c,m,g,a);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ie:w=10;break e;case ne:w=9;break e;case Ce:w=11;break e;case Ee:w=14;break e;case be:w=16,f=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return a=gr(w,c,a,m),a.elementType=e,a.type=f,a.lanes=g,a}function ss(e,a,c,f){return e=gr(7,e,f,a),e.lanes=c,e}function yl(e,a,c,f){return e=gr(22,e,f,a),e.elementType=we,e.lanes=c,e.stateNode={isHidden:!1},e}function Hu(e,a,c){return e=gr(6,e,null,a),e.lanes=c,e}function Ku(e,a,c){return a=gr(4,e.children!==null?e.children:[],e.key,a),a.lanes=c,a.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},a}function Ix(e,a,c,f,m){this.tag=a,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_n(0),this.expirationTimes=_n(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_n(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Vu(e,a,c,f,m,g,w,M,_){return e=new Ix(e,a,c,M,_),a===1?(a=1,g===!0&&(a|=8)):a=0,g=gr(3,null,null,a),e.current=g,g.stateNode=e,g.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},iu(g),e}function Lx(e,a,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:f==null?null:""+f,children:e,containerInfo:a,implementation:c}}function Im(e){if(!e)return Na;e=e._reactInternals;e:{if(Wt(e)!==e||e.tag!==1)throw Error(i(170));var a=e;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(i(171))}if(e.tag===1){var c=e.type;if(Zn(c))return up(e,c,a)}return a}function Lm(e,a,c,f,m,g,w,M,_){return e=Vu(c,f,!0,e,m,g,w,M,_),e.context=Im(null),c=e.current,f=Vn(),m=Ma(c),g=ua(f,m),g.callback=a??null,Ca(c,g,m),e.current.lanes=m,P(e,m,f),nr(e,f),e}function xl(e,a,c,f){var m=a.current,g=Vn(),w=Ma(m);return c=Im(c),a.context===null?a.context=c:a.pendingContext=c,a=ua(g,w),a.payload={element:e},f=f===void 0?null:f,f!==null&&(a.callback=f),e=Ca(m,a,w),e!==null&&(_r(e,m,w,g),qo(e,m,w)),w}function wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fm(e,a){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var c=e.retryLane;e.retryLane=c!==0&&c<a?c:a}}function Qu(e,a){Fm(e,a),(e=e.alternate)&&Fm(e,a)}function Fx(){return null}var zm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gu(e){this._internalRoot=e}bl.prototype.render=Gu.prototype.render=function(e){var a=this._internalRoot;if(a===null)throw Error(i(409));xl(e,a,null,null)},bl.prototype.unmount=Gu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var a=e.containerInfo;ns(function(){xl(null,e,null,null)}),a[sa]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var a=ln();e={blockedOn:null,target:e,priority:a};for(var c=0;c<Er.length&&a!==0&&a<Er[c].priority;c++);Er.splice(c,0,e),c===0&&jf(e)}};function qu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Um(){}function zx(e,a,c,f,m){if(m){if(typeof f=="function"){var g=f;f=function(){var X=wl(w);g.call(X)}}var w=Lm(a,f,e,0,null,!1,!1,"",Um);return e._reactRootContainer=w,e[sa]=w.current,ji(e.nodeType===8?e.parentNode:e),ns(),w}for(;m=e.lastChild;)e.removeChild(m);if(typeof f=="function"){var M=f;f=function(){var X=wl(_);M.call(X)}}var _=Vu(e,0,!1,null,null,!1,!1,"",Um);return e._reactRootContainer=_,e[sa]=_.current,ji(e.nodeType===8?e.parentNode:e),ns(function(){xl(a,_,c,f)}),_}function Nl(e,a,c,f,m){var g=c._reactRootContainer;if(g){var w=g;if(typeof m=="function"){var M=m;m=function(){var _=wl(w);M.call(_)}}xl(a,w,e,m)}else w=zx(c,a,e,m,f);return wl(w)}dt=function(e){switch(e.tag){case 3:var a=e.stateNode;if(a.current.memoizedState.isDehydrated){var c=T(a.pendingLanes);c!==0&&(ce(a,c|1),nr(a,Jt()),(Mt&6)===0&&(Ys=Jt()+500,ka()))}break;case 13:ns(function(){var f=ca(e,1);if(f!==null){var m=Vn();_r(f,e,1,m)}}),Qu(e,1)}},ht=function(e){if(e.tag===13){var a=ca(e,134217728);if(a!==null){var c=Vn();_r(a,e,134217728,c)}Qu(e,134217728)}},vn=function(e){if(e.tag===13){var a=Ma(e),c=ca(e,a);if(c!==null){var f=Vn();_r(c,e,a,f)}Qu(e,a)}},ln=function(){return pe},jr=function(e,a){var c=pe;try{return pe=e,a()}finally{pe=c}},ae=function(e,a,c){switch(a){case"input":if(Et(e,c),a=c.name,c.type==="radio"&&a!=null){for(c=e;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==e&&f.form===e.form){var m=Uo(f);if(!m)throw Error(i(90));Xe(f),Et(f,m)}}}break;case"textarea":qt(e,c);break;case"select":a=c.value,a!=null&&Ae(e,!!c.multiple,a,!1)}},it=Bu,ct=ns;var Ux={usingClientEntryPoint:!1,Events:[Di,Ms,Uo,tt,Ke,Bu]},$i={findFiberByHostInstance:Qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bx={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ur(e),e===null?null:e.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||Fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{ya=kl.inject(Bx),Jn=kl}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ux,rr.createPortal=function(e,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qu(a))throw Error(i(200));return Lx(e,a,null,c)},rr.createRoot=function(e,a){if(!qu(e))throw Error(i(299));var c=!1,f="",m=zm;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Vu(e,1,!1,null,null,c,!1,f,m),e[sa]=a.current,ji(e.nodeType===8?e.parentNode:e),new Gu(a)},rr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var a=e._reactInternals;if(a===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=Ur(a),e=e===null?null:e.stateNode,e},rr.flushSync=function(e){return ns(e)},rr.hydrate=function(e,a,c){if(!Sl(a))throw Error(i(200));return Nl(null,e,a,!0,c)},rr.hydrateRoot=function(e,a,c){if(!qu(e))throw Error(i(405));var f=c!=null&&c.hydratedSources||null,m=!1,g="",w=zm;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),a=Lm(a,null,e,1,c??null,m,!1,g,w),e[sa]=a.current,ji(e),f)for(e=0;e<f.length;e++)c=f[e],m=c._getVersion,m=m(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,m]:a.mutableSourceEagerHydrationData.push(c,m);return new bl(a)},rr.render=function(e,a,c){if(!Sl(a))throw Error(i(200));return Nl(null,e,a,!1,c)},rr.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(i(40));return e._reactRootContainer?(ns(function(){Nl(null,null,e,!1,function(){e._reactRootContainer=null,e[sa]=null})}),!0):!1},rr.unstable_batchedUpdates=Bu,rr.unstable_renderSubtreeIntoContainer=function(e,a,c,f){if(!Sl(c))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return Nl(e,a,c,!1,f)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var Gm;function Dg(){if(Gm)return Zu.exports;Gm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(s){console.error(s)}}return n(),Zu.exports=Jx(),Zu.exports}var qm;function Xx(){if(qm)return jl;qm=1;var n=Dg();return jl.createRoot=n.createRoot,jl.hydrateRoot=n.hydrateRoot,jl}var Zx=Xx(),ha=Dg();const e0=mo(ha);function t0(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return x.useMemo(()=>r=>{s.forEach(t=>t(r))},s)}const dc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function oi(n){const s=Object.prototype.toString.call(n);return s==="[object Window]"||s==="[object global]"}function qd(n){return"nodeType"in n}function Gn(n){var s,i;return n?oi(n)?n:qd(n)&&(s=(i=n.ownerDocument)==null?void 0:i.defaultView)!=null?s:window:window}function Jd(n){const{Document:s}=Gn(n);return n instanceof s}function ho(n){return oi(n)?!1:n instanceof Gn(n).HTMLElement}function Tg(n){return n instanceof Gn(n).SVGElement}function li(n){return n?oi(n)?n.document:qd(n)?Jd(n)?n:ho(n)||Tg(n)?n.ownerDocument:document:document:document}const Ir=dc?x.useLayoutEffect:x.useEffect;function fc(n){const s=x.useRef(n);return Ir(()=>{s.current=n}),x.useCallback(function(){for(var i=arguments.length,r=new Array(i),t=0;t<i;t++)r[t]=arguments[t];return s.current==null?void 0:s.current(...r)},[])}function n0(){const n=x.useRef(null),s=x.useCallback((r,t)=>{n.current=setInterval(r,t)},[]),i=x.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[s,i]}function ao(n,s){s===void 0&&(s=[n]);const i=x.useRef(n);return Ir(()=>{i.current!==n&&(i.current=n)},s),i}function go(n,s){const i=x.useRef();return x.useMemo(()=>{const r=n(i.current);return i.current=r,r},[...s])}function Kl(n){const s=fc(n),i=x.useRef(null),r=x.useCallback(t=>{t!==i.current&&s?.(t,i.current),i.current=t},[]);return[i,r]}function Vl(n){const s=x.useRef();return x.useEffect(()=>{s.current=n},[n]),s.current}let nd={};function vo(n,s){return x.useMemo(()=>{if(s)return s;const i=nd[n]==null?0:nd[n]+1;return nd[n]=i,n+"-"+i},[n,s])}function Mg(n){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return r.reduce((l,u)=>{const d=Object.entries(u);for(const[p,h]of d){const v=l[p];v!=null&&(l[p]=v+n*h)}return l},{...s})}}const Js=Mg(1),Ql=Mg(-1);function r0(n){return"clientX"in n&&"clientY"in n}function pc(n){if(!n)return!1;const{KeyboardEvent:s}=Gn(n.target);return s&&n instanceof s}function a0(n){if(!n)return!1;const{TouchEvent:s}=Gn(n.target);return s&&n instanceof s}function Gl(n){if(a0(n)){if(n.touches&&n.touches.length){const{clientX:s,clientY:i}=n.touches[0];return{x:s,y:i}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:s,clientY:i}=n.changedTouches[0];return{x:s,y:i}}}return r0(n)?{x:n.clientX,y:n.clientY}:null}const Ba=Object.freeze({Translate:{toString(n){if(!n)return;const{x:s,y:i}=n;return"translate3d("+(s?Math.round(s):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:s,scaleY:i}=n;return"scaleX("+s+") scaleY("+i+")"}},Transform:{toString(n){if(n)return[Ba.Translate.toString(n),Ba.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:s,duration:i,easing:r}=n;return s+" "+i+"ms "+r}}}),Jm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function s0(n){return n.matches(Jm)?n:n.querySelector(Jm)}const i0={display:"none"};function o0(n){let{id:s,value:i}=n;return K.createElement("div",{id:s,style:i0},i)}function l0(n){let{id:s,announcement:i,ariaLiveType:r="assertive"}=n;const t={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return K.createElement("div",{id:s,style:t,role:"status","aria-live":r,"aria-atomic":!0},i)}function c0(){const[n,s]=x.useState("");return{announce:x.useCallback(r=>{r!=null&&s(r)},[]),announcement:n}}const Rg=x.createContext(null);function u0(n){const s=x.useContext(Rg);x.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(n)},[n,s])}function d0(){const[n]=x.useState(()=>new Set),s=x.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[x.useCallback(r=>{let{type:t,event:l}=r;n.forEach(u=>{var d;return(d=u[t])==null?void 0:d.call(u,l)})},[n]),s]}const f0={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},p0={onDragStart(n){let{active:s}=n;return"Picked up draggable item "+s.id+"."},onDragOver(n){let{active:s,over:i}=n;return i?"Draggable item "+s.id+" was moved over droppable area "+i.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(n){let{active:s,over:i}=n;return i?"Draggable item "+s.id+" was dropped over droppable area "+i.id:"Draggable item "+s.id+" was dropped."},onDragCancel(n){let{active:s}=n;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function m0(n){let{announcements:s=p0,container:i,hiddenTextDescribedById:r,screenReaderInstructions:t=f0}=n;const{announce:l,announcement:u}=c0(),d=vo("DndLiveRegion"),[p,h]=x.useState(!1);if(x.useEffect(()=>{h(!0)},[]),u0(x.useMemo(()=>({onDragStart(y){let{active:N}=y;l(s.onDragStart({active:N}))},onDragMove(y){let{active:N,over:C}=y;s.onDragMove&&l(s.onDragMove({active:N,over:C}))},onDragOver(y){let{active:N,over:C}=y;l(s.onDragOver({active:N,over:C}))},onDragEnd(y){let{active:N,over:C}=y;l(s.onDragEnd({active:N,over:C}))},onDragCancel(y){let{active:N,over:C}=y;l(s.onDragCancel({active:N,over:C}))}}),[l,s])),!p)return null;const v=K.createElement(K.Fragment,null,K.createElement(o0,{id:r,value:t.draggable}),K.createElement(l0,{id:d,announcement:u}));return i?ha.createPortal(v,i):v}var Sn;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Sn||(Sn={}));function ql(){}function Xm(n,s){return x.useMemo(()=>({sensor:n,options:s??{}}),[n,s])}function h0(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return x.useMemo(()=>[...s].filter(r=>r!=null),[...s])}const Lr=Object.freeze({x:0,y:0});function g0(n,s){return Math.sqrt(Math.pow(n.x-s.x,2)+Math.pow(n.y-s.y,2))}function v0(n,s){const i=Gl(n);if(!i)return"0 0";const r={x:(i.x-s.left)/s.width*100,y:(i.y-s.top)/s.height*100};return r.x+"% "+r.y+"%"}function y0(n,s){let{data:{value:i}}=n,{data:{value:r}}=s;return i-r}function x0(n,s){let{data:{value:i}}=n,{data:{value:r}}=s;return r-i}function w0(n,s){if(!n||n.length===0)return null;const[i]=n;return i[s]}function Zm(n,s,i){return s===void 0&&(s=n.left),i===void 0&&(i=n.top),{x:s+n.width*.5,y:i+n.height*.5}}const b0=n=>{let{collisionRect:s,droppableRects:i,droppableContainers:r}=n;const t=Zm(s,s.left,s.top),l=[];for(const u of r){const{id:d}=u,p=i.get(d);if(p){const h=g0(Zm(p),t);l.push({id:d,data:{droppableContainer:u,value:h}})}}return l.sort(y0)};function S0(n,s){const i=Math.max(s.top,n.top),r=Math.max(s.left,n.left),t=Math.min(s.left+s.width,n.left+n.width),l=Math.min(s.top+s.height,n.top+n.height),u=t-r,d=l-i;if(r<t&&i<l){const p=s.width*s.height,h=n.width*n.height,v=u*d,y=v/(p+h-v);return Number(y.toFixed(4))}return 0}const N0=n=>{let{collisionRect:s,droppableRects:i,droppableContainers:r}=n;const t=[];for(const l of r){const{id:u}=l,d=i.get(u);if(d){const p=S0(d,s);p>0&&t.push({id:u,data:{droppableContainer:l,value:p}})}}return t.sort(x0)};function k0(n,s,i){return{...n,scaleX:s&&i?s.width/i.width:1,scaleY:s&&i?s.height/i.height:1}}function Pg(n,s){return n&&s?{x:n.left-s.left,y:n.top-s.top}:Lr}function j0(n){return function(i){for(var r=arguments.length,t=new Array(r>1?r-1:0),l=1;l<r;l++)t[l-1]=arguments[l];return t.reduce((u,d)=>({...u,top:u.top+n*d.y,bottom:u.bottom+n*d.y,left:u.left+n*d.x,right:u.right+n*d.x}),{...i})}}const C0=j0(1);function _g(n){if(n.startsWith("matrix3d(")){const s=n.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(n.startsWith("matrix(")){const s=n.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function E0(n,s,i){const r=_g(s);if(!r)return n;const{scaleX:t,scaleY:l,x:u,y:d}=r,p=n.left-u-(1-t)*parseFloat(i),h=n.top-d-(1-l)*parseFloat(i.slice(i.indexOf(" ")+1)),v=t?n.width/t:n.width,y=l?n.height/l:n.height;return{width:v,height:y,top:h,right:p+v,bottom:h+y,left:p}}const D0={ignoreTransform:!1};function ci(n,s){s===void 0&&(s=D0);let i=n.getBoundingClientRect();if(s.ignoreTransform){const{transform:h,transformOrigin:v}=Gn(n).getComputedStyle(n);h&&(i=E0(i,h,v))}const{top:r,left:t,width:l,height:u,bottom:d,right:p}=i;return{top:r,left:t,width:l,height:u,bottom:d,right:p}}function eh(n){return ci(n,{ignoreTransform:!0})}function T0(n){const s=n.innerWidth,i=n.innerHeight;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}function M0(n,s){return s===void 0&&(s=Gn(n).getComputedStyle(n)),s.position==="fixed"}function R0(n,s){s===void 0&&(s=Gn(n).getComputedStyle(n));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(t=>{const l=s[t];return typeof l=="string"?i.test(l):!1})}function Xd(n,s){const i=[];function r(t){if(s!=null&&i.length>=s||!t)return i;if(Jd(t)&&t.scrollingElement!=null&&!i.includes(t.scrollingElement))return i.push(t.scrollingElement),i;if(!ho(t)||Tg(t)||i.includes(t))return i;const l=Gn(n).getComputedStyle(t);return t!==n&&R0(t,l)&&i.push(t),M0(t,l)?i:r(t.parentNode)}return n?r(n):i}function Og(n){const[s]=Xd(n,1);return s??null}function rd(n){return!dc||!n?null:oi(n)?n:qd(n)?Jd(n)||n===li(n).scrollingElement?window:ho(n)?n:null:null}function Ag(n){return oi(n)?n.scrollX:n.scrollLeft}function Ig(n){return oi(n)?n.scrollY:n.scrollTop}function Md(n){return{x:Ag(n),y:Ig(n)}}var Cn;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Cn||(Cn={}));function Lg(n){return!dc||!n?!1:n===document.scrollingElement}function Fg(n){const s={x:0,y:0},i=Lg(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-i.width,y:n.scrollHeight-i.height},t=n.scrollTop<=s.y,l=n.scrollLeft<=s.x,u=n.scrollTop>=r.y,d=n.scrollLeft>=r.x;return{isTop:t,isLeft:l,isBottom:u,isRight:d,maxScroll:r,minScroll:s}}const P0={x:.2,y:.2};function _0(n,s,i,r,t){let{top:l,left:u,right:d,bottom:p}=i;r===void 0&&(r=10),t===void 0&&(t=P0);const{isTop:h,isBottom:v,isLeft:y,isRight:N}=Fg(n),C={x:0,y:0},k={x:0,y:0},E={height:s.height*t.y,width:s.width*t.x};return!h&&l<=s.top+E.height?(C.y=Cn.Backward,k.y=r*Math.abs((s.top+E.height-l)/E.height)):!v&&p>=s.bottom-E.height&&(C.y=Cn.Forward,k.y=r*Math.abs((s.bottom-E.height-p)/E.height)),!N&&d>=s.right-E.width?(C.x=Cn.Forward,k.x=r*Math.abs((s.right-E.width-d)/E.width)):!y&&u<=s.left+E.width&&(C.x=Cn.Backward,k.x=r*Math.abs((s.left+E.width-u)/E.width)),{direction:C,speed:k}}function O0(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:u}=window;return{top:0,left:0,right:l,bottom:u,width:l,height:u}}const{top:s,left:i,right:r,bottom:t}=n.getBoundingClientRect();return{top:s,left:i,right:r,bottom:t,width:n.clientWidth,height:n.clientHeight}}function zg(n){return n.reduce((s,i)=>Js(s,Md(i)),Lr)}function A0(n){return n.reduce((s,i)=>s+Ag(i),0)}function I0(n){return n.reduce((s,i)=>s+Ig(i),0)}function Ug(n,s){if(s===void 0&&(s=ci),!n)return;const{top:i,left:r,bottom:t,right:l}=s(n);Og(n)&&(t<=0||l<=0||i>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const L0=[["x",["left","right"],A0],["y",["top","bottom"],I0]];class Zd{constructor(s,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Xd(i),t=zg(r);this.rect={...s},this.width=s.width,this.height=s.height;for(const[l,u,d]of L0)for(const p of u)Object.defineProperty(this,p,{get:()=>{const h=d(r),v=t[l]-h;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gi{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...i)})},this.target=s}add(s,i,r){var t;(t=this.target)==null||t.addEventListener(s,i,r),this.listeners.push([s,i,r])}}function F0(n){const{EventTarget:s}=Gn(n);return n instanceof s?n:li(n)}function ad(n,s){const i=Math.abs(n.x),r=Math.abs(n.y);return typeof s=="number"?Math.sqrt(i**2+r**2)>s:"x"in s&&"y"in s?i>s.x&&r>s.y:"x"in s?i>s.x:"y"in s?r>s.y:!1}var yr;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(yr||(yr={}));function th(n){n.preventDefault()}function z0(n){n.stopPropagation()}var It;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(It||(It={}));const Bg={start:[It.Space,It.Enter],cancel:[It.Esc],end:[It.Space,It.Enter,It.Tab]},U0=(n,s)=>{let{currentCoordinates:i}=s;switch(n.code){case It.Right:return{...i,x:i.x+25};case It.Left:return{...i,x:i.x-25};case It.Down:return{...i,y:i.y+25};case It.Up:return{...i,y:i.y-25}}};class $g{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:i}}=s;this.props=s,this.listeners=new Gi(li(i)),this.windowListeners=new Gi(Gn(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(yr.Resize,this.handleCancel),this.windowListeners.add(yr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(yr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:i}=this.props,r=s.node.current;r&&Ug(r),i(Lr)}handleKeyDown(s){if(pc(s)){const{active:i,context:r,options:t}=this.props,{keyboardCodes:l=Bg,coordinateGetter:u=U0,scrollBehavior:d="smooth"}=t,{code:p}=s;if(l.end.includes(p)){this.handleEnd(s);return}if(l.cancel.includes(p)){this.handleCancel(s);return}const{collisionRect:h}=r.current,v=h?{x:h.left,y:h.top}:Lr;this.referenceCoordinates||(this.referenceCoordinates=v);const y=u(s,{active:i,context:r.current,currentCoordinates:v});if(y){const N=Ql(y,v),C={x:0,y:0},{scrollableAncestors:k}=r.current;for(const E of k){const j=s.code,{isTop:I,isRight:$,isLeft:Y,isBottom:B,maxScroll:Z,minScroll:ee}=Fg(E),J=O0(E),re={x:Math.min(j===It.Right?J.right-J.width/2:J.right,Math.max(j===It.Right?J.left:J.left+J.width/2,y.x)),y:Math.min(j===It.Down?J.bottom-J.height/2:J.bottom,Math.max(j===It.Down?J.top:J.top+J.height/2,y.y))},te=j===It.Right&&!$||j===It.Left&&!Y,ie=j===It.Down&&!B||j===It.Up&&!I;if(te&&re.x!==y.x){const ne=E.scrollLeft+N.x,Ce=j===It.Right&&ne<=Z.x||j===It.Left&&ne>=ee.x;if(Ce&&!N.y){E.scrollTo({left:ne,behavior:d});return}Ce?C.x=E.scrollLeft-ne:C.x=j===It.Right?E.scrollLeft-Z.x:E.scrollLeft-ee.x,C.x&&E.scrollBy({left:-C.x,behavior:d});break}else if(ie&&re.y!==y.y){const ne=E.scrollTop+N.y,Ce=j===It.Down&&ne<=Z.y||j===It.Up&&ne>=ee.y;if(Ce&&!N.x){E.scrollTo({top:ne,behavior:d});return}Ce?C.y=E.scrollTop-ne:C.y=j===It.Down?E.scrollTop-Z.y:E.scrollTop-ee.y,C.y&&E.scrollBy({top:-C.y,behavior:d});break}}this.handleMove(s,Js(Ql(y,this.referenceCoordinates),C))}}}handleMove(s,i){const{onMove:r}=this.props;s.preventDefault(),r(i)}handleEnd(s){const{onEnd:i}=this.props;s.preventDefault(),this.detach(),i()}handleCancel(s){const{onCancel:i}=this.props;s.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$g.activators=[{eventName:"onKeyDown",handler:(n,s,i)=>{let{keyboardCodes:r=Bg,onActivation:t}=s,{active:l}=i;const{code:u}=n.nativeEvent;if(r.start.includes(u)){const d=l.activatorNode.current;return d&&n.target!==d?!1:(n.preventDefault(),t?.({event:n.nativeEvent}),!0)}return!1}}];function nh(n){return!!(n&&"distance"in n)}function rh(n){return!!(n&&"delay"in n)}class ef{constructor(s,i,r){var t;r===void 0&&(r=F0(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=i;const{event:l}=s,{target:u}=l;this.props=s,this.events=i,this.document=li(u),this.documentListeners=new Gi(this.document),this.listeners=new Gi(r),this.windowListeners=new Gi(Gn(u)),this.initialCoordinates=(t=Gl(l))!=null?t:Lr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:i,bypassActivationConstraint:r}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(yr.Resize,this.handleCancel),this.windowListeners.add(yr.DragStart,th),this.windowListeners.add(yr.VisibilityChange,this.handleCancel),this.windowListeners.add(yr.ContextMenu,th),this.documentListeners.add(yr.Keydown,this.handleKeydown),i){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(rh(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(nh(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,i){const{active:r,onPending:t}=this.props;t(r,s,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:s}=this,{onStart:i}=this.props;s&&(this.activated=!0,this.documentListeners.add(yr.Click,z0,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(yr.SelectionChange,this.removeTextSelection),i(s))}handleMove(s){var i;const{activated:r,initialCoordinates:t,props:l}=this,{onMove:u,options:{activationConstraint:d}}=l;if(!t)return;const p=(i=Gl(s))!=null?i:Lr,h=Ql(t,p);if(!r&&d){if(nh(d)){if(d.tolerance!=null&&ad(h,d.tolerance))return this.handleCancel();if(ad(h,d.distance))return this.handleStart()}if(rh(d)&&ad(h,d.tolerance))return this.handleCancel();this.handlePending(d,h);return}s.cancelable&&s.preventDefault(),u(p)}handleEnd(){const{onAbort:s,onEnd:i}=this.props;this.detach(),this.activated||s(this.props.active),i()}handleCancel(){const{onAbort:s,onCancel:i}=this.props;this.detach(),this.activated||s(this.props.active),i()}handleKeydown(s){s.code===It.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const B0={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yg extends ef{constructor(s){const{event:i}=s,r=li(i.target);super(s,B0,r)}}Yg.activators=[{eventName:"onPointerDown",handler:(n,s)=>{let{nativeEvent:i}=n,{onActivation:r}=s;return!i.isPrimary||i.button!==0?!1:(r?.({event:i}),!0)}}];const $0={move:{name:"mousemove"},end:{name:"mouseup"}};var Rd;(function(n){n[n.RightClick=2]="RightClick"})(Rd||(Rd={}));class Wg extends ef{constructor(s){super(s,$0,li(s.event.target))}}Wg.activators=[{eventName:"onMouseDown",handler:(n,s)=>{let{nativeEvent:i}=n,{onActivation:r}=s;return i.button===Rd.RightClick?!1:(r?.({event:i}),!0)}}];const sd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Hg extends ef{constructor(s){super(s,sd)}static setup(){return window.addEventListener(sd.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(sd.move.name,s)};function s(){}}}Hg.activators=[{eventName:"onTouchStart",handler:(n,s)=>{let{nativeEvent:i}=n,{onActivation:r}=s;const{touches:t}=i;return t.length>1?!1:(r?.({event:i}),!0)}}];var qi;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(qi||(qi={}));var Jl;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(Jl||(Jl={}));function Y0(n){let{acceleration:s,activator:i=qi.Pointer,canScroll:r,draggingRect:t,enabled:l,interval:u=5,order:d=Jl.TreeOrder,pointerCoordinates:p,scrollableAncestors:h,scrollableAncestorRects:v,delta:y,threshold:N}=n;const C=H0({delta:y,disabled:!l}),[k,E]=n0(),j=x.useRef({x:0,y:0}),I=x.useRef({x:0,y:0}),$=x.useMemo(()=>{switch(i){case qi.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case qi.DraggableRect:return t}},[i,t,p]),Y=x.useRef(null),B=x.useCallback(()=>{const ee=Y.current;if(!ee)return;const J=j.current.x*I.current.x,re=j.current.y*I.current.y;ee.scrollBy(J,re)},[]),Z=x.useMemo(()=>d===Jl.TreeOrder?[...h].reverse():h,[d,h]);x.useEffect(()=>{if(!l||!h.length||!$){E();return}for(const ee of Z){if(r?.(ee)===!1)continue;const J=h.indexOf(ee),re=v[J];if(!re)continue;const{direction:te,speed:ie}=_0(ee,re,$,s,N);for(const ne of["x","y"])C[ne][te[ne]]||(ie[ne]=0,te[ne]=0);if(ie.x>0||ie.y>0){E(),Y.current=ee,k(B,u),j.current=ie,I.current=te;return}}j.current={x:0,y:0},I.current={x:0,y:0},E()},[s,B,r,E,l,u,JSON.stringify($),JSON.stringify(C),k,h,Z,v,JSON.stringify(N)])}const W0={x:{[Cn.Backward]:!1,[Cn.Forward]:!1},y:{[Cn.Backward]:!1,[Cn.Forward]:!1}};function H0(n){let{delta:s,disabled:i}=n;const r=Vl(s);return go(t=>{if(i||!r||!t)return W0;const l={x:Math.sign(s.x-r.x),y:Math.sign(s.y-r.y)};return{x:{[Cn.Backward]:t.x[Cn.Backward]||l.x===-1,[Cn.Forward]:t.x[Cn.Forward]||l.x===1},y:{[Cn.Backward]:t.y[Cn.Backward]||l.y===-1,[Cn.Forward]:t.y[Cn.Forward]||l.y===1}}},[i,s,r])}function K0(n,s){const i=s!=null?n.get(s):void 0,r=i?i.node.current:null;return go(t=>{var l;return s==null?null:(l=r??t)!=null?l:null},[r,s])}function V0(n,s){return x.useMemo(()=>n.reduce((i,r)=>{const{sensor:t}=r,l=t.activators.map(u=>({eventName:u.eventName,handler:s(u.handler,r)}));return[...i,...l]},[]),[n,s])}var so;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(so||(so={}));var Pd;(function(n){n.Optimized="optimized"})(Pd||(Pd={}));const ah=new Map;function Q0(n,s){let{dragging:i,dependencies:r,config:t}=s;const[l,u]=x.useState(null),{frequency:d,measure:p,strategy:h}=t,v=x.useRef(n),y=j(),N=ao(y),C=x.useCallback(function(I){I===void 0&&(I=[]),!N.current&&u($=>$===null?I:$.concat(I.filter(Y=>!$.includes(Y))))},[N]),k=x.useRef(null),E=go(I=>{if(y&&!i)return ah;if(!I||I===ah||v.current!==n||l!=null){const $=new Map;for(let Y of n){if(!Y)continue;if(l&&l.length>0&&!l.includes(Y.id)&&Y.rect.current){$.set(Y.id,Y.rect.current);continue}const B=Y.node.current,Z=B?new Zd(p(B),B):null;Y.rect.current=Z,Z&&$.set(Y.id,Z)}return $}return I},[n,l,i,y,p]);return x.useEffect(()=>{v.current=n},[n]),x.useEffect(()=>{y||C()},[i,y]),x.useEffect(()=>{l&&l.length>0&&u(null)},[JSON.stringify(l)]),x.useEffect(()=>{y||typeof d!="number"||k.current!==null||(k.current=setTimeout(()=>{C(),k.current=null},d))},[d,y,C,...r]),{droppableRects:E,measureDroppableContainers:C,measuringScheduled:l!=null};function j(){switch(h){case so.Always:return!1;case so.BeforeDragging:return i;default:return!i}}}function tf(n,s){return go(i=>n?i||(typeof s=="function"?s(n):n):null,[s,n])}function G0(n,s){return tf(n,s)}function q0(n){let{callback:s,disabled:i}=n;const r=fc(s),t=x.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,i]);return x.useEffect(()=>()=>t?.disconnect(),[t]),t}function mc(n){let{callback:s,disabled:i}=n;const r=fc(s),t=x.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[i]);return x.useEffect(()=>()=>t?.disconnect(),[t]),t}function J0(n){return new Zd(ci(n),n)}function sh(n,s,i){s===void 0&&(s=J0);const[r,t]=x.useState(null);function l(){t(p=>{if(!n)return null;if(n.isConnected===!1){var h;return(h=p??i)!=null?h:null}const v=s(n);return JSON.stringify(p)===JSON.stringify(v)?p:v})}const u=q0({callback(p){if(n)for(const h of p){const{type:v,target:y}=h;if(v==="childList"&&y instanceof HTMLElement&&y.contains(n)){l();break}}}}),d=mc({callback:l});return Ir(()=>{l(),n?(d?.observe(n),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[n]),r}function X0(n){const s=tf(n);return Pg(n,s)}const ih=[];function Z0(n){const s=x.useRef(n),i=go(r=>n?r&&r!==ih&&n&&s.current&&n.parentNode===s.current.parentNode?r:Xd(n):ih,[n]);return x.useEffect(()=>{s.current=n},[n]),i}function ew(n){const[s,i]=x.useState(null),r=x.useRef(n),t=x.useCallback(l=>{const u=rd(l.target);u&&i(d=>d?(d.set(u,Md(u)),new Map(d)):null)},[]);return x.useEffect(()=>{const l=r.current;if(n!==l){u(l);const d=n.map(p=>{const h=rd(p);return h?(h.addEventListener("scroll",t,{passive:!0}),[h,Md(h)]):null}).filter(p=>p!=null);i(d.length?new Map(d):null),r.current=n}return()=>{u(n),u(l)};function u(d){d.forEach(p=>{const h=rd(p);h?.removeEventListener("scroll",t)})}},[t,n]),x.useMemo(()=>n.length?s?Array.from(s.values()).reduce((l,u)=>Js(l,u),Lr):zg(n):Lr,[n,s])}function oh(n,s){s===void 0&&(s=[]);const i=x.useRef(null);return x.useEffect(()=>{i.current=null},s),x.useEffect(()=>{const r=n!==Lr;r&&!i.current&&(i.current=n),!r&&i.current&&(i.current=null)},[n]),i.current?Ql(n,i.current):Lr}function tw(n){x.useEffect(()=>{if(!dc)return;const s=n.map(i=>{let{sensor:r}=i;return r.setup==null?void 0:r.setup()});return()=>{for(const i of s)i?.()}},n.map(s=>{let{sensor:i}=s;return i}))}function nw(n,s){return x.useMemo(()=>n.reduce((i,r)=>{let{eventName:t,handler:l}=r;return i[t]=u=>{l(u,s)},i},{}),[n,s])}function Kg(n){return x.useMemo(()=>n?T0(n):null,[n])}const lh=[];function rw(n,s){s===void 0&&(s=ci);const[i]=n,r=Kg(i?Gn(i):null),[t,l]=x.useState(lh);function u(){l(()=>n.length?n.map(p=>Lg(p)?r:new Zd(s(p),p)):lh)}const d=mc({callback:u});return Ir(()=>{d?.disconnect(),u(),n.forEach(p=>d?.observe(p))},[n]),t}function Vg(n){if(!n)return null;if(n.children.length>1)return n;const s=n.children[0];return ho(s)?s:n}function aw(n){let{measure:s}=n;const[i,r]=x.useState(null),t=x.useCallback(h=>{for(const{target:v}of h)if(ho(v)){r(y=>{const N=s(v);return y?{...y,width:N.width,height:N.height}:N});break}},[s]),l=mc({callback:t}),u=x.useCallback(h=>{const v=Vg(h);l?.disconnect(),v&&l?.observe(v),r(v?s(v):null)},[s,l]),[d,p]=Kl(u);return x.useMemo(()=>({nodeRef:d,rect:i,setRef:p}),[i,d,p])}const sw=[{sensor:Yg,options:{}},{sensor:$g,options:{}}],iw={current:{}},Bl={draggable:{measure:eh},droppable:{measure:eh,strategy:so.WhileDragging,frequency:Pd.Optimized},dragOverlay:{measure:ci}};class Ji extends Map{get(s){var i;return s!=null&&(i=super.get(s))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:i}=s;return!i})}getNodeFor(s){var i,r;return(i=(r=this.get(s))==null?void 0:r.node.current)!=null?i:void 0}}const ow={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ji,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ql},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Bl,measureDroppableContainers:ql,windowRect:null,measuringScheduled:!1},Qg={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ql,draggableNodes:new Map,over:null,measureDroppableContainers:ql},yo=x.createContext(Qg),Gg=x.createContext(ow);function lw(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ji}}}function cw(n,s){switch(s.type){case Sn.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case Sn.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:s.coordinates.x-n.draggable.initialCoordinates.x,y:s.coordinates.y-n.draggable.initialCoordinates.y}}};case Sn.DragEnd:case Sn.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Sn.RegisterDroppable:{const{element:i}=s,{id:r}=i,t=new Ji(n.droppable.containers);return t.set(r,i),{...n,droppable:{...n.droppable,containers:t}}}case Sn.SetDroppableDisabled:{const{id:i,key:r,disabled:t}=s,l=n.droppable.containers.get(i);if(!l||r!==l.key)return n;const u=new Ji(n.droppable.containers);return u.set(i,{...l,disabled:t}),{...n,droppable:{...n.droppable,containers:u}}}case Sn.UnregisterDroppable:{const{id:i,key:r}=s,t=n.droppable.containers.get(i);if(!t||r!==t.key)return n;const l=new Ji(n.droppable.containers);return l.delete(i),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function uw(n){let{disabled:s}=n;const{active:i,activatorEvent:r,draggableNodes:t}=x.useContext(yo),l=Vl(r),u=Vl(i?.id);return x.useEffect(()=>{if(!s&&!r&&l&&u!=null){if(!pc(l)||document.activeElement===l.target)return;const d=t.get(u);if(!d)return;const{activatorNode:p,node:h}=d;if(!p.current&&!h.current)return;requestAnimationFrame(()=>{for(const v of[p.current,h.current]){if(!v)continue;const y=s0(v);if(y){y.focus();break}}})}},[r,s,t,u,l]),null}function qg(n,s){let{transform:i,...r}=s;return n!=null&&n.length?n.reduce((t,l)=>l({transform:t,...r}),i):i}function dw(n){return x.useMemo(()=>({draggable:{...Bl.draggable,...n?.draggable},droppable:{...Bl.droppable,...n?.droppable},dragOverlay:{...Bl.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function fw(n){let{activeNode:s,measure:i,initialRect:r,config:t=!0}=n;const l=x.useRef(!1),{x:u,y:d}=typeof t=="boolean"?{x:t,y:t}:t;Ir(()=>{if(!u&&!d||!s){l.current=!1;return}if(l.current||!r)return;const h=s?.node.current;if(!h||h.isConnected===!1)return;const v=i(h),y=Pg(v,r);if(u||(y.x=0),d||(y.y=0),l.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const N=Og(h);N&&N.scrollBy({top:y.y,left:y.x})}},[s,u,d,r,i])}const hc=x.createContext({...Lr,scaleX:1,scaleY:1});var Ia;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Ia||(Ia={}));const pw=x.memo(function(s){var i,r,t,l;let{id:u,accessibility:d,autoScroll:p=!0,children:h,sensors:v=sw,collisionDetection:y=N0,measuring:N,modifiers:C,...k}=s;const E=x.useReducer(cw,void 0,lw),[j,I]=E,[$,Y]=d0(),[B,Z]=x.useState(Ia.Uninitialized),ee=B===Ia.Initialized,{draggable:{active:J,nodes:re,translate:te},droppable:{containers:ie}}=j,ne=J!=null?re.get(J):null,Ce=x.useRef({initial:null,translated:null}),ve=x.useMemo(()=>{var lt;return J!=null?{id:J,data:(lt=ne?.data)!=null?lt:iw,rect:Ce}:null},[J,ne]),Te=x.useRef(null),[Ee,be]=x.useState(null),[we,O]=x.useState(null),W=ao(k,Object.values(k)),F=vo("DndDescribedBy",u),b=x.useMemo(()=>ie.getEnabled(),[ie]),L=dw(N),{droppableRects:oe,measureDroppableContainers:he,measuringScheduled:je}=Q0(b,{dragging:ee,dependencies:[te.x,te.y],config:L.droppable}),ke=K0(re,J),Le=x.useMemo(()=>we?Gl(we):null,[we]),Se=vt(),ue=G0(ke,L.draggable.measure);fw({activeNode:J!=null?re.get(J):null,config:Se.layoutShiftCompensation,initialRect:ue,measure:L.draggable.measure});const xe=sh(ke,L.draggable.measure,ue),He=sh(ke?ke.parentElement:null),Xe=x.useRef({activatorEvent:null,active:null,activeNode:ke,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:re,draggingNode:null,draggingNodeRect:null,droppableContainers:ie,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),gt=ie.getNodeFor((i=Xe.current.over)==null?void 0:i.id),Nt=aw({measure:L.dragOverlay.measure}),Ze=(r=Nt.nodeRef.current)!=null?r:ke,Ft=ee?(t=Nt.rect)!=null?t:xe:null,Et=!!(Nt.nodeRef.current&&Nt.rect),ft=X0(Et?null:xe),We=Kg(Ze?Gn(Ze):null),st=Z0(ee?gt??ke:null),Ae=rw(st),At=qg(C,{transform:{x:te.x-ft.x,y:te.y-ft.y,scaleX:1,scaleY:1},activatorEvent:we,active:ve,activeNodeRect:xe,containerNodeRect:He,draggingNodeRect:Ft,over:Xe.current.over,overlayNodeRect:Nt.rect,scrollableAncestors:st,scrollableAncestorRects:Ae,windowRect:We}),Bt=Le?Js(Le,te):null,qt=ew(st),$t=oh(qt),Kt=oh(qt,[xe]),q=Js(At,$t),ye=Ft?C0(Ft,At):null,xt=ve&&ye?y({active:ve,collisionRect:ye,droppableRects:oe,droppableContainers:b,pointerCoordinates:Bt}):null,pt=w0(xt,"id"),[rt,rn]=x.useState(null),ot=Et?At:Js(At,Kt),en=k0(ot,(l=rt?.rect)!=null?l:null,xe),Wn=x.useRef(null),Pn=x.useCallback((lt,Ut)=>{let{sensor:tt,options:Ke}=Ut;if(Te.current==null)return;const it=re.get(Te.current);if(!it)return;const ct=lt.nativeEvent,ut=new tt({active:Te.current,activeNode:it,event:ct,options:Ke,context:Xe,onAbort(wt){if(!re.get(wt))return;const{onDragAbort:le}=W.current,Me={id:wt};le?.(Me),$({type:"onDragAbort",event:Me})},onPending(wt,A,le,Me){if(!re.get(wt))return;const{onDragPending:$e}=W.current,nt={id:wt,constraint:A,initialCoordinates:le,offset:Me};$e?.(nt),$({type:"onDragPending",event:nt})},onStart(wt){const A=Te.current;if(A==null)return;const le=re.get(A);if(!le)return;const{onDragStart:Me}=W.current,Oe={activatorEvent:ct,active:{id:A,data:le.data,rect:Ce}};ha.unstable_batchedUpdates(()=>{Me?.(Oe),Z(Ia.Initializing),I({type:Sn.DragStart,initialCoordinates:wt,active:A}),$({type:"onDragStart",event:Oe}),be(Wn.current),O(ct)})},onMove(wt){I({type:Sn.DragMove,coordinates:wt})},onEnd:Yt(Sn.DragEnd),onCancel:Yt(Sn.DragCancel)});Wn.current=ut;function Yt(wt){return async function(){const{active:le,collisions:Me,over:Oe,scrollAdjustedTranslate:$e}=Xe.current;let nt=null;if(le&&$e){const{cancelDrop:Je}=W.current;nt={activatorEvent:ct,active:le,collisions:Me,delta:$e,over:Oe},wt===Sn.DragEnd&&typeof Je=="function"&&await Promise.resolve(Je(nt))&&(wt=Sn.DragCancel)}Te.current=null,ha.unstable_batchedUpdates(()=>{I({type:wt}),Z(Ia.Uninitialized),rn(null),be(null),O(null),Wn.current=null;const Je=wt===Sn.DragEnd?"onDragEnd":"onDragCancel";if(nt){const kt=W.current[Je];kt?.(nt),$({type:Je,event:nt})}})}}},[re]),Q=x.useCallback((lt,Ut)=>(tt,Ke)=>{const it=tt.nativeEvent,ct=re.get(Ke);if(Te.current!==null||!ct||it.dndKit||it.defaultPrevented)return;const ut={active:ct};lt(tt,Ut.options,ut)===!0&&(it.dndKit={capturedBy:Ut.sensor},Te.current=Ke,Pn(tt,Ut))},[re,Pn]),de=V0(v,Q);tw(v),Ir(()=>{xe&&B===Ia.Initializing&&Z(Ia.Initialized)},[xe,B]),x.useEffect(()=>{const{onDragMove:lt}=W.current,{active:Ut,activatorEvent:tt,collisions:Ke,over:it}=Xe.current;if(!Ut||!tt)return;const ct={active:Ut,activatorEvent:tt,collisions:Ke,delta:{x:q.x,y:q.y},over:it};ha.unstable_batchedUpdates(()=>{lt?.(ct),$({type:"onDragMove",event:ct})})},[q.x,q.y]),x.useEffect(()=>{const{active:lt,activatorEvent:Ut,collisions:tt,droppableContainers:Ke,scrollAdjustedTranslate:it}=Xe.current;if(!lt||Te.current==null||!Ut||!it)return;const{onDragOver:ct}=W.current,ut=Ke.get(pt),Yt=ut&&ut.rect.current?{id:ut.id,rect:ut.rect.current,data:ut.data,disabled:ut.disabled}:null,wt={active:lt,activatorEvent:Ut,collisions:tt,delta:{x:it.x,y:it.y},over:Yt};ha.unstable_batchedUpdates(()=>{rn(Yt),ct?.(wt),$({type:"onDragOver",event:wt})})},[pt]),Ir(()=>{Xe.current={activatorEvent:we,active:ve,activeNode:ke,collisionRect:ye,collisions:xt,droppableRects:oe,draggableNodes:re,draggingNode:Ze,draggingNodeRect:Ft,droppableContainers:ie,over:rt,scrollableAncestors:st,scrollAdjustedTranslate:q},Ce.current={initial:Ft,translated:ye}},[ve,ke,xt,ye,re,Ze,Ft,oe,ie,rt,st,q]),Y0({...Se,delta:te,draggingRect:ye,pointerCoordinates:Bt,scrollableAncestors:st,scrollableAncestorRects:Ae});const qe=x.useMemo(()=>({active:ve,activeNode:ke,activeNodeRect:xe,activatorEvent:we,collisions:xt,containerNodeRect:He,dragOverlay:Nt,draggableNodes:re,droppableContainers:ie,droppableRects:oe,over:rt,measureDroppableContainers:he,scrollableAncestors:st,scrollableAncestorRects:Ae,measuringConfiguration:L,measuringScheduled:je,windowRect:We}),[ve,ke,xe,we,xt,He,Nt,re,ie,oe,rt,he,st,Ae,L,je,We]),ae=x.useMemo(()=>({activatorEvent:we,activators:de,active:ve,activeNodeRect:xe,ariaDescribedById:{draggable:F},dispatch:I,draggableNodes:re,over:rt,measureDroppableContainers:he}),[we,de,ve,xe,I,F,re,rt,he]);return K.createElement(Rg.Provider,{value:Y},K.createElement(yo.Provider,{value:ae},K.createElement(Gg.Provider,{value:qe},K.createElement(hc.Provider,{value:en},h)),K.createElement(uw,{disabled:d?.restoreFocus===!1})),K.createElement(m0,{...d,hiddenTextDescribedById:F}));function vt(){const lt=Ee?.autoScrollEnabled===!1,Ut=typeof p=="object"?p.enabled===!1:p===!1,tt=ee&&!lt&&!Ut;return typeof p=="object"?{...p,enabled:tt}:{enabled:tt}}}),mw=x.createContext(null),ch="button",hw="Draggable";function gw(n){let{id:s,data:i,disabled:r=!1,attributes:t}=n;const l=vo(hw),{activators:u,activatorEvent:d,active:p,activeNodeRect:h,ariaDescribedById:v,draggableNodes:y,over:N}=x.useContext(yo),{role:C=ch,roleDescription:k="draggable",tabIndex:E=0}=t??{},j=p?.id===s,I=x.useContext(j?hc:mw),[$,Y]=Kl(),[B,Z]=Kl(),ee=nw(u,s),J=ao(i);Ir(()=>(y.set(s,{id:s,key:l,node:$,activatorNode:B,data:J}),()=>{const te=y.get(s);te&&te.key===l&&y.delete(s)}),[y,s]);const re=x.useMemo(()=>({role:C,tabIndex:E,"aria-disabled":r,"aria-pressed":j&&C===ch?!0:void 0,"aria-roledescription":k,"aria-describedby":v.draggable}),[r,C,E,j,k,v.draggable]);return{active:p,activatorEvent:d,activeNodeRect:h,attributes:re,isDragging:j,listeners:r?void 0:ee,node:$,over:N,setNodeRef:Y,setActivatorNodeRef:Z,transform:I}}function Jg(){return x.useContext(Gg)}const vw="Droppable",yw={timeout:25};function Xg(n){let{data:s,disabled:i=!1,id:r,resizeObserverConfig:t}=n;const l=vo(vw),{active:u,dispatch:d,over:p,measureDroppableContainers:h}=x.useContext(yo),v=x.useRef({disabled:i}),y=x.useRef(!1),N=x.useRef(null),C=x.useRef(null),{disabled:k,updateMeasurementsFor:E,timeout:j}={...yw,...t},I=ao(E??r),$=x.useCallback(()=>{if(!y.current){y.current=!0;return}C.current!=null&&clearTimeout(C.current),C.current=setTimeout(()=>{h(Array.isArray(I.current)?I.current:[I.current]),C.current=null},j)},[j]),Y=mc({callback:$,disabled:k||!u}),B=x.useCallback((re,te)=>{Y&&(te&&(Y.unobserve(te),y.current=!1),re&&Y.observe(re))},[Y]),[Z,ee]=Kl(B),J=ao(s);return x.useEffect(()=>{!Y||!Z.current||(Y.disconnect(),y.current=!1,Y.observe(Z.current))},[Z,Y]),x.useEffect(()=>(d({type:Sn.RegisterDroppable,element:{id:r,key:l,disabled:i,node:Z,rect:N,data:J}}),()=>d({type:Sn.UnregisterDroppable,key:l,id:r})),[r]),x.useEffect(()=>{i!==v.current.disabled&&(d({type:Sn.SetDroppableDisabled,id:r,key:l,disabled:i}),v.current.disabled=i)},[r,l,i,d]),{active:u,rect:N,isOver:p?.id===r,node:Z,over:p,setNodeRef:ee}}function xw(n){let{animation:s,children:i}=n;const[r,t]=x.useState(null),[l,u]=x.useState(null),d=Vl(i);return!i&&!r&&d&&t(d),Ir(()=>{if(!l)return;const p=r?.key,h=r?.props.id;if(p==null||h==null){t(null);return}Promise.resolve(s(h,l)).then(()=>{t(null)})},[s,r,l]),K.createElement(K.Fragment,null,i,r?x.cloneElement(r,{ref:u}):null)}const ww={x:0,y:0,scaleX:1,scaleY:1};function bw(n){let{children:s}=n;return K.createElement(yo.Provider,{value:Qg},K.createElement(hc.Provider,{value:ww},s))}const Sw={position:"fixed",touchAction:"none"},Nw=n=>pc(n)?"transform 250ms ease":void 0,kw=x.forwardRef((n,s)=>{let{as:i,activatorEvent:r,adjustScale:t,children:l,className:u,rect:d,style:p,transform:h,transition:v=Nw}=n;if(!d)return null;const y=t?h:{...h,scaleX:1,scaleY:1},N={...Sw,width:d.width,height:d.height,top:d.top,left:d.left,transform:Ba.Transform.toString(y),transformOrigin:t&&r?v0(r,d):void 0,transition:typeof v=="function"?v(r):v,...p};return K.createElement(i,{className:u,style:N,ref:s},l)}),jw=n=>s=>{let{active:i,dragOverlay:r}=s;const t={},{styles:l,className:u}=n;if(l!=null&&l.active)for(const[d,p]of Object.entries(l.active))p!==void 0&&(t[d]=i.node.style.getPropertyValue(d),i.node.style.setProperty(d,p));if(l!=null&&l.dragOverlay)for(const[d,p]of Object.entries(l.dragOverlay))p!==void 0&&r.node.style.setProperty(d,p);return u!=null&&u.active&&i.node.classList.add(u.active),u!=null&&u.dragOverlay&&r.node.classList.add(u.dragOverlay),function(){for(const[p,h]of Object.entries(t))i.node.style.setProperty(p,h);u!=null&&u.active&&i.node.classList.remove(u.active)}},Cw=n=>{let{transform:{initial:s,final:i}}=n;return[{transform:Ba.Transform.toString(s)},{transform:Ba.Transform.toString(i)}]},Ew={duration:250,easing:"ease",keyframes:Cw,sideEffects:jw({styles:{active:{opacity:"0"}}})};function Dw(n){let{config:s,draggableNodes:i,droppableContainers:r,measuringConfiguration:t}=n;return fc((l,u)=>{if(s===null)return;const d=i.get(l);if(!d)return;const p=d.node.current;if(!p)return;const h=Vg(u);if(!h)return;const{transform:v}=Gn(u).getComputedStyle(u),y=_g(v);if(!y)return;const N=typeof s=="function"?s:Tw(s);return Ug(p,t.draggable.measure),N({active:{id:l,data:d.data,node:p,rect:t.draggable.measure(p)},draggableNodes:i,dragOverlay:{node:u,rect:t.dragOverlay.measure(h)},droppableContainers:r,measuringConfiguration:t,transform:y})})}function Tw(n){const{duration:s,easing:i,sideEffects:r,keyframes:t}={...Ew,...n};return l=>{let{active:u,dragOverlay:d,transform:p,...h}=l;if(!s)return;const v={x:d.rect.left-u.rect.left,y:d.rect.top-u.rect.top},y={scaleX:p.scaleX!==1?u.rect.width*p.scaleX/d.rect.width:1,scaleY:p.scaleY!==1?u.rect.height*p.scaleY/d.rect.height:1},N={x:p.x-v.x,y:p.y-v.y,...y},C=t({...h,active:u,dragOverlay:d,transform:{initial:p,final:N}}),[k]=C,E=C[C.length-1];if(JSON.stringify(k)===JSON.stringify(E))return;const j=r?.({active:u,dragOverlay:d,...h}),I=d.node.animate(C,{duration:s,easing:i,fill:"forwards"});return new Promise($=>{I.onfinish=()=>{j?.(),$()}})}}let uh=0;function Mw(n){return x.useMemo(()=>{if(n!=null)return uh++,uh},[n])}const Rw=K.memo(n=>{let{adjustScale:s=!1,children:i,dropAnimation:r,style:t,transition:l,modifiers:u,wrapperElement:d="div",className:p,zIndex:h=999}=n;const{activatorEvent:v,active:y,activeNodeRect:N,containerNodeRect:C,draggableNodes:k,droppableContainers:E,dragOverlay:j,over:I,measuringConfiguration:$,scrollableAncestors:Y,scrollableAncestorRects:B,windowRect:Z}=Jg(),ee=x.useContext(hc),J=Mw(y?.id),re=qg(u,{activatorEvent:v,active:y,activeNodeRect:N,containerNodeRect:C,draggingNodeRect:j.rect,over:I,overlayNodeRect:j.rect,scrollableAncestors:Y,scrollableAncestorRects:B,transform:ee,windowRect:Z}),te=tf(N),ie=Dw({config:r,draggableNodes:k,droppableContainers:E,measuringConfiguration:$}),ne=te?j.setRef:void 0;return K.createElement(bw,null,K.createElement(xw,{animation:ie},y&&J?K.createElement(kw,{key:J,id:y.id,ref:ne,as:d,activatorEvent:v,adjustScale:s,className:p,transition:l,rect:te,style:{zIndex:h,...t},transform:re},i):null))});function nf(n,s,i){const r=n.slice();return r.splice(i<0?r.length+i:i,0,r.splice(s,1)[0]),r}function Pw(n,s){return n.reduce((i,r,t)=>{const l=s.get(r);return l&&(i[t]=l),i},Array(n.length))}function Cl(n){return n!==null&&n>=0}function _w(n,s){if(n===s)return!0;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i]!==s[i])return!1;return!0}function Ow(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Zg=n=>{let{rects:s,activeIndex:i,overIndex:r,index:t}=n;const l=nf(s,r,i),u=s[t],d=l[t];return!d||!u?null:{x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height}},El={scaleX:1,scaleY:1},Aw=n=>{var s;let{activeIndex:i,activeNodeRect:r,index:t,rects:l,overIndex:u}=n;const d=(s=l[i])!=null?s:r;if(!d)return null;if(t===i){const h=l[u];return h?{x:0,y:i<u?h.top+h.height-(d.top+d.height):h.top-d.top,...El}:null}const p=Iw(l,t,i);return t>i&&t<=u?{x:0,y:-d.height-p,...El}:t<i&&t>=u?{x:0,y:d.height+p,...El}:{x:0,y:0,...El}};function Iw(n,s,i){const r=n[s],t=n[s-1],l=n[s+1];return r?i<s?t?r.top-(t.top+t.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):t?r.top-(t.top+t.height):0:0}const ev="Sortable",tv=K.createContext({activeIndex:-1,containerId:ev,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Zg,disabled:{draggable:!1,droppable:!1}});function Lw(n){let{children:s,id:i,items:r,strategy:t=Zg,disabled:l=!1}=n;const{active:u,dragOverlay:d,droppableRects:p,over:h,measureDroppableContainers:v}=Jg(),y=vo(ev,i),N=d.rect!==null,C=x.useMemo(()=>r.map(ee=>typeof ee=="object"&&"id"in ee?ee.id:ee),[r]),k=u!=null,E=u?C.indexOf(u.id):-1,j=h?C.indexOf(h.id):-1,I=x.useRef(C),$=!_w(C,I.current),Y=j!==-1&&E===-1||$,B=Ow(l);Ir(()=>{$&&k&&v(C)},[$,C,k,v]),x.useEffect(()=>{I.current=C},[C]);const Z=x.useMemo(()=>({activeIndex:E,containerId:y,disabled:B,disableTransforms:Y,items:C,overIndex:j,useDragOverlay:N,sortedRects:Pw(C,p),strategy:t}),[E,y,B.draggable,B.droppable,Y,C,j,p,N,t]);return K.createElement(tv.Provider,{value:Z},s)}const Fw=n=>{let{id:s,items:i,activeIndex:r,overIndex:t}=n;return nf(i,r,t).indexOf(s)},zw=n=>{let{containerId:s,isSorting:i,wasDragging:r,index:t,items:l,newIndex:u,previousItems:d,previousContainerId:p,transition:h}=n;return!h||!r||d!==l&&t===u?!1:i?!0:u!==t&&s===p},Uw={duration:200,easing:"ease"},nv="transform",Bw=Ba.Transition.toString({property:nv,duration:0,easing:"linear"}),$w={roleDescription:"sortable"};function Yw(n){let{disabled:s,index:i,node:r,rect:t}=n;const[l,u]=x.useState(null),d=x.useRef(i);return Ir(()=>{if(!s&&i!==d.current&&r.current){const p=t.current;if(p){const h=ci(r.current,{ignoreTransform:!0}),v={x:p.left-h.left,y:p.top-h.top,scaleX:p.width/h.width,scaleY:p.height/h.height};(v.x||v.y)&&u(v)}}i!==d.current&&(d.current=i)},[s,i,r,t]),x.useEffect(()=>{l&&u(null)},[l]),l}function Ww(n){let{animateLayoutChanges:s=zw,attributes:i,disabled:r,data:t,getNewIndex:l=Fw,id:u,strategy:d,resizeObserverConfig:p,transition:h=Uw}=n;const{items:v,containerId:y,activeIndex:N,disabled:C,disableTransforms:k,sortedRects:E,overIndex:j,useDragOverlay:I,strategy:$}=x.useContext(tv),Y=Hw(r,C),B=v.indexOf(u),Z=x.useMemo(()=>({sortable:{containerId:y,index:B,items:v},...t}),[y,t,B,v]),ee=x.useMemo(()=>v.slice(v.indexOf(u)),[v,u]),{rect:J,node:re,isOver:te,setNodeRef:ie}=Xg({id:u,data:Z,disabled:Y.droppable,resizeObserverConfig:{updateMeasurementsFor:ee,...p}}),{active:ne,activatorEvent:Ce,activeNodeRect:ve,attributes:Te,setNodeRef:Ee,listeners:be,isDragging:we,over:O,setActivatorNodeRef:W,transform:F}=gw({id:u,data:Z,attributes:{...$w,...i},disabled:Y.draggable}),b=t0(ie,Ee),L=!!ne,oe=L&&!k&&Cl(N)&&Cl(j),he=!I&&we,je=he&&oe?F:null,Le=oe?je??(d??$)({rects:E,activeNodeRect:ve,activeIndex:N,overIndex:j,index:B}):null,Se=Cl(N)&&Cl(j)?l({id:u,items:v,activeIndex:N,overIndex:j}):B,ue=ne?.id,xe=x.useRef({activeId:ue,items:v,newIndex:Se,containerId:y}),He=v!==xe.current.items,Xe=s({active:ne,containerId:y,isDragging:we,isSorting:L,id:u,index:B,items:v,newIndex:xe.current.newIndex,previousItems:xe.current.items,previousContainerId:xe.current.containerId,transition:h,wasDragging:xe.current.activeId!=null}),gt=Yw({disabled:!Xe,index:B,node:re,rect:J});return x.useEffect(()=>{L&&xe.current.newIndex!==Se&&(xe.current.newIndex=Se),y!==xe.current.containerId&&(xe.current.containerId=y),v!==xe.current.items&&(xe.current.items=v)},[L,Se,y,v]),x.useEffect(()=>{if(ue===xe.current.activeId)return;if(ue&&!xe.current.activeId){xe.current.activeId=ue;return}const Ze=setTimeout(()=>{xe.current.activeId=ue},50);return()=>clearTimeout(Ze)},[ue]),{active:ne,activeIndex:N,attributes:Te,data:Z,rect:J,index:B,newIndex:Se,items:v,isOver:te,isSorting:L,isDragging:we,listeners:be,node:re,overIndex:j,over:O,setNodeRef:b,setActivatorNodeRef:W,setDroppableNodeRef:ie,setDraggableNodeRef:Ee,transform:gt??Le,transition:Nt()};function Nt(){if(gt||He&&xe.current.newIndex===B)return Bw;if(!(he&&!pc(Ce)||!h)&&(L||Xe))return Ba.Transition.toString({...h,property:nv})}}function Hw(n,s){var i,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(i=n?.draggable)!=null?i:s.draggable,droppable:(r=n?.droppable)!=null?r:s.droppable}}It.Down,It.Right,It.Up,It.Left;const Kw={Neu:{colClass:"col-new",titleClass:"col-title-new",badgeClass:"kpi-badge-new",icon:""},"In Bearbeitung":{colClass:"col-progress",titleClass:"col-title-progress",badgeClass:"kpi-badge-progress",icon:""},Erledigt:{colClass:"col-done",titleClass:"col-title-done",badgeClass:"kpi-badge-done",icon:""}};function id({id:n,title:s,count:i,itemIds:r,bg:t="",children:l}){const{setNodeRef:u,isOver:d}=Xg({id:n}),p=Kw[n]||{},h=x.useRef(null),[v,y]=x.useState(null);return x.useLayoutEffect(()=>{const N=h.current;if(!N)return;const C=()=>{const k=N.getBoundingClientRect(),E=window.innerHeight||document.documentElement.clientHeight,j=Math.max(240,Math.floor(E-k.top-16));y(j)};return C(),window.addEventListener("resize",C),window.addEventListener("orientationchange",C),()=>{window.removeEventListener("resize",C),window.removeEventListener("orientationchange",C)}},[]),o.jsxs("section",{ref:N=>{u(N),h.current=N},id:n,style:v?{height:v}:void 0,className:["droppable-column","flex flex-col overflow-hidden",p.colClass||t,d?"ring-2 ring-blue-300":""].join(" "),children:[o.jsx("div",{className:"column-header sticky top-0 z-10",children:o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("h2",{className:`col-title flex items-center gap-2 ${p.titleClass||""}`,children:[o.jsx("span",{className:"text-base","aria-hidden":!0,children:p.icon||""}),s]}),o.jsx("span",{className:`kpi-badge ${p.badgeClass||""}`,children:i})]})}),o.jsx(Lw,{items:r,strategy:Aw,children:o.jsx("ul",{className:"flex-1 overflow-y-auto overflow-x-hidden px-2 py-2.5 space-y-2.5",children:l})})]})}var od={exports:{}};var dh;function Vw(){return dh||(dh=1,(function(n){(function(){var s={}.hasOwnProperty;function i(){for(var l="",u=0;u<arguments.length;u++){var d=arguments[u];d&&(l=t(l,r(d)))}return l}function r(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return i.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var u="";for(var d in l)s.call(l,d)&&l[d]&&(u=t(u,d));return u}function t(l,u){return u?l?l+" "+u:l+u:l}n.exports?(i.default=i,n.exports=i):window.classNames=i})()})(od)),od.exports}var Qw=Vw();const Ln=mo(Qw);function wr(n){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},wr(n)}function De(n,s){if(s.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+s.length+" present")}function gc(n){return De(1,arguments),n instanceof Date||wr(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function ze(n){De(1,arguments);var s=Object.prototype.toString.call(n);return n instanceof Date||wr(n)==="object"&&s==="[object Date]"?new Date(n.getTime()):typeof n=="number"||s==="[object Number]"?new Date(n):((typeof n=="string"||s==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function io(n){if(De(1,arguments),!gc(n)&&typeof n!="number")return!1;var s=ze(n);return!isNaN(Number(s))}function yt(n){if(n===null||n===!0||n===!1)return NaN;var s=Number(n);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}function rf(n,s){De(2,arguments);var i=ze(n).getTime(),r=yt(s);return new Date(i+r)}function rv(n,s){De(2,arguments);var i=yt(s);return rf(n,-i)}var Gw=864e5;function qw(n){De(1,arguments);var s=ze(n),i=s.getTime();s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0);var r=s.getTime(),t=i-r;return Math.floor(t/Gw)+1}function Zs(n){De(1,arguments);var s=1,i=ze(n),r=i.getUTCDay(),t=(r<s?7:0)+r-s;return i.setUTCDate(i.getUTCDate()-t),i.setUTCHours(0,0,0,0),i}function av(n){De(1,arguments);var s=ze(n),i=s.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(i+1,0,4),r.setUTCHours(0,0,0,0);var t=Zs(r),l=new Date(0);l.setUTCFullYear(i,0,4),l.setUTCHours(0,0,0,0);var u=Zs(l);return s.getTime()>=t.getTime()?i+1:s.getTime()>=u.getTime()?i:i-1}function Jw(n){De(1,arguments);var s=av(n),i=new Date(0);i.setUTCFullYear(s,0,4),i.setUTCHours(0,0,0,0);var r=Zs(i);return r}var Xw=6048e5;function sv(n){De(1,arguments);var s=ze(n),i=Zs(s).getTime()-Jw(s).getTime();return Math.round(i/Xw)+1}var Zw={};function ys(){return Zw}function gs(n,s){var i,r,t,l,u,d,p,h;De(1,arguments);var v=ys(),y=yt((i=(r=(t=(l=s?.weekStartsOn)!==null&&l!==void 0?l:s==null||(u=s.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:v.weekStartsOn)!==null&&r!==void 0?r:(p=v.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var N=ze(n),C=N.getUTCDay(),k=(C<y?7:0)+C-y;return N.setUTCDate(N.getUTCDate()-k),N.setUTCHours(0,0,0,0),N}function af(n,s){var i,r,t,l,u,d,p,h;De(1,arguments);var v=ze(n),y=v.getUTCFullYear(),N=ys(),C=yt((i=(r=(t=(l=s?.firstWeekContainsDate)!==null&&l!==void 0?l:s==null||(u=s.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:N.firstWeekContainsDate)!==null&&r!==void 0?r:(p=N.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=new Date(0);k.setUTCFullYear(y+1,0,C),k.setUTCHours(0,0,0,0);var E=gs(k,s),j=new Date(0);j.setUTCFullYear(y,0,C),j.setUTCHours(0,0,0,0);var I=gs(j,s);return v.getTime()>=E.getTime()?y+1:v.getTime()>=I.getTime()?y:y-1}function eb(n,s){var i,r,t,l,u,d,p,h;De(1,arguments);var v=ys(),y=yt((i=(r=(t=(l=s?.firstWeekContainsDate)!==null&&l!==void 0?l:s==null||(u=s.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:v.firstWeekContainsDate)!==null&&r!==void 0?r:(p=v.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1),N=af(n,s),C=new Date(0);C.setUTCFullYear(N,0,y),C.setUTCHours(0,0,0,0);var k=gs(C,s);return k}var tb=6048e5;function iv(n,s){De(1,arguments);var i=ze(n),r=gs(i,s).getTime()-eb(i,s).getTime();return Math.round(r/tb)+1}function zt(n,s){for(var i=n<0?"-":"",r=Math.abs(n).toString();r.length<s;)r="0"+r;return i+r}var Oa={y:function(s,i){var r=s.getUTCFullYear(),t=r>0?r:1-r;return zt(i==="yy"?t%100:t,i.length)},M:function(s,i){var r=s.getUTCMonth();return i==="M"?String(r+1):zt(r+1,2)},d:function(s,i){return zt(s.getUTCDate(),i.length)},a:function(s,i){var r=s.getUTCHours()/12>=1?"pm":"am";switch(i){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(s,i){return zt(s.getUTCHours()%12||12,i.length)},H:function(s,i){return zt(s.getUTCHours(),i.length)},m:function(s,i){return zt(s.getUTCMinutes(),i.length)},s:function(s,i){return zt(s.getUTCSeconds(),i.length)},S:function(s,i){var r=i.length,t=s.getUTCMilliseconds(),l=Math.floor(t*Math.pow(10,r-3));return zt(l,i.length)}},Hs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nb={G:function(s,i,r){var t=s.getUTCFullYear()>0?1:0;switch(i){case"G":case"GG":case"GGG":return r.era(t,{width:"abbreviated"});case"GGGGG":return r.era(t,{width:"narrow"});case"GGGG":default:return r.era(t,{width:"wide"})}},y:function(s,i,r){if(i==="yo"){var t=s.getUTCFullYear(),l=t>0?t:1-t;return r.ordinalNumber(l,{unit:"year"})}return Oa.y(s,i)},Y:function(s,i,r,t){var l=af(s,t),u=l>0?l:1-l;if(i==="YY"){var d=u%100;return zt(d,2)}return i==="Yo"?r.ordinalNumber(u,{unit:"year"}):zt(u,i.length)},R:function(s,i){var r=av(s);return zt(r,i.length)},u:function(s,i){var r=s.getUTCFullYear();return zt(r,i.length)},Q:function(s,i,r){var t=Math.ceil((s.getUTCMonth()+1)/3);switch(i){case"Q":return String(t);case"QQ":return zt(t,2);case"Qo":return r.ordinalNumber(t,{unit:"quarter"});case"QQQ":return r.quarter(t,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(t,{width:"wide",context:"formatting"})}},q:function(s,i,r){var t=Math.ceil((s.getUTCMonth()+1)/3);switch(i){case"q":return String(t);case"qq":return zt(t,2);case"qo":return r.ordinalNumber(t,{unit:"quarter"});case"qqq":return r.quarter(t,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(t,{width:"wide",context:"standalone"})}},M:function(s,i,r){var t=s.getUTCMonth();switch(i){case"M":case"MM":return Oa.M(s,i);case"Mo":return r.ordinalNumber(t+1,{unit:"month"});case"MMM":return r.month(t,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(t,{width:"wide",context:"formatting"})}},L:function(s,i,r){var t=s.getUTCMonth();switch(i){case"L":return String(t+1);case"LL":return zt(t+1,2);case"Lo":return r.ordinalNumber(t+1,{unit:"month"});case"LLL":return r.month(t,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(t,{width:"wide",context:"standalone"})}},w:function(s,i,r,t){var l=iv(s,t);return i==="wo"?r.ordinalNumber(l,{unit:"week"}):zt(l,i.length)},I:function(s,i,r){var t=sv(s);return i==="Io"?r.ordinalNumber(t,{unit:"week"}):zt(t,i.length)},d:function(s,i,r){return i==="do"?r.ordinalNumber(s.getUTCDate(),{unit:"date"}):Oa.d(s,i)},D:function(s,i,r){var t=qw(s);return i==="Do"?r.ordinalNumber(t,{unit:"dayOfYear"}):zt(t,i.length)},E:function(s,i,r){var t=s.getUTCDay();switch(i){case"E":case"EE":case"EEE":return r.day(t,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(t,{width:"short",context:"formatting"});case"EEEE":default:return r.day(t,{width:"wide",context:"formatting"})}},e:function(s,i,r,t){var l=s.getUTCDay(),u=(l-t.weekStartsOn+8)%7||7;switch(i){case"e":return String(u);case"ee":return zt(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(s,i,r,t){var l=s.getUTCDay(),u=(l-t.weekStartsOn+8)%7||7;switch(i){case"c":return String(u);case"cc":return zt(u,i.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(s,i,r){var t=s.getUTCDay(),l=t===0?7:t;switch(i){case"i":return String(l);case"ii":return zt(l,i.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(t,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(t,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(t,{width:"short",context:"formatting"});case"iiii":default:return r.day(t,{width:"wide",context:"formatting"})}},a:function(s,i,r){var t=s.getUTCHours(),l=t/12>=1?"pm":"am";switch(i){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(s,i,r){var t=s.getUTCHours(),l;switch(t===12?l=Hs.noon:t===0?l=Hs.midnight:l=t/12>=1?"pm":"am",i){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(s,i,r){var t=s.getUTCHours(),l;switch(t>=17?l=Hs.evening:t>=12?l=Hs.afternoon:t>=4?l=Hs.morning:l=Hs.night,i){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(s,i,r){if(i==="ho"){var t=s.getUTCHours()%12;return t===0&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Oa.h(s,i)},H:function(s,i,r){return i==="Ho"?r.ordinalNumber(s.getUTCHours(),{unit:"hour"}):Oa.H(s,i)},K:function(s,i,r){var t=s.getUTCHours()%12;return i==="Ko"?r.ordinalNumber(t,{unit:"hour"}):zt(t,i.length)},k:function(s,i,r){var t=s.getUTCHours();return t===0&&(t=24),i==="ko"?r.ordinalNumber(t,{unit:"hour"}):zt(t,i.length)},m:function(s,i,r){return i==="mo"?r.ordinalNumber(s.getUTCMinutes(),{unit:"minute"}):Oa.m(s,i)},s:function(s,i,r){return i==="so"?r.ordinalNumber(s.getUTCSeconds(),{unit:"second"}):Oa.s(s,i)},S:function(s,i){return Oa.S(s,i)},X:function(s,i,r,t){var l=t._originalDate||s,u=l.getTimezoneOffset();if(u===0)return"Z";switch(i){case"X":return ph(u);case"XXXX":case"XX":return cs(u);case"XXXXX":case"XXX":default:return cs(u,":")}},x:function(s,i,r,t){var l=t._originalDate||s,u=l.getTimezoneOffset();switch(i){case"x":return ph(u);case"xxxx":case"xx":return cs(u);case"xxxxx":case"xxx":default:return cs(u,":")}},O:function(s,i,r,t){var l=t._originalDate||s,u=l.getTimezoneOffset();switch(i){case"O":case"OO":case"OOO":return"GMT"+fh(u,":");case"OOOO":default:return"GMT"+cs(u,":")}},z:function(s,i,r,t){var l=t._originalDate||s,u=l.getTimezoneOffset();switch(i){case"z":case"zz":case"zzz":return"GMT"+fh(u,":");case"zzzz":default:return"GMT"+cs(u,":")}},t:function(s,i,r,t){var l=t._originalDate||s,u=Math.floor(l.getTime()/1e3);return zt(u,i.length)},T:function(s,i,r,t){var l=t._originalDate||s,u=l.getTime();return zt(u,i.length)}};function fh(n,s){var i=n>0?"-":"+",r=Math.abs(n),t=Math.floor(r/60),l=r%60;if(l===0)return i+String(t);var u=s;return i+String(t)+u+zt(l,2)}function ph(n,s){if(n%60===0){var i=n>0?"-":"+";return i+zt(Math.abs(n)/60,2)}return cs(n,s)}function cs(n,s){var i=s||"",r=n>0?"-":"+",t=Math.abs(n),l=zt(Math.floor(t/60),2),u=zt(t%60,2);return r+l+i+u}var mh=function(s,i){switch(s){case"P":return i.date({width:"short"});case"PP":return i.date({width:"medium"});case"PPP":return i.date({width:"long"});case"PPPP":default:return i.date({width:"full"})}},ov=function(s,i){switch(s){case"p":return i.time({width:"short"});case"pp":return i.time({width:"medium"});case"ppp":return i.time({width:"long"});case"pppp":default:return i.time({width:"full"})}},rb=function(s,i){var r=s.match(/(P+)(p+)?/)||[],t=r[1],l=r[2];if(!l)return mh(s,i);var u;switch(t){case"P":u=i.dateTime({width:"short"});break;case"PP":u=i.dateTime({width:"medium"});break;case"PPP":u=i.dateTime({width:"long"});break;case"PPPP":default:u=i.dateTime({width:"full"});break}return u.replace("{{date}}",mh(t,i)).replace("{{time}}",ov(l,i))},_d={p:ov,P:rb};function Xl(n){var s=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return s.setUTCFullYear(n.getFullYear()),n.getTime()-s.getTime()}var ab=["D","DD"],sb=["YY","YYYY"];function lv(n){return ab.indexOf(n)!==-1}function cv(n){return sb.indexOf(n)!==-1}function Zl(n,s,i){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(s,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(s,"`) for formatting years to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(s,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(s,"`) for formatting days of the month to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var ib={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ob=function(s,i,r){var t,l=ib[s];return typeof l=="string"?t=l:i===1?t=l.one:t=l.other.replace("{{count}}",i.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+t:t+" ago":t};function Xs(n){return function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=s.width?String(s.width):n.defaultWidth,r=n.formats[i]||n.formats[n.defaultWidth];return r}}var lb={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cb={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ub={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},db={date:Xs({formats:lb,defaultWidth:"full"}),time:Xs({formats:cb,defaultWidth:"full"}),dateTime:Xs({formats:ub,defaultWidth:"full"})},fb={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pb=function(s,i,r,t){return fb[s]};function Qr(n){return function(s,i){var r=i!=null&&i.context?String(i.context):"standalone",t;if(r==="formatting"&&n.formattingValues){var l=n.defaultFormattingWidth||n.defaultWidth,u=i!=null&&i.width?String(i.width):l;t=n.formattingValues[u]||n.formattingValues[l]}else{var d=n.defaultWidth,p=i!=null&&i.width?String(i.width):n.defaultWidth;t=n.values[p]||n.values[d]}var h=n.argumentCallback?n.argumentCallback(s):s;return t[h]}}var mb={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hb={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gb={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vb={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xb={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},wb=function(s,i){var r=Number(s),t=r%100;if(t>20||t<10)switch(t%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},bb={ordinalNumber:wb,era:Qr({values:mb,defaultWidth:"wide"}),quarter:Qr({values:hb,defaultWidth:"wide",argumentCallback:function(s){return s-1}}),month:Qr({values:gb,defaultWidth:"wide"}),day:Qr({values:vb,defaultWidth:"wide"}),dayPeriod:Qr({values:yb,defaultWidth:"wide",formattingValues:xb,defaultFormattingWidth:"wide"})};function Gr(n){return function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.width,t=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],l=s.match(t);if(!l)return null;var u=l[0],d=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(d)?Nb(d,function(y){return y.test(u)}):Sb(d,function(y){return y.test(u)}),h;h=n.valueCallback?n.valueCallback(p):p,h=i.valueCallback?i.valueCallback(h):h;var v=s.slice(u.length);return{value:h,rest:v}}}function Sb(n,s){for(var i in n)if(n.hasOwnProperty(i)&&s(n[i]))return i}function Nb(n,s){for(var i=0;i<n.length;i++)if(s(n[i]))return i}function uv(n){return function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=s.match(n.matchPattern);if(!r)return null;var t=r[0],l=s.match(n.parsePattern);if(!l)return null;var u=n.valueCallback?n.valueCallback(l[0]):l[0];u=i.valueCallback?i.valueCallback(u):u;var d=s.slice(t.length);return{value:u,rest:d}}}var kb=/^(\d+)(th|st|nd|rd)?/i,jb=/\d+/i,Cb={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Eb={any:[/^b/i,/^(a|c)/i]},Db={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Tb={any:[/1/i,/2/i,/3/i,/4/i]},Mb={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rb={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pb={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_b={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ob={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ab={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ib={ordinalNumber:uv({matchPattern:kb,parsePattern:jb,valueCallback:function(s){return parseInt(s,10)}}),era:Gr({matchPatterns:Cb,defaultMatchWidth:"wide",parsePatterns:Eb,defaultParseWidth:"any"}),quarter:Gr({matchPatterns:Db,defaultMatchWidth:"wide",parsePatterns:Tb,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:Gr({matchPatterns:Mb,defaultMatchWidth:"wide",parsePatterns:Rb,defaultParseWidth:"any"}),day:Gr({matchPatterns:Pb,defaultMatchWidth:"wide",parsePatterns:_b,defaultParseWidth:"any"}),dayPeriod:Gr({matchPatterns:Ob,defaultMatchWidth:"any",parsePatterns:Ab,defaultParseWidth:"any"})},dv={code:"en-US",formatDistance:ob,formatLong:db,formatRelative:pb,localize:bb,match:Ib,options:{weekStartsOn:0,firstWeekContainsDate:1}},Lb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fb=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zb=/^'([^]*?)'?$/,Ub=/''/g,Bb=/[a-zA-Z]/;function hh(n,s,i){var r,t,l,u,d,p,h,v,y,N,C,k,E,j,I,$,Y,B;De(2,arguments);var Z=String(s),ee=ys(),J=(r=(t=i?.locale)!==null&&t!==void 0?t:ee.locale)!==null&&r!==void 0?r:dv,re=yt((l=(u=(d=(p=i?.firstWeekContainsDate)!==null&&p!==void 0?p:i==null||(h=i.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.firstWeekContainsDate)!==null&&d!==void 0?d:ee.firstWeekContainsDate)!==null&&u!==void 0?u:(y=ee.locale)===null||y===void 0||(N=y.options)===null||N===void 0?void 0:N.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(re>=1&&re<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var te=yt((C=(k=(E=(j=i?.weekStartsOn)!==null&&j!==void 0?j:i==null||(I=i.locale)===null||I===void 0||($=I.options)===null||$===void 0?void 0:$.weekStartsOn)!==null&&E!==void 0?E:ee.weekStartsOn)!==null&&k!==void 0?k:(Y=ee.locale)===null||Y===void 0||(B=Y.options)===null||B===void 0?void 0:B.weekStartsOn)!==null&&C!==void 0?C:0);if(!(te>=0&&te<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!J.localize)throw new RangeError("locale must contain localize property");if(!J.formatLong)throw new RangeError("locale must contain formatLong property");var ie=ze(n);if(!io(ie))throw new RangeError("Invalid time value");var ne=Xl(ie),Ce=rv(ie,ne),ve={firstWeekContainsDate:re,weekStartsOn:te,locale:J,_originalDate:ie},Te=Z.match(Fb).map(function(Ee){var be=Ee[0];if(be==="p"||be==="P"){var we=_d[be];return we(Ee,J.formatLong)}return Ee}).join("").match(Lb).map(function(Ee){if(Ee==="''")return"'";var be=Ee[0];if(be==="'")return $b(Ee);var we=nb[be];if(we)return!(i!=null&&i.useAdditionalWeekYearTokens)&&cv(Ee)&&Zl(Ee,s,String(n)),!(i!=null&&i.useAdditionalDayOfYearTokens)&&lv(Ee)&&Zl(Ee,s,String(n)),we(Ce,Ee,J.localize,ve);if(be.match(Bb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+be+"`");return Ee}).join("");return Te}function $b(n){var s=n.match(zb);return s?s[1].replace(Ub,"'"):n}var Yb=6e4;function Od(n,s){De(2,arguments);var i=yt(s);return rf(n,i*Yb)}var Wb=36e5;function Hb(n,s){De(2,arguments);var i=yt(s);return rf(n,i*Wb)}function ui(n,s){De(2,arguments);var i=ze(n),r=yt(s);return isNaN(r)?new Date(NaN):(r&&i.setDate(i.getDate()+r),i)}function ec(n,s){De(2,arguments);var i=yt(s),r=i*7;return ui(n,r)}function Fr(n,s){De(2,arguments);var i=ze(n),r=yt(s);if(isNaN(r))return new Date(NaN);if(!r)return i;var t=i.getDate(),l=new Date(i.getTime());l.setMonth(i.getMonth()+r+1,0);var u=l.getDate();return t>=u?l:(i.setFullYear(l.getFullYear(),l.getMonth(),t),i)}function fv(n,s){De(2,arguments);var i=yt(s),r=i*3;return Fr(n,r)}function ei(n,s){De(2,arguments);var i=yt(s);return Fr(n,i*12)}function Kb(n,s){De(2,arguments);var i=yt(s);return ui(n,-i)}function gh(n,s){De(2,arguments);var i=yt(s);return ec(n,-i)}function ti(n,s){De(2,arguments);var i=yt(s);return Fr(n,-i)}function Vb(n,s){De(2,arguments);var i=yt(s);return fv(n,-i)}function oo(n,s){De(2,arguments);var i=yt(s);return ei(n,-i)}function vh(n){De(1,arguments);var s=ze(n),i=s.getSeconds();return i}function Xr(n){De(1,arguments);var s=ze(n),i=s.getMinutes();return i}function Zr(n){De(1,arguments);var s=ze(n),i=s.getHours();return i}function Qb(n){De(1,arguments);var s=ze(n),i=s.getDay();return i}function yh(n){De(1,arguments);var s=ze(n),i=s.getDate();return i}function pv(n,s){var i,r,t,l,u,d,p,h;De(1,arguments);var v=ys(),y=yt((i=(r=(t=(l=s?.weekStartsOn)!==null&&l!==void 0?l:s==null||(u=s.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:v.weekStartsOn)!==null&&r!==void 0?r:(p=v.locale)===null||p===void 0||(h=p.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&i!==void 0?i:0);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var N=ze(n),C=N.getDay(),k=(C<y?7:0)+C-y;return N.setDate(N.getDate()-k),N.setHours(0,0,0,0),N}function tc(n){return De(1,arguments),pv(n,{weekStartsOn:1})}function Gb(n){De(1,arguments);var s=ze(n),i=s.getFullYear(),r=new Date(0);r.setFullYear(i+1,0,4),r.setHours(0,0,0,0);var t=tc(r),l=new Date(0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);var u=tc(l);return s.getTime()>=t.getTime()?i+1:s.getTime()>=u.getTime()?i:i-1}function qb(n){De(1,arguments);var s=Gb(n),i=new Date(0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);var r=tc(i);return r}var Jb=6048e5;function Xb(n){De(1,arguments);var s=ze(n),i=tc(s).getTime()-qb(s).getTime();return Math.round(i/Jb)+1}function Yn(n){De(1,arguments);var s=ze(n),i=s.getMonth();return i}function Vs(n){De(1,arguments);var s=ze(n),i=Math.floor(s.getMonth()/3)+1;return i}function St(n){return De(1,arguments),ze(n).getFullYear()}function Ad(n){De(1,arguments);var s=ze(n),i=s.getTime();return i}function Zb(n,s){De(2,arguments);var i=ze(n),r=yt(s);return i.setSeconds(r),i}function $l(n,s){De(2,arguments);var i=ze(n),r=yt(s);return i.setMinutes(r),i}function Yl(n,s){De(2,arguments);var i=ze(n),r=yt(s);return i.setHours(r),i}function eS(n){De(1,arguments);var s=ze(n),i=s.getFullYear(),r=s.getMonth(),t=new Date(0);return t.setFullYear(i,r+1,0),t.setHours(0,0,0,0),t.getDate()}function Qn(n,s){De(2,arguments);var i=ze(n),r=yt(s),t=i.getFullYear(),l=i.getDate(),u=new Date(0);u.setFullYear(t,r,15),u.setHours(0,0,0,0);var d=eS(u);return i.setMonth(r,Math.min(l,d)),i}function Ks(n,s){De(2,arguments);var i=ze(n),r=yt(s),t=Math.floor(i.getMonth()/3)+1,l=r-t;return Qn(i,i.getMonth()+l*3)}function ma(n,s){De(2,arguments);var i=ze(n),r=yt(s);return isNaN(i.getTime())?new Date(NaN):(i.setFullYear(r),i)}function xh(n){De(1,arguments);var s;if(n&&typeof n.forEach=="function")s=n;else if(wr(n)==="object"&&n!==null)s=Array.prototype.slice.call(n);else return new Date(NaN);var i;return s.forEach(function(r){var t=ze(r);(i===void 0||i>t||isNaN(t.getDate()))&&(i=t)}),i||new Date(NaN)}function wh(n){De(1,arguments);var s;if(n&&typeof n.forEach=="function")s=n;else if(wr(n)==="object"&&n!==null)s=Array.prototype.slice.call(n);else return new Date(NaN);var i;return s.forEach(function(r){var t=ze(r);(i===void 0||i<t||isNaN(Number(t)))&&(i=t)}),i||new Date(NaN)}function ea(n){De(1,arguments);var s=ze(n);return s.setHours(0,0,0,0),s}var tS=864e5;function nc(n,s){De(2,arguments);var i=ea(n),r=ea(s),t=i.getTime()-Xl(i),l=r.getTime()-Xl(r);return Math.round((t-l)/tS)}function rc(n,s){De(2,arguments);var i=ze(n),r=ze(s),t=i.getFullYear()-r.getFullYear(),l=i.getMonth()-r.getMonth();return t*12+l}function ac(n,s){De(2,arguments);var i=ze(n),r=ze(s);return i.getFullYear()-r.getFullYear()}function mv(n){De(1,arguments);var s=ze(n);return s.setDate(1),s.setHours(0,0,0,0),s}function Id(n){De(1,arguments);var s=ze(n),i=s.getMonth(),r=i-i%3;return s.setMonth(r,1),s.setHours(0,0,0,0),s}function hv(n){De(1,arguments);var s=ze(n),i=new Date(0);return i.setFullYear(s.getFullYear(),0,1),i.setHours(0,0,0,0),i}function Ld(n){De(1,arguments);var s=ze(n);return s.setHours(23,59,59,999),s}function nS(n){De(1,arguments);var s=ze(n),i=s.getMonth();return s.setFullYear(s.getFullYear(),i+1,0),s.setHours(23,59,59,999),s}function rS(n){De(1,arguments);var s=ze(n),i=s.getFullYear();return s.setFullYear(i+1,0,0),s.setHours(23,59,59,999),s}function aS(n,s){De(2,arguments);var i=ze(n),r=ze(s);return i.getTime()===r.getTime()}function sS(n,s){De(2,arguments);var i=ea(n),r=ea(s);return i.getTime()===r.getTime()}function iS(n,s){De(2,arguments);var i=ze(n),r=ze(s);return i.getFullYear()===r.getFullYear()&&i.getMonth()===r.getMonth()}function oS(n,s){De(2,arguments);var i=ze(n),r=ze(s);return i.getFullYear()===r.getFullYear()}function lS(n,s){De(2,arguments);var i=Id(n),r=Id(s);return i.getTime()===r.getTime()}function $a(n,s){De(2,arguments);var i=ze(n),r=ze(s);return i.getTime()>r.getTime()}function Fa(n,s){De(2,arguments);var i=ze(n),r=ze(s);return i.getTime()<r.getTime()}function lo(n,s){De(2,arguments);var i=ze(n).getTime(),r=ze(s.start).getTime(),t=ze(s.end).getTime();if(!(r<=t))throw new RangeError("Invalid interval");return i>=r&&i<=t}function bh(n,s){(s==null||s>n.length)&&(s=n.length);for(var i=0,r=Array(s);i<s;i++)r[i]=n[i];return r}function cS(n,s){if(n){if(typeof n=="string")return bh(n,s);var i={}.toString.call(n).slice(8,-1);return i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set"?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?bh(n,s):void 0}}function Sh(n,s){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=cS(n))||s){i&&(n=i);var r=0,t=function(){};return{s:t,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(h){throw h},f:t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,u=!0,d=!1;return{s:function(){i=i.call(n)},n:function(){var h=i.next();return u=h.done,h},e:function(h){d=!0,l=h},f:function(){try{u||i.return==null||i.return()}finally{if(d)throw l}}}}function uS(n,s){if(n==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i]);return n}function Ie(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Fd(n,s){return Fd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Fd(n,s)}function Rt(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),s&&Fd(n,s)}function sc(n){return sc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},sc(n)}function gv(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gv=function(){return!!n})()}function dS(n,s){if(s&&(wr(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ie(n)}function Pt(n){var s=gv();return function(){var i,r=sc(n);if(s){var t=sc(this).constructor;i=Reflect.construct(r,arguments,t)}else i=r.apply(this,arguments);return dS(this,i)}}function jt(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function fS(n,s){if(wr(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,s);if(wr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(n)}function vv(n){var s=fS(n,"string");return wr(s)=="symbol"?s:s+""}function pS(n,s){for(var i=0;i<s.length;i++){var r=s[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,vv(r.key),r)}}function Ct(n,s,i){return s&&pS(n.prototype,s),Object.defineProperty(n,"prototype",{writable:!1}),n}function Pe(n,s,i){return(s=vv(s))in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}var mS=10,yv=(function(){function n(){jt(this,n),Pe(this,"priority",void 0),Pe(this,"subPriority",0)}return Ct(n,[{key:"validate",value:function(i,r){return!0}}]),n})(),hS=(function(n){Rt(i,n);var s=Pt(i);function i(r,t,l,u,d){var p;return jt(this,i),p=s.call(this),p.value=r,p.validateValue=t,p.setValue=l,p.priority=u,d&&(p.subPriority=d),p}return Ct(i,[{key:"validate",value:function(t,l){return this.validateValue(t,this.value,l)}},{key:"set",value:function(t,l,u){return this.setValue(t,l,this.value,u)}}]),i})(yv),gS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",mS),Pe(Ie(r),"subPriority",-1),r}return Ct(i,[{key:"set",value:function(t,l){if(l.timestampIsSet)return t;var u=new Date(0);return u.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),u.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),u}}]),i})(yv),Lt=(function(){function n(){jt(this,n),Pe(this,"incompatibleTokens",void 0),Pe(this,"priority",void 0),Pe(this,"subPriority",void 0)}return Ct(n,[{key:"run",value:function(i,r,t,l){var u=this.parse(i,r,t,l);return u?{setter:new hS(u.value,this.validate,this.set,this.priority,this.subPriority),rest:u.rest}:null}},{key:"validate",value:function(i,r,t){return!0}}]),n})(),vS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",140),Pe(Ie(r),"incompatibleTokens",["R","u","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"G":case"GG":case"GGG":return u.era(t,{width:"abbreviated"})||u.era(t,{width:"narrow"});case"GGGGG":return u.era(t,{width:"narrow"});case"GGGG":default:return u.era(t,{width:"wide"})||u.era(t,{width:"abbreviated"})||u.era(t,{width:"narrow"})}}},{key:"set",value:function(t,l,u){return l.era=u,t.setUTCFullYear(u,0,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),sf=6e4,of=36e5,yS=1e3,fn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},qr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function pn(n,s){return n&&{value:s(n.value),rest:n.rest}}function on(n,s){var i=s.match(n);return i?{value:parseInt(i[0],10),rest:s.slice(i[0].length)}:null}function Jr(n,s){var i=s.match(n);if(!i)return null;if(i[0]==="Z")return{value:0,rest:s.slice(1)};var r=i[1]==="+"?1:-1,t=i[2]?parseInt(i[2],10):0,l=i[3]?parseInt(i[3],10):0,u=i[5]?parseInt(i[5],10):0;return{value:r*(t*of+l*sf+u*yS),rest:s.slice(i[0].length)}}function xv(n){return on(fn.anyDigitsSigned,n)}function un(n,s){switch(n){case 1:return on(fn.singleDigit,s);case 2:return on(fn.twoDigits,s);case 3:return on(fn.threeDigits,s);case 4:return on(fn.fourDigits,s);default:return on(new RegExp("^\\d{1,"+n+"}"),s)}}function ic(n,s){switch(n){case 1:return on(fn.singleDigitSigned,s);case 2:return on(fn.twoDigitsSigned,s);case 3:return on(fn.threeDigitsSigned,s);case 4:return on(fn.fourDigitsSigned,s);default:return on(new RegExp("^-?\\d{1,"+n+"}"),s)}}function lf(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function wv(n,s){var i=s>0,r=i?s:1-s,t;if(r<=50)t=n||100;else{var l=r+50,u=Math.floor(l/100)*100,d=n>=l%100;t=n+u-(d?100:0)}return i?t:1-t}function bv(n){return n%400===0||n%4===0&&n%100!==0}var xS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",130),Pe(Ie(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return{year:h,isTwoDigitYear:l==="yy"}};switch(l){case"y":return pn(un(4,t),d);case"yo":return pn(u.ordinalNumber(t,{unit:"year"}),d);default:return pn(un(l.length,t),d)}}},{key:"validate",value:function(t,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(t,l,u){var d=t.getUTCFullYear();if(u.isTwoDigitYear){var p=wv(u.year,d);return t.setUTCFullYear(p,0,1),t.setUTCHours(0,0,0,0),t}var h=!("era"in l)||l.era===1?u.year:1-u.year;return t.setUTCFullYear(h,0,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),wS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",130),Pe(Ie(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return{year:h,isTwoDigitYear:l==="YY"}};switch(l){case"Y":return pn(un(4,t),d);case"Yo":return pn(u.ordinalNumber(t,{unit:"year"}),d);default:return pn(un(l.length,t),d)}}},{key:"validate",value:function(t,l){return l.isTwoDigitYear||l.year>0}},{key:"set",value:function(t,l,u,d){var p=af(t,d);if(u.isTwoDigitYear){var h=wv(u.year,p);return t.setUTCFullYear(h,0,d.firstWeekContainsDate),t.setUTCHours(0,0,0,0),gs(t,d)}var v=!("era"in l)||l.era===1?u.year:1-u.year;return t.setUTCFullYear(v,0,d.firstWeekContainsDate),t.setUTCHours(0,0,0,0),gs(t,d)}}]),i})(Lt),bS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",130),Pe(Ie(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l){return ic(l==="R"?4:l.length,t)}},{key:"set",value:function(t,l,u){var d=new Date(0);return d.setUTCFullYear(u,0,4),d.setUTCHours(0,0,0,0),Zs(d)}}]),i})(Lt),SS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",130),Pe(Ie(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l){return ic(l==="u"?4:l.length,t)}},{key:"set",value:function(t,l,u){return t.setUTCFullYear(u,0,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),NS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",120),Pe(Ie(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"Q":case"QQ":return un(l.length,t);case"Qo":return u.ordinalNumber(t,{unit:"quarter"});case"QQQ":return u.quarter(t,{width:"abbreviated",context:"formatting"})||u.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return u.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return u.quarter(t,{width:"wide",context:"formatting"})||u.quarter(t,{width:"abbreviated",context:"formatting"})||u.quarter(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=1&&l<=4}},{key:"set",value:function(t,l,u){return t.setUTCMonth((u-1)*3,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),kS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",120),Pe(Ie(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"q":case"qq":return un(l.length,t);case"qo":return u.ordinalNumber(t,{unit:"quarter"});case"qqq":return u.quarter(t,{width:"abbreviated",context:"standalone"})||u.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return u.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return u.quarter(t,{width:"wide",context:"standalone"})||u.quarter(t,{width:"abbreviated",context:"standalone"})||u.quarter(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,l){return l>=1&&l<=4}},{key:"set",value:function(t,l,u){return t.setUTCMonth((u-1)*3,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),jS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Pe(Ie(r),"priority",110),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return h-1};switch(l){case"M":return pn(on(fn.month,t),d);case"MM":return pn(un(2,t),d);case"Mo":return pn(u.ordinalNumber(t,{unit:"month"}),d);case"MMM":return u.month(t,{width:"abbreviated",context:"formatting"})||u.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return u.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return u.month(t,{width:"wide",context:"formatting"})||u.month(t,{width:"abbreviated",context:"formatting"})||u.month(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=11}},{key:"set",value:function(t,l,u){return t.setUTCMonth(u,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),CS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",110),Pe(Ie(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return h-1};switch(l){case"L":return pn(on(fn.month,t),d);case"LL":return pn(un(2,t),d);case"Lo":return pn(u.ordinalNumber(t,{unit:"month"}),d);case"LLL":return u.month(t,{width:"abbreviated",context:"standalone"})||u.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return u.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return u.month(t,{width:"wide",context:"standalone"})||u.month(t,{width:"abbreviated",context:"standalone"})||u.month(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=11}},{key:"set",value:function(t,l,u){return t.setUTCMonth(u,1),t.setUTCHours(0,0,0,0),t}}]),i})(Lt);function ES(n,s,i){De(2,arguments);var r=ze(n),t=yt(s),l=iv(r,i)-t;return r.setUTCDate(r.getUTCDate()-l*7),r}var DS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",100),Pe(Ie(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"w":return on(fn.week,t);case"wo":return u.ordinalNumber(t,{unit:"week"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=53}},{key:"set",value:function(t,l,u,d){return gs(ES(t,u,d),d)}}]),i})(Lt);function TS(n,s){De(2,arguments);var i=ze(n),r=yt(s),t=sv(i)-r;return i.setUTCDate(i.getUTCDate()-t*7),i}var MS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",100),Pe(Ie(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"I":return on(fn.week,t);case"Io":return u.ordinalNumber(t,{unit:"week"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=53}},{key:"set",value:function(t,l,u){return Zs(TS(t,u))}}]),i})(Lt),RS=[31,28,31,30,31,30,31,31,30,31,30,31],PS=[31,29,31,30,31,30,31,31,30,31,30,31],_S=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",90),Pe(Ie(r),"subPriority",1),Pe(Ie(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"d":return on(fn.date,t);case"do":return u.ordinalNumber(t,{unit:"date"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){var u=t.getUTCFullYear(),d=bv(u),p=t.getUTCMonth();return d?l>=1&&l<=PS[p]:l>=1&&l<=RS[p]}},{key:"set",value:function(t,l,u){return t.setUTCDate(u),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),OS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",90),Pe(Ie(r),"subpriority",1),Pe(Ie(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"D":case"DD":return on(fn.dayOfYear,t);case"Do":return u.ordinalNumber(t,{unit:"date"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){var u=t.getUTCFullYear(),d=bv(u);return d?l>=1&&l<=366:l>=1&&l<=365}},{key:"set",value:function(t,l,u){return t.setUTCMonth(0,u),t.setUTCHours(0,0,0,0),t}}]),i})(Lt);function cf(n,s,i){var r,t,l,u,d,p,h,v;De(2,arguments);var y=ys(),N=yt((r=(t=(l=(u=i?.weekStartsOn)!==null&&u!==void 0?u:i==null||(d=i.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&l!==void 0?l:y.weekStartsOn)!==null&&t!==void 0?t:(h=y.locale)===null||h===void 0||(v=h.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&r!==void 0?r:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var C=ze(n),k=yt(s),E=C.getUTCDay(),j=k%7,I=(j+7)%7,$=(I<N?7:0)+k-E;return C.setUTCDate(C.getUTCDate()+$),C}var AS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",90),Pe(Ie(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"E":case"EE":case"EEE":return u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return u.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return u.day(t,{width:"wide",context:"formatting"})||u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=6}},{key:"set",value:function(t,l,u,d){return t=cf(t,u,d),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),IS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",90),Pe(Ie(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u,d){var p=function(v){var y=Math.floor((v-1)/7)*7;return(v+d.weekStartsOn+6)%7+y};switch(l){case"e":case"ee":return pn(un(l.length,t),p);case"eo":return pn(u.ordinalNumber(t,{unit:"day"}),p);case"eee":return u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});case"eeeee":return u.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return u.day(t,{width:"wide",context:"formatting"})||u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=6}},{key:"set",value:function(t,l,u,d){return t=cf(t,u,d),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),LS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",90),Pe(Ie(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u,d){var p=function(v){var y=Math.floor((v-1)/7)*7;return(v+d.weekStartsOn+6)%7+y};switch(l){case"c":case"cc":return pn(un(l.length,t),p);case"co":return pn(u.ordinalNumber(t,{unit:"day"}),p);case"ccc":return u.day(t,{width:"abbreviated",context:"standalone"})||u.day(t,{width:"short",context:"standalone"})||u.day(t,{width:"narrow",context:"standalone"});case"ccccc":return u.day(t,{width:"narrow",context:"standalone"});case"cccccc":return u.day(t,{width:"short",context:"standalone"})||u.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return u.day(t,{width:"wide",context:"standalone"})||u.day(t,{width:"abbreviated",context:"standalone"})||u.day(t,{width:"short",context:"standalone"})||u.day(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,l){return l>=0&&l<=6}},{key:"set",value:function(t,l,u,d){return t=cf(t,u,d),t.setUTCHours(0,0,0,0),t}}]),i})(Lt);function FS(n,s){De(2,arguments);var i=yt(s);i%7===0&&(i=i-7);var r=1,t=ze(n),l=t.getUTCDay(),u=i%7,d=(u+7)%7,p=(d<r?7:0)+i-l;return t.setUTCDate(t.getUTCDate()+p),t}var zS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",90),Pe(Ie(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){var d=function(h){return h===0?7:h};switch(l){case"i":case"ii":return un(l.length,t);case"io":return u.ordinalNumber(t,{unit:"day"});case"iii":return pn(u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"}),d);case"iiiii":return pn(u.day(t,{width:"narrow",context:"formatting"}),d);case"iiiiii":return pn(u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"}),d);case"iiii":default:return pn(u.day(t,{width:"wide",context:"formatting"})||u.day(t,{width:"abbreviated",context:"formatting"})||u.day(t,{width:"short",context:"formatting"})||u.day(t,{width:"narrow",context:"formatting"}),d)}}},{key:"validate",value:function(t,l){return l>=1&&l<=7}},{key:"set",value:function(t,l,u){return t=FS(t,u),t.setUTCHours(0,0,0,0),t}}]),i})(Lt),US=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",80),Pe(Ie(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"a":case"aa":case"aaa":return u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return u.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return u.dayPeriod(t,{width:"wide",context:"formatting"})||u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,l,u){return t.setUTCHours(lf(u),0,0,0),t}}]),i})(Lt),BS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",80),Pe(Ie(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"b":case"bb":case"bbb":return u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return u.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return u.dayPeriod(t,{width:"wide",context:"formatting"})||u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,l,u){return t.setUTCHours(lf(u),0,0,0),t}}]),i})(Lt),$S=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",80),Pe(Ie(r),"incompatibleTokens",["a","b","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"B":case"BB":case"BBB":return u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return u.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return u.dayPeriod(t,{width:"wide",context:"formatting"})||u.dayPeriod(t,{width:"abbreviated",context:"formatting"})||u.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,l,u){return t.setUTCHours(lf(u),0,0,0),t}}]),i})(Lt),YS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",70),Pe(Ie(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"h":return on(fn.hour12h,t);case"ho":return u.ordinalNumber(t,{unit:"hour"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=12}},{key:"set",value:function(t,l,u){var d=t.getUTCHours()>=12;return d&&u<12?t.setUTCHours(u+12,0,0,0):!d&&u===12?t.setUTCHours(0,0,0,0):t.setUTCHours(u,0,0,0),t}}]),i})(Lt),WS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",70),Pe(Ie(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"H":return on(fn.hour23h,t);case"Ho":return u.ordinalNumber(t,{unit:"hour"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=23}},{key:"set",value:function(t,l,u){return t.setUTCHours(u,0,0,0),t}}]),i})(Lt),HS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",70),Pe(Ie(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"K":return on(fn.hour11h,t);case"Ko":return u.ordinalNumber(t,{unit:"hour"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=11}},{key:"set",value:function(t,l,u){var d=t.getUTCHours()>=12;return d&&u<12?t.setUTCHours(u+12,0,0,0):t.setUTCHours(u,0,0,0),t}}]),i})(Lt),KS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",70),Pe(Ie(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"k":return on(fn.hour24h,t);case"ko":return u.ordinalNumber(t,{unit:"hour"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=1&&l<=24}},{key:"set",value:function(t,l,u){var d=u<=24?u%24:u;return t.setUTCHours(d,0,0,0),t}}]),i})(Lt),VS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",60),Pe(Ie(r),"incompatibleTokens",["t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"m":return on(fn.minute,t);case"mo":return u.ordinalNumber(t,{unit:"minute"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=59}},{key:"set",value:function(t,l,u){return t.setUTCMinutes(u,0,0),t}}]),i})(Lt),QS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",50),Pe(Ie(r),"incompatibleTokens",["t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l,u){switch(l){case"s":return on(fn.second,t);case"so":return u.ordinalNumber(t,{unit:"second"});default:return un(l.length,t)}}},{key:"validate",value:function(t,l){return l>=0&&l<=59}},{key:"set",value:function(t,l,u){return t.setUTCSeconds(u,0),t}}]),i})(Lt),GS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",30),Pe(Ie(r),"incompatibleTokens",["t","T"]),r}return Ct(i,[{key:"parse",value:function(t,l){var u=function(p){return Math.floor(p*Math.pow(10,-l.length+3))};return pn(un(l.length,t),u)}},{key:"set",value:function(t,l,u){return t.setUTCMilliseconds(u),t}}]),i})(Lt),qS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",10),Pe(Ie(r),"incompatibleTokens",["t","T","x"]),r}return Ct(i,[{key:"parse",value:function(t,l){switch(l){case"X":return Jr(qr.basicOptionalMinutes,t);case"XX":return Jr(qr.basic,t);case"XXXX":return Jr(qr.basicOptionalSeconds,t);case"XXXXX":return Jr(qr.extendedOptionalSeconds,t);case"XXX":default:return Jr(qr.extended,t)}}},{key:"set",value:function(t,l,u){return l.timestampIsSet?t:new Date(t.getTime()-u)}}]),i})(Lt),JS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",10),Pe(Ie(r),"incompatibleTokens",["t","T","X"]),r}return Ct(i,[{key:"parse",value:function(t,l){switch(l){case"x":return Jr(qr.basicOptionalMinutes,t);case"xx":return Jr(qr.basic,t);case"xxxx":return Jr(qr.basicOptionalSeconds,t);case"xxxxx":return Jr(qr.extendedOptionalSeconds,t);case"xxx":default:return Jr(qr.extended,t)}}},{key:"set",value:function(t,l,u){return l.timestampIsSet?t:new Date(t.getTime()-u)}}]),i})(Lt),XS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",40),Pe(Ie(r),"incompatibleTokens","*"),r}return Ct(i,[{key:"parse",value:function(t){return xv(t)}},{key:"set",value:function(t,l,u){return[new Date(u*1e3),{timestampIsSet:!0}]}}]),i})(Lt),ZS=(function(n){Rt(i,n);var s=Pt(i);function i(){var r;jt(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return r=s.call.apply(s,[this].concat(l)),Pe(Ie(r),"priority",20),Pe(Ie(r),"incompatibleTokens","*"),r}return Ct(i,[{key:"parse",value:function(t){return xv(t)}},{key:"set",value:function(t,l,u){return[new Date(u),{timestampIsSet:!0}]}}]),i})(Lt),eN={G:new vS,y:new xS,Y:new wS,R:new bS,u:new SS,Q:new NS,q:new kS,M:new jS,L:new CS,w:new DS,I:new MS,d:new _S,D:new OS,E:new AS,e:new IS,c:new LS,i:new zS,a:new US,b:new BS,B:new $S,h:new YS,H:new WS,K:new HS,k:new KS,m:new VS,s:new QS,S:new GS,X:new qS,x:new JS,t:new XS,T:new ZS},tN=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nN=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rN=/^'([^]*?)'?$/,aN=/''/g,sN=/\S/,iN=/[a-zA-Z]/;function ld(n,s,i,r){var t,l,u,d,p,h,v,y,N,C,k,E,j,I,$,Y,B,Z;De(3,arguments);var ee=String(n),J=String(s),re=ys(),te=(t=(l=r?.locale)!==null&&l!==void 0?l:re.locale)!==null&&t!==void 0?t:dv;if(!te.match)throw new RangeError("locale must contain match property");var ie=yt((u=(d=(p=(h=r?.firstWeekContainsDate)!==null&&h!==void 0?h:r==null||(v=r.locale)===null||v===void 0||(y=v.options)===null||y===void 0?void 0:y.firstWeekContainsDate)!==null&&p!==void 0?p:re.firstWeekContainsDate)!==null&&d!==void 0?d:(N=re.locale)===null||N===void 0||(C=N.options)===null||C===void 0?void 0:C.firstWeekContainsDate)!==null&&u!==void 0?u:1);if(!(ie>=1&&ie<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var ne=yt((k=(E=(j=(I=r?.weekStartsOn)!==null&&I!==void 0?I:r==null||($=r.locale)===null||$===void 0||(Y=$.options)===null||Y===void 0?void 0:Y.weekStartsOn)!==null&&j!==void 0?j:re.weekStartsOn)!==null&&E!==void 0?E:(B=re.locale)===null||B===void 0||(Z=B.options)===null||Z===void 0?void 0:Z.weekStartsOn)!==null&&k!==void 0?k:0);if(!(ne>=0&&ne<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(J==="")return ee===""?ze(i):new Date(NaN);var Ce={firstWeekContainsDate:ie,weekStartsOn:ne,locale:te},ve=[new gS],Te=J.match(nN).map(function(Se){var ue=Se[0];if(ue in _d){var xe=_d[ue];return xe(Se,te.formatLong)}return Se}).join("").match(tN),Ee=[],be=Sh(Te),we;try{var O=function(){var ue=we.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&cv(ue)&&Zl(ue,J,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&lv(ue)&&Zl(ue,J,n);var xe=ue[0],He=eN[xe];if(He){var Xe=He.incompatibleTokens;if(Array.isArray(Xe)){var gt=Ee.find(function(Ze){return Xe.includes(Ze.token)||Ze.token===xe});if(gt)throw new RangeError("The format string mustn't contain `".concat(gt.fullToken,"` and `").concat(ue,"` at the same time"))}else if(He.incompatibleTokens==="*"&&Ee.length>0)throw new RangeError("The format string mustn't contain `".concat(ue,"` and any other token at the same time"));Ee.push({token:xe,fullToken:ue});var Nt=He.run(ee,ue,te.match,Ce);if(!Nt)return{v:new Date(NaN)};ve.push(Nt.setter),ee=Nt.rest}else{if(xe.match(iN))throw new RangeError("Format string contains an unescaped latin alphabet character `"+xe+"`");if(ue==="''"?ue="'":xe==="'"&&(ue=oN(ue)),ee.indexOf(ue)===0)ee=ee.slice(ue.length);else return{v:new Date(NaN)}}};for(be.s();!(we=be.n()).done;){var W=O();if(wr(W)==="object")return W.v}}catch(Se){be.e(Se)}finally{be.f()}if(ee.length>0&&sN.test(ee))return new Date(NaN);var F=ve.map(function(Se){return Se.priority}).sort(function(Se,ue){return ue-Se}).filter(function(Se,ue,xe){return xe.indexOf(Se)===ue}).map(function(Se){return ve.filter(function(ue){return ue.priority===Se}).sort(function(ue,xe){return xe.subPriority-ue.subPriority})}).map(function(Se){return Se[0]}),b=ze(i);if(isNaN(b.getTime()))return new Date(NaN);var L=rv(b,Xl(b)),oe={},he=Sh(F),je;try{for(he.s();!(je=he.n()).done;){var ke=je.value;if(!ke.validate(L,Ce))return new Date(NaN);var Le=ke.set(L,oe,Ce);Array.isArray(Le)?(L=Le[0],uS(oe,Le[1])):L=Le}}catch(Se){he.e(Se)}finally{he.f()}return L}function oN(n){return n.match(rN)[1].replace(aN,"'")}function lN(n,s){var i;De(1,arguments);var r=yt((i=void 0)!==null&&i!==void 0?i:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof n=="string"||Object.prototype.toString.call(n)==="[object String]"))return new Date(NaN);var t=fN(n),l;if(t.date){var u=pN(t.date,r);l=mN(u.restDateString,u.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);var d=l.getTime(),p=0,h;if(t.time&&(p=hN(t.time),isNaN(p)))return new Date(NaN);if(t.timezone){if(h=gN(t.timezone),isNaN(h))return new Date(NaN)}else{var v=new Date(d+p),y=new Date(0);return y.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),y.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),y}return new Date(d+p+h)}var Dl={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},cN=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,uN=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dN=/^([+-])(\d{2})(?::?(\d{2}))?$/;function fN(n){var s={},i=n.split(Dl.dateTimeDelimiter),r;if(i.length>2)return s;if(/:/.test(i[0])?r=i[0]:(s.date=i[0],r=i[1],Dl.timeZoneDelimiter.test(s.date)&&(s.date=n.split(Dl.timeZoneDelimiter)[0],r=n.substr(s.date.length,n.length))),r){var t=Dl.timezone.exec(r);t?(s.time=r.replace(t[1],""),s.timezone=t[1]):s.time=r}return s}function pN(n,s){var i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+s)+"})|(\\d{2}|[+-]\\d{"+(2+s)+"})$)"),r=n.match(i);if(!r)return{year:NaN,restDateString:""};var t=r[1]?parseInt(r[1]):null,l=r[2]?parseInt(r[2]):null;return{year:l===null?t:l*100,restDateString:n.slice((r[1]||r[2]).length)}}function mN(n,s){if(s===null)return new Date(NaN);var i=n.match(cN);if(!i)return new Date(NaN);var r=!!i[4],t=Wi(i[1]),l=Wi(i[2])-1,u=Wi(i[3]),d=Wi(i[4]),p=Wi(i[5])-1;if(r)return bN(s,d,p)?vN(s,d,p):new Date(NaN);var h=new Date(0);return!xN(s,l,u)||!wN(s,t)?new Date(NaN):(h.setUTCFullYear(s,l,Math.max(t,u)),h)}function Wi(n){return n?parseInt(n):1}function hN(n){var s=n.match(uN);if(!s)return NaN;var i=cd(s[1]),r=cd(s[2]),t=cd(s[3]);return SN(i,r,t)?i*of+r*sf+t*1e3:NaN}function cd(n){return n&&parseFloat(n.replace(",","."))||0}function gN(n){if(n==="Z")return 0;var s=n.match(dN);if(!s)return 0;var i=s[1]==="+"?-1:1,r=parseInt(s[2]),t=s[3]&&parseInt(s[3])||0;return NN(r,t)?i*(r*of+t*sf):NaN}function vN(n,s,i){var r=new Date(0);r.setUTCFullYear(n,0,4);var t=r.getUTCDay()||7,l=(s-1)*7+i+1-t;return r.setUTCDate(r.getUTCDate()+l),r}var yN=[31,null,31,30,31,30,31,31,30,31,30,31];function Sv(n){return n%400===0||n%4===0&&n%100!==0}function xN(n,s,i){return s>=0&&s<=11&&i>=1&&i<=(yN[s]||(Sv(n)?29:28))}function wN(n,s){return s>=1&&s<=(Sv(n)?366:365)}function bN(n,s,i){return s>=1&&s<=53&&i>=0&&i<=6}function SN(n,s,i){return n===24?s===0&&i===0:i>=0&&i<60&&s>=0&&s<60&&n>=0&&n<25}function NN(n,s){return s>=0&&s<=59}function kN(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,zd(n,s)}function zd(n,s){return zd=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r},zd(n,s)}function jN(n,s){if(n==null)return{};var i={},r=Object.keys(n),t,l;for(l=0;l<r.length;l++)t=r[l],!(s.indexOf(t)>=0)&&(i[t]=n[t]);return i}function Nh(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function CN(n,s,i){return n===s?!0:n.correspondingElement?n.correspondingElement.classList.contains(i):n.classList.contains(i)}function EN(n,s,i){if(n===s)return!0;for(;n.parentNode||n.host;){if(n.parentNode&&CN(n,s,i))return!0;n=n.parentNode||n.host}return n}function DN(n){return document.documentElement.clientWidth<=n.clientX||document.documentElement.clientHeight<=n.clientY}var TN=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var s=!1,i=Object.defineProperty({},"passive",{get:function(){s=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,i),window.removeEventListener("testPassiveEventSupport",r,i),s}};function MN(n){return n===void 0&&(n=0),function(){return++n}}var RN=MN(),Ud,Tl={},ud={},PN=["touchstart","touchmove"],_N="ignore-react-onclickoutside";function kh(n,s){var i={},r=PN.indexOf(s)!==-1;return r&&Ud&&(i.passive=!n.props.preventDefault),i}function vc(n,s){var i,r,t=n.displayName||n.name||"Component";return r=i=(function(l){kN(u,l);function u(p){var h;return h=l.call(this,p)||this,h.__outsideClickHandler=function(v){if(typeof h.__clickOutsideHandlerProp=="function"){h.__clickOutsideHandlerProp(v);return}var y=h.getInstance();if(typeof y.props.handleClickOutside=="function"){y.props.handleClickOutside(v);return}if(typeof y.handleClickOutside=="function"){y.handleClickOutside(v);return}throw new Error("WrappedComponent: "+t+" lacks a handleClickOutside(event) function for processing outside click events.")},h.__getComponentNode=function(){var v=h.getInstance();return typeof v.setClickOutsideRef=="function"?v.setClickOutsideRef():ha.findDOMNode(v)},h.enableOnClickOutside=function(){if(!(typeof document>"u"||ud[h._uid])){typeof Ud>"u"&&(Ud=TN()),ud[h._uid]=!0;var v=h.props.eventTypes;v.forEach||(v=[v]),Tl[h._uid]=function(y){if(h.componentNode!==null&&!(h.initTimeStamp>y.timeStamp)&&(h.props.preventDefault&&y.preventDefault(),h.props.stopPropagation&&y.stopPropagation(),!(h.props.excludeScrollbar&&DN(y)))){var N=y.composed&&y.composedPath&&y.composedPath().shift()||y.target;EN(N,h.componentNode,h.props.outsideClickIgnoreClass)===document&&h.__outsideClickHandler(y)}},v.forEach(function(y){document.addEventListener(y,Tl[h._uid],kh(Nh(h),y))})}},h.disableOnClickOutside=function(){delete ud[h._uid];var v=Tl[h._uid];if(v&&typeof document<"u"){var y=h.props.eventTypes;y.forEach||(y=[y]),y.forEach(function(N){return document.removeEventListener(N,v,kh(Nh(h),N))}),delete Tl[h._uid]}},h.getRef=function(v){return h.instanceRef=v},h._uid=RN(),h.initTimeStamp=performance.now(),h}var d=u.prototype;return d.getInstance=function(){if(n.prototype&&!n.prototype.isReactComponent)return this;var h=this.instanceRef;return h.getInstance?h.getInstance():h},d.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},d.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},d.componentWillUnmount=function(){this.disableOnClickOutside()},d.render=function(){var h=this.props;h.excludeScrollbar;var v=jN(h,["excludeScrollbar"]);return n.prototype&&n.prototype.isReactComponent?v.ref=this.getRef:v.wrappedRef=this.getRef,v.disableOnClickOutside=this.disableOnClickOutside,v.enableOnClickOutside=this.enableOnClickOutside,x.createElement(n,v)},u})(x.Component),i.displayName="OnClickOutside("+t+")",i.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:_N,preventDefault:!1,stopPropagation:!1},i.getClass=function(){return n.getClass?n.getClass():n},r}var Nv=x.createContext(),kv=x.createContext();function ON(n){var s=n.children,i=x.useState(null),r=i[0],t=i[1],l=x.useRef(!1);x.useEffect(function(){return function(){l.current=!0}},[]);var u=x.useCallback(function(d){l.current||t(d)},[]);return x.createElement(Nv.Provider,{value:r},x.createElement(kv.Provider,{value:u},s))}var jv=function(s){return Array.isArray(s)?s[0]:s},Cv=function(s){if(typeof s=="function"){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return s.apply(void 0,r)}},Bd=function(s,i){if(typeof s=="function")return Cv(s,i);s!=null&&(s.current=i)},jh=function(s){return s.reduce(function(i,r){var t=r[0],l=r[1];return i[t]=l,i},{})},Ch=typeof window<"u"&&window.document&&window.document.createElement?x.useLayoutEffect:x.useEffect,ar="top",br="bottom",Sr="right",sr="left",uf="auto",xo=[ar,br,Sr,sr],ni="start",co="end",AN="clippingParents",Ev="viewport",Hi="popper",IN="reference",Eh=xo.reduce(function(n,s){return n.concat([s+"-"+ni,s+"-"+co])},[]),Dv=[].concat(xo,[uf]).reduce(function(n,s){return n.concat([s,s+"-"+ni,s+"-"+co])},[]),LN="beforeRead",FN="read",zN="afterRead",UN="beforeMain",BN="main",$N="afterMain",YN="beforeWrite",WN="write",HN="afterWrite",KN=[LN,FN,zN,UN,BN,$N,YN,WN,HN];function ra(n){return n?(n.nodeName||"").toLowerCase():null}function ur(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var s=n.ownerDocument;return s&&s.defaultView||window}return n}function vs(n){var s=ur(n).Element;return n instanceof s||n instanceof Element}function xr(n){var s=ur(n).HTMLElement;return n instanceof s||n instanceof HTMLElement}function df(n){if(typeof ShadowRoot>"u")return!1;var s=ur(n).ShadowRoot;return n instanceof s||n instanceof ShadowRoot}function VN(n){var s=n.state;Object.keys(s.elements).forEach(function(i){var r=s.styles[i]||{},t=s.attributes[i]||{},l=s.elements[i];!xr(l)||!ra(l)||(Object.assign(l.style,r),Object.keys(t).forEach(function(u){var d=t[u];d===!1?l.removeAttribute(u):l.setAttribute(u,d===!0?"":d)}))})}function QN(n){var s=n.state,i={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,i.popper),s.styles=i,s.elements.arrow&&Object.assign(s.elements.arrow.style,i.arrow),function(){Object.keys(s.elements).forEach(function(r){var t=s.elements[r],l=s.attributes[r]||{},u=Object.keys(s.styles.hasOwnProperty(r)?s.styles[r]:i[r]),d=u.reduce(function(p,h){return p[h]="",p},{});!xr(t)||!ra(t)||(Object.assign(t.style,d),Object.keys(l).forEach(function(p){t.removeAttribute(p)}))})}}const GN={name:"applyStyles",enabled:!0,phase:"write",fn:VN,effect:QN,requires:["computeStyles"]};function ta(n){return n.split("-")[0]}var ds=Math.max,oc=Math.min,ri=Math.round;function $d(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(s){return s.brand+"/"+s.version}).join(" "):navigator.userAgent}function Tv(){return!/^((?!chrome|android).)*safari/i.test($d())}function ai(n,s,i){s===void 0&&(s=!1),i===void 0&&(i=!1);var r=n.getBoundingClientRect(),t=1,l=1;s&&xr(n)&&(t=n.offsetWidth>0&&ri(r.width)/n.offsetWidth||1,l=n.offsetHeight>0&&ri(r.height)/n.offsetHeight||1);var u=vs(n)?ur(n):window,d=u.visualViewport,p=!Tv()&&i,h=(r.left+(p&&d?d.offsetLeft:0))/t,v=(r.top+(p&&d?d.offsetTop:0))/l,y=r.width/t,N=r.height/l;return{width:y,height:N,top:v,right:h+y,bottom:v+N,left:h,x:h,y:v}}function ff(n){var s=ai(n),i=n.offsetWidth,r=n.offsetHeight;return Math.abs(s.width-i)<=1&&(i=s.width),Math.abs(s.height-r)<=1&&(r=s.height),{x:n.offsetLeft,y:n.offsetTop,width:i,height:r}}function Mv(n,s){var i=s.getRootNode&&s.getRootNode();if(n.contains(s))return!0;if(i&&df(i)){var r=s;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ga(n){return ur(n).getComputedStyle(n)}function qN(n){return["table","td","th"].indexOf(ra(n))>=0}function Ya(n){return((vs(n)?n.ownerDocument:n.document)||window.document).documentElement}function yc(n){return ra(n)==="html"?n:n.assignedSlot||n.parentNode||(df(n)?n.host:null)||Ya(n)}function Dh(n){return!xr(n)||ga(n).position==="fixed"?null:n.offsetParent}function JN(n){var s=/firefox/i.test($d()),i=/Trident/i.test($d());if(i&&xr(n)){var r=ga(n);if(r.position==="fixed")return null}var t=yc(n);for(df(t)&&(t=t.host);xr(t)&&["html","body"].indexOf(ra(t))<0;){var l=ga(t);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||s&&l.willChange==="filter"||s&&l.filter&&l.filter!=="none")return t;t=t.parentNode}return null}function wo(n){for(var s=ur(n),i=Dh(n);i&&qN(i)&&ga(i).position==="static";)i=Dh(i);return i&&(ra(i)==="html"||ra(i)==="body"&&ga(i).position==="static")?s:i||JN(n)||s}function pf(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Xi(n,s,i){return ds(n,oc(s,i))}function XN(n,s,i){var r=Xi(n,s,i);return r>i?i:r}function Rv(){return{top:0,right:0,bottom:0,left:0}}function Pv(n){return Object.assign({},Rv(),n)}function _v(n,s){return s.reduce(function(i,r){return i[r]=n,i},{})}var ZN=function(s,i){return s=typeof s=="function"?s(Object.assign({},i.rects,{placement:i.placement})):s,Pv(typeof s!="number"?s:_v(s,xo))};function ek(n){var s,i=n.state,r=n.name,t=n.options,l=i.elements.arrow,u=i.modifiersData.popperOffsets,d=ta(i.placement),p=pf(d),h=[sr,Sr].indexOf(d)>=0,v=h?"height":"width";if(!(!l||!u)){var y=ZN(t.padding,i),N=ff(l),C=p==="y"?ar:sr,k=p==="y"?br:Sr,E=i.rects.reference[v]+i.rects.reference[p]-u[p]-i.rects.popper[v],j=u[p]-i.rects.reference[p],I=wo(l),$=I?p==="y"?I.clientHeight||0:I.clientWidth||0:0,Y=E/2-j/2,B=y[C],Z=$-N[v]-y[k],ee=$/2-N[v]/2+Y,J=Xi(B,ee,Z),re=p;i.modifiersData[r]=(s={},s[re]=J,s.centerOffset=J-ee,s)}}function tk(n){var s=n.state,i=n.options,r=i.element,t=r===void 0?"[data-popper-arrow]":r;t!=null&&(typeof t=="string"&&(t=s.elements.popper.querySelector(t),!t)||Mv(s.elements.popper,t)&&(s.elements.arrow=t))}const nk={name:"arrow",enabled:!0,phase:"main",fn:ek,effect:tk,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function si(n){return n.split("-")[1]}var rk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ak(n,s){var i=n.x,r=n.y,t=s.devicePixelRatio||1;return{x:ri(i*t)/t||0,y:ri(r*t)/t||0}}function Th(n){var s,i=n.popper,r=n.popperRect,t=n.placement,l=n.variation,u=n.offsets,d=n.position,p=n.gpuAcceleration,h=n.adaptive,v=n.roundOffsets,y=n.isFixed,N=u.x,C=N===void 0?0:N,k=u.y,E=k===void 0?0:k,j=typeof v=="function"?v({x:C,y:E}):{x:C,y:E};C=j.x,E=j.y;var I=u.hasOwnProperty("x"),$=u.hasOwnProperty("y"),Y=sr,B=ar,Z=window;if(h){var ee=wo(i),J="clientHeight",re="clientWidth";if(ee===ur(i)&&(ee=Ya(i),ga(ee).position!=="static"&&d==="absolute"&&(J="scrollHeight",re="scrollWidth")),ee=ee,t===ar||(t===sr||t===Sr)&&l===co){B=br;var te=y&&ee===Z&&Z.visualViewport?Z.visualViewport.height:ee[J];E-=te-r.height,E*=p?1:-1}if(t===sr||(t===ar||t===br)&&l===co){Y=Sr;var ie=y&&ee===Z&&Z.visualViewport?Z.visualViewport.width:ee[re];C-=ie-r.width,C*=p?1:-1}}var ne=Object.assign({position:d},h&&rk),Ce=v===!0?ak({x:C,y:E},ur(i)):{x:C,y:E};if(C=Ce.x,E=Ce.y,p){var ve;return Object.assign({},ne,(ve={},ve[B]=$?"0":"",ve[Y]=I?"0":"",ve.transform=(Z.devicePixelRatio||1)<=1?"translate("+C+"px, "+E+"px)":"translate3d("+C+"px, "+E+"px, 0)",ve))}return Object.assign({},ne,(s={},s[B]=$?E+"px":"",s[Y]=I?C+"px":"",s.transform="",s))}function sk(n){var s=n.state,i=n.options,r=i.gpuAcceleration,t=r===void 0?!0:r,l=i.adaptive,u=l===void 0?!0:l,d=i.roundOffsets,p=d===void 0?!0:d,h={placement:ta(s.placement),variation:si(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:t,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,Th(Object.assign({},h,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:u,roundOffsets:p})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,Th(Object.assign({},h,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:p})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})}const ik={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:sk,data:{}};var Ml={passive:!0};function ok(n){var s=n.state,i=n.instance,r=n.options,t=r.scroll,l=t===void 0?!0:t,u=r.resize,d=u===void 0?!0:u,p=ur(s.elements.popper),h=[].concat(s.scrollParents.reference,s.scrollParents.popper);return l&&h.forEach(function(v){v.addEventListener("scroll",i.update,Ml)}),d&&p.addEventListener("resize",i.update,Ml),function(){l&&h.forEach(function(v){v.removeEventListener("scroll",i.update,Ml)}),d&&p.removeEventListener("resize",i.update,Ml)}}const lk={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ok,data:{}};var ck={left:"right",right:"left",bottom:"top",top:"bottom"};function Wl(n){return n.replace(/left|right|bottom|top/g,function(s){return ck[s]})}var uk={start:"end",end:"start"};function Mh(n){return n.replace(/start|end/g,function(s){return uk[s]})}function mf(n){var s=ur(n),i=s.pageXOffset,r=s.pageYOffset;return{scrollLeft:i,scrollTop:r}}function hf(n){return ai(Ya(n)).left+mf(n).scrollLeft}function dk(n,s){var i=ur(n),r=Ya(n),t=i.visualViewport,l=r.clientWidth,u=r.clientHeight,d=0,p=0;if(t){l=t.width,u=t.height;var h=Tv();(h||!h&&s==="fixed")&&(d=t.offsetLeft,p=t.offsetTop)}return{width:l,height:u,x:d+hf(n),y:p}}function fk(n){var s,i=Ya(n),r=mf(n),t=(s=n.ownerDocument)==null?void 0:s.body,l=ds(i.scrollWidth,i.clientWidth,t?t.scrollWidth:0,t?t.clientWidth:0),u=ds(i.scrollHeight,i.clientHeight,t?t.scrollHeight:0,t?t.clientHeight:0),d=-r.scrollLeft+hf(n),p=-r.scrollTop;return ga(t||i).direction==="rtl"&&(d+=ds(i.clientWidth,t?t.clientWidth:0)-l),{width:l,height:u,x:d,y:p}}function gf(n){var s=ga(n),i=s.overflow,r=s.overflowX,t=s.overflowY;return/auto|scroll|overlay|hidden/.test(i+t+r)}function Ov(n){return["html","body","#document"].indexOf(ra(n))>=0?n.ownerDocument.body:xr(n)&&gf(n)?n:Ov(yc(n))}function Zi(n,s){var i;s===void 0&&(s=[]);var r=Ov(n),t=r===((i=n.ownerDocument)==null?void 0:i.body),l=ur(r),u=t?[l].concat(l.visualViewport||[],gf(r)?r:[]):r,d=s.concat(u);return t?d:d.concat(Zi(yc(u)))}function Yd(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function pk(n,s){var i=ai(n,!1,s==="fixed");return i.top=i.top+n.clientTop,i.left=i.left+n.clientLeft,i.bottom=i.top+n.clientHeight,i.right=i.left+n.clientWidth,i.width=n.clientWidth,i.height=n.clientHeight,i.x=i.left,i.y=i.top,i}function Rh(n,s,i){return s===Ev?Yd(dk(n,i)):vs(s)?pk(s,i):Yd(fk(Ya(n)))}function mk(n){var s=Zi(yc(n)),i=["absolute","fixed"].indexOf(ga(n).position)>=0,r=i&&xr(n)?wo(n):n;return vs(r)?s.filter(function(t){return vs(t)&&Mv(t,r)&&ra(t)!=="body"}):[]}function hk(n,s,i,r){var t=s==="clippingParents"?mk(n):[].concat(s),l=[].concat(t,[i]),u=l[0],d=l.reduce(function(p,h){var v=Rh(n,h,r);return p.top=ds(v.top,p.top),p.right=oc(v.right,p.right),p.bottom=oc(v.bottom,p.bottom),p.left=ds(v.left,p.left),p},Rh(n,u,r));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function Av(n){var s=n.reference,i=n.element,r=n.placement,t=r?ta(r):null,l=r?si(r):null,u=s.x+s.width/2-i.width/2,d=s.y+s.height/2-i.height/2,p;switch(t){case ar:p={x:u,y:s.y-i.height};break;case br:p={x:u,y:s.y+s.height};break;case Sr:p={x:s.x+s.width,y:d};break;case sr:p={x:s.x-i.width,y:d};break;default:p={x:s.x,y:s.y}}var h=t?pf(t):null;if(h!=null){var v=h==="y"?"height":"width";switch(l){case ni:p[h]=p[h]-(s[v]/2-i[v]/2);break;case co:p[h]=p[h]+(s[v]/2-i[v]/2);break}}return p}function uo(n,s){s===void 0&&(s={});var i=s,r=i.placement,t=r===void 0?n.placement:r,l=i.strategy,u=l===void 0?n.strategy:l,d=i.boundary,p=d===void 0?AN:d,h=i.rootBoundary,v=h===void 0?Ev:h,y=i.elementContext,N=y===void 0?Hi:y,C=i.altBoundary,k=C===void 0?!1:C,E=i.padding,j=E===void 0?0:E,I=Pv(typeof j!="number"?j:_v(j,xo)),$=N===Hi?IN:Hi,Y=n.rects.popper,B=n.elements[k?$:N],Z=hk(vs(B)?B:B.contextElement||Ya(n.elements.popper),p,v,u),ee=ai(n.elements.reference),J=Av({reference:ee,element:Y,placement:t}),re=Yd(Object.assign({},Y,J)),te=N===Hi?re:ee,ie={top:Z.top-te.top+I.top,bottom:te.bottom-Z.bottom+I.bottom,left:Z.left-te.left+I.left,right:te.right-Z.right+I.right},ne=n.modifiersData.offset;if(N===Hi&&ne){var Ce=ne[t];Object.keys(ie).forEach(function(ve){var Te=[Sr,br].indexOf(ve)>=0?1:-1,Ee=[ar,br].indexOf(ve)>=0?"y":"x";ie[ve]+=Ce[Ee]*Te})}return ie}function gk(n,s){s===void 0&&(s={});var i=s,r=i.placement,t=i.boundary,l=i.rootBoundary,u=i.padding,d=i.flipVariations,p=i.allowedAutoPlacements,h=p===void 0?Dv:p,v=si(r),y=v?d?Eh:Eh.filter(function(k){return si(k)===v}):xo,N=y.filter(function(k){return h.indexOf(k)>=0});N.length===0&&(N=y);var C=N.reduce(function(k,E){return k[E]=uo(n,{placement:E,boundary:t,rootBoundary:l,padding:u})[ta(E)],k},{});return Object.keys(C).sort(function(k,E){return C[k]-C[E]})}function vk(n){if(ta(n)===uf)return[];var s=Wl(n);return[Mh(n),s,Mh(s)]}function yk(n){var s=n.state,i=n.options,r=n.name;if(!s.modifiersData[r]._skip){for(var t=i.mainAxis,l=t===void 0?!0:t,u=i.altAxis,d=u===void 0?!0:u,p=i.fallbackPlacements,h=i.padding,v=i.boundary,y=i.rootBoundary,N=i.altBoundary,C=i.flipVariations,k=C===void 0?!0:C,E=i.allowedAutoPlacements,j=s.options.placement,I=ta(j),$=I===j,Y=p||($||!k?[Wl(j)]:vk(j)),B=[j].concat(Y).reduce(function(he,je){return he.concat(ta(je)===uf?gk(s,{placement:je,boundary:v,rootBoundary:y,padding:h,flipVariations:k,allowedAutoPlacements:E}):je)},[]),Z=s.rects.reference,ee=s.rects.popper,J=new Map,re=!0,te=B[0],ie=0;ie<B.length;ie++){var ne=B[ie],Ce=ta(ne),ve=si(ne)===ni,Te=[ar,br].indexOf(Ce)>=0,Ee=Te?"width":"height",be=uo(s,{placement:ne,boundary:v,rootBoundary:y,altBoundary:N,padding:h}),we=Te?ve?Sr:sr:ve?br:ar;Z[Ee]>ee[Ee]&&(we=Wl(we));var O=Wl(we),W=[];if(l&&W.push(be[Ce]<=0),d&&W.push(be[we]<=0,be[O]<=0),W.every(function(he){return he})){te=ne,re=!1;break}J.set(ne,W)}if(re)for(var F=k?3:1,b=function(je){var ke=B.find(function(Le){var Se=J.get(Le);if(Se)return Se.slice(0,je).every(function(ue){return ue})});if(ke)return te=ke,"break"},L=F;L>0;L--){var oe=b(L);if(oe==="break")break}s.placement!==te&&(s.modifiersData[r]._skip=!0,s.placement=te,s.reset=!0)}}const xk={name:"flip",enabled:!0,phase:"main",fn:yk,requiresIfExists:["offset"],data:{_skip:!1}};function Ph(n,s,i){return i===void 0&&(i={x:0,y:0}),{top:n.top-s.height-i.y,right:n.right-s.width+i.x,bottom:n.bottom-s.height+i.y,left:n.left-s.width-i.x}}function _h(n){return[ar,Sr,br,sr].some(function(s){return n[s]>=0})}function wk(n){var s=n.state,i=n.name,r=s.rects.reference,t=s.rects.popper,l=s.modifiersData.preventOverflow,u=uo(s,{elementContext:"reference"}),d=uo(s,{altBoundary:!0}),p=Ph(u,r),h=Ph(d,t,l),v=_h(p),y=_h(h);s.modifiersData[i]={referenceClippingOffsets:p,popperEscapeOffsets:h,isReferenceHidden:v,hasPopperEscaped:y},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":v,"data-popper-escaped":y})}const bk={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wk};function Sk(n,s,i){var r=ta(n),t=[sr,ar].indexOf(r)>=0?-1:1,l=typeof i=="function"?i(Object.assign({},s,{placement:n})):i,u=l[0],d=l[1];return u=u||0,d=(d||0)*t,[sr,Sr].indexOf(r)>=0?{x:d,y:u}:{x:u,y:d}}function Nk(n){var s=n.state,i=n.options,r=n.name,t=i.offset,l=t===void 0?[0,0]:t,u=Dv.reduce(function(v,y){return v[y]=Sk(y,s.rects,l),v},{}),d=u[s.placement],p=d.x,h=d.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=p,s.modifiersData.popperOffsets.y+=h),s.modifiersData[r]=u}const kk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Nk};function jk(n){var s=n.state,i=n.name;s.modifiersData[i]=Av({reference:s.rects.reference,element:s.rects.popper,placement:s.placement})}const Ck={name:"popperOffsets",enabled:!0,phase:"read",fn:jk,data:{}};function Ek(n){return n==="x"?"y":"x"}function Dk(n){var s=n.state,i=n.options,r=n.name,t=i.mainAxis,l=t===void 0?!0:t,u=i.altAxis,d=u===void 0?!1:u,p=i.boundary,h=i.rootBoundary,v=i.altBoundary,y=i.padding,N=i.tether,C=N===void 0?!0:N,k=i.tetherOffset,E=k===void 0?0:k,j=uo(s,{boundary:p,rootBoundary:h,padding:y,altBoundary:v}),I=ta(s.placement),$=si(s.placement),Y=!$,B=pf(I),Z=Ek(B),ee=s.modifiersData.popperOffsets,J=s.rects.reference,re=s.rects.popper,te=typeof E=="function"?E(Object.assign({},s.rects,{placement:s.placement})):E,ie=typeof te=="number"?{mainAxis:te,altAxis:te}:Object.assign({mainAxis:0,altAxis:0},te),ne=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,Ce={x:0,y:0};if(ee){if(l){var ve,Te=B==="y"?ar:sr,Ee=B==="y"?br:Sr,be=B==="y"?"height":"width",we=ee[B],O=we+j[Te],W=we-j[Ee],F=C?-re[be]/2:0,b=$===ni?J[be]:re[be],L=$===ni?-re[be]:-J[be],oe=s.elements.arrow,he=C&&oe?ff(oe):{width:0,height:0},je=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:Rv(),ke=je[Te],Le=je[Ee],Se=Xi(0,J[be],he[be]),ue=Y?J[be]/2-F-Se-ke-ie.mainAxis:b-Se-ke-ie.mainAxis,xe=Y?-J[be]/2+F+Se+Le+ie.mainAxis:L+Se+Le+ie.mainAxis,He=s.elements.arrow&&wo(s.elements.arrow),Xe=He?B==="y"?He.clientTop||0:He.clientLeft||0:0,gt=(ve=ne?.[B])!=null?ve:0,Nt=we+ue-gt-Xe,Ze=we+xe-gt,Ft=Xi(C?oc(O,Nt):O,we,C?ds(W,Ze):W);ee[B]=Ft,Ce[B]=Ft-we}if(d){var Et,ft=B==="x"?ar:sr,We=B==="x"?br:Sr,st=ee[Z],Ae=Z==="y"?"height":"width",At=st+j[ft],Bt=st-j[We],qt=[ar,sr].indexOf(I)!==-1,$t=(Et=ne?.[Z])!=null?Et:0,Kt=qt?At:st-J[Ae]-re[Ae]-$t+ie.altAxis,q=qt?st+J[Ae]+re[Ae]-$t-ie.altAxis:Bt,ye=C&&qt?XN(Kt,st,q):Xi(C?Kt:At,st,C?q:Bt);ee[Z]=ye,Ce[Z]=ye-st}s.modifiersData[r]=Ce}}const Tk={name:"preventOverflow",enabled:!0,phase:"main",fn:Dk,requiresIfExists:["offset"]};function Mk(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Rk(n){return n===ur(n)||!xr(n)?mf(n):Mk(n)}function Pk(n){var s=n.getBoundingClientRect(),i=ri(s.width)/n.offsetWidth||1,r=ri(s.height)/n.offsetHeight||1;return i!==1||r!==1}function _k(n,s,i){i===void 0&&(i=!1);var r=xr(s),t=xr(s)&&Pk(s),l=Ya(s),u=ai(n,t,i),d={scrollLeft:0,scrollTop:0},p={x:0,y:0};return(r||!r&&!i)&&((ra(s)!=="body"||gf(l))&&(d=Rk(s)),xr(s)?(p=ai(s,!0),p.x+=s.clientLeft,p.y+=s.clientTop):l&&(p.x=hf(l))),{x:u.left+d.scrollLeft-p.x,y:u.top+d.scrollTop-p.y,width:u.width,height:u.height}}function Ok(n){var s=new Map,i=new Set,r=[];n.forEach(function(l){s.set(l.name,l)});function t(l){i.add(l.name);var u=[].concat(l.requires||[],l.requiresIfExists||[]);u.forEach(function(d){if(!i.has(d)){var p=s.get(d);p&&t(p)}}),r.push(l)}return n.forEach(function(l){i.has(l.name)||t(l)}),r}function Ak(n){var s=Ok(n);return KN.reduce(function(i,r){return i.concat(s.filter(function(t){return t.phase===r}))},[])}function Ik(n){var s;return function(){return s||(s=new Promise(function(i){Promise.resolve().then(function(){s=void 0,i(n())})})),s}}function Lk(n){var s=n.reduce(function(i,r){var t=i[r.name];return i[r.name]=t?Object.assign({},t,r,{options:Object.assign({},t.options,r.options),data:Object.assign({},t.data,r.data)}):r,i},{});return Object.keys(s).map(function(i){return s[i]})}var Oh={placement:"bottom",modifiers:[],strategy:"absolute"};function Ah(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return!s.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Fk(n){n===void 0&&(n={});var s=n,i=s.defaultModifiers,r=i===void 0?[]:i,t=s.defaultOptions,l=t===void 0?Oh:t;return function(d,p,h){h===void 0&&(h=l);var v={placement:"bottom",orderedModifiers:[],options:Object.assign({},Oh,l),modifiersData:{},elements:{reference:d,popper:p},attributes:{},styles:{}},y=[],N=!1,C={state:v,setOptions:function(I){var $=typeof I=="function"?I(v.options):I;E(),v.options=Object.assign({},l,v.options,$),v.scrollParents={reference:vs(d)?Zi(d):d.contextElement?Zi(d.contextElement):[],popper:Zi(p)};var Y=Ak(Lk([].concat(r,v.options.modifiers)));return v.orderedModifiers=Y.filter(function(B){return B.enabled}),k(),C.update()},forceUpdate:function(){if(!N){var I=v.elements,$=I.reference,Y=I.popper;if(Ah($,Y)){v.rects={reference:_k($,wo(Y),v.options.strategy==="fixed"),popper:ff(Y)},v.reset=!1,v.placement=v.options.placement,v.orderedModifiers.forEach(function(ie){return v.modifiersData[ie.name]=Object.assign({},ie.data)});for(var B=0;B<v.orderedModifiers.length;B++){if(v.reset===!0){v.reset=!1,B=-1;continue}var Z=v.orderedModifiers[B],ee=Z.fn,J=Z.options,re=J===void 0?{}:J,te=Z.name;typeof ee=="function"&&(v=ee({state:v,options:re,name:te,instance:C})||v)}}}},update:Ik(function(){return new Promise(function(j){C.forceUpdate(),j(v)})}),destroy:function(){E(),N=!0}};if(!Ah(d,p))return C;C.setOptions(h).then(function(j){!N&&h.onFirstUpdate&&h.onFirstUpdate(j)});function k(){v.orderedModifiers.forEach(function(j){var I=j.name,$=j.options,Y=$===void 0?{}:$,B=j.effect;if(typeof B=="function"){var Z=B({state:v,name:I,instance:C,options:Y}),ee=function(){};y.push(Z||ee)}})}function E(){y.forEach(function(j){return j()}),y=[]}return C}}var zk=[lk,Ck,ik,GN,kk,xk,Tk,nk,bk],Uk=Fk({defaultModifiers:zk}),dd,Ih;function Bk(){if(Ih)return dd;Ih=1;var n=typeof Element<"u",s=typeof Map=="function",i=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function t(l,u){if(l===u)return!0;if(l&&u&&typeof l=="object"&&typeof u=="object"){if(l.constructor!==u.constructor)return!1;var d,p,h;if(Array.isArray(l)){if(d=l.length,d!=u.length)return!1;for(p=d;p--!==0;)if(!t(l[p],u[p]))return!1;return!0}var v;if(s&&l instanceof Map&&u instanceof Map){if(l.size!==u.size)return!1;for(v=l.entries();!(p=v.next()).done;)if(!u.has(p.value[0]))return!1;for(v=l.entries();!(p=v.next()).done;)if(!t(p.value[1],u.get(p.value[0])))return!1;return!0}if(i&&l instanceof Set&&u instanceof Set){if(l.size!==u.size)return!1;for(v=l.entries();!(p=v.next()).done;)if(!u.has(p.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(u)){if(d=l.length,d!=u.length)return!1;for(p=d;p--!==0;)if(l[p]!==u[p])return!1;return!0}if(l.constructor===RegExp)return l.source===u.source&&l.flags===u.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof u.valueOf=="function")return l.valueOf()===u.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof u.toString=="function")return l.toString()===u.toString();if(h=Object.keys(l),d=h.length,d!==Object.keys(u).length)return!1;for(p=d;p--!==0;)if(!Object.prototype.hasOwnProperty.call(u,h[p]))return!1;if(n&&l instanceof Element)return!1;for(p=d;p--!==0;)if(!((h[p]==="_owner"||h[p]==="__v"||h[p]==="__o")&&l.$$typeof)&&!t(l[h[p]],u[h[p]]))return!1;return!0}return l!==l&&u!==u}return dd=function(u,d){try{return t(u,d)}catch(p){if((p.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw p}},dd}var $k=Bk();const Yk=mo($k);var Wk=[],Hk=function(s,i,r){r===void 0&&(r={});var t=x.useRef(null),l={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||Wk},u=x.useState({styles:{popper:{position:l.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),d=u[0],p=u[1],h=x.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(C){var k=C.state,E=Object.keys(k.elements);ha.flushSync(function(){p({styles:jh(E.map(function(j){return[j,k.styles[j]||{}]})),attributes:jh(E.map(function(j){return[j,k.attributes[j]]}))})})},requires:["computeStyles"]}},[]),v=x.useMemo(function(){var N={onFirstUpdate:l.onFirstUpdate,placement:l.placement,strategy:l.strategy,modifiers:[].concat(l.modifiers,[h,{name:"applyStyles",enabled:!1}])};return Yk(t.current,N)?t.current||N:(t.current=N,N)},[l.onFirstUpdate,l.placement,l.strategy,l.modifiers,h]),y=x.useRef();return Ch(function(){y.current&&y.current.setOptions(v)},[v]),Ch(function(){if(!(s==null||i==null)){var N=r.createPopper||Uk,C=N(s,i,v);return y.current=C,function(){C.destroy(),y.current=null}}},[s,i,r.createPopper]),{state:y.current?y.current.state:null,styles:d.styles,attributes:d.attributes,update:y.current?y.current.update:null,forceUpdate:y.current?y.current.forceUpdate:null}},Kk=function(){},Vk=function(){return Promise.resolve(null)},Qk=[];function Gk(n){var s=n.placement,i=s===void 0?"bottom":s,r=n.strategy,t=r===void 0?"absolute":r,l=n.modifiers,u=l===void 0?Qk:l,d=n.referenceElement,p=n.onFirstUpdate,h=n.innerRef,v=n.children,y=x.useContext(Nv),N=x.useState(null),C=N[0],k=N[1],E=x.useState(null),j=E[0],I=E[1];x.useEffect(function(){Bd(h,C)},[h,C]);var $=x.useMemo(function(){return{placement:i,strategy:t,onFirstUpdate:p,modifiers:[].concat(u,[{name:"arrow",enabled:j!=null,options:{element:j}}])}},[i,t,p,u,j]),Y=Hk(d||y,C,$),B=Y.state,Z=Y.styles,ee=Y.forceUpdate,J=Y.update,re=x.useMemo(function(){return{ref:k,style:Z.popper,placement:B?B.placement:i,hasPopperEscaped:B&&B.modifiersData.hide?B.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:B&&B.modifiersData.hide?B.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:Z.arrow,ref:I},forceUpdate:ee||Kk,update:J||Vk}},[k,I,i,B,Z,J,ee]);return jv(v)(re)}var fd,Lh;function qk(){if(Lh)return fd;Lh=1;var n=function(){};return fd=n,fd}var Jk=qk();const Xk=mo(Jk);function Zk(n){var s=n.children,i=n.innerRef,r=x.useContext(kv),t=x.useCallback(function(l){Bd(i,l),Cv(r,l)},[i,r]);return x.useEffect(function(){return function(){return Bd(i,null)}},[]),x.useEffect(function(){Xk(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),jv(s)({ref:t})}function ej(n,s){if(De(2,arguments),wr(s)!=="object"||s===null)throw new RangeError("values parameter must be an object");var i=ze(n);return isNaN(i.getTime())?new Date(NaN):(s.year!=null&&i.setFullYear(s.year),s.month!=null&&(i=Qn(i,s.month)),s.date!=null&&i.setDate(yt(s.date)),s.hours!=null&&i.setHours(yt(s.hours)),s.minutes!=null&&i.setMinutes(yt(s.minutes)),s.seconds!=null&&i.setSeconds(yt(s.seconds)),s.milliseconds!=null&&i.setMilliseconds(yt(s.milliseconds)),i)}function Fh(n,s){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);s&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.push.apply(i,r)}return i}function lc(n){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?Fh(Object(i),!0).forEach((function(r){D(n,r,i[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Fh(Object(i)).forEach((function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(i,r))}))}return n}function Wd(n){return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wd(n)}function En(n,s){if(!(n instanceof s))throw new TypeError("Cannot call a class as a function")}function zh(n,s){for(var i=0;i<s.length;i++){var r=s[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,Iv(r.key),r)}}function Dn(n,s,i){return s&&zh(n.prototype,s),i&&zh(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function D(n,s,i){return(s=Iv(s))in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,n}function ii(){return ii=Object.assign?Object.assign.bind():function(n){for(var s=1;s<arguments.length;s++){var i=arguments[s];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},ii.apply(this,arguments)}function Tn(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(s&&s.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),s&&Hd(n,s)}function cc(n){return cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},cc(n)}function Hd(n,s){return Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Hd(n,s)}function R(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Mn(n){var s=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}})();return function(){var i,r=cc(n);if(s){var t=cc(this).constructor;i=Reflect.construct(r,arguments,t)}else i=r.apply(this,arguments);return(function(l,u){if(u&&(typeof u=="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(l)})(this,i)}}function fo(n){return(function(s){if(Array.isArray(s))return pd(s)})(n)||(function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)})(n)||(function(s,i){if(s){if(typeof s=="string")return pd(s,i);var r=Object.prototype.toString.call(s).slice(8,-1);if(r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set")return Array.from(s);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pd(s,i)}})(n)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function pd(n,s){(s==null||s>n.length)&&(s=n.length);for(var i=0,r=new Array(s);i<s;i++)r[i]=n[i];return r}function Iv(n){var s=(function(i,r){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var l=t.call(i,r);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(i)})(n,"string");return typeof s=="symbol"?s:String(s)}var Uh=function(n,s){switch(n){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});default:return s.date({width:"full"})}},Bh=function(n,s){switch(n){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});default:return s.time({width:"full"})}},tj={p:Bh,P:function(n,s){var i,r=n.match(/(P+)(p+)?/)||[],t=r[1],l=r[2];if(!l)return Uh(n,s);switch(t){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;default:i=s.dateTime({width:"full"})}return i.replace("{{date}}",Uh(t,s)).replace("{{time}}",Bh(l,s))}},eo=12,nj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Ht(n){var s=n?typeof n=="string"||n instanceof String?lN(n):ze(n):new Date;return La(s)?s:null}function La(n,s){return s=s||new Date("1/1/1000"),io(n)&&!Fa(n,s)}function nn(n,s,i){if(i==="en")return hh(n,s,{awareOfUnicodeTokens:!0});var r=ps(i);return i&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(i,'"].')),!r&&fs()&&ps(fs())&&(r=ps(fs())),hh(n,s,{locale:r||null,awareOfUnicodeTokens:!0})}function Vr(n,s){var i=s.dateFormat,r=s.locale;return n&&nn(n,Array.isArray(i)?i[0]:i,r)||""}function $h(n,s){var i=s.hour,r=i===void 0?0:i,t=s.minute,l=t===void 0?0:t,u=s.second;return Yl($l(Zb(n,u===void 0?0:u),l),r)}function na(n,s,i){var r=ps(s||fs());return pv(n,{locale:r,weekStartsOn:i})}function Ua(n){return mv(n)}function Vi(n){return hv(n)}function Yh(n){return Id(n)}function Wh(){return ea(Ht())}function za(n,s){return n&&s?oS(n,s):!n&&!s}function Ar(n,s){return n&&s?iS(n,s):!n&&!s}function uc(n,s){return n&&s?lS(n,s):!n&&!s}function Gt(n,s){return n&&s?sS(n,s):!n&&!s}function us(n,s){return n&&s?aS(n,s):!n&&!s}function Hl(n,s,i){var r,t=ea(s),l=Ld(i);try{r=lo(n,{start:t,end:l})}catch{r=!1}return r}function Lv(n,s){var i=typeof window<"u"?window:globalThis;i.__localeData__||(i.__localeData__={}),i.__localeData__[n]=s}function fs(){return(typeof window<"u"?window:globalThis).__localeId__}function ps(n){if(typeof n=="string"){var s=typeof window<"u"?window:globalThis;return s.__localeData__?s.__localeData__[n]:null}return n}function vf(n,s){return nn(Qn(Ht(),n),"LLLL",s)}function Fv(n,s){return nn(Qn(Ht(),n),"LLL",s)}function xc(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.maxDate,t=s.excludeDates,l=s.excludeDateIntervals,u=s.includeDates,d=s.includeDateIntervals,p=s.filterDate;return wc(n,{minDate:i,maxDate:r})||t&&t.some((function(h){return Gt(n,h)}))||l&&l.some((function(h){var v=h.start,y=h.end;return lo(n,{start:v,end:y})}))||u&&!u.some((function(h){return Gt(n,h)}))||d&&!d.some((function(h){var v=h.start,y=h.end;return lo(n,{start:v,end:y})}))||p&&!p(Ht(n))||!1}function yf(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.excludeDates,r=s.excludeDateIntervals;return r&&r.length>0?r.some((function(t){var l=t.start,u=t.end;return lo(n,{start:l,end:u})})):i&&i.some((function(t){return Gt(n,t)}))||!1}function zv(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.maxDate,t=s.excludeDates,l=s.includeDates,u=s.filterDate;return wc(n,{minDate:mv(i),maxDate:nS(r)})||t&&t.some((function(d){return Ar(n,d)}))||l&&!l.some((function(d){return Ar(n,d)}))||u&&!u(Ht(n))||!1}function md(n,s,i,r){var t=St(n),l=Yn(n),u=St(s),d=Yn(s),p=St(r);return t===u&&t===p?l<=i&&i<=d:t<u?p===t&&l<=i||p===u&&d>=i||p<u&&p>t:void 0}function rj(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.maxDate,t=s.excludeDates,l=s.includeDates,u=s.filterDate;return wc(n,{minDate:i,maxDate:r})||t&&t.some((function(d){return uc(n,d)}))||l&&!l.some((function(d){return uc(n,d)}))||u&&!u(Ht(n))||!1}function hd(n,s,i){if(!io(s)||!io(i))return!1;var r=St(s),t=St(i);return r<=n&&t>=n}function Uv(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.maxDate,t=s.excludeDates,l=s.includeDates,u=s.filterDate,d=new Date(n,0,1);return wc(d,{minDate:hv(i),maxDate:rS(r)})||t&&t.some((function(p){return za(d,p)}))||l&&!l.some((function(p){return za(d,p)}))||u&&!u(Ht(d))||!1}function gd(n,s,i,r){var t=St(n),l=Vs(n),u=St(s),d=Vs(s),p=St(r);return t===u&&t===p?l<=i&&i<=d:t<u?p===t&&l<=i||p===u&&d>=i||p<u&&p>t:void 0}function wc(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.maxDate;return i&&nc(n,i)<0||r&&nc(n,r)>0}function Hh(n,s){return s.some((function(i){return Zr(i)===Zr(n)&&Xr(i)===Xr(n)}))}function Kh(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.excludeTimes,r=s.includeTimes,t=s.filterTime;return i&&Hh(n,i)||r&&!Hh(n,r)||t&&!t(n)||!1}function Vh(n,s){var i=s.minTime,r=s.maxTime;if(!i||!r)throw new Error("Both minTime and maxTime props required");var t,l=Ht(),u=Yl($l(l,Xr(n)),Zr(n)),d=Yl($l(l,Xr(i)),Zr(i)),p=Yl($l(l,Xr(r)),Zr(r));try{t=!lo(u,{start:d,end:p})}catch{t=!1}return t}function Qh(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.includeDates,t=ti(n,1);return i&&rc(i,t)>0||r&&r.every((function(l){return rc(l,t)>0}))||!1}function Gh(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.maxDate,r=s.includeDates,t=Fr(n,1);return i&&rc(t,i)>0||r&&r.every((function(l){return rc(t,l)>0}))||!1}function qh(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.minDate,r=s.includeDates,t=oo(n,1);return i&&ac(i,t)>0||r&&r.every((function(l){return ac(l,t)>0}))||!1}function Jh(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.maxDate,r=s.includeDates,t=ei(n,1);return i&&ac(t,i)>0||r&&r.every((function(l){return ac(t,l)>0}))||!1}function Bv(n){var s=n.minDate,i=n.includeDates;if(i&&s){var r=i.filter((function(t){return nc(t,s)>=0}));return xh(r)}return i?xh(i):s}function $v(n){var s=n.maxDate,i=n.includeDates;if(i&&s){var r=i.filter((function(t){return nc(t,s)<=0}));return wh(r)}return i?wh(i):s}function Xh(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",i=new Map,r=0,t=n.length;r<t;r++){var l=n[r];if(gc(l)){var u=nn(l,"MM.dd.yyyy"),d=i.get(u)||[];d.includes(s)||(d.push(s),i.set(u,d))}else if(Wd(l)==="object"){var p=Object.keys(l),h=p[0],v=l[p[0]];if(typeof h=="string"&&v.constructor===Array)for(var y=0,N=v.length;y<N;y++){var C=nn(v[y],"MM.dd.yyyy"),k=i.get(C)||[];k.includes(h)||(k.push(h),i.set(C,k))}}}return i}function aj(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",i=new Map;return n.forEach((function(r){var t=r.date,l=r.holidayName;if(gc(t)){var u=nn(t,"MM.dd.yyyy"),d=i.get(u)||{};if(!("className"in d)||d.className!==s||(p=d.holidayNames,h=[l],p.length!==h.length||!p.every((function(y,N){return y===h[N]})))){var p,h;d.className=s;var v=d.holidayNames;d.holidayNames=v?[].concat(fo(v),[l]):[l],i.set(u,d)}}})),i}function sj(n,s,i,r,t){for(var l=t.length,u=[],d=0;d<l;d++){var p=Od(Hb(n,Zr(t[d])),Xr(t[d])),h=Od(n,(i+1)*r);$a(p,s)&&Fa(p,h)&&u.push(t[d])}return u}function Zh(n){return n<10?"0".concat(n):"".concat(n)}function Qs(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eo,i=Math.ceil(St(n)/s)*s;return{startPeriod:i-(s-1),endPeriod:i}}function eg(n){var s=n.getSeconds(),i=n.getMilliseconds();return ze(n.getTime()-1e3*s-i)}function ij(n,s,i,r){for(var t=[],l=0;l<2*s+1;l++){var u=n+s-l,d=!0;i&&(d=St(i)<=u),r&&d&&(d=St(r)>=u),d&&t.push(u)}return t}var oj=vc((function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;En(this,i),D(R(t=s.call(this,r)),"renderOptions",(function(){var p=t.props.year,h=t.state.yearsList.map((function(N){return K.createElement("div",{className:p===N?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:N,onClick:t.onChange.bind(R(t),N),"aria-selected":p===N?"true":void 0},p===N?K.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",N)})),v=t.props.minDate?St(t.props.minDate):null,y=t.props.maxDate?St(t.props.maxDate):null;return y&&t.state.yearsList.find((function(N){return N===y}))||h.unshift(K.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:t.incrementYears},K.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),v&&t.state.yearsList.find((function(N){return N===v}))||h.push(K.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:t.decrementYears},K.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),h})),D(R(t),"onChange",(function(p){t.props.onChange(p)})),D(R(t),"handleClickOutside",(function(){t.props.onCancel()})),D(R(t),"shiftYears",(function(p){var h=t.state.yearsList.map((function(v){return v+p}));t.setState({yearsList:h})})),D(R(t),"incrementYears",(function(){return t.shiftYears(1)})),D(R(t),"decrementYears",(function(){return t.shiftYears(-1)}));var l=r.yearDropdownItemNumber,u=r.scrollableYearDropdown,d=l||(u?10:5);return t.state={yearsList:ij(t.props.year,d,t.props.minDate,t.props.maxDate)},t.dropdownRef=x.createRef(),t}return Dn(i,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var t=r.children?Array.from(r.children):null,l=t?t.find((function(u){return u.ariaSelected})):null;r.scrollTop=l?l.offsetTop+(l.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=Ln({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return K.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}]),i})()),lj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"state",{dropdownVisible:!1}),D(R(r),"renderSelectOptions",(function(){for(var d=r.props.minDate?St(r.props.minDate):1900,p=r.props.maxDate?St(r.props.maxDate):2100,h=[],v=d;v<=p;v++)h.push(K.createElement("option",{key:v,value:v},v));return h})),D(R(r),"onSelectChange",(function(d){r.onChange(d.target.value)})),D(R(r),"renderSelectMode",(function(){return K.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())})),D(R(r),"renderReadView",(function(d){return K.createElement("div",{key:"read",style:{visibility:d?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(p){return r.toggleDropdown(p)}},K.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),K.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))})),D(R(r),"renderDropdown",(function(){return K.createElement(oj,{key:"dropdown",year:r.props.year,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})})),D(R(r),"renderScrollMode",(function(){var d=r.state.dropdownVisible,p=[r.renderReadView(!d)];return d&&p.unshift(r.renderDropdown()),p})),D(R(r),"onChange",(function(d){r.toggleDropdown(),d!==r.props.year&&r.props.onChange(d)})),D(R(r),"toggleDropdown",(function(d){r.setState({dropdownVisible:!r.state.dropdownVisible},(function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,d)}))})),D(R(r),"handleYearChange",(function(d,p){r.onSelect(d,p),r.setOpen()})),D(R(r),"onSelect",(function(d,p){r.props.onSelect&&r.props.onSelect(d,p)})),D(R(r),"setOpen",(function(){r.props.setOpen&&r.props.setOpen(!0)})),r}return Dn(i,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return K.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),i})(),cj=vc((function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"isSelectedMonth",(function(d){return r.props.month===d})),D(R(r),"renderOptions",(function(){return r.props.monthNames.map((function(d,p){return K.createElement("div",{className:r.isSelectedMonth(p)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:d,onClick:r.onChange.bind(R(r),p),"aria-selected":r.isSelectedMonth(p)?"true":void 0},r.isSelectedMonth(p)?K.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",d)}))})),D(R(r),"onChange",(function(d){return r.props.onChange(d)})),D(R(r),"handleClickOutside",(function(){return r.props.onCancel()})),r}return Dn(i,[{key:"render",value:function(){return K.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),i})()),uj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"state",{dropdownVisible:!1}),D(R(r),"renderSelectOptions",(function(d){return d.map((function(p,h){return K.createElement("option",{key:h,value:h},p)}))})),D(R(r),"renderSelectMode",(function(d){return K.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(p){return r.onChange(p.target.value)}},r.renderSelectOptions(d))})),D(R(r),"renderReadView",(function(d,p){return K.createElement("div",{key:"read",style:{visibility:d?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},K.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),K.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},p[r.props.month]))})),D(R(r),"renderDropdown",(function(d){return K.createElement(cj,{key:"dropdown",month:r.props.month,monthNames:d,onChange:r.onChange,onCancel:r.toggleDropdown})})),D(R(r),"renderScrollMode",(function(d){var p=r.state.dropdownVisible,h=[r.renderReadView(!p,d)];return p&&h.unshift(r.renderDropdown(d)),h})),D(R(r),"onChange",(function(d){r.toggleDropdown(),d!==r.props.month&&r.props.onChange(d)})),D(R(r),"toggleDropdown",(function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})})),r}return Dn(i,[{key:"render",value:function(){var r,t=this,l=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(u){return Fv(u,t.props.locale)}:function(u){return vf(u,t.props.locale)});switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(l);break;case"select":r=this.renderSelectMode(l)}return K.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),i})();function dj(n,s){for(var i=[],r=Ua(n),t=Ua(s);!$a(r,t);)i.push(Ht(r)),r=Fr(r,1);return i}var fj=vc((function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),D(R(t=s.call(this,r)),"renderOptions",(function(){return t.state.monthYearsList.map((function(l){var u=Ad(l),d=za(t.props.date,l)&&Ar(t.props.date,l);return K.createElement("div",{className:d?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:u,onClick:t.onChange.bind(R(t),u),"aria-selected":d?"true":void 0},d?K.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",nn(l,t.props.dateFormat,t.props.locale))}))})),D(R(t),"onChange",(function(l){return t.props.onChange(l)})),D(R(t),"handleClickOutside",(function(){t.props.onCancel()})),t.state={monthYearsList:dj(t.props.minDate,t.props.maxDate)},t}return Dn(i,[{key:"render",value:function(){var r=Ln({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return K.createElement("div",{className:r},this.renderOptions())}}]),i})()),pj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"state",{dropdownVisible:!1}),D(R(r),"renderSelectOptions",(function(){for(var d=Ua(r.props.minDate),p=Ua(r.props.maxDate),h=[];!$a(d,p);){var v=Ad(d);h.push(K.createElement("option",{key:v,value:v},nn(d,r.props.dateFormat,r.props.locale))),d=Fr(d,1)}return h})),D(R(r),"onSelectChange",(function(d){r.onChange(d.target.value)})),D(R(r),"renderSelectMode",(function(){return K.createElement("select",{value:Ad(Ua(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())})),D(R(r),"renderReadView",(function(d){var p=nn(r.props.date,r.props.dateFormat,r.props.locale);return K.createElement("div",{key:"read",style:{visibility:d?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(h){return r.toggleDropdown(h)}},K.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),K.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},p))})),D(R(r),"renderDropdown",(function(){return K.createElement(fj,{key:"dropdown",date:r.props.date,dateFormat:r.props.dateFormat,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,locale:r.props.locale})})),D(R(r),"renderScrollMode",(function(){var d=r.state.dropdownVisible,p=[r.renderReadView(!d)];return d&&p.unshift(r.renderDropdown()),p})),D(R(r),"onChange",(function(d){r.toggleDropdown();var p=Ht(parseInt(d));za(r.props.date,p)&&Ar(r.props.date,p)||r.props.onChange(p)})),D(R(r),"toggleDropdown",(function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})})),r}return Dn(i,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return K.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),i})(),mj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"dayEl",K.createRef()),D(R(r),"handleClick",(function(d){!r.isDisabled()&&r.props.onClick&&r.props.onClick(d)})),D(R(r),"handleMouseEnter",(function(d){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(d)})),D(R(r),"handleOnKeyDown",(function(d){d.key===" "&&(d.preventDefault(),d.key="Enter"),r.props.handleOnKeyDown(d)})),D(R(r),"isSameDay",(function(d){return Gt(r.props.day,d)})),D(R(r),"isKeyboardSelected",(function(){return!r.props.disabledKeyboardNavigation&&!(r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected))&&(r.isSameDay(r.props.preSelection)||r.isSameWeek(r.props.preSelection))})),D(R(r),"isDisabled",(function(){return xc(r.props.day,r.props)})),D(R(r),"isExcluded",(function(){return yf(r.props.day,r.props)})),D(R(r),"isStartOfWeek",(function(){return Gt(r.props.day,na(r.props.day,r.props.locale,r.props.calendarStartDay))})),D(R(r),"isSameWeek",(function(d){return r.props.showWeekPicker&&Gt(d,na(r.props.day,r.props.locale,r.props.calendarStartDay))})),D(R(r),"getHighLightedClass",(function(){var d=r.props,p=d.day,h=d.highlightDates;if(!h)return!1;var v=nn(p,"MM.dd.yyyy");return h.get(v)})),D(R(r),"getHolidaysClass",(function(){var d=r.props,p=d.day,h=d.holidays;if(!h)return!1;var v=nn(p,"MM.dd.yyyy");return h.has(v)?[h.get(v).className]:void 0})),D(R(r),"isInRange",(function(){var d=r.props,p=d.day,h=d.startDate,v=d.endDate;return!(!h||!v)&&Hl(p,h,v)})),D(R(r),"isInSelectingRange",(function(){var d,p=r.props,h=p.day,v=p.selectsStart,y=p.selectsEnd,N=p.selectsRange,C=p.selectsDisabledDaysInRange,k=p.startDate,E=p.endDate,j=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(v||y||N)||!j||!C&&r.isDisabled())&&(v&&E&&(Fa(j,E)||us(j,E))?Hl(h,j,E):(y&&k&&($a(j,k)||us(j,k))||!(!N||!k||E||!$a(j,k)&&!us(j,k)))&&Hl(h,k,j))})),D(R(r),"isSelectingRangeStart",(function(){var d;if(!r.isInSelectingRange())return!1;var p=r.props,h=p.day,v=p.startDate,y=p.selectsStart,N=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return Gt(h,y?N:v)})),D(R(r),"isSelectingRangeEnd",(function(){var d;if(!r.isInSelectingRange())return!1;var p=r.props,h=p.day,v=p.endDate,y=p.selectsEnd,N=p.selectsRange,C=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return Gt(h,y||N?C:v)})),D(R(r),"isRangeStart",(function(){var d=r.props,p=d.day,h=d.startDate,v=d.endDate;return!(!h||!v)&&Gt(h,p)})),D(R(r),"isRangeEnd",(function(){var d=r.props,p=d.day,h=d.startDate,v=d.endDate;return!(!h||!v)&&Gt(v,p)})),D(R(r),"isWeekend",(function(){var d=Qb(r.props.day);return d===0||d===6})),D(R(r),"isAfterMonth",(function(){return r.props.month!==void 0&&(r.props.month+1)%12===Yn(r.props.day)})),D(R(r),"isBeforeMonth",(function(){return r.props.month!==void 0&&(Yn(r.props.day)+1)%12===r.props.month})),D(R(r),"isCurrentDay",(function(){return r.isSameDay(Ht())})),D(R(r),"isSelected",(function(){return r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected)})),D(R(r),"getClassNames",(function(d){var p,h=r.props.dayClassName?r.props.dayClassName(d):void 0;return Ln("react-datepicker__day",h,"react-datepicker__day--"+nn(r.props.day,"ddd",p),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass("react-datepicker__day--highlighted"),r.getHolidaysClass())})),D(R(r),"getAriaLabel",(function(){var d=r.props,p=d.day,h=d.ariaLabelPrefixWhenEnabled,v=h===void 0?"Choose":h,y=d.ariaLabelPrefixWhenDisabled,N=y===void 0?"Not available":y,C=r.isDisabled()||r.isExcluded()?N:v;return"".concat(C," ").concat(nn(p,"PPPP",r.props.locale))})),D(R(r),"getTitle",(function(){var d=r.props,p=d.day,h=d.holidays,v=h===void 0?new Map:h,y=nn(p,"MM.dd.yyyy");return v.has(y)&&v.get(y).holidayNames.length>0?v.get(y).holidayNames.join(", "):""})),D(R(r),"getTabIndex",(function(d,p){var h=d||r.props.selected,v=p||r.props.preSelection;return(!r.props.showWeekPicker||!r.props.showWeekNumber&&r.isStartOfWeek())&&(r.isKeyboardSelected()||r.isSameDay(h)&&Gt(v,h))?0:-1})),D(R(r),"handleFocusDay",(function(){var d,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=!1;r.getTabIndex()===0&&!p.isInputFocused&&r.isSameDay(r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(h=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(h=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(h=!0),r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()&&(h=!1),r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()&&(h=!1)),h&&((d=r.dayEl.current)===null||d===void 0||d.focus({preventScroll:!0}))})),D(R(r),"renderDayContents",(function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(yh(r.props.day),r.props.day):yh(r.props.day)})),D(R(r),"render",(function(){return K.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.handleMouseEnter,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&K.createElement("span",{className:"holiday-overlay"},r.getTitle()))})),r}return Dn(i,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}]),i})(),hj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"weekNumberEl",K.createRef()),D(R(r),"handleClick",(function(d){r.props.onClick&&r.props.onClick(d)})),D(R(r),"handleOnKeyDown",(function(d){d.key===" "&&(d.preventDefault(),d.key="Enter"),r.props.handleOnKeyDown(d)})),D(R(r),"isKeyboardSelected",(function(){return!r.props.disabledKeyboardNavigation&&!Gt(r.props.date,r.props.selected)&&Gt(r.props.date,r.props.preSelection)})),D(R(r),"getTabIndex",(function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||Gt(r.props.date,r.props.selected)&&Gt(r.props.preSelection,r.props.selected))?0:-1})),D(R(r),"handleFocusWeekNumber",(function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=!1;r.getTabIndex()===0&&!d.isInputFocused&&Gt(r.props.date,r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(p=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(p=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(p=!0)),p&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})})),r}return Dn(i,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,t=r.weekNumber,l=r.ariaLabelPrefix,u=l===void 0?"week ":l,d={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!r.onClick,"react-datepicker__week-number--selected":Gt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return K.createElement("div",{ref:this.weekNumberEl,className:Ln(d),"aria-label":"".concat(u," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},t)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),i})(),gj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"handleDayClick",(function(d,p){r.props.onDayClick&&r.props.onDayClick(d,p)})),D(R(r),"handleDayMouseEnter",(function(d){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(d)})),D(R(r),"handleWeekClick",(function(d,p,h){if(typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,p,h),r.props.showWeekPicker){var v=na(d,r.props.locale,r.props.calendarStartDay);r.handleDayClick(v,h)}r.props.shouldCloseOnSelect&&r.props.setOpen(!1)})),D(R(r),"formatWeekNumber",(function(d){return r.props.formatWeekNumber?r.props.formatWeekNumber(d):(function(p,h){var v=fs()&&ps(fs());return Xb(p,v?{locale:v}:null)})(d)})),D(R(r),"renderDays",(function(){var d=na(r.props.day,r.props.locale,r.props.calendarStartDay),p=[],h=r.formatWeekNumber(d);if(r.props.showWeekNumber){var v=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(R(r),d,h):void 0;p.push(K.createElement(hj,{key:"W",weekNumber:h,date:d,onClick:v,selected:r.props.selected,preSelection:r.props.preSelection,ariaLabelPrefix:r.props.ariaLabelPrefix,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef}))}return p.concat([0,1,2,3,4,5,6].map((function(y){var N=ui(d,y);return K.createElement(mj,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:N.valueOf(),day:N,month:r.props.month,onClick:r.handleDayClick.bind(R(r),N),onMouseEnter:r.handleDayMouseEnter.bind(R(r),N),minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart,locale:r.props.locale})})))})),D(R(r),"startOfWeek",(function(){return na(r.props.day,r.props.locale,r.props.calendarStartDay)})),D(R(r),"isKeyboardSelected",(function(){return!r.props.disabledKeyboardNavigation&&!Gt(r.startOfWeek(),r.props.selected)&&Gt(r.startOfWeek(),r.props.preSelection)})),r}return Dn(i,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":Gt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return K.createElement("div",{className:Ln(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),i})(),Yv="two_columns",Wv="three_columns",Hv="four_columns",vd=D(D(D({},Yv,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),Wv,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),Hv,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function tg(n,s){return n?Hv:s?Yv:Wv}var vj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"MONTH_REFS",fo(Array(12)).map((function(){return K.createRef()}))),D(R(r),"QUARTER_REFS",fo(Array(4)).map((function(){return K.createRef()}))),D(R(r),"isDisabled",(function(d){return xc(d,r.props)})),D(R(r),"isExcluded",(function(d){return yf(d,r.props)})),D(R(r),"handleDayClick",(function(d,p){r.props.onDayClick&&r.props.onDayClick(d,p,r.props.orderInDisplay)})),D(R(r),"handleDayMouseEnter",(function(d){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(d)})),D(R(r),"handleMouseLeave",(function(){r.props.onMouseLeave&&r.props.onMouseLeave()})),D(R(r),"isRangeStartMonth",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&Ar(Qn(h,d),v)})),D(R(r),"isRangeStartQuarter",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&uc(Ks(h,d),v)})),D(R(r),"isRangeEndMonth",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&Ar(Qn(h,d),y)})),D(R(r),"isRangeEndQuarter",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate;return!(!v||!y)&&uc(Ks(h,d),y)})),D(R(r),"isInSelectingRangeMonth",(function(d){var p,h=r.props,v=h.day,y=h.selectsStart,N=h.selectsEnd,C=h.selectsRange,k=h.startDate,E=h.endDate,j=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return!(!(y||N||C)||!j)&&(y&&E?md(j,E,d,v):(N&&k||!(!C||!k||E))&&md(k,j,d,v))})),D(R(r),"isSelectingMonthRangeStart",(function(d){var p;if(!r.isInSelectingRangeMonth(d))return!1;var h=r.props,v=h.day,y=h.startDate,N=h.selectsStart,C=Qn(v,d),k=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return Ar(C,N?k:y)})),D(R(r),"isSelectingMonthRangeEnd",(function(d){var p;if(!r.isInSelectingRangeMonth(d))return!1;var h=r.props,v=h.day,y=h.endDate,N=h.selectsEnd,C=h.selectsRange,k=Qn(v,d),E=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return Ar(k,N||C?E:y)})),D(R(r),"isInSelectingRangeQuarter",(function(d){var p,h=r.props,v=h.day,y=h.selectsStart,N=h.selectsEnd,C=h.selectsRange,k=h.startDate,E=h.endDate,j=(p=r.props.selectingDate)!==null&&p!==void 0?p:r.props.preSelection;return!(!(y||N||C)||!j)&&(y&&E?gd(j,E,d,v):(N&&k||!(!C||!k||E))&&gd(k,j,d,v))})),D(R(r),"isWeekInMonth",(function(d){var p=r.props.day,h=ui(d,6);return Ar(d,p)||Ar(h,p)})),D(R(r),"isCurrentMonth",(function(d,p){return St(d)===St(Ht())&&p===Yn(Ht())})),D(R(r),"isCurrentQuarter",(function(d,p){return St(d)===St(Ht())&&p===Vs(Ht())})),D(R(r),"isSelectedMonth",(function(d,p,h){return Yn(h)===p&&St(d)===St(h)})),D(R(r),"isSelectedQuarter",(function(d,p,h){return Vs(d)===p&&St(d)===St(h)})),D(R(r),"renderWeeks",(function(){for(var d=[],p=r.props.fixedHeight,h=0,v=!1,y=na(Ua(r.props.day),r.props.locale,r.props.calendarStartDay);d.push(K.createElement(gj,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,key:h,day:y,month:Yn(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,onWeekSelect:r.props.onWeekSelect,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumber:r.props.showWeekNumbers,showWeekPicker:r.props.showWeekPicker,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderDayContents:r.props.renderDayContents,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,calendarStartDay:r.props.calendarStartDay,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart})),!v;){h++,y=ec(y,1);var N=p&&h>=6,C=!p&&!r.isWeekInMonth(y);if(N||C){if(!r.props.peekNextMonth)break;v=!0}}return d})),D(R(r),"onMonthClick",(function(d,p){r.handleDayClick(Ua(Qn(r.props.day,p)),d)})),D(R(r),"onMonthMouseEnter",(function(d){r.handleDayMouseEnter(Ua(Qn(r.props.day,d)))})),D(R(r),"handleMonthNavigation",(function(d,p){r.isDisabled(p)||r.isExcluded(p)||(r.props.setPreSelection(p),r.MONTH_REFS[d].current&&r.MONTH_REFS[d].current.focus())})),D(R(r),"onMonthKeyDown",(function(d,p){var h=r.props,v=h.selected,y=h.preSelection,N=h.disabledKeyboardNavigation,C=h.showTwoColumnMonthYearPicker,k=h.showFourColumnMonthYearPicker,E=h.setPreSelection,j=d.key;if(j!=="Tab"&&d.preventDefault(),!N){var I=tg(k,C),$=vd[I].verticalNavigationOffset,Y=vd[I].grid;switch(j){case"Enter":r.onMonthClick(d,p),E(v);break;case"ArrowRight":r.handleMonthNavigation(p===11?0:p+1,Fr(y,1));break;case"ArrowLeft":r.handleMonthNavigation(p===0?11:p-1,ti(y,1));break;case"ArrowUp":r.handleMonthNavigation(Y[0].includes(p)?p+12-$:p-$,ti(y,$));break;case"ArrowDown":r.handleMonthNavigation(Y[Y.length-1].includes(p)?p-12+$:p+$,Fr(y,$))}}})),D(R(r),"onQuarterClick",(function(d,p){r.handleDayClick(Yh(Ks(r.props.day,p)),d)})),D(R(r),"onQuarterMouseEnter",(function(d){r.handleDayMouseEnter(Yh(Ks(r.props.day,d)))})),D(R(r),"handleQuarterNavigation",(function(d,p){r.isDisabled(p)||r.isExcluded(p)||(r.props.setPreSelection(p),r.QUARTER_REFS[d-1].current&&r.QUARTER_REFS[d-1].current.focus())})),D(R(r),"onQuarterKeyDown",(function(d,p){var h=d.key;if(!r.props.disabledKeyboardNavigation)switch(h){case"Enter":r.onQuarterClick(d,p),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleQuarterNavigation(p===4?1:p+1,fv(r.props.preSelection,1));break;case"ArrowLeft":r.handleQuarterNavigation(p===1?4:p-1,Vb(r.props.preSelection,1))}})),D(R(r),"getMonthClassNames",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate,N=p.selected,C=p.minDate,k=p.maxDate,E=p.preSelection,j=p.monthClassName,I=p.excludeDates,$=p.includeDates,Y=j?j(Qn(h,d)):void 0,B=Qn(h,d);return Ln("react-datepicker__month-text","react-datepicker__month-".concat(d),Y,{"react-datepicker__month-text--disabled":(C||k||I||$)&&zv(B,r.props),"react-datepicker__month-text--selected":r.isSelectedMonth(h,d,N),"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&Yn(E)===d,"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(d),"react-datepicker__month-text--in-range":md(v,y,d,h),"react-datepicker__month-text--range-start":r.isRangeStartMonth(d),"react-datepicker__month-text--range-end":r.isRangeEndMonth(d),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(d),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(d),"react-datepicker__month-text--today":r.isCurrentMonth(h,d)})})),D(R(r),"getTabIndex",(function(d){var p=Yn(r.props.preSelection);return r.props.disabledKeyboardNavigation||d!==p?"-1":"0"})),D(R(r),"getQuarterTabIndex",(function(d){var p=Vs(r.props.preSelection);return r.props.disabledKeyboardNavigation||d!==p?"-1":"0"})),D(R(r),"getAriaLabel",(function(d){var p=r.props,h=p.chooseDayAriaLabelPrefix,v=h===void 0?"Choose":h,y=p.disabledDayAriaLabelPrefix,N=y===void 0?"Not available":y,C=p.day,k=Qn(C,d),E=r.isDisabled(k)||r.isExcluded(k)?N:v;return"".concat(E," ").concat(nn(k,"MMMM yyyy"))})),D(R(r),"getQuarterClassNames",(function(d){var p=r.props,h=p.day,v=p.startDate,y=p.endDate,N=p.selected,C=p.minDate,k=p.maxDate,E=p.preSelection,j=p.disabledKeyboardNavigation;return Ln("react-datepicker__quarter-text","react-datepicker__quarter-".concat(d),{"react-datepicker__quarter-text--disabled":(C||k)&&rj(Ks(h,d),r.props),"react-datepicker__quarter-text--selected":r.isSelectedQuarter(h,d,N),"react-datepicker__quarter-text--keyboard-selected":!j&&Vs(E)===d,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(d),"react-datepicker__quarter-text--in-range":gd(v,y,d,h),"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(d),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(d)})})),D(R(r),"getMonthContent",(function(d){var p=r.props,h=p.showFullMonthYearPicker,v=p.renderMonthContent,y=p.locale,N=p.day,C=Fv(d,y),k=vf(d,y);return v?v(d,C,k,N):h?k:C})),D(R(r),"getQuarterContent",(function(d){var p=r.props,h=p.renderQuarterContent,v=(function(y,N){return nn(Ks(Ht(),y),"QQQ",N)})(d,p.locale);return h?h(d,v):v})),D(R(r),"renderMonths",(function(){var d=r.props,p=d.showTwoColumnMonthYearPicker,h=d.showFourColumnMonthYearPicker,v=d.day,y=d.selected;return vd[tg(h,p)].grid.map((function(N,C){return K.createElement("div",{className:"react-datepicker__month-wrapper",key:C},N.map((function(k,E){return K.createElement("div",{ref:r.MONTH_REFS[k],key:E,onClick:function(j){r.onMonthClick(j,k)},onKeyDown:function(j){r.onMonthKeyDown(j,k)},onMouseEnter:function(){return r.onMonthMouseEnter(k)},tabIndex:r.getTabIndex(k),className:r.getMonthClassNames(k),role:"option","aria-label":r.getAriaLabel(k),"aria-current":r.isCurrentMonth(v,k)?"date":void 0,"aria-selected":r.isSelectedMonth(v,k,y)},r.getMonthContent(k))})))}))})),D(R(r),"renderQuarters",(function(){var d=r.props,p=d.day,h=d.selected;return K.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map((function(v,y){return K.createElement("div",{key:y,ref:r.QUARTER_REFS[y],role:"option",onClick:function(N){r.onQuarterClick(N,v)},onKeyDown:function(N){r.onQuarterKeyDown(N,v)},onMouseEnter:function(){return r.onQuarterMouseEnter(v)},className:r.getQuarterClassNames(v),"aria-selected":r.isSelectedQuarter(p,v,h),tabIndex:r.getQuarterTabIndex(v),"aria-current":r.isCurrentQuarter(p,v)?"date":void 0},r.getQuarterContent(v))})))})),D(R(r),"getClassNames",(function(){var d=r.props,p=d.selectingDate,h=d.selectsStart,v=d.selectsEnd,y=d.showMonthYearPicker,N=d.showQuarterYearPicker,C=d.showWeekPicker;return Ln("react-datepicker__month",{"react-datepicker__month--selecting-range":p&&(h||v)},{"react-datepicker__monthPicker":y},{"react-datepicker__quarterPicker":N},{"react-datepicker__weekPicker":C})})),r}return Dn(i,[{key:"render",value:function(){var r=this.props,t=r.showMonthYearPicker,l=r.showQuarterYearPicker,u=r.day,d=r.ariaLabelPrefix,p=d===void 0?"month ":d;return K.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(p," ").concat(nn(u,"yyyy-MM")),role:"listbox"},t?this.renderMonths():l?this.renderQuarters():this.renderWeeks())}}]),i})(),Kv=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){var r;En(this,i);for(var t=arguments.length,l=new Array(t),u=0;u<t;u++)l[u]=arguments[u];return D(R(r=s.call.apply(s,[this].concat(l))),"state",{height:null}),D(R(r),"scrollToTheSelectedTime",(function(){requestAnimationFrame((function(){r.list&&(r.list.scrollTop=r.centerLi&&i.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-r.header.clientHeight:r.list.clientHeight,r.centerLi))}))})),D(R(r),"handleClick",(function(d){(r.props.minTime||r.props.maxTime)&&Vh(d,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Kh(d,r.props)||r.props.onChange(d)})),D(R(r),"isSelectedTime",(function(d){return r.props.selected&&(p=r.props.selected,h=d,eg(p).getTime()===eg(h).getTime());var p,h})),D(R(r),"isDisabledTime",(function(d){return(r.props.minTime||r.props.maxTime)&&Vh(d,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&Kh(d,r.props)})),D(R(r),"liClasses",(function(d){var p=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(d):void 0];return r.isSelectedTime(d)&&p.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(d)&&p.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(60*Zr(d)+Xr(d))%r.props.intervals!=0&&p.push("react-datepicker__time-list-item--injected"),p.join(" ")})),D(R(r),"handleOnKeyDown",(function(d,p){d.key===" "&&(d.preventDefault(),d.key="Enter"),d.key!=="ArrowUp"&&d.key!=="ArrowLeft"||!d.target.previousSibling||(d.preventDefault(),d.target.previousSibling.focus()),d.key!=="ArrowDown"&&d.key!=="ArrowRight"||!d.target.nextSibling||(d.preventDefault(),d.target.nextSibling.focus()),d.key==="Enter"&&r.handleClick(p),r.props.handleOnKeyDown(d)})),D(R(r),"renderTimes",(function(){for(var d=[],p=r.props.format?r.props.format:"p",h=r.props.intervals,v=r.props.selected||r.props.openToDate||Ht(),y=ea(v),N=r.props.injectTimes&&r.props.injectTimes.sort((function(Y,B){return Y-B})),C=60*(function(Y){var B=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()),Z=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate(),24);return Math.round((+Z-+B)/36e5)})(v),k=C/h,E=0;E<k;E++){var j=Od(y,E*h);if(d.push(j),N){var I=sj(y,j,E,h,N);d=d.concat(I)}}var $=d.reduce((function(Y,B){return B.getTime()<=v.getTime()?B:Y}),d[0]);return d.map((function(Y,B){return K.createElement("li",{key:B,onClick:r.handleClick.bind(R(r),Y),className:r.liClasses(Y),ref:function(Z){Y===$&&(r.centerLi=Z)},onKeyDown:function(Z){r.handleOnKeyDown(Z,Y)},tabIndex:Y===$?0:-1,role:"option","aria-selected":r.isSelectedTime(Y)?"true":void 0,"aria-disabled":r.isDisabledTime(Y)?"true":void 0},nn(Y,p,r.props.locale))}))})),r}return Dn(i,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,t=this.state.height;return K.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},K.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(l){r.header=l}},K.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),K.createElement("div",{className:"react-datepicker__time"},K.createElement("div",{className:"react-datepicker__time-box"},K.createElement("ul",{className:"react-datepicker__time-list",ref:function(l){r.list=l},style:t?{height:t}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),i})();D(Kv,"calcCenterPosition",(function(n,s){return s.offsetTop-(n/2-s.clientHeight/2)}));var yj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),D(R(t=s.call(this,r)),"YEAR_REFS",fo(Array(t.props.yearItemNumber)).map((function(){return K.createRef()}))),D(R(t),"isDisabled",(function(l){return xc(l,t.props)})),D(R(t),"isExcluded",(function(l){return yf(l,t.props)})),D(R(t),"selectingDate",(function(){var l;return(l=t.props.selectingDate)!==null&&l!==void 0?l:t.props.preSelection})),D(R(t),"updateFocusOnPaginate",(function(l){var u=(function(){this.YEAR_REFS[l].current.focus()}).bind(R(t));window.requestAnimationFrame(u)})),D(R(t),"handleYearClick",(function(l,u){t.props.onDayClick&&t.props.onDayClick(l,u)})),D(R(t),"handleYearNavigation",(function(l,u){var d=t.props,p=d.date,h=d.yearItemNumber,v=Qs(p,h).startPeriod;t.isDisabled(u)||t.isExcluded(u)||(t.props.setPreSelection(u),l-v==-1?t.updateFocusOnPaginate(h-1):l-v===h?t.updateFocusOnPaginate(0):t.YEAR_REFS[l-v].current.focus())})),D(R(t),"isSameDay",(function(l,u){return Gt(l,u)})),D(R(t),"isCurrentYear",(function(l){return l===St(Ht())})),D(R(t),"isRangeStart",(function(l){return t.props.startDate&&t.props.endDate&&za(ma(Ht(),l),t.props.startDate)})),D(R(t),"isRangeEnd",(function(l){return t.props.startDate&&t.props.endDate&&za(ma(Ht(),l),t.props.endDate)})),D(R(t),"isInRange",(function(l){return hd(l,t.props.startDate,t.props.endDate)})),D(R(t),"isInSelectingRange",(function(l){var u=t.props,d=u.selectsStart,p=u.selectsEnd,h=u.selectsRange,v=u.startDate,y=u.endDate;return!(!(d||p||h)||!t.selectingDate())&&(d&&y?hd(l,t.selectingDate(),y):(p&&v||!(!h||!v||y))&&hd(l,v,t.selectingDate()))})),D(R(t),"isSelectingRangeStart",(function(l){if(!t.isInSelectingRange(l))return!1;var u=t.props,d=u.startDate,p=u.selectsStart,h=ma(Ht(),l);return za(h,p?t.selectingDate():d)})),D(R(t),"isSelectingRangeEnd",(function(l){if(!t.isInSelectingRange(l))return!1;var u=t.props,d=u.endDate,p=u.selectsEnd,h=u.selectsRange,v=ma(Ht(),l);return za(v,p||h?t.selectingDate():d)})),D(R(t),"isKeyboardSelected",(function(l){var u=Vi(ma(t.props.date,l));return!t.props.disabledKeyboardNavigation&&!t.props.inline&&!Gt(u,Vi(t.props.selected))&&Gt(u,Vi(t.props.preSelection))})),D(R(t),"onYearClick",(function(l,u){var d=t.props.date;t.handleYearClick(Vi(ma(d,u)),l)})),D(R(t),"onYearKeyDown",(function(l,u){var d=l.key;if(!t.props.disabledKeyboardNavigation)switch(d){case"Enter":t.onYearClick(l,u),t.props.setPreSelection(t.props.selected);break;case"ArrowRight":t.handleYearNavigation(u+1,ei(t.props.preSelection,1));break;case"ArrowLeft":t.handleYearNavigation(u-1,oo(t.props.preSelection,1))}})),D(R(t),"getYearClassNames",(function(l){var u=t.props,d=u.minDate,p=u.maxDate,h=u.selected,v=u.excludeDates,y=u.includeDates,N=u.filterDate;return Ln("react-datepicker__year-text",{"react-datepicker__year-text--selected":l===St(h),"react-datepicker__year-text--disabled":(d||p||v||y||N)&&Uv(l,t.props),"react-datepicker__year-text--keyboard-selected":t.isKeyboardSelected(l),"react-datepicker__year-text--range-start":t.isRangeStart(l),"react-datepicker__year-text--range-end":t.isRangeEnd(l),"react-datepicker__year-text--in-range":t.isInRange(l),"react-datepicker__year-text--in-selecting-range":t.isInSelectingRange(l),"react-datepicker__year-text--selecting-range-start":t.isSelectingRangeStart(l),"react-datepicker__year-text--selecting-range-end":t.isSelectingRangeEnd(l),"react-datepicker__year-text--today":t.isCurrentYear(l)})})),D(R(t),"getYearTabIndex",(function(l){return t.props.disabledKeyboardNavigation?"-1":l===St(t.props.preSelection)?"0":"-1"})),D(R(t),"getYearContainerClassNames",(function(){var l=t.props,u=l.selectingDate,d=l.selectsStart,p=l.selectsEnd,h=l.selectsRange;return Ln("react-datepicker__year",{"react-datepicker__year--selecting-range":u&&(d||p||h)})})),D(R(t),"getYearContent",(function(l){return t.props.renderYearContent?t.props.renderYearContent(l):l})),t}return Dn(i,[{key:"render",value:function(){for(var r=this,t=[],l=this.props,u=l.date,d=l.yearItemNumber,p=l.onYearMouseEnter,h=l.onYearMouseLeave,v=Qs(u,d),y=v.startPeriod,N=v.endPeriod,C=function(E){t.push(K.createElement("div",{ref:r.YEAR_REFS[E-y],onClick:function(j){r.onYearClick(j,E)},onKeyDown:function(j){r.onYearKeyDown(j,E)},tabIndex:r.getYearTabIndex(E),className:r.getYearClassNames(E),onMouseEnter:function(j){return p(j,E)},onMouseLeave:function(j){return h(j,E)},key:E,"aria-current":r.isCurrentYear(E)?"date":void 0},r.getYearContent(E)))},k=y;k<=N;k++)C(k);return K.createElement("div",{className:this.getYearContainerClassNames()},K.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},t))}}]),i})(),xj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),D(R(t=s.call(this,r)),"onTimeChange",(function(l){t.setState({time:l});var u=t.props.date,d=u instanceof Date&&!isNaN(u)?u:new Date;d.setHours(l.split(":")[0]),d.setMinutes(l.split(":")[1]),t.props.onChange(d)})),D(R(t),"renderTimeInput",(function(){var l=t.state.time,u=t.props,d=u.date,p=u.timeString,h=u.customTimeInput;return h?K.cloneElement(h,{date:d,value:l,onChange:t.onTimeChange}):K.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:l,onChange:function(v){t.onTimeChange(v.target.value||p)}})})),t.state={time:t.props.timeString},t}return Dn(i,[{key:"render",value:function(){return K.createElement("div",{className:"react-datepicker__input-time-container"},K.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),K.createElement("div",{className:"react-datepicker-time__input-container"},K.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,t){return r.timeString!==t.time?{time:r.timeString}:null}}]),i})();function wj(n){var s=n.className,i=n.children,r=n.showPopperArrow,t=n.arrowProps,l=t===void 0?{}:t;return K.createElement("div",{className:s},r&&K.createElement("div",ii({className:"react-datepicker__triangle"},l)),i)}var bj=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],Sj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),D(R(t=s.call(this,r)),"handleClickOutside",(function(l){t.props.onClickOutside(l)})),D(R(t),"setClickOutsideRef",(function(){return t.containerRef.current})),D(R(t),"handleDropdownFocus",(function(l){(function(){var u=((arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).className||"").split(/\s+/);return bj.some((function(d){return u.indexOf(d)>=0}))})(l.target)&&t.props.onDropdownFocus()})),D(R(t),"getDateInView",(function(){var l=t.props,u=l.preSelection,d=l.selected,p=l.openToDate,h=Bv(t.props),v=$v(t.props),y=Ht(),N=p||d||u;return N||(h&&Fa(y,h)?h:v&&$a(y,v)?v:y)})),D(R(t),"increaseMonth",(function(){t.setState((function(l){var u=l.date;return{date:Fr(u,1)}}),(function(){return t.handleMonthChange(t.state.date)}))})),D(R(t),"decreaseMonth",(function(){t.setState((function(l){var u=l.date;return{date:ti(u,1)}}),(function(){return t.handleMonthChange(t.state.date)}))})),D(R(t),"handleDayClick",(function(l,u,d){t.props.onSelect(l,u,d),t.props.setPreSelection&&t.props.setPreSelection(l)})),D(R(t),"handleDayMouseEnter",(function(l){t.setState({selectingDate:l}),t.props.onDayMouseEnter&&t.props.onDayMouseEnter(l)})),D(R(t),"handleMonthMouseLeave",(function(){t.setState({selectingDate:null}),t.props.onMonthMouseLeave&&t.props.onMonthMouseLeave()})),D(R(t),"handleYearMouseEnter",(function(l,u){t.setState({selectingDate:ma(Ht(),u)}),t.props.onYearMouseEnter&&t.props.onYearMouseEnter(l,u)})),D(R(t),"handleYearMouseLeave",(function(l,u){t.props.onYearMouseLeave&&t.props.onYearMouseLeave(l,u)})),D(R(t),"handleYearChange",(function(l){t.props.onYearChange&&(t.props.onYearChange(l),t.setState({isRenderAriaLiveMessage:!0})),t.props.adjustDateOnChange&&(t.props.onSelect&&t.props.onSelect(l),t.props.setOpen&&t.props.setOpen(!0)),t.props.setPreSelection&&t.props.setPreSelection(l)})),D(R(t),"handleMonthChange",(function(l){t.handleCustomMonthChange(l),t.props.adjustDateOnChange&&(t.props.onSelect&&t.props.onSelect(l),t.props.setOpen&&t.props.setOpen(!0)),t.props.setPreSelection&&t.props.setPreSelection(l)})),D(R(t),"handleCustomMonthChange",(function(l){t.props.onMonthChange&&(t.props.onMonthChange(l),t.setState({isRenderAriaLiveMessage:!0}))})),D(R(t),"handleMonthYearChange",(function(l){t.handleYearChange(l),t.handleMonthChange(l)})),D(R(t),"changeYear",(function(l){t.setState((function(u){var d=u.date;return{date:ma(d,l)}}),(function(){return t.handleYearChange(t.state.date)}))})),D(R(t),"changeMonth",(function(l){t.setState((function(u){var d=u.date;return{date:Qn(d,l)}}),(function(){return t.handleMonthChange(t.state.date)}))})),D(R(t),"changeMonthYear",(function(l){t.setState((function(u){var d=u.date;return{date:ma(Qn(d,Yn(l)),St(l))}}),(function(){return t.handleMonthYearChange(t.state.date)}))})),D(R(t),"header",(function(){var l=na(arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.state.date,t.props.locale,t.props.calendarStartDay),u=[];return t.props.showWeekNumbers&&u.push(K.createElement("div",{key:"W",className:"react-datepicker__day-name"},t.props.weekLabel||"#")),u.concat([0,1,2,3,4,5,6].map((function(d){var p=ui(l,d),h=t.formatWeekday(p,t.props.locale),v=t.props.weekDayClassName?t.props.weekDayClassName(p):void 0;return K.createElement("div",{key:d,className:Ln("react-datepicker__day-name",v)},h)})))})),D(R(t),"formatWeekday",(function(l,u){return t.props.formatWeekDay?(function(d,p,h){return p(nn(d,"EEEE",h))})(l,t.props.formatWeekDay,u):t.props.useWeekdaysShort?(function(d,p){return nn(d,"EEE",p)})(l,u):(function(d,p){return nn(d,"EEEEEE",p)})(l,u)})),D(R(t),"decreaseYear",(function(){t.setState((function(l){var u=l.date;return{date:oo(u,t.props.showYearPicker?t.props.yearItemNumber:1)}}),(function(){return t.handleYearChange(t.state.date)}))})),D(R(t),"clearSelectingDate",(function(){t.setState({selectingDate:null})})),D(R(t),"renderPreviousButton",(function(){if(!t.props.renderCustomHeader){var l;switch(!0){case t.props.showMonthYearPicker:l=qh(t.state.date,t.props);break;case t.props.showYearPicker:l=(function(I){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=$.minDate,B=$.yearItemNumber,Z=B===void 0?eo:B,ee=Qs(Vi(oo(I,Z)),Z).endPeriod,J=Y&&St(Y);return J&&J>ee||!1})(t.state.date,t.props);break;default:l=Qh(t.state.date,t.props)}if((t.props.forceShowMonthNavigation||t.props.showDisabledMonthNavigation||!l)&&!t.props.showTimeSelectOnly){var u=["react-datepicker__navigation","react-datepicker__navigation--previous"],d=t.decreaseMonth;(t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker)&&(d=t.decreaseYear),l&&t.props.showDisabledMonthNavigation&&(u.push("react-datepicker__navigation--previous--disabled"),d=null);var p=t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker,h=t.props,v=h.previousMonthButtonLabel,y=h.previousYearButtonLabel,N=t.props,C=N.previousMonthAriaLabel,k=C===void 0?typeof v=="string"?v:"Previous Month":C,E=N.previousYearAriaLabel,j=E===void 0?typeof y=="string"?y:"Previous Year":E;return K.createElement("button",{type:"button",className:u.join(" "),onClick:d,onKeyDown:t.props.handleOnKeyDown,"aria-label":p?j:k},K.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},p?t.props.previousYearButtonLabel:t.props.previousMonthButtonLabel))}}})),D(R(t),"increaseYear",(function(){t.setState((function(l){var u=l.date;return{date:ei(u,t.props.showYearPicker?t.props.yearItemNumber:1)}}),(function(){return t.handleYearChange(t.state.date)}))})),D(R(t),"renderNextButton",(function(){if(!t.props.renderCustomHeader){var l;switch(!0){case t.props.showMonthYearPicker:l=Jh(t.state.date,t.props);break;case t.props.showYearPicker:l=(function(I){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Y=$.maxDate,B=$.yearItemNumber,Z=B===void 0?eo:B,ee=Qs(ei(I,Z),Z).startPeriod,J=Y&&St(Y);return J&&J<ee||!1})(t.state.date,t.props);break;default:l=Gh(t.state.date,t.props)}if((t.props.forceShowMonthNavigation||t.props.showDisabledMonthNavigation||!l)&&!t.props.showTimeSelectOnly){var u=["react-datepicker__navigation","react-datepicker__navigation--next"];t.props.showTimeSelect&&u.push("react-datepicker__navigation--next--with-time"),t.props.todayButton&&u.push("react-datepicker__navigation--next--with-today-button");var d=t.increaseMonth;(t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker)&&(d=t.increaseYear),l&&t.props.showDisabledMonthNavigation&&(u.push("react-datepicker__navigation--next--disabled"),d=null);var p=t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker,h=t.props,v=h.nextMonthButtonLabel,y=h.nextYearButtonLabel,N=t.props,C=N.nextMonthAriaLabel,k=C===void 0?typeof v=="string"?v:"Next Month":C,E=N.nextYearAriaLabel,j=E===void 0?typeof y=="string"?y:"Next Year":E;return K.createElement("button",{type:"button",className:u.join(" "),onClick:d,onKeyDown:t.props.handleOnKeyDown,"aria-label":p?j:k},K.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},p?t.props.nextYearButtonLabel:t.props.nextMonthButtonLabel))}}})),D(R(t),"renderCurrentMonth",(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.state.date,u=["react-datepicker__current-month"];return t.props.showYearDropdown&&u.push("react-datepicker__current-month--hasYearDropdown"),t.props.showMonthDropdown&&u.push("react-datepicker__current-month--hasMonthDropdown"),t.props.showMonthYearDropdown&&u.push("react-datepicker__current-month--hasMonthYearDropdown"),K.createElement("div",{className:u.join(" ")},nn(l,t.props.dateFormat,t.props.locale))})),D(R(t),"renderYearDropdown",(function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(t.props.showYearDropdown&&!l)return K.createElement(lj,{adjustDateOnChange:t.props.adjustDateOnChange,date:t.state.date,onSelect:t.props.onSelect,setOpen:t.props.setOpen,dropdownMode:t.props.dropdownMode,onChange:t.changeYear,minDate:t.props.minDate,maxDate:t.props.maxDate,year:St(t.state.date),scrollableYearDropdown:t.props.scrollableYearDropdown,yearDropdownItemNumber:t.props.yearDropdownItemNumber})})),D(R(t),"renderMonthDropdown",(function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(t.props.showMonthDropdown&&!l)return K.createElement(uj,{dropdownMode:t.props.dropdownMode,locale:t.props.locale,onChange:t.changeMonth,month:Yn(t.state.date),useShortMonthInDropdown:t.props.useShortMonthInDropdown})})),D(R(t),"renderMonthYearDropdown",(function(){var l=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(t.props.showMonthYearDropdown&&!l)return K.createElement(pj,{dropdownMode:t.props.dropdownMode,locale:t.props.locale,dateFormat:t.props.dateFormat,onChange:t.changeMonthYear,minDate:t.props.minDate,maxDate:t.props.maxDate,date:t.state.date,scrollableMonthYearDropdown:t.props.scrollableMonthYearDropdown})})),D(R(t),"handleTodayButtonClick",(function(l){t.props.onSelect(Wh(),l),t.props.setPreSelection&&t.props.setPreSelection(Wh())})),D(R(t),"renderTodayButton",(function(){if(t.props.todayButton&&!t.props.showTimeSelectOnly)return K.createElement("div",{className:"react-datepicker__today-button",onClick:function(l){return t.handleTodayButtonClick(l)}},t.props.todayButton)})),D(R(t),"renderDefaultHeader",(function(l){var u=l.monthDate,d=l.i;return K.createElement("div",{className:"react-datepicker__header ".concat(t.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},t.renderCurrentMonth(u),K.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(t.props.dropdownMode),onFocus:t.handleDropdownFocus},t.renderMonthDropdown(d!==0),t.renderMonthYearDropdown(d!==0),t.renderYearDropdown(d!==0)),K.createElement("div",{className:"react-datepicker__day-names"},t.header(u)))})),D(R(t),"renderCustomHeader",(function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=l.monthDate,d=l.i;if(t.props.showTimeSelect&&!t.state.monthContainer||t.props.showTimeSelectOnly)return null;var p=Qh(t.state.date,t.props),h=Gh(t.state.date,t.props),v=qh(t.state.date,t.props),y=Jh(t.state.date,t.props),N=!t.props.showMonthYearPicker&&!t.props.showQuarterYearPicker&&!t.props.showYearPicker;return K.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:t.props.onDropdownFocus},t.props.renderCustomHeader(lc(lc({},t.state),{},{customHeaderCount:d,monthDate:u,changeMonth:t.changeMonth,changeYear:t.changeYear,decreaseMonth:t.decreaseMonth,increaseMonth:t.increaseMonth,decreaseYear:t.decreaseYear,increaseYear:t.increaseYear,prevMonthButtonDisabled:p,nextMonthButtonDisabled:h,prevYearButtonDisabled:v,nextYearButtonDisabled:y})),N&&K.createElement("div",{className:"react-datepicker__day-names"},t.header(u)))})),D(R(t),"renderYearHeader",(function(){var l=t.state.date,u=t.props,d=u.showYearPicker,p=Qs(l,u.yearItemNumber),h=p.startPeriod,v=p.endPeriod;return K.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},d?"".concat(h," - ").concat(v):St(l))})),D(R(t),"renderHeader",(function(l){switch(!0){case t.props.renderCustomHeader!==void 0:return t.renderCustomHeader(l);case(t.props.showMonthYearPicker||t.props.showQuarterYearPicker||t.props.showYearPicker):return t.renderYearHeader(l);default:return t.renderDefaultHeader(l)}})),D(R(t),"renderMonths",(function(){var l;if(!t.props.showTimeSelectOnly&&!t.props.showYearPicker){for(var u=[],d=t.props.showPreviousMonths?t.props.monthsShown-1:0,p=ti(t.state.date,d),h=(l=t.props.monthSelectedIn)!==null&&l!==void 0?l:d,v=0;v<t.props.monthsShown;++v){var y=Fr(p,v-h+d),N="month-".concat(v),C=v<t.props.monthsShown-1,k=v>0;u.push(K.createElement("div",{key:N,ref:function(E){t.monthContainer=E},className:"react-datepicker__month-container"},t.renderHeader({monthDate:y,i:v}),K.createElement(vj,{chooseDayAriaLabelPrefix:t.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:t.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:t.props.weekAriaLabelPrefix,ariaLabelPrefix:t.props.monthAriaLabelPrefix,onChange:t.changeMonthYear,day:y,dayClassName:t.props.dayClassName,calendarStartDay:t.props.calendarStartDay,monthClassName:t.props.monthClassName,onDayClick:t.handleDayClick,handleOnKeyDown:t.props.handleOnDayKeyDown,onDayMouseEnter:t.handleDayMouseEnter,onMouseLeave:t.handleMonthMouseLeave,onWeekSelect:t.props.onWeekSelect,orderInDisplay:v,formatWeekNumber:t.props.formatWeekNumber,locale:t.props.locale,minDate:t.props.minDate,maxDate:t.props.maxDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,highlightDates:t.props.highlightDates,holidays:t.props.holidays,selectingDate:t.state.selectingDate,includeDates:t.props.includeDates,includeDateIntervals:t.props.includeDateIntervals,inline:t.props.inline,shouldFocusDayInline:t.props.shouldFocusDayInline,fixedHeight:t.props.fixedHeight,filterDate:t.props.filterDate,preSelection:t.props.preSelection,setPreSelection:t.props.setPreSelection,selected:t.props.selected,selectsStart:t.props.selectsStart,selectsEnd:t.props.selectsEnd,selectsRange:t.props.selectsRange,selectsDisabledDaysInRange:t.props.selectsDisabledDaysInRange,showWeekNumbers:t.props.showWeekNumbers,startDate:t.props.startDate,endDate:t.props.endDate,peekNextMonth:t.props.peekNextMonth,setOpen:t.props.setOpen,shouldCloseOnSelect:t.props.shouldCloseOnSelect,renderDayContents:t.props.renderDayContents,renderMonthContent:t.props.renderMonthContent,renderQuarterContent:t.props.renderQuarterContent,renderYearContent:t.props.renderYearContent,disabledKeyboardNavigation:t.props.disabledKeyboardNavigation,showMonthYearPicker:t.props.showMonthYearPicker,showFullMonthYearPicker:t.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:t.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:t.props.showFourColumnMonthYearPicker,showYearPicker:t.props.showYearPicker,showQuarterYearPicker:t.props.showQuarterYearPicker,showWeekPicker:t.props.showWeekPicker,isInputFocused:t.props.isInputFocused,containerRef:t.containerRef,monthShowsDuplicateDaysEnd:C,monthShowsDuplicateDaysStart:k})))}return u}})),D(R(t),"renderYears",(function(){if(!t.props.showTimeSelectOnly)return t.props.showYearPicker?K.createElement("div",{className:"react-datepicker__year--container"},t.renderHeader(),K.createElement(yj,ii({onDayClick:t.handleDayClick,selectingDate:t.state.selectingDate,clearSelectingDate:t.clearSelectingDate,date:t.state.date},t.props,{onYearMouseEnter:t.handleYearMouseEnter,onYearMouseLeave:t.handleYearMouseLeave}))):void 0})),D(R(t),"renderTimeSection",(function(){if(t.props.showTimeSelect&&(t.state.monthContainer||t.props.showTimeSelectOnly))return K.createElement(Kv,{selected:t.props.selected,openToDate:t.props.openToDate,onChange:t.props.onTimeChange,timeClassName:t.props.timeClassName,format:t.props.timeFormat,includeTimes:t.props.includeTimes,intervals:t.props.timeIntervals,minTime:t.props.minTime,maxTime:t.props.maxTime,excludeTimes:t.props.excludeTimes,filterTime:t.props.filterTime,timeCaption:t.props.timeCaption,todayButton:t.props.todayButton,showMonthDropdown:t.props.showMonthDropdown,showMonthYearDropdown:t.props.showMonthYearDropdown,showYearDropdown:t.props.showYearDropdown,withPortal:t.props.withPortal,monthRef:t.state.monthContainer,injectTimes:t.props.injectTimes,locale:t.props.locale,handleOnKeyDown:t.props.handleOnKeyDown,showTimeSelectOnly:t.props.showTimeSelectOnly})})),D(R(t),"renderInputTimeSection",(function(){var l=new Date(t.props.selected),u=La(l)&&t.props.selected?"".concat(Zh(l.getHours()),":").concat(Zh(l.getMinutes())):"";if(t.props.showTimeInput)return K.createElement(xj,{date:l,timeString:u,timeInputLabel:t.props.timeInputLabel,onChange:t.props.onTimeChange,customTimeInput:t.props.customTimeInput})})),D(R(t),"renderAriaLiveRegion",(function(){var l,u=Qs(t.state.date,t.props.yearItemNumber),d=u.startPeriod,p=u.endPeriod;return l=t.props.showYearPicker?"".concat(d," - ").concat(p):t.props.showMonthYearPicker||t.props.showQuarterYearPicker?St(t.state.date):"".concat(vf(Yn(t.state.date),t.props.locale)," ").concat(St(t.state.date)),K.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},t.state.isRenderAriaLiveMessage&&l)})),D(R(t),"renderChildren",(function(){if(t.props.children)return K.createElement("div",{className:"react-datepicker__children-container"},t.props.children)})),t.containerRef=K.createRef(),t.state={date:t.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},t}return Dn(i,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=void r.setState({monthContainer:r.monthContainer}))}},{key:"componentDidUpdate",value:function(r){var t=this;if(!this.props.preSelection||Gt(this.props.preSelection,r.preSelection)&&this.props.monthSelectedIn===r.monthSelectedIn)this.props.openToDate&&!Gt(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate});else{var l=!Ar(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},(function(){return l&&t.handleCustomMonthChange(t.state.date)}))}}},{key:"render",value:function(){var r=this.props.container||wj;return K.createElement("div",{style:{display:"contents"},ref:this.containerRef},K.createElement(r,{className:Ln("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:eo}}}]),i})(),Nj=function(n){var s=n.icon,i=n.className,r=i===void 0?"":i,t=n.onClick,l="react-datepicker__calendar-icon";return K.isValidElement(s)?K.cloneElement(s,{className:"".concat(s.props.className||""," ").concat(l," ").concat(r),onClick:function(u){typeof s.props.onClick=="function"&&s.props.onClick(u),typeof t=="function"&&t(u)}}):typeof s=="string"?K.createElement("i",{className:"".concat(l," ").concat(s," ").concat(r),"aria-hidden":"true",onClick:t}):K.createElement("svg",{className:"".concat(l," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:t},K.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},Vv=(function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),(t=s.call(this,r)).el=document.createElement("div"),t}return Dn(i,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return e0.createPortal(this.props.children,this.el)}}]),i})(),kj=function(n){return!n.disabled&&n.tabIndex!==-1},Qv=(function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),D(R(t=s.call(this,r)),"getTabChildren",(function(){return Array.prototype.slice.call(t.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(kj)})),D(R(t),"handleFocusStart",(function(){var l=t.getTabChildren();l&&l.length>1&&l[l.length-1].focus()})),D(R(t),"handleFocusEnd",(function(){var l=t.getTabChildren();l&&l.length>1&&l[0].focus()})),t.tabLoopRef=K.createRef(),t}return Dn(i,[{key:"render",value:function(){return this.props.enableTabLoop?K.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},K.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,K.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),i})(),jj=(function(n){Tn(i,K.Component);var s=Mn(i);function i(){return En(this,i),s.apply(this,arguments)}return Dn(i,[{key:"render",value:function(){var r,t=this.props,l=t.className,u=t.wrapperClassName,d=t.hidePopper,p=t.popperComponent,h=t.popperModifiers,v=t.popperPlacement,y=t.popperProps,N=t.targetComponent,C=t.enableTabLoop,k=t.popperOnKeyDown,E=t.portalId,j=t.portalHost;if(!d){var I=Ln("react-datepicker-popper",l);r=K.createElement(Gk,ii({modifiers:h,placement:v},y),(function(Y){var B=Y.ref,Z=Y.style,ee=Y.placement,J=Y.arrowProps;return K.createElement(Qv,{enableTabLoop:C},K.createElement("div",{ref:B,style:Z,className:I,"data-placement":ee,onKeyDown:k},K.cloneElement(p,{arrowProps:J})))}))}this.props.popperContainer&&(r=K.createElement(this.props.popperContainer,{},r)),E&&!d&&(r=K.createElement(Vv,{portalId:E,portalHost:j},r));var $=Ln("react-datepicker-wrapper",u);return K.createElement(ON,{className:"react-datepicker-manager"},K.createElement(Zk,null,(function(Y){var B=Y.ref;return K.createElement("div",{ref:B,className:$},N)})),r)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),i})(),ng="react-datepicker-ignore-onclickoutside",Cj=vc(Sj),yd="Date input not valid.",Gv=(function(n){Tn(i,K.Component);var s=Mn(i);function i(r){var t;return En(this,i),D(R(t=s.call(this,r)),"getPreSelection",(function(){return t.props.openToDate?t.props.openToDate:t.props.selectsEnd&&t.props.startDate?t.props.startDate:t.props.selectsStart&&t.props.endDate?t.props.endDate:Ht()})),D(R(t),"modifyHolidays",(function(){var l;return(l=t.props.holidays)===null||l===void 0?void 0:l.reduce((function(u,d){var p=new Date(d.date);return io(p)?[].concat(fo(u),[lc(lc({},d),{},{date:p})]):u}),[])})),D(R(t),"calcInitialState",(function(){var l,u=t.getPreSelection(),d=Bv(t.props),p=$v(t.props),h=d&&Fa(u,ea(d))?d:p&&$a(u,Ld(p))?p:u;return{open:t.props.startOpen||!1,preventFocus:!1,preSelection:(l=t.props.selectsRange?t.props.startDate:t.props.selected)!==null&&l!==void 0?l:h,highlightDates:Xh(t.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}})),D(R(t),"clearPreventFocusTimeout",(function(){t.preventFocusTimeout&&clearTimeout(t.preventFocusTimeout)})),D(R(t),"setFocus",(function(){t.input&&t.input.focus&&t.input.focus({preventScroll:!0})})),D(R(t),"setBlur",(function(){t.input&&t.input.blur&&t.input.blur(),t.cancelFocusInput()})),D(R(t),"setOpen",(function(l){var u=arguments.length>1&&arguments[1]!==void 0&&arguments[1];t.setState({open:l,preSelection:l&&t.state.open?t.state.preSelection:t.calcInitialState().preSelection,lastPreSelectChange:xd},(function(){l||t.setState((function(d){return{focused:!!u&&d.focused}}),(function(){!u&&t.setBlur(),t.setState({inputValue:null})}))}))})),D(R(t),"inputOk",(function(){return gc(t.state.preSelection)})),D(R(t),"isCalendarOpen",(function(){return t.props.open===void 0?t.state.open&&!t.props.disabled&&!t.props.readOnly:t.props.open})),D(R(t),"handleFocus",(function(l){t.state.preventFocus||(t.props.onFocus(l),t.props.preventOpenOnFocus||t.props.readOnly||t.setOpen(!0)),t.setState({focused:!0})})),D(R(t),"sendFocusBackToInput",(function(){t.preventFocusTimeout&&t.clearPreventFocusTimeout(),t.setState({preventFocus:!0},(function(){t.preventFocusTimeout=setTimeout((function(){t.setFocus(),t.setState({preventFocus:!1})}))}))})),D(R(t),"cancelFocusInput",(function(){clearTimeout(t.inputFocusTimeout),t.inputFocusTimeout=null})),D(R(t),"deferFocusInput",(function(){t.cancelFocusInput(),t.inputFocusTimeout=setTimeout((function(){return t.setFocus()}),1)})),D(R(t),"handleDropdownFocus",(function(){t.cancelFocusInput()})),D(R(t),"handleBlur",(function(l){(!t.state.open||t.props.withPortal||t.props.showTimeInput)&&t.props.onBlur(l),t.setState({focused:!1})})),D(R(t),"handleCalendarClickOutside",(function(l){t.props.inline||t.setOpen(!1),t.props.onClickOutside(l),t.props.withPortal&&l.preventDefault()})),D(R(t),"handleChange",(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var p=u[0];if(!t.props.onChangeRaw||(t.props.onChangeRaw.apply(R(t),u),typeof p.isDefaultPrevented=="function"&&!p.isDefaultPrevented())){t.setState({inputValue:p.target.value,lastPreSelectChange:Ej});var h,v,y,N,C,k,E,j,I=(h=p.target.value,v=t.props.dateFormat,y=t.props.locale,N=t.props.strictParsing,C=t.props.minDate,k=null,E=ps(y)||ps(fs()),j=!0,Array.isArray(v)?(v.forEach((function($){var Y=ld(h,$,new Date,{locale:E});N&&(j=La(Y,C)&&h===nn(Y,$,y)),La(Y,C)&&j&&(k=Y)})),k):(k=ld(h,v,new Date,{locale:E}),N?j=La(k)&&h===nn(k,v,y):La(k)||(v=v.match(nj).map((function($){var Y=$[0];return Y==="p"||Y==="P"?E?(0,tj[Y])($,E.formatLong):Y:$})).join(""),h.length>0&&(k=ld(h,v.slice(0,h.length),new Date)),La(k)||(k=new Date(h))),La(k)&&j?k:null));t.props.showTimeSelectOnly&&t.props.selected&&I&&!Gt(I,t.props.selected)&&(I=ej(t.props.selected,{hours:Zr(I),minutes:Xr(I),seconds:vh(I)})),!I&&p.target.value||(t.props.showWeekPicker&&(I=na(I,t.props.locale,t.props.calendarStartDay)),t.setSelected(I,p,!0))}})),D(R(t),"handleSelect",(function(l,u,d){if(t.props.shouldCloseOnSelect&&!t.props.showTimeSelect&&t.sendFocusBackToInput(),t.props.onChangeRaw&&t.props.onChangeRaw(u),t.props.showWeekPicker&&(l=na(l,t.props.locale,t.props.calendarStartDay)),t.setSelected(l,u,!1,d),t.props.showDateSelect&&t.setState({isRenderAriaLiveMessage:!0}),!t.props.shouldCloseOnSelect||t.props.showTimeSelect)t.setPreSelection(l);else if(!t.props.inline){t.props.selectsRange||t.setOpen(!1);var p=t.props,h=p.startDate,v=p.endDate;!h||v||Fa(l,h)||t.setOpen(!1)}})),D(R(t),"setSelected",(function(l,u,d,p){var h=l;if(t.props.showYearPicker){if(h!==null&&Uv(St(h),t.props))return}else if(t.props.showMonthYearPicker){if(h!==null&&zv(h,t.props))return}else if(h!==null&&xc(h,t.props))return;var v=t.props,y=v.onChange,N=v.selectsRange,C=v.startDate,k=v.endDate;if(!us(t.props.selected,h)||t.props.allowSameDay||N)if(h!==null&&(!t.props.selected||d&&(t.props.showTimeSelect||t.props.showTimeSelectOnly||t.props.showTimeInput)||(h=$h(h,{hour:Zr(t.props.selected),minute:Xr(t.props.selected),second:vh(t.props.selected)})),t.props.inline||t.setState({preSelection:h}),t.props.focusSelectedMonth||t.setState({monthSelectedIn:p})),N){var E=C&&!k,j=C&&k;!C&&!k?y([h,null],u):E&&(Fa(h,C)?y([h,null],u):y([C,h],u)),j&&y([h,null],u)}else y(h,u);d||(t.props.onSelect(h,u),t.setState({inputValue:null}))})),D(R(t),"setPreSelection",(function(l){var u=t.props.minDate!==void 0,d=t.props.maxDate!==void 0,p=!0;if(l){t.props.showWeekPicker&&(l=na(l,t.props.locale,t.props.calendarStartDay));var h=ea(l);if(u&&d)p=Hl(l,t.props.minDate,t.props.maxDate);else if(u){var v=ea(t.props.minDate);p=$a(l,v)||us(h,v)}else if(d){var y=Ld(t.props.maxDate);p=Fa(l,y)||us(h,y)}}p&&t.setState({preSelection:l})})),D(R(t),"toggleCalendar",(function(){t.setOpen(!t.state.open)})),D(R(t),"handleTimeChange",(function(l){var u=t.props.selected?t.props.selected:t.getPreSelection(),d=t.props.selected?l:$h(u,{hour:Zr(l),minute:Xr(l)});t.setState({preSelection:d}),t.props.onChange(d),t.props.shouldCloseOnSelect&&(t.sendFocusBackToInput(),t.setOpen(!1)),t.props.showTimeInput&&t.setOpen(!0),(t.props.showTimeSelectOnly||t.props.showTimeSelect)&&t.setState({isRenderAriaLiveMessage:!0}),t.setState({inputValue:null})})),D(R(t),"onInputClick",(function(){t.props.disabled||t.props.readOnly||t.setOpen(!0),t.props.onInputClick()})),D(R(t),"onInputKeyDown",(function(l){t.props.onKeyDown(l);var u=l.key;if(t.state.open||t.props.inline||t.props.preventOpenOnFocus){if(t.state.open){if(u==="ArrowDown"||u==="ArrowUp"){l.preventDefault();var d=t.props.showWeekPicker&&t.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=t.calendar.componentNode&&t.calendar.componentNode.querySelector(d);return void(p&&p.focus({preventScroll:!0}))}var h=Ht(t.state.preSelection);u==="Enter"?(l.preventDefault(),t.inputOk()&&t.state.lastPreSelectChange===xd?(t.handleSelect(h,l),!t.props.shouldCloseOnSelect&&t.setPreSelection(h)):t.setOpen(!1)):u==="Escape"?(l.preventDefault(),t.sendFocusBackToInput(),t.setOpen(!1)):u==="Tab"&&t.setOpen(!1),t.inputOk()||t.props.onInputError({code:1,msg:yd})}}else u!=="ArrowDown"&&u!=="ArrowUp"&&u!=="Enter"||t.onInputClick()})),D(R(t),"onPortalKeyDown",(function(l){l.key==="Escape"&&(l.preventDefault(),t.setState({preventFocus:!0},(function(){t.setOpen(!1),setTimeout((function(){t.setFocus(),t.setState({preventFocus:!1})}))})))})),D(R(t),"onDayKeyDown",(function(l){t.props.onKeyDown(l);var u=l.key,d=Ht(t.state.preSelection);if(u==="Enter")l.preventDefault(),t.handleSelect(d,l),!t.props.shouldCloseOnSelect&&t.setPreSelection(d);else if(u==="Escape")l.preventDefault(),t.setOpen(!1),t.inputOk()||t.props.onInputError({code:1,msg:yd});else if(!t.props.disabledKeyboardNavigation){var p;switch(u){case"ArrowLeft":p=t.props.showWeekPicker?gh(d,1):Kb(d,1);break;case"ArrowRight":p=t.props.showWeekPicker?ec(d,1):ui(d,1);break;case"ArrowUp":p=gh(d,1);break;case"ArrowDown":p=ec(d,1);break;case"PageUp":p=ti(d,1);break;case"PageDown":p=Fr(d,1);break;case"Home":p=oo(d,1);break;case"End":p=ei(d,1);break;default:p=null}if(!p)return void(t.props.onInputError&&t.props.onInputError({code:1,msg:yd}));if(l.preventDefault(),t.setState({lastPreSelectChange:xd}),t.props.adjustDateOnChange&&t.setSelected(p),t.setPreSelection(p),t.props.inline){var h=Yn(d),v=Yn(p),y=St(d),N=St(p);h!==v||y!==N?t.setState({shouldFocusDayInline:!0}):t.setState({shouldFocusDayInline:!1})}}})),D(R(t),"onPopperKeyDown",(function(l){l.key==="Escape"&&(l.preventDefault(),t.sendFocusBackToInput())})),D(R(t),"onClearClick",(function(l){l&&l.preventDefault&&l.preventDefault(),t.sendFocusBackToInput(),t.props.selectsRange?t.props.onChange([null,null],l):t.props.onChange(null,l),t.setState({inputValue:null})})),D(R(t),"clear",(function(){t.onClearClick()})),D(R(t),"onScroll",(function(l){typeof t.props.closeOnScroll=="boolean"&&t.props.closeOnScroll?l.target!==document&&l.target!==document.documentElement&&l.target!==document.body||t.setOpen(!1):typeof t.props.closeOnScroll=="function"&&t.props.closeOnScroll(l)&&t.setOpen(!1)})),D(R(t),"renderCalendar",(function(){return t.props.inline||t.isCalendarOpen()?K.createElement(Cj,{ref:function(l){t.calendar=l},locale:t.props.locale,calendarStartDay:t.props.calendarStartDay,chooseDayAriaLabelPrefix:t.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:t.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:t.props.weekAriaLabelPrefix,monthAriaLabelPrefix:t.props.monthAriaLabelPrefix,adjustDateOnChange:t.props.adjustDateOnChange,setOpen:t.setOpen,shouldCloseOnSelect:t.props.shouldCloseOnSelect,dateFormat:t.props.dateFormatCalendar,useWeekdaysShort:t.props.useWeekdaysShort,formatWeekDay:t.props.formatWeekDay,dropdownMode:t.props.dropdownMode,selected:t.props.selected,preSelection:t.state.preSelection,onSelect:t.handleSelect,onWeekSelect:t.props.onWeekSelect,openToDate:t.props.openToDate,minDate:t.props.minDate,maxDate:t.props.maxDate,selectsStart:t.props.selectsStart,selectsEnd:t.props.selectsEnd,selectsRange:t.props.selectsRange,startDate:t.props.startDate,endDate:t.props.endDate,excludeDates:t.props.excludeDates,excludeDateIntervals:t.props.excludeDateIntervals,filterDate:t.props.filterDate,onClickOutside:t.handleCalendarClickOutside,formatWeekNumber:t.props.formatWeekNumber,highlightDates:t.state.highlightDates,holidays:aj(t.modifyHolidays()),includeDates:t.props.includeDates,includeDateIntervals:t.props.includeDateIntervals,includeTimes:t.props.includeTimes,injectTimes:t.props.injectTimes,inline:t.props.inline,shouldFocusDayInline:t.state.shouldFocusDayInline,peekNextMonth:t.props.peekNextMonth,showMonthDropdown:t.props.showMonthDropdown,showPreviousMonths:t.props.showPreviousMonths,useShortMonthInDropdown:t.props.useShortMonthInDropdown,showMonthYearDropdown:t.props.showMonthYearDropdown,showWeekNumbers:t.props.showWeekNumbers,showYearDropdown:t.props.showYearDropdown,withPortal:t.props.withPortal,forceShowMonthNavigation:t.props.forceShowMonthNavigation,showDisabledMonthNavigation:t.props.showDisabledMonthNavigation,scrollableYearDropdown:t.props.scrollableYearDropdown,scrollableMonthYearDropdown:t.props.scrollableMonthYearDropdown,todayButton:t.props.todayButton,weekLabel:t.props.weekLabel,outsideClickIgnoreClass:ng,fixedHeight:t.props.fixedHeight,monthsShown:t.props.monthsShown,monthSelectedIn:t.state.monthSelectedIn,onDropdownFocus:t.handleDropdownFocus,onMonthChange:t.props.onMonthChange,onYearChange:t.props.onYearChange,dayClassName:t.props.dayClassName,weekDayClassName:t.props.weekDayClassName,monthClassName:t.props.monthClassName,timeClassName:t.props.timeClassName,showDateSelect:t.props.showDateSelect,showTimeSelect:t.props.showTimeSelect,showTimeSelectOnly:t.props.showTimeSelectOnly,onTimeChange:t.handleTimeChange,timeFormat:t.props.timeFormat,timeIntervals:t.props.timeIntervals,minTime:t.props.minTime,maxTime:t.props.maxTime,excludeTimes:t.props.excludeTimes,filterTime:t.props.filterTime,timeCaption:t.props.timeCaption,className:t.props.calendarClassName,container:t.props.calendarContainer,yearItemNumber:t.props.yearItemNumber,yearDropdownItemNumber:t.props.yearDropdownItemNumber,previousMonthAriaLabel:t.props.previousMonthAriaLabel,previousMonthButtonLabel:t.props.previousMonthButtonLabel,nextMonthAriaLabel:t.props.nextMonthAriaLabel,nextMonthButtonLabel:t.props.nextMonthButtonLabel,previousYearAriaLabel:t.props.previousYearAriaLabel,previousYearButtonLabel:t.props.previousYearButtonLabel,nextYearAriaLabel:t.props.nextYearAriaLabel,nextYearButtonLabel:t.props.nextYearButtonLabel,timeInputLabel:t.props.timeInputLabel,disabledKeyboardNavigation:t.props.disabledKeyboardNavigation,renderCustomHeader:t.props.renderCustomHeader,popperProps:t.props.popperProps,renderDayContents:t.props.renderDayContents,renderMonthContent:t.props.renderMonthContent,renderQuarterContent:t.props.renderQuarterContent,renderYearContent:t.props.renderYearContent,onDayMouseEnter:t.props.onDayMouseEnter,onMonthMouseLeave:t.props.onMonthMouseLeave,onYearMouseEnter:t.props.onYearMouseEnter,onYearMouseLeave:t.props.onYearMouseLeave,selectsDisabledDaysInRange:t.props.selectsDisabledDaysInRange,showTimeInput:t.props.showTimeInput,showMonthYearPicker:t.props.showMonthYearPicker,showFullMonthYearPicker:t.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:t.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:t.props.showFourColumnMonthYearPicker,showYearPicker:t.props.showYearPicker,showQuarterYearPicker:t.props.showQuarterYearPicker,showWeekPicker:t.props.showWeekPicker,showPopperArrow:t.props.showPopperArrow,excludeScrollbar:t.props.excludeScrollbar,handleOnKeyDown:t.props.onKeyDown,handleOnDayKeyDown:t.onDayKeyDown,isInputFocused:t.state.focused,customTimeInput:t.props.customTimeInput,setPreSelection:t.setPreSelection},t.props.children):null})),D(R(t),"renderAriaLiveRegion",(function(){var l,u=t.props,d=u.dateFormat,p=u.locale,h=t.props.showTimeInput||t.props.showTimeSelect?"PPPPp":"PPPP";return l=t.props.selectsRange?"Selected start date: ".concat(Vr(t.props.startDate,{dateFormat:h,locale:p}),". ").concat(t.props.endDate?"End date: "+Vr(t.props.endDate,{dateFormat:h,locale:p}):""):t.props.showTimeSelectOnly?"Selected time: ".concat(Vr(t.props.selected,{dateFormat:d,locale:p})):t.props.showYearPicker?"Selected year: ".concat(Vr(t.props.selected,{dateFormat:"yyyy",locale:p})):t.props.showMonthYearPicker?"Selected month: ".concat(Vr(t.props.selected,{dateFormat:"MMMM yyyy",locale:p})):t.props.showQuarterYearPicker?"Selected quarter: ".concat(Vr(t.props.selected,{dateFormat:"yyyy, QQQ",locale:p})):"Selected date: ".concat(Vr(t.props.selected,{dateFormat:h,locale:p})),K.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},l)})),D(R(t),"renderDateInput",(function(){var l,u=Ln(t.props.className,D({},ng,t.state.open)),d=t.props.customInput||K.createElement("input",{type:"text"}),p=t.props.customInputRef||"ref",h=typeof t.props.value=="string"?t.props.value:typeof t.state.inputValue=="string"?t.state.inputValue:t.props.selectsRange?(function(v,y,N){if(!v)return"";var C=Vr(v,N),k=y?Vr(y,N):"";return"".concat(C," - ").concat(k)})(t.props.startDate,t.props.endDate,t.props):Vr(t.props.selected,t.props);return K.cloneElement(d,(D(D(D(D(D(D(D(D(D(D(l={},p,(function(v){t.input=v})),"value",h),"onBlur",t.handleBlur),"onChange",t.handleChange),"onClick",t.onInputClick),"onFocus",t.handleFocus),"onKeyDown",t.onInputKeyDown),"id",t.props.id),"name",t.props.name),"form",t.props.form),D(D(D(D(D(D(D(D(D(D(l,"autoFocus",t.props.autoFocus),"placeholder",t.props.placeholderText),"disabled",t.props.disabled),"autoComplete",t.props.autoComplete),"className",Ln(d.props.className,u)),"title",t.props.title),"readOnly",t.props.readOnly),"required",t.props.required),"tabIndex",t.props.tabIndex),"aria-describedby",t.props.ariaDescribedBy),D(D(D(l,"aria-invalid",t.props.ariaInvalid),"aria-labelledby",t.props.ariaLabelledBy),"aria-required",t.props.ariaRequired)))})),D(R(t),"renderClearButton",(function(){var l=t.props,u=l.isClearable,d=l.disabled,p=l.selected,h=l.startDate,v=l.endDate,y=l.clearButtonTitle,N=l.clearButtonClassName,C=N===void 0?"":N,k=l.ariaLabelClose,E=k===void 0?"Close":k;return!u||p==null&&h==null&&v==null?null:K.createElement("button",{type:"button",className:Ln("react-datepicker__close-icon",C,{"react-datepicker__close-icon--disabled":d}),disabled:d,"aria-label":E,onClick:t.onClearClick,title:y,tabIndex:-1})})),t.state=t.calcInitialState(),t.preventFocusTimeout=null,t}return Dn(i,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,t){var l,u;r.inline&&(l=r.selected,u=this.props.selected,l&&u?Yn(l)!==Yn(u)||St(l)!==St(u):l!==u)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:Xh(this.props.highlightDates)}),t.focused||us(r.selected,this.props.selected)||this.setState({inputValue:null}),t.open!==this.state.open&&(t.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),t.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,t=r.showIcon,l=r.icon,u=r.calendarIconClassname,d=r.toggleCalendarOnIconClick,p=this.state.open;return K.createElement("div",{className:"react-datepicker__input-container".concat(t?" react-datepicker__view-calendar-icon":"")},t&&K.createElement(Nj,ii({icon:l,className:"".concat(u," ").concat(p&&"react-datepicker-ignore-onclickoutside")},d?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var t=this.state.open?K.createElement(Qv,{enableTabLoop:this.props.enableTabLoop},K.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(t=K.createElement(Vv,{portalId:this.props.portalId,portalHost:this.props.portalHost},t)),K.createElement("div",null,this.renderInputContainer(),t)}return K.createElement(jj,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:eo,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),i})(),Ej="input",xd="navigate",rg={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"halbe Minute",withPreposition:"halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},Dj=function(s,i,r){var t,l=r!=null&&r.addSuffix?rg[s].withPreposition:rg[s].standalone;return typeof l=="string"?t=l:i===1?t=l.one:t=l.other.replace("{{count}}",String(i)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+t:"vor "+t:t},Tj={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},Mj={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Rj={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Pj={date:Xs({formats:Tj,defaultWidth:"full"}),time:Xs({formats:Mj,defaultWidth:"full"}),dateTime:Xs({formats:Rj,defaultWidth:"full"})},_j={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},Oj=function(s,i,r,t){return _j[s]},Aj={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},Ij={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},Kd={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},Lj={narrow:Kd.narrow,abbreviated:["Jan.","Feb.","Mrz","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:Kd.wide},Fj={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},zj={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},Uj={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},Bj=function(s){var i=Number(s);return i+"."},$j={ordinalNumber:Bj,era:Qr({values:Aj,defaultWidth:"wide"}),quarter:Qr({values:Ij,defaultWidth:"wide",argumentCallback:function(s){return s-1}}),month:Qr({values:Kd,formattingValues:Lj,defaultWidth:"wide"}),day:Qr({values:Fj,defaultWidth:"wide"}),dayPeriod:Qr({values:zj,defaultWidth:"wide",formattingValues:Uj,defaultFormattingWidth:"wide"})},Yj=/^(\d+)(\.)?/i,Wj=/\d+/i,Hj={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},Kj={any:[/^v/i,/^n/i]},Vj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},Qj={any:[/1/i,/2/i,/3/i,/4/i]},Gj={narrow:/^[jfmasond]/i,abbreviated:/^(j[a]n|feb|mr[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|mrz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},qj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[a]/i,/^f/i,/^mr/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jj={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},Xj={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},Zj={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},e1={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},t1={ordinalNumber:uv({matchPattern:Yj,parsePattern:Wj,valueCallback:function(s){return parseInt(s)}}),era:Gr({matchPatterns:Hj,defaultMatchWidth:"wide",parsePatterns:Kj,defaultParseWidth:"any"}),quarter:Gr({matchPatterns:Vj,defaultMatchWidth:"wide",parsePatterns:Qj,defaultParseWidth:"any",valueCallback:function(s){return s+1}}),month:Gr({matchPatterns:Gj,defaultMatchWidth:"wide",parsePatterns:qj,defaultParseWidth:"any"}),day:Gr({matchPatterns:Jj,defaultMatchWidth:"wide",parsePatterns:Xj,defaultParseWidth:"any"}),dayPeriod:Gr({matchPatterns:Zj,defaultMatchWidth:"wide",parsePatterns:e1,defaultParseWidth:"any"})},qv={code:"de",formatDistance:Dj,formatLong:Pj,formatRelative:Oj,localize:$j,match:t1,options:{weekStartsOn:1,firstWeekContainsDate:4}};const n1={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ag=30;function r1(){try{const n=typeof import.meta<"u"?n1??{}:{},s=n?.VITE_DEFAULT_DUE_OFFSET_MINUTES??n?.DEFAULT_DUE_OFFSET_MINUTES;return s==null||s===""?null:s}catch{return null}}function Jv(n,s){const i=Number(n);return Number.isFinite(i)?Math.max(0,i):s}function xf(){const n=r1();return n!=null?Jv(n,ag):ag}function wf(n){return Jv(n,xf())}Lv("de",qv);const a1=1;function wd(n){const s=wf(n),i=new Date(Date.now()+s*60*1e3);return i.setSeconds(0,0),i}function Xv({open:n,onClose:s,onAdded:i,incidentOptions:r=[],defaultDueOffsetMinutes:t=xf(),initialTitle:l="",initialDesc:u="",initialResponsible:d="",initialType:p=""}){const h=x.useMemo(()=>wf(t),[t]),[v,y]=x.useState(()=>wd(h)),[N,C]=x.useState(""),[k,E]=x.useState(""),[j,I]=x.useState(""),[$,Y]=x.useState(""),[B,Z]=x.useState("");x.useEffect(()=>{n&&(y(wd(h)),C(l||""),E(p||""),I(d||""),Y(u||""),Z(""))},[n,h,l,u,d,p]);const ee=x.useMemo(()=>B&&r.find(te=>String(te?.id??"")===String(B))||null,[r,B]),J=te=>{te.preventDefault();const ie=v??wd(h),ne=B?String(B).trim():"";i?.({title:N?.trim(),type:k?.trim(),responsible:j?.trim(),desc:$?.trim(),dueAt:ie?ie.toISOString():null,relatedIncidentId:ne||null,incidentTitle:ee?.label||null}),s?.()};if(!n)return null;const re=typeof document<"u"?document.body:null;return re?ha.createPortal(o.jsx("div",{className:"fixed inset-0 z-[1200] flex min-h-screen items-center justify-center bg-black/40 p-3 overflow-y-auto",children:o.jsxs("div",{className:"w-[840px] max-w-[90vw] max-h-[90vh] overflow-y-auto rounded-2xl bg-white p-4 shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Aufgabe anlegen"}),o.jsx("button",{className:"text-gray-500 hover:text-gray-700",onClick:s,title:"Schlieen",children:""})]}),o.jsxs("form",{onSubmit:J,className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Frist/Kontrollzeitpunkt"}),o.jsx(Gv,{selected:v,onChange:te=>y(te),showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeIntervals:a1,timeFormat:"HH:mm",timeCaption:"Zeit",locale:"de",popperPlacement:"bottom-start",isClearable:!0,placeholderText:"Datum auswhlen"})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Titel"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:N,onChange:te=>C(te.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Typ"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:k,onChange:te=>E(te.target.value)})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Verantwortlich (Rolle)"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:j,onChange:te=>I(te.target.value)})]})]}),r.length>0&&o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Einsatz verknpfen"}),o.jsxs("select",{className:"w-full border rounded px-2 py-2 h-10 text-sm",value:B,onChange:te=>Z(te.target.value),children:[o.jsx("option",{value:"",children:"Kein Einsatz"}),r.map(te=>{const ie=String(te?.id??""),Ce=(te?.statusName||te?.statusLabel||"").replace(/:$/,"").trim(),ve=Ce&&Ce.toLowerCase()!=="neu",Te=te?.label??ie,Ee=ve?`${Ce}: ${Te}`:Te;return o.jsx("option",{value:ie,children:Ee},ie)})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Notizen"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-2 min-h-[120px] max-h-[320px] overflow-y-auto resize-y",value:$,onChange:te=>Y(te.target.value)})]}),o.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[o.jsx("button",{type:"button",onClick:s,className:"px-3 py-1.5 rounded border bg-white",children:"Abbrechen"}),o.jsx("button",{type:"submit",className:"px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white",children:"Anlegen"})]})]})]})}),re):null}const s1=200;function Zv({text:n,limit:s=s1,className:i="",textClassName:r="",toggleClassName:t="text-xs text-blue-700 hover:underline"}){const l=x.useMemo(()=>typeof n=="string"?n:"",[n]),[u,d]=x.useState(!1);x.useEffect(()=>{d(!1)},[l]);const p=l.length>s,h=u||!p?l:l.slice(0,s);return l?o.jsxs("div",{className:i,children:[o.jsxs("div",{className:`${r} whitespace-pre-wrap break-words`,children:[h,!u&&p?"":""]}),p?o.jsx("button",{type:"button",className:`${t} mt-1`,onClick:v=>{v.stopPropagation(),d(y=>!y)},"aria-expanded":u,children:u?"Weniger anzeigen":"Mehr anzeigen"}):null]}):o.jsx("div",{className:i,children:o.jsx("div",{className:`${r} whitespace-pre-wrap break-words`,children:""})})}Lv("de",qv);const bd=100,i1=n=>{if(!n)return"";const s=new Date(n);return Number.isNaN(s.getTime())?"":s.toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1})},to=n=>{if(n==null)return"";const s=String(n).trim();if(!s)return"";if(/^\d+$/.test(s)){const i=String(Number(s));return i==="0"?"0":i}return s},Rl=n=>{const s=[],i=new Set;for(const r of Array.isArray(n)?n:[]){const t=to(r);!t||i.has(t)||(i.add(t),s.push(t))}return s},Pl=n=>{if(!n)return null;const s=to(n?.nr??n?.id??n?.value);if(!s)return null;const i={nr:s},r=(t,l=[])=>{const u=[n[t],...l.map(d=>n[d])];for(const d of u){if(d==null)continue;const p=String(d).trim();if(p){i[t]=p;return}}};return r("title",["label"]),r("information",["desc","beschreibung","content"]),r("infoTyp"),r("datum"),r("zeit"),r("anvon"),i},_l=(n,{maxTextLength:s}={})=>{if(!n)return"Meldung";const r=[n.nr?`#${n.nr}`:"Meldung"];n.infoTyp&&r.push(n.infoTyp),n.anvon&&r.push(n.anvon);const t=n.title||n.information;if(t){const u=String(t),d=s&&u.length>s?`${u.slice(0,s)}`:u;r.push(d)}const l=[n.datum,n.zeit].filter(Boolean).join(" ");return l&&r.push(l),r.join("  ")};function o1({open:n,item:s,onClose:i,onSave:r,canEdit:t,incidentOptions:l=[],incidentLookup:u,protocolOptions:d=[],protocolLookup:p,onCreateProtocol:h,onOpenProtocol:v}){const y=s||null,N=x.useMemo(()=>to(y?.originProtocolNr),[y?.originProtocolNr]),C=!!N,[k,E]=x.useState(!1),[j,I]=x.useState({title:"",type:"",responsible:"",desc:"",dueAt:null,relatedIncidentId:"",linkedProtocolNrs:[]}),$=x.useRef(null),Y=x.useMemo(()=>{if(u&&typeof u.get=="function")return u;const O=new Map;return u&&typeof u=="object"&&Object.entries(u).forEach(([W,F])=>{O.set(String(W),F)}),O},[u]),B=x.useCallback(O=>{const W=to(O);W&&v?.(W)},[v]);x.useEffect(()=>{if(!n){$.current=null;return}const O=y?.id??null;if(k&&$.current===O)return;$.current=O,E(!1);const W=Rl(y?.linkedProtocolNrs??(Array.isArray(y?.linkedProtocols)?y.linkedProtocols.map(b=>b?.nr):[])),F=N&&!W.includes(N)?[...W,N]:W;I({title:y?.title||"",type:y?.type||"",responsible:y?.responsible||"",desc:y?.desc||"",dueAt:y?.dueAt?new Date(y.dueAt):null,relatedIncidentId:y?.relatedIncidentId?String(y.relatedIncidentId):"",linkedProtocolNrs:F})},[n,y?.id,N,y?.linkedProtocolNrs,y?.linkedProtocols,k]),x.useEffect(()=>{if(!n)return;const O=W=>{W.key==="Escape"&&i?.()};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[n,i]);const Z=x.useMemo(()=>{const O=Rl(j.linkedProtocolNrs);return N&&!O.includes(N)&&O.push(N),O},[j.linkedProtocolNrs,N]),ee=x.useMemo(()=>{const O=Rl(y?.linkedProtocolNrs??(Array.isArray(y?.linkedProtocols)?y.linkedProtocols.map(W=>W?.nr):[]));return N&&!O.includes(N)&&O.push(N),O},[y?.linkedProtocolNrs,y?.linkedProtocols,N]),J=x.useMemo(()=>{const O=new Map;if(Array.isArray(y?.linkedProtocols))for(const W of y.linkedProtocols){const F=Pl(W);F&&O.set(F.nr,F)}return O},[y?.linkedProtocols]),re=x.useMemo(()=>{const O=Array.isArray(d)?d:[],W=new Set,F=[];for(const b of O){const L=Pl(b);!L||W.has(L.nr)||(W.add(L.nr),F.push({value:L.nr,label:_l(L,{maxTextLength:bd}),detail:L}))}return F.sort((b,L)=>{const oe=Number(b.value),he=Number(L.value);return Number.isFinite(oe)&&Number.isFinite(he)?he-oe:String(L.value).localeCompare(String(b.value),"de",{numeric:!0})}),F},[d]),te=x.useMemo(()=>Z.map(O=>{const W=p&&typeof p.get=="function"?p.get(O):null;return Pl(W)||J.get(O)||{nr:O}}),[Z,p,J]),ie=x.useMemo(()=>new Set(re.map(O=>O.value)),[re]),ne=x.useMemo(()=>Z.filter(O=>!ie.has(O)).map(O=>J.get(O)||{nr:O}),[Z,ie,J]),Ce=x.useMemo(()=>{if(!y)return Z.length>0;if(Z.length!==ee.length)return!0;const O=[...Z].sort(),W=[...ee].sort();return O.some((F,b)=>F!==W[b])},[y,Z,ee]),ve=x.useCallback(O=>{const W=to(O);W&&I(F=>{const b=new Set(Rl(F.linkedProtocolNrs));return b.has(W)?b.delete(W):b.add(W),{...F,linkedProtocolNrs:[...b]}})},[]),Te=x.useMemo(()=>{if(!y)return!1;const O=j.relatedIncidentId?String(j.relatedIncidentId):"",W=y?.relatedIncidentId?String(y.relatedIncidentId):"";return(j.title??"")!==(y.title??"")||(j.type??"")!==(y.type??"")||(j.responsible??"")!==(y.responsible??"")||(j.desc??"")!==(y.desc??"")||O!==W||((j.dueAt?j.dueAt.toISOString():null)??null)!==((y.dueAt?new Date(y.dueAt).toISOString():null)??null)||Ce},[j,y,Ce]),Ee=async()=>{if(!t||!y)return;if(!Te){E(!1);return}const O={id:y.id,title:j.title?.trim()||"",type:j.type?.trim()||"",responsible:j.responsible?.trim()||"",desc:j.desc?.trim()||"",dueAt:j.dueAt?j.dueAt.toISOString():null},W=j.relatedIncidentId?String(j.relatedIncidentId):"";if(W){const b=Y.get(W);O.relatedIncidentId=W,O.incidentTitle=b?.label||b?.content||y.incidentTitle||`#${W}`}else O.relatedIncidentId=null,O.incidentTitle=null;const F=Z;if(O.linkedProtocolNrs=F,F.length){const b=[];for(const L of F){const oe=p&&typeof p.get=="function"?p.get(L):null,he=Pl(oe)||J.get(L)||{nr:L},je={nr:he.nr},ke=Le=>{const Se=he[Le];if(Se==null)return;const ue=String(Se).trim();ue&&(je[Le]=ue)};ke("title"),ke("information"),ke("infoTyp"),ke("datum"),ke("zeit"),ke("anvon"),b.push(je)}O.linkedProtocols=b}else O.linkedProtocols=[];await r?.(O),E(!1)},be=x.useMemo(()=>{if(!y?.relatedIncidentId)return null;const O=String(y.relatedIncidentId),W=Y.get(O);return W?{...W,id:O,fromBoard:!0}:{id:O,label:y.incidentTitle||`#${O}`,statusName:"",fromBoard:!1}},[Y,y?.relatedIncidentId,y?.incidentTitle]),we=x.useMemo(()=>{const O=Array.isArray(l)?l:[];return!be||be.fromBoard||O.some(W=>String(W.id)===String(be.id))?O:[...O,{id:be.id,label:`${be.label} (nicht mehr am Einsatzboard)`,statusName:be.statusName,fromBoard:!1}]},[l,be]);return!n||!y?null:o.jsx("div",{className:"fixed inset-0 z-[1200] flex min-h-screen items-start justify-center bg-black/40 p-3 overflow-y-auto",onClick:()=>i?.(),children:o.jsxs("div",{className:"w-[840px] max-w-[90vw] max-h-[90vh] overflow-y-auto rounded-2xl bg-white p-4 shadow-2xl",onClick:O=>O.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Aufgabe"}),o.jsxs("div",{className:"flex items-center gap-2",children:[h?o.jsx("button",{type:"button",onClick:()=>{h(y),i?.()},className:"px-3 py-1.5 rounded bg-blue-600 hover:bg-blue-700 text-white",title:"Meldung aus Aufgabe erstellen",children:"Meldung"}):null,t?k?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>E(!1),className:"px-3 py-1.5 rounded border bg-white",children:"Abbrechen"}),o.jsx("button",{onClick:Ee,className:"px-3 py-1.5 rounded bg-emerald-600 hover:bg-emerald-700 text-white disabled:opacity-50",disabled:!Te,children:"Speichern"})]}):o.jsx("button",{onClick:()=>E(!0),className:"px-3 py-1.5 rounded border bg-white hover:bg-gray-50",children:"Bearbeiten"}):null,o.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",title:"Schlieen",children:""})]})]}),k?o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Titel"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:j.title,onChange:O=>I(W=>({...W,title:O.target.value}))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Typ"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:j.type,onChange:O=>I(W=>({...W,type:O.target.value}))})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Verantwortlich (Rolle)"}),o.jsx("input",{className:"w-full border rounded px-2 py-1 h-9",value:j.responsible,onChange:O=>I(W=>({...W,responsible:O.target.value}))})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Einsatzverknpfung"}),o.jsxs("select",{className:"w-full border rounded px-2 py-1 h-9",value:j.relatedIncidentId,onChange:O=>I(W=>({...W,relatedIncidentId:O.target.value})),children:[o.jsx("option",{value:"",children:"Kein Einsatz"}),we.map(O=>{const W=String(O.id),F=O.statusName||O.statusLabel||"",b=F?`${F}: ${O.label}`:O.label;return o.jsx("option",{value:W,children:b},W)})]})]}),o.jsxs("label",{className:"block col-span-2",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Verknpfte Meldungen"}),C?o.jsx("div",{className:"mt-1",children:te.length?o.jsx("ul",{className:"space-y-1 max-h-28 overflow-y-auto pr-1",children:te.map(O=>{const W=O.nr,F=_l(O,{maxTextLength:bd});return o.jsx("li",{children:o.jsx("button",{type:"button",className:"text-blue-700 hover:underline",onClick:()=>{W&&B(W)},title:W?`Meldung #${W} ffnen`:"Meldung ffnen",children:F})},W)})}):o.jsx("div",{className:"text-sm",children:""})}):o.jsxs("div",{className:"mt-1 flex flex-col gap-2",children:[o.jsx("div",{className:"max-h-48 overflow-y-auto border rounded divide-y",children:re.length?re.map(O=>{const W=Z.includes(O.value);return o.jsxs("label",{className:"flex items-start gap-2 px-2 py-2 text-sm hover:bg-gray-50",children:[o.jsx("input",{type:"checkbox",className:"mt-1",checked:W,onChange:()=>ve(O.value)}),o.jsx("span",{children:O.label})]},O.value)}):o.jsx("div",{className:"px-2 py-2 text-sm text-gray-500",children:"Keine Meldungen verfgbar."})}),o.jsx("div",{className:"text-[11px] text-gray-500",children:"Meldungen, bei denen diese Rolle als ergeht an eingetragen ist."}),ne.length?o.jsxs("div",{className:"rounded border border-amber-300 bg-amber-50 px-2 py-2 text-xs text-amber-800",children:[o.jsx("div",{className:"font-semibold mb-1",children:"Bereits verknpft (nicht mehr in der Auswahl)"}),o.jsx("ul",{className:"space-y-1",children:ne.map(O=>o.jsxs("li",{className:"flex items-start justify-between gap-2",children:[o.jsx("span",{children:_l(O,{maxTextLength:bd})}),o.jsx("button",{type:"button",className:"text-red-600 hover:underline",onClick:()=>ve(O.nr),children:"Entfernen"})]},O.nr))})]}):null]})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Notizen"}),o.jsx("textarea",{className:"w-full border rounded px-2 py-2 min-h-[160px] max-h-[320px] overflow-y-auto resize-y",value:j.desc,onChange:O=>I(W=>({...W,desc:O.target.value}))})]}),o.jsxs("label",{className:"block",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Frist/Kontrollzeitpunkt"}),o.jsx(Gv,{selected:j.dueAt,onChange:O=>I(W=>({...W,dueAt:O})),showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeIntervals:5,timeFormat:"HH:mm",timeCaption:"Zeit",locale:"de",isClearable:!0,placeholderText:"Kein Termin"})]})]}):o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Titel"}),o.jsx("div",{className:"font-medium break-words",children:y.title||""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Typ"}),o.jsx("div",{children:y.type||""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Verantwortlich"}),o.jsx("div",{children:y.responsible||""})]})]}),y.originProtocolNr?o.jsxs("div",{className:"text-xs",children:["Ursprung:"," ",o.jsxs("button",{className:"text-blue-700 hover:underline",onClick:()=>B(y.originProtocolNr),title:`Meldung #${y.originProtocolNr} ffnen`,children:["Meldung: ",y.originProtocolNr]})]}):null,y.relatedIncidentId?o.jsxs("div",{className:"text-xs",children:["Einsatz:"," ",o.jsx("span",{className:"font-medium",children:be?.label||y.incidentTitle||`#${y.relatedIncidentId}`}),be?.statusName?o.jsxs("span",{className:"text-gray-500 ml-1",children:["(",be.statusName,")"]}):null,be&&!Y.has(String(be.id))?o.jsx("span",{className:"ml-1 text-[11px] text-amber-600",children:"(nicht mehr am Einsatzboard)"}):null]}):null,o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Verknpfte Meldungen"}),te.length?o.jsx("ul",{className:"mt-1 space-y-1 max-h-28 overflow-y-auto pr-1",children:te.map(O=>{const W=O.nr,F=_l(O);return o.jsx("li",{children:o.jsx("button",{type:"button",className:"text-blue-700 hover:underline",onClick:()=>{W&&B(W)},title:W?`Meldung #${W} ffnen`:"Meldung ffnen",children:F})},W)})}):o.jsx("div",{className:"text-sm",children:""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Notizen"}),o.jsx(Zv,{text:y.desc})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Frist/Kontrollzeitpunkt"}),o.jsx("div",{className:"font-medium",children:i1(y.dueAt)})]})]})]})})}const l1={Neu:"card-accent-new","In Bearbeitung":"card-accent-progress",Erledigt:"card-accent-done"};function c1({item:n,onClick:s,onShowInfo:i,onAdvance:r,disableAdvance:t,isNew:l,incidentLookup:u,onCreateProtocol:d,onOpenProtocol:p,tick:h}){const v=n||{};if(!v)return null;const{attributes:y,listeners:N,setNodeRef:C,transform:k,transition:E,isDragging:j}=Ww({id:v.id}),I=String(v.status||"")==="Erledigt",$=x.useMemo(()=>{if(!v?.dueAt||I)return"none";const Te=new Date(v.dueAt);if(Number.isNaN(Te.getTime()))return"none";const Ee=Te.getTime()-Date.now();return Ee<=0?"overdue":Ee<=600*1e3?"soon":"none"},[v?.dueAt,I,h]),Y=$==="overdue",B=$==="soon",Z=l1[v.status]||"card-accent-new",ee=!!(l&&!I),J=v?.relatedIncidentId?String(v.relatedIncidentId):"",re=J&&u?.get?u.get(J):null,te=re?.label||v?.incidentTitle||(J?`#${J}`:""),ie=re?.statusName||re?.statusLabel||"",ne=Te=>{if(!Te)return"";const Ee=new Date(Te);return Number.isNaN(Ee.getTime())?"":Ee.toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1})},Ce={transform:Ba.Transform.toString(k),transition:E,opacity:j?.6:1,cursor:"grab"},ve=Te=>{if(!Te)return"";const Ee=new Date(Te);return Number.isNaN(Ee.getTime())?"":Ee.toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1})};return o.jsxs("div",{ref:C,style:Ce,className:["sortable-card relative rounded-xl border p-3.5 cursor-pointer",Z,I?"opacity-75":"",Y&&!I?"bg-red-50 border-red-200":"bg-white",ee?"pulse-incoming":""].filter(Boolean).join(" "),...y,...N,onClick:()=>s?s(v):i?.(v),role:"button",tabIndex:0,"aria-live":ee?"polite":void 0,children:[ee&&o.jsxs(o.Fragment,{children:[o.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl bg-red-500/8 animate-pulse-inner"}),o.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-xl animate-ping-safe"})]}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between text-[10px] text-slate-400 leading-4 mb-1.5 font-medium",children:[o.jsx("span",{children:ve(v.createdAt)}),v.updatedAt&&v.updatedAt!==v.createdAt&&o.jsxs("span",{children:["akt. ",ve(v.updatedAt)]})]}),o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("h3",{className:"font-bold text-sm leading-snug text-slate-900 line-clamp-2",children:v.title||"Ohne Titel"}),o.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[o.jsx("button",{className:"card-action-btn bg-slate-100 text-slate-600 hover:bg-blue-100 hover:text-blue-700",onClick:Te=>{Te.stopPropagation(),d?.(v)},title:"Meldung aus Aufgabe erstellen","aria-label":"Meldung aus Aufgabe erstellen",children:""}),o.jsx("button",{className:`card-action-btn ${t?"bg-slate-100 text-slate-300":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100"}`,onClick:Te=>{Te.stopPropagation(),t||r?.(v)},disabled:t,title:"Status weiter",children:""})]})]}),v.type&&o.jsx("div",{className:"mt-1.5",children:o.jsx("span",{className:"card-type-badge",children:v.type})}),v.desc?o.jsx(Zv,{text:v.desc,className:"mt-2",textClassName:"text-sm text-slate-700 leading-relaxed"}):null,(v.originProtocolNr||v.relatedIncidentId)&&o.jsxs("div",{className:"mt-2.5 flex items-center gap-3 text-[11px]",children:[v.originProtocolNr&&o.jsxs("button",{onClick:Te=>{Te.stopPropagation(),p?.(v.originProtocolNr)},className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",title:`Meldung #${v.originProtocolNr} oeffnen`,children:["Meldung #",v.originProtocolNr]}),te&&o.jsxs("span",{className:"text-slate-600",title:ie?`Einsatz: ${te}
Status: ${ie}`:`Einsatz: ${te}`,children:["Einsatz: ",te,ie?` (${ie})`:""]})]}),v.dueAt&&o.jsxs("div",{className:`card-due ${Y&&!I?"card-due-overdue":""} ${B&&!I?"text-amber-600 font-medium":""}`,children:[o.jsx("svg",{className:"w-3.5 h-3.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("span",{children:ne(v.dueAt)}),Y&&!I&&o.jsx("span",{className:"card-overdue-badge ml-1",children:"Ueberfaellig"})]})]})]})}const Sd=K.memo(c1);let ms=null,Ol;function ey(){try{const n=typeof window<"u"?window:{},s=n.localStorage,i=n.sessionStorage,r=[()=>n.__USER__,()=>n.__APP_AUTH__?.user,()=>s&&JSON.parse(s.getItem("auth.user")||"null"),()=>s&&JSON.parse(s.getItem("user")||"null"),()=>i&&JSON.parse(i.getItem("auth.user")||"null"),()=>i&&JSON.parse(i.getItem("user")||"null")];for(const t of r){const l=t?.();if(l)return l}}catch{}return null}async function u1(){return ms||Ol||(Ol=(async()=>{async function n(t){const l=await fetch(t,{cache:"no-store"});if(!l.ok)throw new Error(String(l.status));const u=await l.json();return Array.isArray(u)?u:u.roles||[]}let s=[];try{s=await n("/api/user/roles")}catch{s=[]}if(!(Array.isArray(s)&&s.some(t=>t&&typeof t.apps=="object")))try{s=await n("/User_roles.json")}catch{}const r=new Map;for(const t of s||[])!t||!t.id||r.set(String(t.id).toUpperCase(),{id:t.id,label:t.label||t.id,apps:t.apps||{}});return ms=r,r})(),Ol)}function ty(n){const s=[];if(!n)return s;if(n.role&&(typeof n.role=="string"?s.push(n.role):typeof n.role?.id=="string"&&s.push(n.role.id)),Array.isArray(n.roles))for(const i of n.roles)typeof i=="string"?s.push(i):typeof i?.id=="string"&&s.push(i.id);return s.map(i=>String(i).trim().toUpperCase())}async function ny(){await u1()}function ry(n,s){const i=s??ey();if(!ms)return!1;const r=ty(i),t=String(n);for(const l of r)if(ms.get(l)?.apps?.[t]==="edit")return!0;return!1}function Gs(n,s){const i=String(n||"").trim().toUpperCase();return i?ty(s??ey()).includes(i):!1}function d1(){return ms?Array.from(ms.entries()).map(([n,s])=>({id:n,label:s?.label||s?.id||n,apps:s?.apps?{...s.apps}:{}})):[]}const bf="Sie haben keine Berechtigung";function no(){if(typeof window>"u")return;const n=typeof window.alert=="function"?window.alert.bind(window):null;n&&n(bf)}function Qi(){no();const n=new Error(bf);return n.status=403,n.code="FORBIDDEN",n}const Sf={},sg=Sf?.VITE_API_BASE_URL,ig=Sf?.VITE_LOGIN_BASE_URL,og=Sf?.VITE_CHATBOT_BASE_URL,f1="Verbindung zum Server fehlgeschlagen. Bitte prfen, ob das Backend erreichbar ist.",Al="Chatbot-Server nicht erreichbar (Port 3100). Bitte sicherstellen, dass der Chatbot-Server luft.";function hs(n){if(n==null)return"";try{return String(n).trim().replace(/\/+$/,"")}catch{return""}}function p1(){if(typeof window>"u")return"";const n=[window.__APP_LOGIN_BASE_URL__,window.__APP_API_BASE_URL__,window.__APP_BASE_URL__];for(const s of n)if(s)return hs(s);return""}function bo(){const n=p1();return n||(sg?hs(sg):ig?hs(ig):typeof window<"u"?hs(`${window.location.protocol}//${window.location.host}`):"")}function m1(){return typeof window<"u"&&window.__APP_CHATBOT_BASE_URL__?hs(window.__APP_CHATBOT_BASE_URL__):og?hs(og):bo()}function h1(n){if(!n)return"";const s=String(n);return s.startsWith("/")?s:`/${s}`}const g1=/^https?:/i;function Nf(n,s=bo()){const i=hs(s);if(!n)return i;if(g1.test(n))return n;const r=h1(n);return i?`${i}${r}`:r}function So(n,s=bo()){return Nf(n,s)}function bn(n,s=m1()){return Nf(n,s||bo())}function bc(n,s=f1){if(n&&(n.name==="TypeError"||n instanceof TypeError)){const i=new Error(s);try{i.cause=n}catch{}return i}return n instanceof Error?n:new Error(s)}async function No(n,s="GET",i){const r=So(`/api/user${n}`);let t;try{t=await fetch(r,{method:s,headers:i?{"Content-Type":"application/json"}:void 0,body:i?JSON.stringify(i):void 0,credentials:"include"})}catch(l){throw bc(l)}if(!t.ok){if(t.status===403)throw Qi();let l;try{l=await t.json()}catch{l={error:t.statusText}}throw new Error(l.error||"API_ERROR")}return t.json()}const v1=(n,s)=>No("/login","POST",{username:n,password:s}),y1=()=>No("/me"),x1=()=>No("/logout","POST"),w1=(n,s,i)=>No("/master/setup","POST",{password:n,adminUser:s,adminPass:i}),b1=()=>No("/master/state"),ay=x.createContext(null),ko=()=>x.useContext(ay),ro=15*6e4,lg=["mousemove","mousedown","keydown","touchstart","wheel"],cg="auth.skipLogoutOnUnload";function S1(n){if(!n||typeof n!="object")return{idleTimeoutMs:ro,idleTimeoutSeconds:Math.round(ro/1e3),lastSeenIso:null,expiresAtIso:null};const s=Number(n.idleTimeoutMs),i=Number(n.idleTimeoutSeconds);let r=Number.isFinite(s)&&s>0?s:void 0;!r&&Number.isFinite(i)&&i>0&&(r=i*1e3),(!r||!Number.isFinite(r)||r<=0)&&(r=ro);const t=Number.isFinite(i)&&i>0?i:Math.round(r/1e3),l=typeof n.lastSeenIso=="string"?n.lastSeenIso:null,u=typeof n.expiresAtIso=="string"?n.expiresAtIso:typeof n.expiresAt=="string"?n.expiresAt:null;return{idleTimeoutMs:r,idleTimeoutSeconds:t,lastSeenIso:l,expiresAtIso:u}}function Nd({children:n}){const[s,i]=x.useState(null),[r,t]=x.useState(null),[l,u]=x.useState(!1),d=x.useRef(Date.now()),p=x.useRef(!1),h=x.useRef(!1),v=x.useCallback(k=>{if(k&&typeof k=="object"){const{session:E,...j}=k;i(j);const I=S1(E);return t(I),d.current=Date.now(),{user:j,session:I}}return i(null),t(null),d.current=Date.now(),{user:null,session:null}},[]);x.useEffect(()=>{let k=!1;return(async()=>{try{const E=await y1();k||v(E)}catch{k||v(null)}finally{k||u(!0)}})(),()=>{k=!0}},[v]),x.useEffect(()=>{if(typeof window<"u")if(window.__APP_AUTH__=window.__APP_AUTH__||{},window.__APP_AUTH__.user=s||null,window.__APP_AUTH__.session=r||null,s){window.__USER__=s;try{localStorage.setItem("auth.user",JSON.stringify(s))}catch{}}else{delete window.__USER__;try{localStorage.removeItem("auth.user")}catch{}}},[s,r]),x.useEffect(()=>{if(typeof window>"u")return()=>{};const k=()=>{h.current=!0;try{window.sessionStorage?.setItem(cg,"1")}catch{}},E=$=>{if($){if($.key==="F5"){k();return}($.key==="r"||$.key==="R")&&($.ctrlKey||$.metaKey)&&!$.altKey&&k()}};let j=null,I=!1;if(typeof window.location?.reload=="function"){j=window.location.reload;try{window.location.reload=function(...Y){return k(),j.apply(this,Y)},I=!0}catch{j=null}}return window.addEventListener("keydown",E,!0),()=>{if(window.removeEventListener("keydown",E,!0),I&&j)try{window.location.reload=j}catch{}h.current=!1;try{window.sessionStorage?.removeItem(cg)}catch{}}},[]);const y=x.useCallback(async(k,E)=>{const j=await v1(k,E);return v(j),j},[v]),N=x.useCallback(async(k={})=>{const j=(typeof k=="object"&&k?k:{}).silent===!0;let I=null;try{await x1()}catch($){I=$,j||console.error($)}if(v(null),I&&!j)throw I;return!0},[v]),C=x.useCallback(()=>{d.current=Date.now()},[]);return x.useEffect(()=>{if(!s)return p.current=!1,()=>{};C();const k=I=>{if(I?.type==="visibilitychange"){document.hidden||C();return}C()};lg.forEach(I=>document.addEventListener(I,k,!0)),window.addEventListener("focus",k,!0),document.addEventListener("visibilitychange",k,!0);let E=null;const j=r?.idleTimeoutMs??ro;if(Number.isFinite(j)&&j>0){const I=Math.min(6e4,Math.max(5e3,Math.floor(j/3)));E=setInterval(()=>{const $=r?.idleTimeoutMs??ro;if(!Number.isFinite($)||$<=0)return;Date.now()-d.current>=$&&!p.current&&(p.current=!0,N({silent:!0}).finally(()=>{p.current=!1}))},I)}return()=>{lg.forEach(I=>document.removeEventListener(I,k,!0)),window.removeEventListener("focus",k,!0),document.removeEventListener("visibilitychange",k,!0),E&&clearInterval(E)}},[s,r,C,N]),o.jsx(ay.Provider,{value:{user:s,ready:l,login:y,logout:N,session:r},children:n})}function N1({children:n,fallback:s}){const{user:i,ready:r}=ko();return r?i?n:s??o.jsx("div",{style:{padding:16},children:"Bitte einloggen"}):null}async function Rn(n,s,i){const r=So(s);let t;try{t=await fetch(r,{method:n,headers:{"Content-Type":"application/json"},body:i===void 0?void 0:JSON.stringify(i),cache:"no-store",credentials:"include"})}catch(u){throw bc(u)}if(!t.ok)throw new Error(`HTTP ${t.status} ${await t.text().catch(()=>t.statusText)}`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()}async function k1(){return Rn("GET","/api/board")}async function IC(){return Rn("GET","/api/vehicles")}async function LC(){return Rn("GET","/api/groups/availability")}async function FC(){return Rn("GET","/api/groups/alerted")}async function zC(n,s,i){const r={available:s};return s===!1&&typeof i<"u"&&i!==null&&String(i).trim()!==""&&(r.until=i),Rn("PATCH",`/api/vehicles/${encodeURIComponent(n)}/availability`,r)}async function UC(n,s,i){const r={available:s};return s===!1&&typeof i<"u"&&i!==null&&String(i).trim()!==""&&(r.until=i),Rn("PATCH",`/api/groups/${encodeURIComponent(n)}/availability`,r)}async function BC(){try{return await Rn("GET","/api/types")}catch{return[]}}async function $C(n="",{signal:s}={}){const i=n?`?role=${encodeURIComponent(n)}`:"",t={method:"GET",credentials:"include",cache:"no-store",headers:n?{"X-Role-Id":n}:{}};s&&(t.signal=s);let l;try{l=await fetch(So(`/api/aufgaben${i}`),t)}catch(u){throw bc(u)}if(!l.ok)throw new Error(`HTTP ${l.status} ${l.statusText}`);try{return await l.json()}catch{return{}}}async function j1(){const n=await Rn("GET","/api/user/online-roles");return Array.isArray(n?.roles)?n.roles:Array.isArray(n)?n:[]}async function YC(n,s="neu",i=0,r="",t="",l={}){const u={title:n,columnId:s,toIndex:i,ort:r,typ:t};if(l&&typeof l=="object"){const{lat:d,lng:p,latitude:h,longitude:v,...y}=l;Number.isFinite(h)&&(u.latitude=Number(h)),Number.isFinite(v)&&(u.longitude=Number(v)),Number.isFinite(d)&&(u.latitude=Number(d)),Number.isFinite(p)&&(u.longitude=Number(p)),Object.assign(u,y)}return Rn("POST","/api/cards",u)}async function WC(n,s){return Rn("PATCH",`/api/cards/${encodeURIComponent(n)}`,s)}async function HC({cardId:n,from:s,to:i,toIndex:r=0}){return Rn("POST",`/api/cards/${encodeURIComponent(n)}/move`,{from:s,to:i,toIndex:r})}async function KC(n,s){return Rn("POST",`/api/cards/${encodeURIComponent(n)}/assign`,{vehicleId:s})}async function VC(n,s){return Rn("POST",`/api/cards/${encodeURIComponent(n)}/unassign`,{vehicleId:s})}async function QC(n,s){return Rn("PATCH",`/api/cards/${encodeURIComponent(n)}/personnel`,{manualPersonnel:s})}async function C1(){return Rn("POST","/api/reset",{})}async function GC(){return Rn("GET","/api/import/auto-config")}function qC(){return So("/api/export/pdf")}async function JC(n,s){const i=`cardId=${encodeURIComponent(n)}`,t=Number.isFinite(Number(s))&&Number(s)>0?`${i}&radiusKm=${encodeURIComponent(s)}`:i;let l;try{l=await fetch(So(`/api/nearby?${t}`),{credentials:"include",cache:"no-store"})}catch(d){throw bc(d)}let u=null;try{u=await l.json()}catch{u=null}if(!l.ok){if(l.status===400||l.status===404)return{ok:!1,error:u?.error||"card has no coordinates",center:u?.center??null,radiusKm:u?.radiusKm??null,units:Array.isArray(u?.units)?u.units:[]};const d=new Error("fetchNearby failed");throw u&&(d.response=u),d}return u}async function XC(n,s,i,r=null,t="manual"){return Rn("PATCH",`/api/vehicles/${encodeURIComponent(n)}/position`,{lat:Number(s),lng:Number(i),incidentId:r,source:t})}async function ZC(n){return Rn("DELETE",`/api/vehicles/${encodeURIComponent(n)}/position`)}const E1=15e3;function D1(n){const s=Array.isArray(n)?n:[],i=new Set;for(const r of s){const t=typeof r=="string"?r.trim().toUpperCase():typeof r?.id=="string"?r.id.trim().toUpperCase():"";t&&i.add(t)}return[...i]}function sy({pollIntervalMs:n=E1}={}){const[s,i]=x.useState([]),[r,t]=x.useState(null),l=x.useRef(null),u=x.useRef(!0);x.useEffect(()=>{u.current=!0;const p=async()=>{try{const h=await j1();if(!u.current)return;i(D1(h)),t(null)}catch(h){if(!u.current)return;t(h instanceof Error?h:new Error(String(h)))}finally{if(!u.current)return;Number.isFinite(n)&&n>0&&(l.current=setTimeout(p,n))}};return p(),()=>{u.current=!1,l.current&&(clearTimeout(l.current),l.current=null)}},[n]);const d=x.useMemo(()=>new Set(s),[s]);return{roles:s,roleSet:d,error:r}}const T1={running:!1,paused:!1,loaded:!1};function iy({pollIntervalMs:n=15e3}={}){const[s,i]=x.useState(T1);return x.useEffect(()=>{let r=!0,t;const l=async()=>{try{const u=await fetch(bn("/api/sim/status"),{credentials:"include",cache:"no-store"});if(!u.ok)throw new Error(`HTTP ${u.status}`);const p=(await u.json())?.simulation||{};r&&i({running:!!p.running,paused:!!p.paused,loaded:!0})}catch{r&&i(d=>({...d,loaded:!0}))}};return l(),t=window.setInterval(l,n),()=>{r=!1,t&&window.clearInterval(t)}},[n]),s}function oy({className:n="h-5 w-5"}){return o.jsx("img",{className:n,src:"/simulation_aktiv.gif",alt:"Simulation aktiv","aria-hidden":"false"})}const M1="prot.overview.seen";function Il(n){if(typeof n!="string"){if(n===null||typeof n>"u")return"";try{return String(n).trim()}catch{return""}}return n.trim()}function R1(n){const s=[];if(n&&typeof n=="object"){const i=Il(n.userId||n.id||""),r=Il(n.username||n.name||""),t=Il(n.role||"");if(i&&s.push(i),r&&r!==i&&s.push(r),t&&s.push(t.toUpperCase()),Array.isArray(n.roles))for(const l of n.roles){const u=typeof l=="string"?l:l&&typeof l.id=="string"?l.id:l&&typeof l.role=="string"?l.role:"",d=Il(u||"");d&&s.push(d.toUpperCase())}}return s.length?`${M1}.${s.join("|")}`:null}function ly(){return typeof window<"u"?window:null}function P1(n){const s=ly();if(!s||!n)return{};try{const i=s.localStorage?.getItem(n);if(!i)return{};const r=JSON.parse(i);if(!r||typeof r!="object")return{};const t={};for(const[l,u]of Object.entries(r))l&&(typeof u=="string"?t[l]=u:Number.isFinite(u)&&(t[l]=`ts:${u}`));return t}catch{return{}}}function _1(n,s){const i=ly();if(!(!i||!n))try{i.localStorage?.setItem(n,JSON.stringify(s||{}))}catch{}}function O1(n,s,i,r=null){if(!n)return r||{};const t=String(s??"").trim();if(!t)return r||{};const l=typeof i=="string"&&i?i:"__opened__",u=r&&typeof r=="object"?r:P1(n);if(u[t]===l)return u;const d={...u,[t]:l};return _1(n,d),d}function A1(n){if(!n||!Array.isArray(n.massnahmen))return{raw:null,encoded:null};const s=[];for(let t=0;t<n.massnahmen.length;t+=1){const l=n.massnahmen[t];if(!l||!l.done)continue;const u=typeof l.verantwortlich=="string"?l.verantwortlich.trim():"",d=u?u.toUpperCase():"",p=typeof l.massnahme=="string"?l.massnahme.trim():"",h=[d,p].filter(Boolean).join("::")||`idx:${t}`;s.push(`${h}#${t}`)}if(!s.length)return{raw:null,encoded:null};s.sort((t,l)=>t===l?0:t>l?1:-1);const i=s.join("||");let r=i;try{r=encodeURIComponent(i)}catch{}return{raw:i,encoded:r}}function I1(n){const s=Array.isArray(n?.history)?n.history:[];let i=null,r=null,t=null;for(let p=s.length-1;p>=0;p-=1){const h=s[p];if(!h||typeof h!="object")continue;const v=h.action;if(v!=="create"&&v!=="update")continue;t=v;const y=Number(h.ts);Number.isFinite(y)?i=`ts:${y}`:i=`idx:${p}:${v}:${s.length}`,!r&&typeof h.by=="string"&&h.by.trim()&&(r=h.by.trim());break}if(!r){const p=[n?.lastBy,n?.createdBy].find(h=>typeof h=="string"&&h.trim());p&&(r=p.trim())}if(!i){const p=[n?.updatedAt,n?.lastModifiedAt,n?.ts,n?.timestamp];for(const h of p){const v=Number(h);if(Number.isFinite(v)&&v>0){i=`fallback:${v}`;break}}}i||(i=`init:${s.length}:${n?.nr??""}`);const l=A1(n),u=i;return{token:l.encoded?`${u}||done:${l.encoded}`:u,by:r||null,action:t,doneSignature:l.raw}}const L1=new Set(["EL","LTSTB","LTSTBSTV","S1","S2","S3","S4","S5","S6"]),F1=/^(1|true|ja|yes|on)$/i;function z1(n){if(n==null)return"";const s=String(n).trim();if(!s)return"";const i=s.match(/\b(S[1-6]|EL|LTSTB|LTSTBSTV)\b/i);return i?i[1].toUpperCase():s.replace(/\s+/g,"").toUpperCase()}function U1(n){if(n===!0)return!0;if(n===!1)return!1;if(typeof n=="number")return!Number.isNaN(n)&&n!==0;if(typeof n=="string"){const s=n.trim();return s?F1.test(s):!1}return!1}function B1(n){if(!n||typeof n!="object")return!1;const s=n.uebermittlungsart||{};if(U1(s.aus))return!0;const i=typeof s.richtung=="string"?s.richtung:n.richtung;return!!(typeof i=="string"&&/aus/i.test(i))}function $1(n){if(!n||typeof n!="object")return!1;const s=Array.isArray(n.ergehtAn)?n.ergehtAn:[];for(const r of s){const t=typeof r=="string"?r.trim():String(r??"").trim();if(!t)continue;const l=z1(t);if(!L1.has(l))return!0}return!!(typeof n.ergehtAnText=="string"?n.ergehtAnText.trim():"")}function ug(n){return B1(n)?$1(n):!1}const kd=["EL","LtStb","S1","S2","S3","S4","S5","S6"],Sc={LTSTB:{label:"LtStb",description:"Leiter Stab"},LTSTBSTV:{label:"LtStbStv",description:"Stellv. Leiter Stab"},S3:{label:"S3",description:null}},Y1=Object.keys(Sc);Object.fromEntries(Object.entries(Sc).map(([n,s])=>[n,s.label]));const dg=(()=>{const n=Sc.LTSTB;return n?`${n.label} (${n.description})`:"LtStb (Leiter Stab)"})(),Aa=()=>({confirmed:!1,by:null,byRole:null,at:null}),pa={anvon:"prot_sugg_anvon",kanal:"prot_sugg_kanalNr",verantwortlich:"prot_sugg_ver"},fg="prot_prefill_from_task",W1="task-card",H1="X-Protocol-Task-Override",K1="prefillToken";function V1(){if(typeof window>"u")return null;try{const n=window.location.hash||"",s=n.indexOf("?");if(s===-1)return null;const i=new URLSearchParams(n.slice(s+1)),r=i.get(K1)||i.get("prefill");if(!r)return null;const t=r.trim();return t||null}catch{return null}}function Q1(n){if(!n)return"";const s=[],i=t=>{if(typeof t=="string"){const l=t.trim();l&&s.push(l)}},r=n.role;if(r&&typeof r=="object"?(i(r.displayName),i(r.label),i(r.name),i(r.id)):i(r),Array.isArray(n.roles))for(const t of n.roles)t&&typeof t=="object"?(i(t.displayName),i(t.label),i(t.name),i(t.id)):i(t);return s.length?s[0]:""}function Ll(n){const s=String(n||"").trim();if(!s)return null;const i=s.match(/\b(S[1-6]|EL|LTSTB)\b/i);return i?i[1].toUpperCase():s.replace(/\s+/g,"").toUpperCase()}function jd(n,s=12){const i=new Set,r=[];for(const t of n){const l=String(t||"").trim();if(!(!l||i.has(l))&&(i.add(l),r.push(l),r.length>=s))break}return r}function pg(n){let s=String(n||"").trim();if(!s)return s;const i=s.match(/^(\d{1,2})[.\-\/](\d{1,2})[.\-\/](\d{2,4})$/);if(i){const t=i[1].padStart(2,"0"),l=i[2].padStart(2,"0");return`${i[3].length===2?"20"+i[3]:i[3]}-${l}-${t}`}const r=s.match(/^(\d{1,2})(\d{1,2})(\d{2,4})$/);if(r){const t=r[1].padStart(2,"0"),l=r[2].padStart(2,"0");return`${r[3].length===2?"20"+r[3]:r[3].padStart(4,"20")}-${l}-${t}`}return s}function mg(n){let s=String(n||"").trim();if(!s)return s;const i=s.match(/^(\d{1,2})(\d{2})$/);if(i)return`${i[1].padStart(2,"0")}:${i[2]}`;const r=s.match(/^(\d{1,2})[:.](\d{1,2})$/);return r?`${r[1].padStart(2,"0")}:${r[2].padStart(2,"0")}`:s}function G1(n){if(n==null)return"";const s=String(n).trim();if(!s)return"";if(/^\d+$/.test(s)){const i=String(Number(s));return i==="0"?"":i}return s}const hg=()=>({datum:new Date().toISOString().slice(0,10),zeit:new Date().toTimeString().slice(0,5),uebermittlungsart:{richtung:"",kanalNr:""},anvon:{richtung:"",name:""},infoTyp:"",information:"",rueckmeldung1:"",ergehtAn:[],ergehtAnText:"",otherRecipientConfirmation:Aa(),lagebericht:"",massnahmen:Array.from({length:5},()=>({massnahme:"",verantwortlich:"",done:!1}))});function gg(n,s){return(n===!0?"weather-mail":n===!1||n==null?null:typeof n=="object"&&n?.createdVia||null)==="weather-mail"?s===0?"S2":"":"S2"}function q1({mode:n="create",editNr:s=null,taskPrefillPayload:i=null,onRequestClose:r=null,onSaved:t=null}){const{user:l}=ko()||{},u=x.useMemo(()=>Q1(l),[l]),d=iy(),p=d.running||d.paused,[h,v]=x.useState(!1),[y,N]=x.useState(!1),[C,k]=x.useState(null),[E,j]=x.useState(!1),[I,$]=x.useState(!1),[Y,B]=x.useState(null),[Z]=x.useState(()=>i?null:V1()),ee=Z?`${fg}:${Z}`:fg,J=!!Z,re=typeof r=="function",{roles:te}=sy(),ie=x.useMemo(()=>{const P=new Set,U=ce=>{const pe=Ll(ce);pe&&P.add(pe)};if(l){const ce=l.role;if(ce&&typeof ce=="object"?(U(ce.id),U(ce.name),U(ce.label)):U(ce),Array.isArray(l.roles))for(const pe of l.roles)pe&&(typeof pe=="string"?U(pe):typeof pe=="object"&&(U(pe.id),U(pe.role),U(pe.name),U(pe.label)))}return P},[l]),ne=x.useMemo(()=>te.some(P=>P==="LTSTB"||P==="LTSTBSTV"),[te]),Ce=x.useMemo(()=>R1(l),[l]),[ve,Te]=x.useState(!1),[Ee,be]=x.useState(!1),[we,O]=x.useState([]);x.useEffect(()=>{let P=!0;return(async()=>{try{if(await ny(),!P)return;const U=ry("protokoll",l),ce=!ne&&Gs("S3",l);Te(U||ce),be(Gs("Admin",l)),O(Y1.filter(pe=>!(!Gs(pe,l)||pe==="S3"&&ne)))}catch{if(!P)return;Te(!1),be(!1),O([])}})(),()=>{P=!1}},[ne,l]);const[W,F]=x.useState(()=>{const P=Number(s);return Number.isFinite(P)&&P>0?P:null}),b=Number.isFinite(Number(W))&&Number(W)>0,[L,oe]=x.useState(b),[he,je]=x.useState(""),[ke,Le]=x.useState(()=>b?"pending":"not-needed"),[Se,ue]=x.useState(null),xe=x.useRef(null),He=x.useRef(null),Xe=x.useRef({nr:null,hasLock:!1}),gt=x.useRef({nr:null,success:!1}),[Nt,Ze]=x.useState(!1),[Ft,Et]=x.useState(null),[ft,We]=x.useState({}),st=x.useRef(null),Ae=x.useRef(null),At=x.useRef(null),Bt=x.useRef(null),qt=x.useRef(null),$t=x.useRef(null),Kt=x.useRef(null),q=x.useRef(null),ye=x.useRef(!1),xt=x.useRef(null),[pt,rt]=x.useState(null),rn=x.useRef(null),ot=(P,U,ce=2200)=>{rt({type:P,text:U}),rn.current&&clearTimeout(rn.current),rn.current=setTimeout(()=>rt(null),ce)};x.useEffect(()=>{if(n!=="create"||y){n!=="create"&&!y&&(j(!1),B(null));return}let P=null;if(i)P=i;else{let dt=null;if(Z)try{dt=localStorage.getItem(ee)}catch{dt=null}if(!dt)try{dt=sessionStorage.getItem(ee)}catch{dt=null}if(!dt)return;try{Z?localStorage.removeItem(ee):sessionStorage.removeItem(ee)}catch{}try{P=JSON.parse(dt)}catch{P=null}}if(!P||P?.source!==W1)return;const U=String(P?.description??"").trim(),ce=String(P?.infoTyp??"").trim();k(P),N(!0),j(!0);const pe=(()=>{const dt=ie.values().next();return!dt.done&&dt.value?dt.value:Ll(u)})();B(pe||null),vt(dt=>{const ht=structuredClone(dt);return U&&(ht.information=U),ce&&(ht.infoTyp=ce),ht.anvon=ht.anvon||{richtung:"",name:""},ht.anvon.richtung="von",u&&(ht.anvon.name=u),ht});const Dt=G1(P?.originProtocolNr);Dt&&je(Dt),setTimeout(()=>Kt.current?.focus(),0),ot?.("info","Meldungsformular aus Aufgabe geffnet  Angaben prfen und ergnzen.")},[n,y,u,ie,Z,ee,i]),x.useEffect(()=>{if(!E)return;const U=(()=>{const ce=ie.values().next();return!ce.done&&ce.value?ce.value:Ll(u)})()||null;B(ce=>ce===U?ce:U)},[E,ie,u]),x.useEffect(()=>{if(Z)try{const P=new URL(window.location.href),U=P.hash||"",ce=U.indexOf("?");ce>=0&&(P.hash=U.slice(0,ce),window.history.replaceState(null,"",P.toString()))}catch{}},[Z]),x.useEffect(()=>{if(b&&ve){Le("pending"),ue(null);return}Le("not-needed"),ue(null),xe.current&&(clearTimeout(xe.current),xe.current=null),Xe.current={nr:null,hasLock:!1},He.current=null},[b,W,ve]);const[en,Wn]=x.useState([]),[Pn,Q]=x.useState([]),[de,qe]=x.useState([]);x.useEffect(()=>{try{Wn(JSON.parse(localStorage.getItem(pa.anvon)||"[]")),Q(JSON.parse(localStorage.getItem(pa.kanal)||"[]")),qe(JSON.parse(localStorage.getItem(pa.verantwortlich)||"[]"))}catch{}},[]);const[ae,vt]=x.useState(hg()),lt=!b||ke==="acquired",Ut=ve||y,tt=P=>{P&&We(U=>{if(!U||!U[P])return U;const ce={...U};return delete ce[P],ce})},Ke=(P,U)=>{const ce=Array.isArray(P)?P:String(P).split(".");vt(pe=>{const Dt=pe?.otherRecipientConfirmation||Aa(),dt=String(Dt.byRole||"").toUpperCase(),ht=!!Dt.confirmed;if(!Ut||!lt||ht&&!it.has(dt))return pe;const vn=structuredClone(pe);let ln=vn;for(let jr=0;jr<ce.length-1;jr++)ln=ln[ce[jr]];return ln[ce.at(-1)]=U,vn})},it=x.useMemo(()=>new Set(we.map(P=>String(P||"").toUpperCase())),[we]),ct=ae.otherRecipientConfirmation||Aa(),ut=String(ct.byRole||"").toUpperCase(),Yt=!!ct.confirmed,wt=Yt?(()=>{const P=Sc[ut],U=P?.label||ct.byRole||ut||"unbekannt",ce=P?P.description?`${U} (${P.description})`:U:ct.byRole||ut||dg,pe=ct.by||null,Dt=ct.at?new Date(ct.at):null,dt=Dt&&!Number.isNaN(Dt.valueOf())?Dt.toLocaleString("de-DE"):null;return{roleLabel:U,roleDisplay:ce,by:pe,whenText:dt}})():null,A=x.useMemo(()=>{const P=["MS","MELDESTELLE"];for(const U of P)if(ie.has(U))return!0;return!1},[ie]),Me=x.useMemo(()=>{const P=ae?.uebermittlungsart||{},U={...ae,uebermittlungsart:{...P,aus:P.aus||P.richtung==="aus",ein:P.ein||P.richtung==="ein"}};return ug(U)},[ae])&&!Yt,Oe=Yt&&!it.has(ut),$e=b&&ke==="blocked",Je=Gs("S3",l)&&ne,kt=b&&A&&Me,at=Ut&&lt&&!Oe&&!Je&&!kt,Fn=x.useMemo(()=>!E||!Y?!1:ie.has(Y),[E,Y,ie]),Wt=Oe&&wt?`Besttigt durch ${wt.roleLabel}${wt.by?` (${wt.by})`:""}${wt.whenText?` am ${wt.whenText}`:""}`:null,gn=$e?`Gerade in Bearbeitung durch ${Se?.lockedBy||Se?.lock?.lockedBy||"Unbekannt"}`:null,qn=kt?"Ausgehende Meldungen an externe Empfnger mssen zuerst besttigt werden. nderungen und Druck sind bis dahin gesperrt.":null,zr=wt?[wt.roleDisplay,[wt.by,wt.whenText].filter(Boolean).join("  ")||null].filter(Boolean):[],Ur=it.has("S3")&&!ne&&(ut==="LTSTB"||ut==="LTSTBSTV"),Wa=it.size>0,Nr=()=>{gn?ot?.("error",`${gn}  nderungen sind derzeit gesperrt.`):Wt?ot?.("error",`${Wt}  nderungen nur durch diese Rolle mglich.`):ot?.("error","Keine Berechtigung (Meldestelle)")},va=(()=>{if(it.has(ut))return ut;for(const P of we){const U=String(P||"").toUpperCase();if(U)return U}return null})(),di=Yt?it.has(ut)||Ur:it.size>0,fi=Yt?it.has(ut)||Ur?"Besttigung zurcknehmen":"Nur die besttigende Rolle darf zurcksetzen":it.size>0?"Besttigung setzen":"Besttigung nur durch berechtigte Rolle mglich",Jt=P=>{if(!ve){Nr();return}if(!P&&!Yt)return;if(P&&!it.size){ot?.("error","Keine Berechtigung zum Besttigen");return}const U=P?va:ut;if(P&&!U){ot?.("error","Keine Berechtigung zum Besttigen");return}if(!P&&ut&&!(it.has(ut)||Ur)){ot?.("error","Nur die besttigende Rolle darf zurcksetzen");return}vt(ce=>{const pe=structuredClone(ce);if(!P)pe.otherRecipientConfirmation=Aa();else{const Dt=l?.displayName||l?.username||(l?.id!=null?`ID ${l.id}`:null);pe.otherRecipientConfirmation={confirmed:!0,by:Dt,byRole:U,at:Date.now()}}return pe})};x.useEffect(()=>{if(!b||!ve)return;const P=Number(W);if(!Number.isFinite(P)||P<=0)return;let U=!1;const ce=async()=>{const dt=gt.current;if(!(!(Xe.current.hasLock&&Xe.current.nr===P)&&(dt.nr!==P||!dt.success))){gt.current={nr:null,success:!1},Xe.current={nr:null,hasLock:!1};try{await fetch(`/api/protocol/${P}/lock`,{method:"DELETE",credentials:"include"}).catch(()=>{})}catch{}}};He.current=ce;const pe=async({silent:dt=!1}={})=>{try{gt.current={nr:P,success:!1};const ht=await fetch(`/api/protocol/${P}/lock`,{method:"POST",credentials:"include"}),vn=await ht.json().catch(()=>({}));if(!ht.ok){if(Xe.current={nr:null,hasLock:!1},gt.current.nr===P&&(gt.current={nr:null,success:!1}),ht.status===423)U||(Le("blocked"),ue({lockedBy:vn?.lockedBy||vn?.lock?.lockedBy||"Unbekannt"}));else if(!dt){const ln=vn?.error||`Sperren fehlgeschlagen (${ht.status})`;U||(Le("error"),ue({message:ln}))}return!1}return Xe.current={nr:P,hasLock:!0},gt.current={nr:P,success:!0},U?(await ce(),!0):(Le("acquired"),ue(null),!0)}catch(ht){return gt.current.nr===P&&(gt.current={nr:null,success:!1}),Xe.current={nr:null,hasLock:!1},!dt&&!U&&(Le("error"),ue({message:ht?.message||String(ht)})),!1}},Dt=()=>{U||(xe.current&&(clearTimeout(xe.current),xe.current=null),xe.current=setTimeout(async()=>{const dt=await pe({silent:!0});U||(dt||Xe.current.hasLock&&Xe.current.nr===P)&&Dt()},6e4))};return(async()=>await pe({silent:!1})&&Dt())(),()=>{U=!0,xe.current&&(clearTimeout(xe.current),xe.current=null),He.current=null,ce()}},[b,W,ve]),x.useEffect(()=>{if(!b){oe(!1),setTimeout(()=>At.current?.focus(),0);return}const P=Number(W);!Number.isFinite(P)||P<=0||ve&&ke!=="acquired"&&ke!=="blocked"||(async()=>{try{const U=await fetch(`/api/protocol/${P}`,{credentials:"include"}).then(ce=>ce.json());if(U?.ok&&U.item){const ce=U.item,pe=ce.uebermittlungsart||{};let Dt="",dt=ce.anvon||"";const ht=(ce.anvon||"").trim();/^an\s*:/i.test(ht)&&(Dt="an",dt=ht.replace(/^an\s*:/i,"").trim()),/^von\s*:/i.test(ht)&&(Dt="von",dt=ht.replace(/^von\s*:/i,"").trim()),vt({datum:ce.datum||"",zeit:ce.zeit||"",uebermittlungsart:{richtung:pe.ein?"ein":pe.aus?"aus":"",kanalNr:pe.kanalNr||""},anvon:{richtung:Dt||"an",name:dt},infoTyp:ce.infoTyp||"Information",information:ce.information||"",rueckmeldung1:ce.rueckmeldung1||"",ergehtAn:Array.isArray(ce.ergehtAn)?ce.ergehtAn:[],ergehtAnText:ce.ergehtAnText||"",otherRecipientConfirmation:(()=>{const mn=ce.otherRecipientConfirmation;if(!mn||typeof mn!="object"||!mn.confirmed)return Aa();const Tt=Number.isFinite(mn.at)?Number(mn.at):Number(new Date(mn.at).valueOf());return{confirmed:!0,by:mn.by||null,byRole:mn.byRole||null,at:Number.isFinite(Tt)?Tt:null}})(),lagebericht:ce.lagebericht||"",massnahmen:Array.from({length:5},(mn,Tt)=>{const _t=ce.massnahmen?.[Tt]||{},On=gg(ce.meta,Tt),yn=_t.verantwortlich??On;return{massnahme:_t.massnahme||"",verantwortlich:yn??"",done:!!_t.done}})}),We({}),je(typeof ce.zu=="string"?ce.zu:""),Et(ce.id||null);const vn=ce.meta||{},ln=vn?.createdVia==="task-board";j(!!ln),$(vn?.createdVia==="weather-mail");const jr=Ll(vn?.createdByRole||vn?.creatorRole||vn?.createdBy||vn?.taskCreatorRole);if(B(jr||null),setTimeout(()=>At.current?.focus(),0),Ce){const mn=I1(ce);O1(Ce,ce.nr,mn.token)}}}finally{oe(!1)}})()},[b,W,ke,ve,Ce]),x.useEffect(()=>{b&&(ke==="blocked"||ke==="error")&&oe(!1)},[b,ke]),x.useEffect(()=>{b&&ke==="error"&&Se?.message&&ot?.("error",Se.message)},[b,ke,Se]),x.useEffect(()=>{if(!b||ke!=="blocked")return;const P=Se?.lockedBy||Se?.lock?.lockedBy||"Unbekannt";ot?.("error",`Gerade in Bearbeitung durch ${P}  nderungen nicht mglich.`)},[b,ke,Se]),x.useEffect(()=>{const P=()=>{const pe=document.activeElement;pe&&typeof pe.blur=="function"&&pe.blur()},U=pe=>setTimeout(pe,0),ce=pe=>{if(pe.repeat)return;const Dt=(pe.key||"").toLowerCase(),dt=pe.ctrlKey||pe.metaKey;if(dt&&!pe.shiftKey&&Dt==="s"){if(pe.preventDefault(),pe.stopPropagation(),!at){Nr();return}if(ye.current)return;ye.current=!0,U(async()=>{P(),await new Promise(ht=>setTimeout(ht,0)),H().finally(()=>ye.current=!1)});return}if(dt&&(pe.shiftKey&&Dt==="s"||Dt==="enter")){if(pe.preventDefault(),pe.stopPropagation(),!at){Nr();return}if(ye.current)return;ye.current=!0,U(async()=>{P(),await new Promise(ht=>setTimeout(ht,0)),se().finally(()=>ye.current=!1)});return}Dt==="escape"&&(pe.preventDefault(),pe.stopPropagation(),U(()=>aa()))};return window.addEventListener("keydown",ce,!0),document.addEventListener("keydown",ce,!0),()=>{window.removeEventListener("keydown",ce,!0),document.removeEventListener("keydown",ce,!0)}},[]);const[Br,$r]=x.useState(!1),[Ha,kr]=x.useState(null),xs=x.useRef(null),ws=Br||kt&&!Fn,ya=kt?"Ausgehende Meldungen an externe Empfnger mssen zuerst besttigt werden.":"Formular drucken  Anzahl gem 'ergeht an' + 'Sonstiger Empfnger'";function Jn(){const P=Array.isArray(ae?.ergehtAn)?[...ae.ergehtAn]:[],U=(ae?.ergehtAnText||"").trim();return U&&P.push(U),P}const bs=P=>{const U=`${P}#toolbar=0&navpanes=0&scrollbar=0`;let ce=xs.current;ce||(ce=document.createElement("iframe"),ce.style.position="fixed",ce.style.width="0",ce.style.height="0",ce.style.border="0",ce.style.visibility="hidden",document.body.appendChild(ce),xs.current=ce),ce.onload=()=>{try{setTimeout(()=>{ce.contentWindow?.focus(),ce.contentWindow?.print()},100)}catch{window.open(U,"_blank","noopener,noreferrer")?.focus()}},ce.src=U},Hn=async()=>{if(Br)return;if(!ve&&!Fn){ot?.("error","Keine Berechtigung zum Drucken/Speichern");return}kr("data");const P=Jn();if(!P.length){ot?.("error","Bitte Empfnger whlen oder 'Sonstiger Empfnger' ausfllen.");return}$r(!0);try{const U=await S();if(!U){ot?.("error","Drucken bentigt einen gespeicherten Eintrag.");return}F(U);const pe=(await fetch(`/api/protocol/${U}`,{credentials:"include"}).then(ht=>ht.json()))?.item;if(!pe)throw new Error("Datensatz fr Druck nicht gefunden");if(ug(pe)&&!pe?.otherRecipientConfirmation?.confirmed){ot?.("error","Ausgehende Meldungen an externe Empfnger mssen zuerst besttigt werden.");return}ot?.("info","PDF wird serverseitig erzeugt ");const Dt=await fetch(`/api/protocol/${U}/print`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({recipients:P,data:pe})}).then(ht=>ht.json());if(!Dt?.ok||!Dt?.fileUrl)throw new Error(Dt?.error||"PDF-Erzeugung fehlgeschlagen");await bs(Dt.fileUrl);const dt=Number(Dt?.pages)||P.length;ot?.("success",`Druck gestartet (${dt} Seite${dt>1?"n":""})`)}catch(U){ot?.("error",`Drucken fehlgeschlagen: ${U.message||U}`)}finally{kr(null),$r(!1)}},pi=async()=>{if(Ee&&!Br){$r(!0),kr("blank");try{const P={datum:"",zeit:"",infoTyp:"__blank__",uebermittlungsart:{kanalNr:"",ein:!1,aus:!1},anvon:"",zu:"",information:"",rueckmeldung1:"",ergehtAn:[],ergehtAnText:"",massnahmen:Array.from({length:5},()=>({massnahme:"",verantwortlich:"",done:!1}))},U=await fetch("/api/protocol/blank/print",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({recipients:[""],data:P})}).then(pe=>pe.json());if(!U?.ok||!U?.fileUrl)throw new Error(U?.error||"PDF-Erzeugung fehlgeschlagen");await bs(U.fileUrl);const ce=Number(U?.pages)||1;ot?.("success",`Leeres Formular  Druck gestartet (${ce} Seite${ce>1?"n":""})`)}catch(P){ot?.("error",`Leeres Formular konnte nicht gedruckt werden: ${P.message||P}`)}finally{kr(null),$r(!1)}}},Ka=()=>{if(typeof r=="function"){r();return}J?(window.close(),setTimeout(()=>{window.closed||(window.location.hash="/protokoll")},150)):window.location.hash="/protokoll"},Ss=P=>{if(P&&typeof t=="function")try{t(P)}catch{}},aa=()=>{try{const P=He.current?.();P&&typeof P.then=="function"&&P.catch(()=>{})}catch{}Ka()},S=async()=>{if(!at)return W;const P=xt.current?new FormData(xt.current):null,U=structuredClone(ae);U.datum=pg(P?.get("datum")||ae.datum),U.zeit=mg(P?.get("zeit")||ae.zeit);const ce=(P?.get("anvonDir")||ae.anvon.richtung||"").toString(),pe=(P?.get("anvonName")||ae.anvon.name||"").toString();U.anvon={richtung:ce,name:pe};const Dt=(P?.get("richtung")||ae.uebermittlungsart.richtung||"").toString();U.uebermittlungsart.richtung=Dt,U.uebermittlungsart.kanalNr=(P?.get("kanalNr")||ae.uebermittlungsart.kanalNr||"").toString(),U.information=(P?.get("information")||ae.information||"").toString(),U.rueckmeldung1=(P?.get("rueckmeldung1")||ae.rueckmeldung1||"").toString(),U.ergehtAnText=(P?.get("ergehtAnText")||ae.ergehtAnText||"").toString();const dt=P?.get("infoTyp");U.infoTyp=(dt??(ae.infoTyp||"")).toString();const ht=U.otherRecipientConfirmation||{};if(ht.confirmed){const Tt=Number.isFinite(ht.at)?Number(ht.at):Number(new Date(ht.at).valueOf());U.otherRecipientConfirmation={confirmed:!0,by:ht.by||null,byRole:ht.byRole||null,at:Number.isFinite(Tt)?Tt:Date.now()}}else U.otherRecipientConfirmation=Aa();const vn=P?Array.from(P.getAll("ergehtAn")).map(String):ae.ergehtAn;U.ergehtAn=(vn.length?vn:ae.ergehtAn).map(Tt=>String(Tt||"").trim()).filter(Boolean),U.massnahmen=U.massnahmen.map((Tt,_t)=>{const On=P?P.get(`m_done_${_t}`)!==null:Tt.done,yn=P?.get(`m_massnahme_${_t}`),Cr=P?.get(`m_verantwortlich_${_t}`),Va=gg(I,_t),Er=Cr??Tt.verantwortlich??Va??"";return{massnahme:(yn??Tt.massnahme??"").toString(),verantwortlich:Er==null?"":Er.toString(),done:!!On}}),U.zu=typeof he=="string"?he:"",U.datum=String(U.datum||"").trim(),U.zeit=String(U.zeit||"").trim(),U.infoTyp=String(U.infoTyp||"").trim(),U.anvon.name=String(U.anvon?.name||"").trim(),U.anvon.richtung=String(U.anvon?.richtung||"").trim(),U.uebermittlungsart.richtung=String(U.uebermittlungsart?.richtung||"").trim(),U.uebermittlungsart.kanalNr=String(U.uebermittlungsart?.kanalNr||"").trim(),U.ergehtAnText=String(U.ergehtAnText||"").trim(),U.otherRecipientConfirmation.confirmed?(U.otherRecipientConfirmation.by=U.otherRecipientConfirmation.by||null,U.otherRecipientConfirmation.byRole=U.otherRecipientConfirmation.byRole||null,U.otherRecipientConfirmation.at=Number.isFinite(U.otherRecipientConfirmation.at)?Number(U.otherRecipientConfirmation.at):Date.now()):U.otherRecipientConfirmation=Aa();const ln={};U.datum||(ln.datum=!0),U.zeit||(ln.zeit=!0),U.infoTyp||(ln.infoTyp=!0),U.anvon.name||(ln.anvonName=!0),U.anvon.richtung||(ln.anvonDir=!0),U.uebermittlungsart.richtung||(ln.richtung=!0),String(U.information||"").trim()||(ln.information=!0);const jr=[...U.ergehtAn];if(U.ergehtAnText&&jr.push(U.ergehtAnText),jr.length||(ln.ergehtAn=!0),Object.keys(ln).length){We(ln);const _t=["datum","zeit","infoTyp","anvonName","anvonDir","richtung","information","ergehtAn"].find(Cr=>ln[Cr]),yn={datum:Bt,zeit:qt,infoTyp:At,anvonName:st,anvonDir:Ae,richtung:$t,information:Kt,ergehtAn:q}[_t];return yn?.current&&setTimeout(()=>yn.current?.focus(),0),ot?.("error","Bitte alle Pflichtfelder ausfllen."),null}We({});const mn={...U,zu:U.zu,uebermittlungsart:{kanalNr:(U.uebermittlungsart.kanalNr||"").trim(),ein:U.uebermittlungsart.richtung==="ein",aus:U.uebermittlungsart.richtung==="aus"},anvon:U.anvon.richtung?`${U.anvon.richtung==="an"?"An":"Von"}: ${U.anvon.name}`.trim():U.anvon.name.trim()};try{const Tt=jd([mn.anvon,...JSON.parse(localStorage.getItem(pa.anvon)||"[]")]),_t=jd([mn.uebermittlungsart.kanalNr,...JSON.parse(localStorage.getItem(pa.kanal)||"[]")]),On=[...U.massnahmen.map(Cr=>Cr.verantwortlich).filter(Boolean),...JSON.parse(localStorage.getItem(pa.verantwortlich)||"[]")],yn=jd(On);localStorage.setItem(pa.anvon,JSON.stringify(Tt)),localStorage.setItem(pa.kanal,JSON.stringify(_t)),localStorage.setItem(pa.verantwortlich,JSON.stringify(yn)),Wn(Tt),Q(_t),qe(yn)}catch{}if(b){const Tt=await fetch(`/api/protocol/${W}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(mn)}).then(_t=>_t.json());if(!Tt?.ok)throw new Error(Tt?.error||"Speichern fehlgeschlagen");return F(Tt.nr),Et(Tt.id||Ft||null),je(typeof Tt.zu=="string"?Tt.zu:he),Tt.nr}else{const Tt={"Content-Type":"application/json",...y?{[H1]:"1"}:{}},_t=await fetch("/api/protocol",{method:"POST",headers:Tt,credentials:"include",body:JSON.stringify(mn)}).then(On=>On.json());if(!_t?.ok)throw new Error(_t?.error||"Speichern fehlgeschlagen");return F(_t.nr),Et(_t.id||null),je(typeof _t.zu=="string"?_t.zu:he),_t.nr}},T=()=>{if(!E)return!0;try{return window.confirm("Sind sie sicher? nderungen sind nur durch die Meldestelle oder den Leiter des Stabes mglich!")}catch{return!0}},H=async()=>{if(!at){Nr();return}if(!Nt&&T()){Ze(!0);try{const P=await S();P&&(Ss(P),Ka())}catch(P){ot("error","Fehler beim Speichern: "+P.message,4e3)}finally{Ze(!1)}}},se=async()=>{if(!at){Nr();return}if(!Nt&&T()){Ze(!0);try{const P=await S();P&&(re?(Ss(P),Ka()):(ot("success",`Gespeichert (NR ${P})  neuer Eintrag`),vt(hg()),We({}),F(null),Et(null),je(""),setTimeout(()=>At.current?.focus(),0)))}catch(P){ot("error","Fehler beim Speichern: "+P.message,4e3)}finally{Ze(!1)}}},Re=P=>{const U=(P.key||"").toLowerCase(),ce=P.ctrlKey||P.metaKey;P.repeat||(ce&&!P.shiftKey&&U==="s"?(P.preventDefault(),P.stopPropagation(),H()):ce&&(P.shiftKey&&U==="s"||U==="enter")&&(P.preventDefault(),P.stopPropagation(),se()))},mt=P=>{if(P.preventDefault(),!at){Nr();return}H()};if(L)return o.jsx("div",{className:"p-4",children:"Lade"});const Vt=kd.every(P=>ae.ergehtAn.includes(P)),_n=P=>{at&&(tt("ergehtAn"),Ke("ergehtAn",P?[...kd]:[]))};return o.jsxs("div",{className:"protokoll-page-wrapper mx-auto w-full max-w-[1100px] relative",children:[o.jsx("div",{className:"prot-actionbar sticky top-0 z-30 -mx-2 md:mx-0 px-2 md:px-0",children:o.jsxs("div",{className:"bg-white/95 backdrop-blur border-b rounded-t-xl px-3 py-2 flex items-center justify-between shadow-sm",children:[o.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2",children:[p&&o.jsx(oy,{className:"h-5 w-5"}),o.jsx("span",{children:b?`Protokoll  Bearbeiten (NR ${W??""}${he?`  ZU ${he}`:""})`:"Protokoll  Neuer Eintrag"})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:aa,className:"header-btn !bg-gradient-to-br !from-slate-500 !to-slate-600",title:"Maske schlieen und zur bersicht wechseln (ESC)",children:"Abbrechen"}),o.jsx("button",{type:"button",onClick:se,disabled:Nt||!at,className:"header-btn disabled:opacity-60",title:"Speichern und neue Maske (Strg+Shift+S oder Strg+Enter)",children:"Speichern/Neu"}),o.jsx("button",{type:"button",onClick:H,disabled:Nt||!at,className:"header-btn disabled:opacity-60",title:"Speichern und schlieen (Strg+S)",children:Nt?"Speichern":"Speichern"}),o.jsx("button",{type:"button",onClick:Hn,disabled:ws,className:"header-btn disabled:opacity-60",title:ya,children:Br&&Ha==="data"?"Drucken":"Drucken"}),Ee&&o.jsx("button",{type:"button",onClick:pi,disabled:Br,className:"header-btn disabled:opacity-60",title:"Leeres Formular drucken",children:Br&&Ha==="blank"?"Drucken":"Leer drucken"})]})]})}),C&&o.jsxs("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-sky-300 bg-sky-50 text-sky-900 text-sm",children:["Meldung aus Aufgabe vorbereitet",C?.title?`: ${C.title}`:"","."]}),$e&&gn&&o.jsxs("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:[gn,"  nderungen sind derzeit gesperrt."]}),qn&&o.jsx("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:qn}),Oe&&Wt&&o.jsxs("div",{className:"mx-2 md:mx-0 mt-3 px-3 py-2 rounded border border-amber-300 bg-amber-50 text-amber-900 text-sm",children:[Wt,"  nderungen nur durch diese Rolle mglich."]}),pt&&o.jsx("div",{className:"fixed right-3 top-3 z-40",children:o.jsx("div",{className:"px-3 py-2 rounded shadow text-white "+(pt.type==="success"?"bg-emerald-600":pt.type==="error"?"bg-rose-600":"bg-slate-600"),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{children:pt.text}),o.jsx("button",{className:"opacity-80 hover:opacity-100",onClick:()=>rt(null),title:"Meldung schlieen",children:""})]})})}),o.jsx("style",{children:`
        @media print {
          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          .prot-actionbar { display: none !important; }
          html, body { margin: 0 !important; }
          @page { size: A4; margin: 12mm; }
        }
      `}),o.jsx("form",{ref:xt,onKeyDown:Re,onSubmit:mt,className:"bg-white border-2 rounded-b-xl overflow-hidden shadow",children:o.jsxs("fieldset",{disabled:!at,className:"contents",children:[o.jsxs("div",{className:"grid grid-cols-12",children:[o.jsx("div",{className:"col-span-9 px-6 py-4 border-b-2",children:o.jsx("div",{className:"text-3xl font-extrabold tracking-wide",children:"MELDUNG/INFORMATION"})}),o.jsx("div",{className:"col-span-3 border-l-2",children:o.jsxs("div",{className:"grid grid-cols-2",children:[o.jsxs("div",{className:"border-b-2",children:[o.jsx("div",{className:"px-2 py-1 text-[10px] text-gray-600 border-b-2",children:"PROTOKOLL-NR"}),o.jsx("div",{className:"px-2 py-1.5 text-center text-xl font-bold",children:W??""})]}),o.jsxs("div",{className:"border-l-2 border-b-2",children:[o.jsx("div",{className:"px-2 py-1 text-[10px] text-gray-600 border-b-2",children:"ZU"}),o.jsx("div",{className:"px-2 py-1.5 text-center text-lg font-normal",children:he||""})]})]})}),o.jsx("div",{className:"col-span-12 border-y-2 p-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-0",children:[o.jsxs("div",{className:"col-span-6 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Datum"}),o.jsx("input",{ref:Bt,name:"datum",type:"text",className:`border rounded px-2 h-6 text-[13px] w-full ${ft.datum?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,placeholder:"yyyy-mm-dd",value:ae.datum,onChange:P=>{tt("datum"),Ke("datum",P.target.value)},onBlur:P=>Ke("datum",pg(P.target.value)),title:"Datum (auch 101025 oder 10.10.2025 mglich)"})]}),o.jsxs("div",{className:"col-span-3 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Uhrzeit"}),o.jsx("input",{ref:qt,name:"zeit",type:"text",className:`border rounded px-2 h-6 text-[13px] w-full ${ft.zeit?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,placeholder:"hh:mm",value:ae.zeit,onChange:P=>{tt("zeit"),Ke("zeit",P.target.value)},onBlur:P=>Ke("zeit",mg(P.target.value)),title:"Uhrzeit (915, 09:15 oder 0915 mglich)"})]}),o.jsxs("div",{className:"col-span-3 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Typ"}),o.jsxs("div",{className:`grid grid-cols-3 gap-x-4 h-6 items-center text-[13px] ${ft.infoTyp?"outline outline-2 outline-red-500 rounded-md":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{ref:At,type:"radio",name:"infoTyp",value:"Information",required:!0,checked:ae.infoTyp==="Information",onChange:()=>{tt("infoTyp"),Ke("infoTyp","Information")}}),o.jsx("span",{children:"Info"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"radio",name:"infoTyp",value:"Auftrag",checked:ae.infoTyp==="Auftrag",onChange:()=>{tt("infoTyp"),Ke("infoTyp","Auftrag")}}),o.jsx("span",{children:"Auftrag"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"radio",name:"infoTyp",value:"Lagemeldung",checked:ae.infoTyp==="Lagemeldung",onChange:()=>{tt("infoTyp"),Ke("infoTyp","Lagemeldung")}}),o.jsx("span",{children:"Lage"})]})]})]})]})}),o.jsx("div",{className:"col-span-12 border-y-2 p-2",children:o.jsxs("div",{className:"grid grid-cols-12 gap-0 items-end",children:[o.jsxs("div",{className:"col-span-6 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"An/Von"}),o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("input",{ref:st,name:"anvonName",className:`border rounded px-2 h-6 text-[13px] w-full flex-1 ${ft.anvonName?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,placeholder:"Name / Stelle",required:!0,list:"dl-anvon",value:ae.anvon.name,onChange:P=>{tt("anvonName");let U=P.target.value;const ce=U.trim();/^an\s*:/i.test(ce)?(tt("anvonDir"),Ke(["anvon","richtung"],"an"),U=ce.replace(/^an\s*:/i,"").trim()):/^von\s*:/i.test(ce)&&(tt("anvonDir"),Ke(["anvon","richtung"],"von"),U=ce.replace(/^von\s*:/i,"").trim()),Ke(["anvon","name"],U)},title:'Optional mit Prfix "an: " oder "von: "'}),o.jsxs("div",{className:`flex items-center gap-2.5 pl-2 min-w-[128px] shrink-0 text-[13px] ${ft.anvonDir?"outline outline-2 outline-red-500 rounded-md":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{ref:Ae,type:"radio",name:"anvonDir",value:"an",required:!0,checked:ae.anvon.richtung==="an",onChange:()=>{tt("anvonDir"),Ke(["anvon","richtung"],"an")}}),o.jsx("span",{children:"An"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"radio",name:"anvonDir",value:"von",checked:ae.anvon.richtung==="von",onChange:()=>{tt("anvonDir"),Ke(["anvon","richtung"],"von")}}),o.jsx("span",{children:"Von"})]})]})]}),o.jsx("datalist",{id:"dl-anvon",children:en.map(P=>o.jsx("option",{value:P},P))})]}),o.jsxs("div",{className:"col-span-3 border-r-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Kanal"}),o.jsx("input",{name:"kanalNr",className:"border rounded px-2 h-6 text-[13px] w-full",list:"dl-kanal",value:ae.uebermittlungsart.kanalNr,onChange:P=>Ke(["uebermittlungsart","kanalNr"],P.target.value),title:"z. B. Funkkanal, Telefonnummer, E-Mail-Krzel "}),o.jsx("datalist",{id:"dl-kanal",children:Pn.map(P=>o.jsx("option",{value:P},P))})]}),o.jsxs("div",{className:"col-span-3 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Richtung"}),o.jsxs("div",{className:`grid grid-cols-2 gap-x-4 h-6 items-center text-[13px] ${ft.richtung?"outline outline-2 outline-red-500 rounded-md":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",title:"Meldung wurde empfangen",children:[o.jsx("input",{ref:$t,type:"radio",name:"richtung",value:"ein",checked:ae.uebermittlungsart.richtung==="ein",onChange:()=>{tt("richtung"),Ke(["uebermittlungsart","richtung"],"ein")}}),o.jsx("span",{children:"Eingang"})]}),o.jsxs("label",{className:"inline-flex items-center gap-1.5",title:"Meldung wurde gesendet",children:[o.jsx("input",{type:"radio",name:"richtung",value:"aus",checked:ae.uebermittlungsart.richtung==="aus",onChange:()=>{tt("richtung"),Ke(["uebermittlungsart","richtung"],"aus")}}),o.jsx("span",{children:"Ausgang"})]})]})]})]})}),o.jsxs("div",{className:"col-span-12 border-y-2 p-2",children:[o.jsx("div",{className:"text-[11px] text-gray-600 mb-1",children:"Information/Auftrag"}),o.jsx("textarea",{ref:Kt,name:"information",className:`border rounded px-2 py-2 w-full min-h-[420px] md:min-h-[520px] text-[15px] leading-relaxed ${ft.information?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,value:ae.information,onChange:P=>{tt("information"),Ke("information",P.target.value)},title:"Sachverhalt / Meldetext"})]}),o.jsxs("div",{className:"col-span-12 border-t-2 p-2",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Rckmeldung 1"}),o.jsx("input",{name:"rueckmeldung1",className:"border rounded px-2 h-9 w-full",value:ae.rueckmeldung1,onChange:P=>Ke("rueckmeldung1",P.target.value),title:"erste Rckmeldung"})]}),o.jsxs("div",{className:"col-span-12 border-t-2 p-2",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"ergeht an:"}),o.jsxs("div",{className:`flex flex-wrap items-center gap-3 rounded-md ${ft.ergehtAn?"ring-2 ring-red-500":""}`,children:[o.jsxs("label",{className:"inline-flex items-center gap-2 mr-3 text-sm",title:"Alle Empfnger auswhlen / abwhlen",children:[o.jsx("input",{type:"checkbox",checked:Vt,onChange:P=>_n(P.target.checked),disabled:!at}),o.jsx("span",{children:"Alle"})]}),kd.map(P=>o.jsxs("label",{className:"inline-flex items-center gap-2 mr-3 text-sm",children:[o.jsx("input",{tabIndex:-1,type:"checkbox",name:"ergehtAn",value:P,checked:ae.ergehtAn.includes(P),onChange:()=>{tt("ergehtAn");const U=new Set(ae.ergehtAn);U.has(P)?U.delete(P):U.add(P),Ke("ergehtAn",[...U])},disabled:!at,title:`Empfnger ${P} ${ae.ergehtAn.includes(P)?"entfernen":"hinzufgen"}`}),o.jsx("span",{children:P})]},P)),o.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"sonstiger Empfnger:"}),o.jsx("input",{ref:q,name:"ergehtAnText",className:`border rounded px-2 h-9 ${ft.ergehtAn?"border-red-500 focus:border-red-500 focus:ring-1 focus:ring-red-500":""}`,value:ae.ergehtAnText,onChange:P=>{tt("ergehtAn"),Ke("ergehtAnText",P.target.value)},placeholder:"Name/Gruppe",readOnly:!at})]})]}),o.jsxs("div",{className:"col-span-12 border-t-2",children:[o.jsxs("div",{className:"grid grid-cols-12 bg-gray-50 border-b-2",children:[o.jsx("div",{className:"col-span-6 p-2 font-semibold border-r",children:"Manahme"}),o.jsx("div",{className:"col-span-5 p-2 font-semibold border-r",children:"Verantwortlich"}),o.jsx("div",{className:"col-span-1 p-2 font-semibold text-center",children:"Erledigt"})]}),ae.massnahmen.map((P,U)=>o.jsxs("div",{className:"grid grid-cols-12 border-t",children:[o.jsx("div",{className:"col-span-6 p-2 border-r",children:o.jsx("input",{name:`m_massnahme_${U}`,className:"w-full border rounded px-2 h-9",value:P.massnahme,onChange:ce=>{const pe=[...ae.massnahmen];pe[U]={...P,massnahme:ce.target.value},Ke("massnahmen",pe)},title:`Manahme ${U+1}`})}),o.jsx("div",{className:"col-span-5 p-2 border-r",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{name:`m_verantwortlich_${U}`,className:"w-full border rounded px-2 h-9",list:"dl-ver",value:P.verantwortlich,onChange:ce=>{const pe=[...ae.massnahmen];pe[U]={...P,verantwortlich:ce.target.value},Ke("massnahmen",pe)},title:`Verantwortlich ${U+1}`}),o.jsx("button",{type:"button",className:"px-2 h-9 text-xs rounded border bg-white hover:bg-gray-50",title:"Als Aufgabe anlegen (mit Protokoll-Bezug)",onClick:()=>createTaskFromMeasure(U),disabled:h,children:""})]})}),o.jsx("div",{className:"col-span-1 p-2 flex items-center justify-center",children:o.jsx("input",{tabIndex:-1,type:"checkbox",name:`m_done_${U}`,value:"1",checked:!!P.done,onChange:ce=>{const pe=[...ae.massnahmen];pe[U]={...P,done:ce.target.checked},Ke("massnahmen",pe)},title:"Erledigt umschalten"})})]},U)),o.jsx("datalist",{id:"dl-ver",children:de.map(P=>o.jsx("option",{value:P},P))})]}),o.jsx("div",{className:"col-span-12 border-t-2 p-2",children:o.jsx("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm",children:Wa?o.jsxs(o.Fragment,{children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:Yt,onChange:P=>Jt(P.target.checked),disabled:!ve||!di,title:fi}),o.jsx("span",{children:"besttigt:"})]}),Yt&&zr.length>0&&o.jsx("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-red-600",children:zr.map((P,U)=>o.jsx("span",{className:U===0?"text-sm font-semibold":void 0,children:P},U))})]}):Yt&&zr.length>0?o.jsx("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-red-600 text-xs",children:zr.map((P,U)=>o.jsx("span",{className:U===0?"font-semibold":void 0,children:P},U))}):o.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-xs text-gray-500",children:[o.jsx("span",{className:"font-medium text-gray-700",children:dg}),o.jsx("span",{children:"Besttigung nur durch berechtigte Rolle mglich"})]})})})]}),o.jsx("button",{type:"submit",className:"hidden",children:"submit"})]})})]})}function J1({open:n,mode:s="create",editNr:i=null,payload:r,onClose:t}){if(x.useEffect(()=>{if(!n)return;const u=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=u}},[n]),!n)return null;const l=()=>{typeof t=="function"&&t()};return o.jsx("div",{className:"fixed inset-0 z-[200] bg-black/50 overflow-y-auto",children:o.jsx("div",{className:"min-h-full flex items-center justify-center p-2 md:p-4",children:o.jsxs("div",{className:"relative w-full max-w-5xl max-h-[calc(100vh-1rem)] md:max-h-[calc(100vh-2rem)] rounded-2xl shadow-2xl bg-white flex flex-col",children:[o.jsx("button",{type:"button",onClick:l,className:"absolute right-3 top-3 z-10 rounded-full bg-white/90 px-3 py-1 text-sm font-medium shadow hover:bg-white",title:"Meldung schlieen",children:""}),o.jsx("div",{className:"flex-1 overflow-y-auto pt-10 md:pt-12 px-2 md:px-4 pb-4",children:o.jsx(q1,{mode:s,editNr:s==="edit"?i:null,onRequestClose:l,onSaved:l,taskPrefillPayload:s==="create"?r:null})})]})})})}const X1={high:"bg-red-100 border-red-300 text-red-800",medium:"bg-yellow-100 border-yellow-300 text-yellow-800",low:"bg-green-100 border-green-300 text-green-800"},vg={low:"Gering",medium:"Mittel",high:"Hoch",critical:"Kritisch"},Z1={low:"text-green-600",medium:"text-yellow-600",high:"text-orange-600",critical:"text-red-600"},Cd=0;function eC(n){return n==null?null:n<=0?"< 1 Min":n===1?"1 Min":`${n} Min`}function tC(n,s=5){const i=Number.isFinite(Number(s))?Number(s):5,r=Number(n);return!Number.isFinite(r)||r<Cd?Math.max(Cd,Math.floor(i)):Math.max(Cd,Math.floor(r))}function nC({suggestion:n,onFeedback:s,onEdit:i,onCreateTask:r,onDismiss:t}){const[l,u]=x.useState(!1),[d,p]=x.useState(n.title),[h,v]=x.useState(n.description),[y,N]=x.useState(""),[C,k]=x.useState(null),E=()=>{u(!1),i?.(n.id,{title:d,description:h})},j=async $=>{k($),await s?.(n.id,$,y,{title:d,description:h},{title:n.title,description:n.description,targetRole:n.targetRole}),$||t?.(n.id)},I=()=>{r?.({title:d,description:h,priority:n.priority,category:n.category,reasoning:n.reasoning,suggestionId:n.id})};return o.jsxs("div",{className:`rounded-lg border p-3 mb-2 ${X1[n.priority]||"bg-gray-50 border-gray-200"}`,children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1",children:[l?o.jsx("input",{type:"text",value:d,onChange:$=>p($.target.value),className:"w-full text-sm font-semibold px-2 py-1 rounded border"}):o.jsx("h4",{className:"text-sm font-semibold",children:n.title}),o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${n.priority==="high"?"bg-red-200":n.priority==="medium"?"bg-yellow-200":"bg-green-200"}`,children:n.priority==="high"?"Hoch":n.priority==="medium"?"Mittel":"Niedrig"})]}),!C&&o.jsx("button",{onClick:()=>u(!l),className:"text-xs text-gray-500 hover:text-gray-700",title:l?"Abbrechen":"Bearbeiten",children:l?"":""})]}),l?o.jsx("textarea",{value:h,onChange:$=>v($.target.value),className:"w-full mt-2 text-xs px-2 py-1 rounded border resize-none",rows:3}):o.jsx("p",{className:"text-xs mt-1 opacity-80",children:n.description}),n.reasoning&&o.jsx("p",{className:"text-xs mt-1 italic text-gray-600",children:n.reasoning}),l&&o.jsxs("div",{className:"mt-2",children:[o.jsx("input",{type:"text",placeholder:"Anmerkungen (optional)",value:y,onChange:$=>N($.target.value),className:"w-full text-xs px-2 py-1 rounded border"}),o.jsx("button",{onClick:E,className:"mt-1 text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Speichern"})]}),C?o.jsx("div",{className:"text-xs mt-2 pt-2 border-t border-gray-200 text-center",children:C?o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-green-600 block",children:"Danke! Vorschlag wird gespeichert."}),o.jsx("button",{onClick:I,className:"text-xs py-1 px-3 rounded bg-blue-500 text-white hover:bg-blue-600",children:"Aufgabe erstellen"})]}):o.jsx("span",{className:"text-gray-500",children:"Feedback erfasst."})}):o.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-gray-200",children:[o.jsx("button",{onClick:()=>j(!0),className:"flex-1 text-xs py-1 px-2 rounded bg-green-500 text-white hover:bg-green-600",title:"Als hilfreich markieren",children:"Hilfreich"}),o.jsx("button",{onClick:I,className:"flex-1 text-xs py-1 px-2 rounded bg-blue-500 text-white hover:bg-blue-600",title:"Aufgabe aus diesem Vorschlag erstellen",children:"Aufgabe erstellen"}),o.jsx("button",{onClick:()=>j(!1),className:"flex-1 text-xs py-1 px-2 rounded bg-gray-400 text-white hover:bg-gray-500",title:"Als nicht hilfreich markieren und ausblenden",children:"Nicht hilfreich"})]})]})}function rC({role:n,onQuestionAsked:s,analysisInProgress:i}){const[r,t]=x.useState(""),[l,u]=x.useState(!1),[d,p]=x.useState(null),[h,v]=x.useState(!1),y=l||i,N=async()=>{if(!(!r.trim()||l||i)){u(!0),p(null),v(!1);try{const k=await fetch(bn("/api/situation/question"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:r.trim(),role:n})}),E=k.headers.get("content-type")||"";if(!k.ok){const I=E.includes("application/json")?(await k.json().catch(()=>({}))).error||`HTTP ${k.status}`:`Server-Fehler: ${k.status} ${k.statusText}`;p({error:I});return}if(!E.includes("application/json")){p({error:"Server hat keine gltige JSON-Antwort geliefert"});return}const j=await k.json();j.error?p({error:j.error}):(p(j),s?.(j))}catch(k){p({error:String(k.message||k)})}finally{u(!1)}}},C=async(k,E="")=>{if(d?.questionId){v(!0);try{await fetch(bn("/api/situation/question/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:d.questionId,question:d.question||r,answer:d.answer,helpful:k,correction:E})})}catch{}}};return o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-300",children:[o.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Frage stellen"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:r,onChange:k=>t(k.target.value),placeholder:i?"Bitte warten - Analyse luft...":"Was muss ich als nchstes tun?",className:"flex-1 text-sm px-3 py-2 rounded border",onKeyDown:k=>k.key==="Enter"&&N(),disabled:y}),o.jsx("button",{onClick:N,disabled:y||!r.trim(),className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",title:i?"KI-Analyse luft - bitte warten":"Frage stellen",children:l?"...":i?"":"Fragen"})]}),i&&o.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"KI-Analyse luft gerade - Fragen werden nach Abschluss beantwortet"}),d&&o.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:d.error?o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-red-600",children:d.error}),d.debug&&o.jsxs("details",{className:"mt-2 text-xs text-gray-500",children:[o.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Debug-Info"}),o.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded overflow-auto",children:JSON.stringify(d.debug,null,2)})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:d.answer}),d.sources&&d.sources.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200",children:o.jsxs("details",{className:"text-xs text-gray-500",children:[o.jsxs("summary",{className:"cursor-pointer hover:text-gray-700",children:[" ",d.sources.length," Quelle",d.sources.length!==1?"n":""," verwendet",d.confidence&&` (${Math.round(d.confidence*100)}% Konfidenz)`]}),o.jsx("ul",{className:"mt-1 ml-4 list-disc",children:d.sources.map((k,E)=>o.jsxs("li",{className:"text-gray-600",children:[o.jsx("span",{className:"font-medium",children:k.fileName}),k.relevance&&o.jsxs("span",{className:"text-gray-400",children:[" (",k.relevance,"%)"]})]},E))})]})}),!h&&o.jsxs("div",{className:"flex gap-2 mt-2 pt-2 border-t border-blue-200",children:[o.jsx("button",{onClick:()=>C(!0),className:"flex-1 text-xs py-1 px-2 rounded bg-green-500 text-white hover:bg-green-600",children:"Hilfreich"}),o.jsx("button",{onClick:()=>C(!1),className:"flex-1 text-xs py-1 px-2 rounded bg-gray-400 text-white hover:bg-gray-500",children:"Nicht hilfreich"})]}),h&&o.jsx("p",{className:"text-xs text-center mt-2 text-green-600",children:"Danke!"})]})})]})}const cy="dismissed_ai_suggestions";function aC(){try{const n=localStorage.getItem(cy);return n?JSON.parse(n):[]}catch{return[]}}function sC(n){try{localStorage.setItem(cy,JSON.stringify(n))}catch{}}function iC({currentRole:n="LTSTB",enabled:s=!0,incidentOptions:i=[]}){const[r,t]=x.useState(!1),[l,u]=x.useState(!0),[d,p]=x.useState(()=>n&&n.trim()?n.trim().toUpperCase():"LTSTB"),[h,v]=x.useState(null),[y,N]=x.useState(!1),[C,k]=x.useState(null),E=x.useRef(null),[j,I]=x.useState({enabled:!0,intervalMinutes:5}),$=s&&j.enabled,[Y,B]=x.useState(()=>aC()),[Z,ee]=x.useState(!1),[J,re]=x.useState(null);x.useEffect(()=>{n&&n.trim()&&p(n.trim().toUpperCase())},[n]);const[te,ie]=x.useState(!1),[ne,Ce]=x.useState(null),ve=x.useCallback(async(F=!1,b=!1)=>{if($){N(!0),k(null);try{let L=bn(`/api/situation/analysis?role=${d}`);F?L+="&forceRefresh=true":b&&(L+="&cacheOnly=true");const oe=await fetch(L),he=oe.headers.get("content-type")||"";if(!oe.ok){const ke=he.includes("application/json")?(await oe.json().catch(()=>({}))).error||`HTTP ${oe.status}`:`Server-Fehler: ${oe.status} ${oe.statusText}`;k(ke);return}if(!he.includes("application/json")){k("Server hat keine gltige JSON-Antwort geliefert");return}const je=await oe.json();if(je.timer&&Ce(je.timer),je.noCache){v(null),ie(je.analysisInProgress||je.timer?.analysisInProgress||!1);return}if(je.error){je.isActive===!1?k("Analyse nicht verfgbar (Simulation luft)"):k(je.error);return}v(je),ie(je.analysisInProgress||je.timer?.analysisInProgress||!1)}catch(L){k(String(L.message||L))}finally{N(!1)}}},[d,$]);x.useEffect(()=>{if(!r||!$)return;let F=null;try{F=new EventSource(bn("/api/events")),F.addEventListener("analysis_complete",b=>{try{const L=JSON.parse(b.data);L.roles&&L.roles.includes(d)&&ve(!1,!0)}catch{}}),F.onerror=()=>{}}catch{}return()=>{F&&F.close()}},[r,$,d,ve]),x.useEffect(()=>{if(!r||!$){E.current&&(clearInterval(E.current),E.current=null);return}return ve(!1,!0),E.current=setInterval(()=>{ve(!1,!0)},1e4),()=>{E.current&&(clearInterval(E.current),E.current=null)}},[r,$,ve]),x.useEffect(()=>{let F=!0;return(async()=>{try{const L=await fetch(bn("/api/situation/analysis-config"),{credentials:"include",cache:"no-store"});if(!L.ok)return;const oe=await L.json().catch(()=>({})),he=tC(oe?.intervalMinutes,5);if(!F)return;I({enabled:!!oe?.enabled,intervalMinutes:he})}catch{}})(),()=>{F=!1}},[]);const Te=async(F,b,L,oe,he)=>{try{await fetch(bn("/api/situation/suggestion/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suggestionId:F,analysisId:h?.analysisId,helpful:b,userNotes:L,editedContent:oe,userRole:d,suggestionTitle:he?.title||oe?.title,suggestionDescription:he?.description||oe?.description,targetRole:he?.targetRole||d})})}catch{}},Ee=x.useCallback(F=>{B(b=>{const L=[...b,F];return sC(L),L})},[]),be=x.useCallback(F=>{re(F),ee(!0)},[]),we=x.useCallback(async F=>{try{(await fetch(`/api/aufgaben?role=${d}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...F,meta:{fromAiSuggestion:!0,suggestionId:J?.suggestionId}})})).ok||console.error("Fehler beim Erstellen der Aufgabe")}catch(b){console.error("Fehler beim Erstellen der Aufgabe:",b)}if(J?.suggestionId)try{await fetch(bn("/api/situation/suggestion/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({suggestionId:J.suggestionId,analysisId:h?.analysisId,helpful:!0,userNotes:"Aufgabe erstellt",editedContent:{title:F.title,description:F.desc},userRole:d})})}catch{}ee(!1),re(null)},[d,h?.analysisId,J?.suggestionId]),O=x.useMemo(()=>h||null,[h]),W=x.useMemo(()=>h?.situation||O?.situation,[h,O]);return $?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`fixed bottom-0 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ${r?"translate-y-full opacity-0":"translate-y-0 opacity-100"}`,children:o.jsxs("button",{onClick:()=>{t(!0),u(!1)},className:"bg-blue-600 text-white px-6 py-2 rounded-t-lg shadow-lg hover:bg-blue-700 flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:""}),o.jsx("span",{className:"text-sm font-medium",children:"KI-Analyse"}),h?.situation?.severity&&o.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${h.situation.severity==="critical"?"bg-red-500":h.situation.severity==="high"?"bg-orange-500":h.situation.severity==="medium"?"bg-yellow-500":"bg-green-500"}`,children:vg[h.situation.severity]})]})}),o.jsx("div",{className:`fixed bottom-0 left-0 right-0 z-40 transform transition-transform duration-300 ease-out ${r?l?"translate-y-[calc(100%-3rem)]":"translate-y-0":"translate-y-full"}`,style:{maxHeight:"70vh"},children:o.jsxs("div",{className:"bg-white rounded-t-xl shadow-2xl border-t border-gray-200 flex flex-col",style:{height:"70vh"},children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-t-xl cursor-pointer",onClick:()=>u(!l),children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"KI-Situationsanalyse"}),o.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 text-xs opacity-90",children:[te&&o.jsxs("span",{className:"flex items-center gap-1 text-yellow-300",children:[o.jsx("span",{className:"animate-pulse",children:""})," Analyse luft..."]}),!te&&ne?.isAutomatic&&ne?.nextAnalysisInMinutes!==null&&o.jsxs("span",{className:"flex items-center gap-1 text-blue-200",children:[o.jsx("span",{children:""})," Nchste Analyse in: ",o.jsx("span",{className:"font-medium",children:eC(ne.nextAnalysisInMinutes)})]}),h?.timestamp?o.jsxs("span",{children:["Analyse vom: ",o.jsx("span",{className:"font-medium",children:new Date(h.timestamp).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}):!te&&o.jsx("span",{className:"text-gray-300",children:"Noch keine Analyse durchgefhrt"}),W&&o.jsxs("span",{children:["Schweregrad: ",o.jsx("span",{className:"font-medium",children:vg[W.severity]})]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[y&&o.jsx("span",{className:"text-xs animate-pulse",children:"Lade..."}),o.jsx("button",{onClick:F=>{F.stopPropagation(),te||ve(!0)},className:`p-1 hover:bg-white/20 rounded ${te?"opacity-50 cursor-not-allowed":""}`,title:te?"Analyse luft bereits...":"Neu analysieren",disabled:te,children:te?o.jsx("span",{className:"animate-spin inline-block",children:""}):""}),o.jsx("button",{onClick:F=>{F.stopPropagation(),u(!l)},className:"p-1 hover:bg-white/20 rounded",title:l?"Maximieren":"Minimieren",children:l?"":""}),o.jsx("button",{onClick:F=>{F.stopPropagation(),t(!1)},className:"p-1 hover:bg-white/20 rounded",title:"Schlieen",children:""})]})]}),!l&&o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[o.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50 px-4 py-2",children:o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Analyse fr Rolle: ",o.jsx("span",{className:"text-blue-600 font-semibold",children:d})]})}),W&&o.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx("span",{className:`text-lg ${Z1[W.severity]}`,children:W.severity==="critical"?"":W.severity==="high"?"":W.severity==="medium"?"":""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm",children:W.summary}),W.criticalFactors?.length>0&&o.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:W.criticalFactors.map((F,b)=>o.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:F},b))})]})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[C?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("p",{className:"text-red-600 mb-2",children:C}),o.jsx("button",{onClick:()=>ve(!0),disabled:te,className:"text-sm text-blue-600 hover:underline disabled:opacity-50",children:te?"Analyse luft...":"Erneut versuchen"})]}):y&&!O?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin text-3xl mb-2",children:""}),o.jsx("p",{className:"text-gray-500",children:"Lade Analyse..."})]}):!h&&!te?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsxs("p",{className:"mb-2",children:["Noch keine Analyse fr ",d," durchgefhrt."]}),o.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Analysen werden automatisch im eingestellten Intervall durchgefhrt."}),o.jsx("button",{onClick:()=>ve(!0),disabled:te,className:"text-sm px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Jetzt analysieren"})]}):!h&&te?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin text-3xl mb-2",children:""}),o.jsx("p",{className:"text-gray-500",children:"Analyse luft..."}),o.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Das Panel wird automatisch aktualisiert wenn die Analyse fertig ist."})]}):O?.suggestions?.length>0?o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Handlungsvorschlge fr ",d]}),O.suggestions.filter(F=>!Y.includes(F.id)).map(F=>o.jsx(nC,{suggestion:F,onFeedback:Te,onCreateTask:be,onDismiss:Ee},F.id)),O.suggestions.filter(F=>!Y.includes(F.id)).length===0&&o.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Alle Vorschlge wurden bearbeitet."})]}):o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsxs("p",{children:["Keine Vorschlge fr ",d," verfgbar."]}),h?.timestamp&&o.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Letzte Analyse: ",new Date(h.timestamp).toLocaleString("de-DE")]}),o.jsx("button",{onClick:()=>ve(!0),disabled:te,className:"mt-4 text-sm px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:te?"Analyse luft...":"Neu analysieren"})]}),o.jsx(rC,{role:d,analysisInProgress:te})]})]})]})}),r&&!l&&o.jsx("div",{className:"fixed inset-0 bg-black/20 z-30",onClick:()=>u(!0)}),o.jsx(Xv,{open:Z,onClose:()=>{ee(!1),re(null)},onAdded:we,incidentOptions:i,initialTitle:J?.title||"",initialDesc:J?.description||"",initialResponsible:d,initialType:J?.category||"KI-Vorschlag"})]}):null}let Vd=localStorage.getItem("soundEnabled")==="1",vr=null;const yg=window.AudioContext||window.webkitAudioContext,Ed=yg?new yg:null;function oC(){vr||(vr=new Audio("/sounds/bahnhof.mp3"),vr.preload="auto");const n=async()=>{try{Ed&&Ed.state!=="running"&&await Ed.resume(),vr&&(vr.muted=!0,await vr.play(),vr.pause(),vr.currentTime=0,vr.muted=!1),Vd=!0,localStorage.setItem("soundEnabled","1"),window.removeEventListener("pointerdown",n),window.removeEventListener("keydown",n),window.dispatchEvent(new CustomEvent("sound:unlocked"))}catch{}};Vd||(window.addEventListener("pointerdown",n,{once:!0}),window.addEventListener("keydown",n,{once:!0}))}async function lC(){if(vr||oC(),!Vd){window.dispatchEvent(new CustomEvent("sound:needsUnlock"));return}try{vr.currentTime=0,await vr.play()}catch{}}function cC({className:n=""}){const{logout:s,user:i}=ko(),[r,t]=x.useState(!1),l=async()=>{if(!r){t(!0);try{await s?.()}catch(d){console.error(d)}try{sessionStorage.clear()}catch{}try{localStorage.clear()}catch{}t(!1),window.location.href="/user-login"}},u=i?.displayName?`Abmelden (${i.displayName})`:"Abmelden";return o.jsxs("button",{type:"button",onClick:l,disabled:r,title:u,"aria-label":u,className:[r?"cursor-wait":"",n].filter(Boolean).join(" "),children:[o.jsx("span",{className:"sr-only",children:u}),r?o.jsxs("svg",{className:"animate-spin",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{className:"opacity-40",cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),o.jsx("path",{d:"M21 12a9 9 0 0 1-9 9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}):o.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M13 4H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M17 16l4-4-4-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M9 12h12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})}function po({helpHref:n,helpLabel:s="i",helpTitle:i="Hilfe",helpClassName:r="",navButtons:t=[],onAdd:l,addLabel:u="",addTitle:d="Neuen Eintrag anlegen",addClassName:p="",addDisabled:h=!1,className:v="",logoffClassName:y="",children:N}){const C=!!n,k=typeof l=="function",E=Array.isArray(t)?t.filter(I=>I&&I.label&&(typeof I.onClick=="function"||I.href)):[],j=["fixed","bottom-4","right-4","flex","flex-col","items-end","gap-3","z-50","pointer-events-none",v].filter(Boolean).join(" ");return o.jsxs("div",{className:j,children:[k&&o.jsx("button",{type:"button",onClick:l,disabled:h,title:d||u,"aria-label":d||u,className:["pointer-events-auto","floating-action","fab",p].filter(Boolean).join(" "),children:o.jsx("span",{"aria-hidden":"true",children:u})}),E.map((I,$)=>{const Y=I.label,B=I.title||I.label,Z=["pointer-events-auto","floating-action","nav-btn",I.className].filter(Boolean).join(" ");return I.href?o.jsx("a",{href:I.href,title:B,"aria-label":B,className:Z,children:o.jsx("span",{"aria-hidden":"true",children:Y})},I.key||$):o.jsx("button",{type:"button",onClick:I.onClick,title:B,"aria-label":B,className:Z,children:o.jsx("span",{"aria-hidden":"true",children:Y})},I.key||$)}),N,C&&o.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",title:i||s,"aria-label":i||s,className:["pointer-events-auto","floating-action","help-btn",r].filter(Boolean).join(" "),children:o.jsx("span",{"aria-hidden":"true",children:s})}),o.jsx(cC,{className:`pointer-events-auto floating-action logoff-btn ${y}`.trim()})]})}const Ve={NEW:"Neu",IN_PROGRESS:"In Bearbeitung",DONE:"Erledigt"},Fl=[Ve.NEW,Ve.IN_PROGRESS,Ve.DONE],xg=["neu","in-bearbeitung","erledigt"],uC=xf(),dC=["LTSTB","LTSTBSTV"],fC="S3",pC="task-card",mC=[{key:"einsatz",label:"E",title:"Zur Einsatzbersicht",onClick:()=>{window.location.href="/"}},{key:"meldestelle",label:"M",title:"Zur Meldestelle",onClick:()=>{window.location.href="/#/protokoll"}}],wg=n=>wf(n),qs=n=>{if(n==null)return"";const s=String(n).trim();if(!s)return"";if(/^\d+$/.test(s)){const i=String(Number(s));return i==="0"?"0":i}return s},hC=n=>{const s=[],i=new Set;for(const r of Array.isArray(n)?n:[]){const t=qs(r);!t||i.has(t)||(i.add(t),s.push(t))}return s},uy=n=>{if(!n)return null;const s=qs(n.nr??n.id??n.value);if(!s)return null;const i={nr:s},r=(t,l)=>{const u=n[t]??void 0;if(u==null)return;const d=String(u).trim();d&&(i[t]=d)};return r("title"),r("information"),r("infoTyp"),r("datum"),r("zeit"),r("anvon"),i},gC=n=>{const s=[],i=new Set;for(const r of Array.isArray(n)?n:[]){const t=uy(r);!t||i.has(t.nr)||(i.add(t.nr),s.push(t))}return s},vC=()=>({options:[],map:new Map});function yC(n){const s=[],i=new Map;if(n?.columns&&typeof n.columns=="object"){const r=new Set,t=[...xg,...Object.keys(n.columns).filter(l=>!xg.includes(l))];for(const l of t){if(!n.columns[l]||r.has(l))continue;r.add(l);const u=n.columns[l],d=u?.name||l,p=Array.isArray(u?.items)?u.items:[];for(const h of p){const v=String(h?.id??"").trim();if(!v)continue;const y=[];h?.content&&y.push(String(h.content)),h?.ort&&y.push(String(h.ort));const N=y.length?y.join("  "):`#${v}`,C={id:v,label:N,statusKey:l,statusName:d,content:h?.content??"",ort:h?.ort??""};i.set(v,C),s.push(C)}}}return{options:s,map:i}}const bg=n=>String(n??"").normalize("NFKD").toLowerCase().replace(/\s+/g," ").trim(),xC=n=>{if(!n)return"";const s=[],i=String(n.title??"").trim(),r=String(n.desc??"").trim(),t=String(n.responsible??"").trim();return i&&s.push(i),r&&s.push(r),t&&s.push(`Verantwortlich: ${t}`),s.join(`

`).trim()};function wC(){try{const n=typeof window<"u"?window:{},s=n.localStorage,i=[()=>n.__APP_AUTH__?.user,()=>n.__USER__,()=>s&&JSON.parse(s.getItem("auth.user")||"null")||null,()=>s&&JSON.parse(s.getItem("user")||"null")||null];for(const r of i){const t=r?.();if(t)return t}}catch{}return null}function bC(n){if(!n)return null;if(typeof n.role=="string")return n.role.trim().toUpperCase();if(n.role&&typeof n.role.id=="string")return n.role.id.trim().toUpperCase();if(Array.isArray(n.roles)&&n.roles.length){const s=n.roles[0];if(typeof s=="string")return s.trim().toUpperCase();if(s&&typeof s.id=="string")return s.id.trim().toUpperCase()}return null}function SC(n){if(!n)return[];const s=new Set,i=r=>{if(!r)return;const t=String(r).trim().toUpperCase();t&&s.add(t)};if(typeof n.role=="string"?i(n.role):n.role&&typeof n.role.id=="string"&&i(n.role.id),Array.isArray(n.roles))for(const r of n.roles)typeof r=="string"?i(r):r&&typeof r.id=="string"&&i(r.id);return[...s]}const Sg=()=>crypto?.randomUUID?.()||`${Date.now()}-${Math.random().toString(36).slice(2,8)}`,is=n=>n?`?role=${encodeURIComponent(n)}`:"",os=n=>n?{"X-Role-Id":n}:{};function NC(n){return n===Ve.NEW?Ve.IN_PROGRESS:(n===Ve.IN_PROGRESS,Ve.DONE)}function kC(){const[n,s]=x.useState([]),[i,r]=x.useState(()=>vC()),[t,l]=x.useState([]),[u,d]=x.useState(!1),[p,h]=x.useState(""),[v,y]=x.useState(""),[N,C]=x.useState(""),[k,E]=x.useState(!1),[j,I]=x.useState(!1),[$,Y]=x.useState("create"),[B,Z]=x.useState(null),[ee,J]=x.useState(null),[re,te]=x.useState(null),[ie,ne]=x.useState(!1),[Ce,ve]=x.useState(()=>({defaultDueOffsetMinutes:uC})),Te=iy(),Ee=Te.running||Te.paused,be=wC(),we=x.useMemo(()=>bC(be),[be]),O=x.useMemo(()=>SC(be),[be]),W=x.useMemo(()=>new Set(O),[O]),[F,b]=x.useState(()=>we||""),L=x.useRef(!1),oe=x.useRef(we),[he,je]=x.useState([]),{roles:ke}=sy(),Le=x.useMemo(()=>ke.some(A=>A==="LTSTB"||A==="LTSTBSTV"),[ke]),Se=O.length>1,ue=x.useMemo(()=>!!(Se||dC.some(A=>Gs(A,be))||!Le&&Gs(fC,be)),[be,Le,Se]),xe=he,[He,Xe]=x.useState(new Set),gt=x.useRef(new Set),Nt=x.useRef(new Set),Ze=x.useCallback(A=>{if(!A)return null;const le=A.status,Me=[Ve.NEW,Ve.IN_PROGRESS,Ve.DONE].includes(le)?le:(()=>{const Je=typeof le=="string"?le.toLowerCase():"";return Je.startsWith("in")?Ve.IN_PROGRESS:Je.startsWith("erled")?Ve.DONE:Ve.NEW})(),Oe=gC(A.linkedProtocols??A.meta?.linkedProtocols??[]),$e=hC(A.linkedProtocolNrs??A.meta?.linkedProtocolNrs??Oe.map(Je=>Je.nr)),nt=A.relatedIncidentId!=null&&A.relatedIncidentId!==""?String(A.relatedIncidentId):null;return{id:A.id??A._id??A.key??Sg(),clientId:A.clientId??null,title:A.title??A.name??"Aufgabe",type:A.type??A.category??"",status:Me,responsible:A.responsible??A.verantwortlich??"",desc:A.desc??A.beschreibung??"",dueAt:A.dueAt??A.due_at??A.deadline??A.frist??null,createdAt:A.createdAt??null,updatedAt:A.updatedAt??null,meta:A.meta??{},originProtocolNr:A.originProtocolNr??null,relatedIncidentId:nt,incidentTitle:A.incidentTitle??null,linkedProtocolNrs:$e,linkedProtocols:Oe}},[]),Ft=x.useCallback(async(A=null)=>{if(!A?.aborted)try{const le=await k1();if(A?.aborted)return;r(yC(le))}catch{if(A?.aborted)return}},[]),Et=x.useCallback(async(A=null)=>{if(!F){l([]);return}try{const le=await fetch(`/api/aufgaben/protocols${is(F)}`,{cache:"no-store",headers:{...os(F)},signal:A});if(!le.ok){if(le.status===403){no(),l([]);return}throw new Error(`HTTP ${le.status}`)}const Me=await le.json();if(A?.aborted)return;const Oe=Array.isArray(Me?.items)?Me.items:[],$e=new Set,nt=[];for(const Je of Oe){const kt=uy(Je)||{},at=kt.nr||qs(Je?.nr??Je?.id??Je?.value);!at||$e.has(at)||($e.add(at),nt.push({nr:at,title:kt.title??Je?.title??null,infoTyp:kt.infoTyp??Je?.infoTyp??null,datum:kt.datum??Je?.datum??null,zeit:kt.zeit??Je?.zeit??null,anvon:kt.anvon??Je?.anvon??null,information:kt.information??Je?.information??null}))}nt.sort((Je,kt)=>{const at=Number(Je.nr),Fn=Number(kt.nr);return Number.isFinite(at)&&Number.isFinite(Fn)?Fn-at:String(kt.nr).localeCompare(String(Je.nr),"de",{numeric:!0})}),l(nt)}catch(le){if(A?.aborted||le?.name==="AbortError")return;l([])}},[F]);x.useEffect(()=>{let A=!0;return(async()=>{if(await ny(),!A)return;ne(ry("aufgabenboard",be));const Oe=[...(d1()||[]).filter($e=>W.has($e.id)).filter($e=>{const nt=String($e?.apps?.aufgabenboard||"").toLowerCase();return nt==="edit"||nt==="view"}).map($e=>({id:$e.id,label:$e.label||$e.id}))].sort(($e,nt)=>String($e?.label||$e?.id||"").localeCompare(String(nt?.label||nt?.id||""),"de",{sensitivity:"base"}));je(Oe)})(),()=>{A=!1}},[be,W]),x.useEffect(()=>{oe.current!==we&&(oe.current=we,L.current=!1),L.current||b(we||"")},[we]),x.useEffect(()=>{if(!he.length){F&&(L.current=!1,b(""));return}he.some(le=>le.id===F)||(L.current=!1,b(he[0].id))},[he,F]);const ft=x.useCallback(A=>{if(!ue){A?.preventDefault?.();return}const le=String(A.target.value||"").trim().toUpperCase();L.current=!0,b(le)},[ue]);x.useEffect(()=>{if(!F)return;let A=!0;return(async()=>{try{const le=await fetch(`/api/aufgaben/config${is(F)}`,{cache:"no-store",headers:os(F)});if(!le.ok)throw le.status===403?Qi():new Error(`HTTP ${le.status}`);const Me=await le.json();if(!A)return;ve({defaultDueOffsetMinutes:wg(Me?.defaultDueOffsetMinutes)})}catch{if(!A)return;ve(le=>({defaultDueOffsetMinutes:wg(le?.defaultDueOffsetMinutes)}))}})(),()=>{A=!1}},[F]),x.useEffect(()=>{const A=new AbortController;Ft(A.signal);const le=setInterval(()=>{Ft(A.signal)},3e4);return()=>{A.abort(),clearInterval(le)}},[Ft]),x.useEffect(()=>{if(!F){l([]);return}const A=new AbortController;return Et(A.signal),()=>A.abort()},[F,Et]),x.useEffect(()=>{if(!re)return;const A=new AbortController;return Et(A.signal),()=>A.abort()},[re?.id,Et]);const[We,st]=x.useState(0);x.useEffect(()=>{const A=setInterval(()=>st(le=>le+1),3e4);return()=>clearInterval(A)},[]);const[Ae,At]=x.useState(null),[Bt,qt]=x.useState(null),$t=x.useRef(null),Kt=x.useRef(null),q=x.useRef(0),ye=h0(Xm(Wg,{activationConstraint:{distance:6}}),Xm(Hg,{activationConstraint:{delay:120,tolerance:6}})),xt=x.useRef(!0);async function pt(){if(!F){h("Keine Rolle gefunden  bitte anmelden."),s([]);return}d(!0),h("");try{const A=await fetch(`/api/aufgaben${is(F)}`,{cache:"no-store",headers:os(F)});if(!A.ok)throw A.status===403?Qi():new Error(`HTTP ${A.status}`);const le=await A.json(),Oe=(Array.isArray(le?.items)?le.items:[]).map($e=>Ze($e)).filter($e=>$e);s(Oe);try{const $e=new Set(Oe.map(at=>String(at.id))),nt=gt.current,Je=[...$e].filter(at=>!nt.has(at)),kt=xt.current?[]:Je.filter(at=>!Nt.current.has(at));if(kt.length){Xe(new Set(kt));try{await lC()}catch{}setTimeout(()=>Xe(new Set),9e3)}gt.current=$e,xt.current=!1}catch{}}catch(A){h(String(A?.message||A))}finally{d(!1)}}x.useEffect(()=>{gt.current=new Set,xt.current=!0,Xe(new Set),pt()},[F]),x.useEffect(()=>{if(!F)return;const A=setInterval(()=>{const le=Date.now()-q.current;!u&&le>5e3&&pt()},3e4);return()=>clearInterval(A)},[F,u]);const rt=x.useCallback(async A=>{const le=await fetch(`/api/aufgaben/${encodeURIComponent(A.id)}/edit${is(F)}`,{method:"POST",headers:{"Content-Type":"application/json",...os(F)},credentials:"include",body:JSON.stringify(A)});if(!le.ok)throw le.status===403?Qi():new Error(`HTTP ${le.status}`);const Me=await le.json();return Me?.item?Ze(Me.item):null},[F,Ze]),rn=x.useCallback(async A=>{try{let Me=await rt(A);s(Oe=>{const $e=Oe.find(Je=>Je.id===A.id),nt=Me||Ze({...$e||{},...A});return nt?(Me=nt,Oe.map(Je=>Je.id===nt.id?nt:Je)):Oe}),te(Oe=>!Oe||Oe.id!==A.id?Oe:Me||Oe)}catch(le){throw h(String(le?.message||le)),le}},[rt,Ze]);async function ot({id:A,toStatus:le,beforeId:Me}){try{const Oe=await fetch(`/api/aufgaben/reorder${is(F)}`,{method:"POST",headers:{"Content-Type":"application/json",...os(F)},body:JSON.stringify({id:A,toStatus:le,beforeId:Me,role:F})});return Oe.status===403?(no(),!1):Oe.ok}catch{return!1}}async function en({id:A,toStatus:le}){try{const Me=await fetch(`/api/aufgaben/${encodeURIComponent(A)}/status${is(F)}`,{method:"POST",headers:{"Content-Type":"application/json",...os(F)},body:JSON.stringify({toStatus:le,role:F})});return Me.status===403?(no(),!1):Me.ok}catch{return!1}}async function Wn(A){const le=Sg(),Oe=(A?.relatedIncidentId!=null?String(A.relatedIncidentId).trim():"")||null,$e=Oe?i.map.get?.(String(Oe)):null,nt=(()=>{const gn=A?.incidentTitle!=null?String(A.incidentTitle).trim():"";return gn||($e?.label?$e.label:null)})(),Je={title:A?.title??"Aufgabe",type:A?.type??"",responsible:A?.responsible??"",desc:A?.desc??"",dueAt:A?.dueAt??null,relatedIncidentId:Oe,incidentTitle:nt,status:Ve.NEW,role:F,clientId:le},kt=await fetch(`/api/aufgaben${is(F)}`,{method:"POST",headers:{"Content-Type":"application/json",...os(F)},body:JSON.stringify(Je)});if(!kt.ok)throw kt.status===403?Qi():new Error(`HTTP ${kt.status}`);const Fn=(await kt.json())?.item||Je,Wt=Ze(Fn);return Wt?.id&&Nt.current.add(String(Wt.id)),Wt}const Pn=x.useMemo(()=>{const A=new Map;for(const le of t){const Me=qs(le?.nr??le?.id??le?.value);Me&&A.set(Me,{...le,nr:Me})}return A},[t]),Q=x.useMemo(()=>{const A=bg(v),le=N?String(N):"";return n.filter(Me=>le&&String(Me?.relatedIncidentId??"")!==le?!1:A?[Me.title,Me.type,Me.responsible,Me.desc,Me.incidentTitle].filter(Boolean).map($e=>bg($e)).some($e=>$e.includes(A)):!0)},[n,v,N]),de=x.useMemo(()=>({[Ve.NEW]:Q.filter(A=>(A.status||Ve.NEW)===Ve.NEW),[Ve.IN_PROGRESS]:Q.filter(A=>A.status===Ve.IN_PROGRESS),[Ve.DONE]:Q.filter(A=>A.status===Ve.DONE)}),[Q]);x.useMemo(()=>{const A=(i.options||[]).map(Oe=>({id:String(Oe.id),label:Oe.label||`#${Oe.id}`,statusName:Oe.statusName||Oe.statusLabel||""})),le=new Set(A.map(Oe=>Oe.id)),Me=[];for(const Oe of n){const $e=Oe?.relatedIncidentId?String(Oe.relatedIncidentId):"";!$e||le.has($e)||(le.add($e),Me.push({id:$e,label:Oe.incidentTitle||`#${$e}`,statusName:""}))}return[...A,...Me].sort((Oe,$e)=>Oe.label.localeCompare($e.label,"de",{sensitivity:"base"}))},[i.options,n]),x.useEffect(()=>{if(!re)return;const A=n.find(le=>le.id===re.id);A&&A!==re&&te(A)},[n,re]);const qe=x.useMemo(()=>({[Ve.NEW]:de[Ve.NEW].map(A=>A.id),[Ve.IN_PROGRESS]:de[Ve.IN_PROGRESS].map(A=>A.id),[Ve.DONE]:de[Ve.DONE].map(A=>A.id)}),[de]),ae=x.useCallback(A=>A?qe[Ve.NEW].includes(A)?Ve.NEW:qe[Ve.IN_PROGRESS].includes(A)?Ve.IN_PROGRESS:qe[Ve.DONE].includes(A)?Ve.DONE:null:null,[qe]),vt=x.useCallback(()=>window.confirm("Sind sie sicher?"),[]),lt=()=>{ie&&E(!0)},Ut=()=>{E(!1)};x.useEffect(()=>{!ie&&k&&E(!1)},[ie,k]);const tt=x.useCallback(A=>{if(!A)return;const le=n.find(Me=>Me.id===A.id);te(le||A)},[n]),Ke=x.useCallback(A=>{if(!A)return;const le=qs(A?.originProtocolNr),Me={source:pC,description:xC(A),title:String(A?.title??"").trim()||null,taskId:A?.id??null,createdAt:A?.createdAt??null,originProtocolNr:le||null};Y("create"),Z(null),J(Me),I(!0)},[]),it=x.useCallback(A=>{const le=qs(A);le&&(te(null),Y("edit"),Z(le),J(null),I(!0))},[]),ct=x.useCallback(A=>{if(!ie)return;const le=NC(A?.status||Ve.NEW);le!==A?.status&&(le===Ve.DONE&&A?.status!==Ve.DONE&&!vt()||(s(Me=>Me.map(Oe=>Oe.id===A.id?{...Oe,status:le}:Oe)),en({id:A.id,toStatus:le})))},[ie,vt]),ut=x.useCallback(({active:A})=>{if(!ie)return;const le=A?.id;$t.current=ae(le),At(n.find(Me=>Me.id===le)||null)},[n,ae,ie]),Yt=x.useCallback(({over:A})=>{if(!A){qt(null);return}Kt.current=A.id;const le=A.id,Me=Fl.includes(le)?le:ae(le);qt(Me||null)},[ae]),wt=x.useCallback(({active:A,over:le})=>{if(!ie)return;At(null),qt(null);const Me=le?.id??Kt.current;if(!Me)return;const Oe=A.id,$e=$t.current||ae(Oe);let nt=Fl.includes(Me)?Me:ae(Me)||$e;if(!$e||!nt)return;if($e!==nt){if(nt===Ve.DONE&&$e!==Ve.DONE&&!vt()){$t.current=null,Kt.current=null;return}const Wt=Fl.includes(Me)?null:Me;s(gn=>gn.map(qn=>qn.id===Oe?{...qn,status:nt}:qn)),q.current=Date.now(),ot({id:Oe,toStatus:nt,beforeId:Wt}),$t.current=null,Kt.current=null;return}const Je=de[nt],kt=Je.findIndex(Wt=>Wt.id===Oe);let at,Fn=null;if(Fl.includes(Me))at=Je.length-1;else{const Wt=Je.findIndex(gn=>gn.id===Me);at=Wt<0?Je.length-1:Wt,Fn=Je[at]?.id??null}if(kt!==-1&&at!==-1&&kt!==at){const Wt=nf(Je,kt,at);s(gn=>[...gn.filter(zr=>zr.status!==nt),...Wt]),q.current=Date.now(),ot({id:Oe,toStatus:nt,beforeId:Fn})}$t.current=null,Kt.current=null},[ae,de,ie,vt]);return o.jsxs("div",{className:"p-5 floating-actions-safe-area",children:[o.jsx(po,{helpHref:"/Hilfe_Aufgabenboard.pdf",helpTitle:"Hilfe  Aufgabenboard",onAdd:lt,addDisabled:!ie,addTitle:ie?"Aufgabe anlegen":"Keine Berechtigung",navButtons:mC}),o.jsx("header",{className:"aufg-header mb-5 flex flex-col gap-3",children:o.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("h1",{className:"text-xl font-extrabold tracking-tight text-slate-900 flex items-center gap-2",children:[Ee&&o.jsx(oy,{className:"h-5 w-5"}),o.jsx("span",{children:"Aufgaben"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Rolle"}),o.jsx("select",{value:F,onChange:ft,className:"role-selector",disabled:!xe.length||!ue,"aria-label":"Rolle auswaehlen",title:ue?F?`Rolle ${F}`:"Rolle auswaehlen":Le?"Nur LtStb oder LtStbStv duerfen Rollen wechseln":"Nur LtStb oder LtStbStv duerfen Rollen wechseln  S3 nur, wenn LtStb abgemeldet",children:xe.map(A=>o.jsx("option",{value:A.id,children:A.label||A.id},A.id))})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2.5 w-full md:w-auto md:ml-auto md:justify-end",children:[o.jsx("input",{value:v,onChange:A=>y(A.target.value),placeholder:"Suche Titel / Typ / Verantwortlich...",className:"search-input w-full sm:w-64 md:w-72 lg:w-80 max-w-full"}),o.jsx("button",{onClick:lt,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",disabled:!ie,title:ie?void 0:"Keine Berechtigung (Aufgabenboard)",children:"+ Neu"}),ie&&o.jsx(Xv,{open:k,onClose:Ut,incidentOptions:i.options,defaultDueOffsetMinutes:Ce.defaultDueOffsetMinutes,onAdded:async A=>{try{const le=await Wn(A);le&&s(Me=>[le,...Me])}catch(le){h(String(le?.message||le))}}}),o.jsx("button",{onClick:()=>{pt(),Ft()},className:"btn-secondary",disabled:u,children:u?"Laedt...":"Aktualisieren"})]})]})}),p&&o.jsx("div",{className:"mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-xl px-4 py-2.5",children:p}),o.jsxs(pw,{sensors:ye,collisionDetection:b0,onDragStart:ut,onDragOver:Yt,onDragEnd:wt,children:[o.jsxs("div",{className:"kanban-grid",children:[o.jsx("div",{className:Bt===Ve.NEW?"drag-over":"",children:o.jsx(id,{id:Ve.NEW,title:"Neu",count:de[Ve.NEW].length,itemIds:de[Ve.NEW].map(A=>A.id),children:de[Ve.NEW].map(A=>o.jsx(Sd,{item:A,onAdvance:ct,onShowInfo:tt,isNew:He.has(String(A.id)),incidentLookup:i.map,onCreateProtocol:Ke,onOpenProtocol:it,tick:We},A.id))})}),o.jsx("div",{className:Bt===Ve.IN_PROGRESS?"drag-over":"",children:o.jsx(id,{id:Ve.IN_PROGRESS,title:"In Bearbeitung",count:de[Ve.IN_PROGRESS].length,itemIds:de[Ve.IN_PROGRESS].map(A=>A.id),children:de[Ve.IN_PROGRESS].map(A=>o.jsx(Sd,{item:A,onAdvance:ct,onShowInfo:tt,isNew:He.has(String(A.id)),incidentLookup:i.map,onCreateProtocol:Ke,onOpenProtocol:it,tick:We},A.id))})}),o.jsx("div",{className:Bt===Ve.DONE?"drag-over":"",children:o.jsx(id,{id:Ve.DONE,title:"Erledigt",count:de[Ve.DONE].length,itemIds:de[Ve.DONE].map(A=>A.id),children:de[Ve.DONE].map(A=>o.jsx(Sd,{item:A,onAdvance:ct,onShowInfo:tt,isNew:He.has(String(A.id)),incidentLookup:i.map,onCreateProtocol:Ke,onOpenProtocol:it,tick:We},A.id))})})]}),o.jsx(Rw,{children:Ae?o.jsxs("div",{className:"drag-overlay rounded-2xl bg-white p-4 w-[300px]",children:[o.jsx("div",{className:"text-[10px] text-slate-400 leading-4 font-medium mb-1",children:Ae.createdAt?new Date(Ae.createdAt).toLocaleString("de-AT",{timeZone:"Europe/Vienna",hour12:!1}):""}),o.jsx("div",{className:"font-bold text-sm text-slate-900 mb-1 truncate",children:Ae.title}),Ae.type&&o.jsx("span",{className:"card-type-badge",children:Ae.type})]}):null})]}),re?o.jsx(o1,{open:!!re,item:re,onClose:()=>te(null),onSave:rn,canEdit:ie,incidentOptions:i.options,incidentLookup:i.map,protocolOptions:t,protocolLookup:Pn,onCreateProtocol:Ke,onOpenProtocol:it}):null,o.jsx(J1,{open:j,mode:$,editNr:B,payload:ee,onClose:()=>{I(!1),Y("create"),Z(null),J(null)}}),o.jsx(iC,{currentRole:F,enabled:!0})]})}const jC=[{key:"aufgaben",label:"Aufgaben",path:"/aufgaben"},{key:"meldestelle",label:"Meldestelle",path:"/#/protokoll"},{key:"einsatzstellen",label:"Einsatzstellen",path:"/"},{key:"admin",label:"Admin",path:"/user-admin"},{key:"status",label:"Status",path:"/status"}],CC=(n,s)=>s?Nf(s,n):n;function Ng(){const{login:n}=ko(),[s,i]=x.useState(""),[r,t]=x.useState(""),[l,u]=x.useState(""),[d,p]=x.useState(null),h=x.useMemo(()=>bo(),[]),v=x.useMemo(()=>{const k=h||"";return jC.map(E=>({...E,url:k?CC(k,E.path):E.path}))},[h]),y=async k=>{if(!(!k||d)){u(""),p(k.key);try{await n(s,r),k.url&&(window.location.href=k.url)}catch(E){u(E.message||"Fehler")}finally{p(null)}}},N=k=>{k.preventDefault(),v[0]&&y(v[0])},C=String(l||"").toUpperCase().includes("MASTER_LOCKED");return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[o.jsx(po,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/"},addTitle:"Zur Einsatzbersicht"}),o.jsxs("form",{onSubmit:N,className:"bg-white shadow rounded-2xl p-6 w-[380px]",children:[o.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Anmeldung"}),o.jsx("label",{className:"block mb-2 text-sm",children:"Benutzername"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 mb-3",value:s,onChange:k=>i(k.target.value),autoFocus:!0,autoComplete:"username"}),o.jsx("label",{className:"block mb-2 text-sm",children:"Passwort"}),o.jsx("input",{className:"w-full border rounded px-3 py-2 mb-3",type:"password",value:r,onChange:k=>t(k.target.value),autoComplete:"current-password"}),l&&o.jsx("div",{className:"text-red-600 text-sm mb-2",children:l}),C&&o.jsxs("div",{className:"text-sm text-blue-700 mb-2",children:["Master ist gesperrt. ",o.jsx("a",{className:"underline",href:"/user-firststart",children:"Hier Master setzen/entsperren"}),"."]}),o.jsx("div",{className:"h-px bg-gray-200 my-4"}),o.jsx("div",{className:"grid gap-2",children:v.map(k=>{const E=d===k.key,j=!!d&&d!==k.key;return o.jsx("button",{type:"button",onClick:()=>y(k),disabled:j||E,className:"w-full rounded-xl py-2 border bg-gray-900 text-white transition hover:bg-gray-800 disabled:opacity-70 disabled:cursor-not-allowed",children:E?`Login  ${k.label}`:`Login  ${k.label}`},k.key)})}),o.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Gltig bis die Browser-Sitzung geschlossen wird."})]})]})}function ls({data:n,dataKey:s,label:i,unit:r,color:t,minY:l=0,maxY:u=100,height:d=120}){if(!n||n.length===0)return o.jsx("div",{className:"text-xs text-gray-500 text-center py-4",children:"Keine Daten verfgbar"});const p=400,h={top:20,right:50,bottom:30,left:50},v=p-h.left-h.right,y=d-h.top-h.bottom,N=Math.max(...n.map(ne=>ne.timestamp)),C=0,k=N-C||1,E=n.map(ne=>ne[s]).filter(ne=>ne!=null);if(E.length===0)return o.jsxs("div",{className:"text-xs text-gray-500 text-center py-4",children:["Keine ",i,"-Daten"]});const j=Math.min(...E),I=Math.max(...E),$=Math.min(l,j*.9),Y=Math.max(u,I*1.1),B=Y-$||1,Z=n.filter(ne=>ne[s]!==null&&ne[s]!==void 0).map(ne=>{const Ce=h.left+(ne.timestamp-C)/k*v,ve=h.top+y-(ne[s]-$)/B*y;return{x:Ce,y:ve,value:ne[s],time:ne.timestamp}}),ee=Z.map((ne,Ce)=>`${Ce===0?"M":"L"} ${ne.x} ${ne.y}`).join(" "),J=ee+` L ${Z[Z.length-1].x} ${h.top+y} L ${Z[0].x} ${h.top+y} Z`,re=[$,$+B/2,Y].map(ne=>({value:Math.round(ne),y:h.top+y-(ne-$)/B*y})),te=[],ie=Math.ceil(N/4e3)*1e3;for(let ne=0;ne<=N;ne+=ie||2e3)te.push({value:(ne/1e3).toFixed(0)+"s",x:h.left+(ne-C)/k*v});return o.jsxs("div",{className:"bg-gray-900 rounded p-2",children:[o.jsxs("div",{className:"text-xs text-gray-400 mb-1 flex justify-between",children:[o.jsx("span",{children:i}),o.jsxs("span",{children:["Min: ",Math.round(j),r," | Max: ",Math.round(I),r]})]}),o.jsxs("svg",{width:"100%",height:d,viewBox:`0 0 ${p} ${d}`,preserveAspectRatio:"xMidYMid meet",children:[re.map((ne,Ce)=>o.jsx("line",{x1:h.left,y1:ne.y,x2:p-h.right,y2:ne.y,stroke:"#374151",strokeWidth:"1",strokeDasharray:"4,4"},`grid-y-${Ce}`)),o.jsx("path",{d:J,fill:t,fillOpacity:"0.2"}),o.jsx("path",{d:ee,fill:"none",stroke:t,strokeWidth:"2"}),Z.map((ne,Ce)=>o.jsx("circle",{cx:ne.x,cy:ne.y,r:"4",fill:t,stroke:"#1f2937",strokeWidth:"1",children:o.jsxs("title",{children:[ne.value,r," @ ",(ne.time/1e3).toFixed(1),"s"]})},Ce)),o.jsx("line",{x1:h.left,y1:h.top,x2:h.left,y2:h.top+y,stroke:"#4B5563",strokeWidth:"1"}),re.map((ne,Ce)=>o.jsxs("text",{x:h.left-8,y:ne.y+4,fontSize:"10",fill:"#9CA3AF",textAnchor:"end",children:[ne.value,r]},`y-${Ce}`)),o.jsx("line",{x1:h.left,y1:h.top+y,x2:p-h.right,y2:h.top+y,stroke:"#4B5563",strokeWidth:"1"}),te.map((ne,Ce)=>o.jsx("text",{x:ne.x,y:h.top+y+15,fontSize:"10",fill:"#9CA3AF",textAnchor:"middle",children:ne.value},`x-${Ce}`))]})]})}function EC(){const[n,s]=x.useState(!0),[i,r]=x.useState(null),[t,l]=x.useState(""),[u,d]=x.useState(""),[p,h]=x.useState(!1),[v,y]=x.useState(null),[N,C]=x.useState({}),[k,E]=x.useState([]),[j,I]=x.useState(null),[$,Y]=x.useState(!1),[B,Z]=x.useState(null),[ee,J]=x.useState([]),re=x.useRef(null),[te,ie]=x.useState(300),[ne,Ce]=x.useState(5e3),ve=x.useRef(ne),Te=x.useRef(te);x.useEffect(()=>{ve.current=ne},[ne]),x.useEffect(()=>{Te.current=te},[te]);const[Ee,be]=x.useState({}),[we,O]=x.useState(null),[W,F]=x.useState("Was ist 2+2?"),[b,L]=x.useState(null),[oe,he]=x.useState(!1),[je,ke]=x.useState(""),[Le,Se]=x.useState("chat"),[ue,xe]=x.useState(!1),[He,Xe]=x.useState(null),[gt,Nt]=x.useState(!1),[Ze,Ft]=x.useState([]),[Et,ft]=x.useState(null),[We,st]=x.useState(""),[Ae,At]=x.useState(!1),[Bt,qt]=x.useState(!1);x.useEffect(()=>{$t();const Q=setInterval(Kt,ne),de=setInterval(()=>{p&&$t()},3e3);return()=>{clearInterval(Q),clearInterval(de)}},[p,ne]);async function $t(){p||s(!0),d("");try{const Q=await fetch(bn("/api/llm/config"),{credentials:"include"}),de=await Q.json();if(!Q.ok)throw new Error(de.error||"Fehler beim Laden der Config");y(de.globalModelOverride),C(de.tasks||{}),be(de.tasks||{});const qe=await fetch(bn("/api/llm/models"),{credentials:"include"}),ae=await qe.json();if(!qe.ok)throw new Error(ae.error||"Fehler beim Laden der Modelle");E(ae.models||[]),await Kt(),h(!1)}catch(Q){Q instanceof TypeError||Q.name==="TypeError"||Q.message&&Q.message.toLowerCase().includes("network")?(d(Al),h(!0)):(d(Q.message||"Fehler beim Laden der Daten"),h(!1))}finally{s(!1)}}async function Kt(){Y(!0);try{const Q=await fetch(bn("/api/llm/gpu"),{credentials:"include"}),de=await Q.json();if(Q.ok&&(I(de.gpuStatus),de.gpuStatus?.available&&de.gpuStatus?.gpus?.length>0)){const vt=de.gpuStatus.gpus[0],lt=Date.now();re.current===null&&(re.current=lt);const tt={timestamp:lt-re.current,utilizationPercent:vt.utilizationPercent,memoryUsedMb:vt.memoryUsedMb,temperatureCelsius:vt.temperatureCelsius};J(Ke=>{const it=ve.current/1e3,ct=Math.ceil(Te.current/it);return[...Ke,tt].slice(-ct)})}const qe=await fetch(bn("/api/llm/system"),{credentials:"include"}),ae=await qe.json();qe.ok&&Z(ae.systemStatus)}catch{}finally{Y(!1)}}async function q(){r("global"),d(""),l("");try{const Q=await fetch(bn("/api/llm/global-model"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:v})}),de=await Q.json();if(!Q.ok)throw new Error(de.error||"Fehler beim Speichern");l(de.message||"Globales Modell gespeichert"),await $t()}catch(Q){Q instanceof TypeError||Q.name==="TypeError"||Q.message&&Q.message.toLowerCase().includes("network")?d(Al):d(Q.message||"Fehler beim Speichern")}finally{r(null)}}async function ye(Q){r(Q),d(""),l("");try{const de=Ee[Q],qe=await fetch(bn("/api/llm/task-config"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskType:Q,updates:de})}),ae=await qe.json();if(!qe.ok)throw new Error(ae.error||"Fehler beim Speichern");l(`Task "${Q}" gespeichert`),await $t()}catch(de){de instanceof TypeError||de.name==="TypeError"||de.message&&de.message.toLowerCase().includes("network")?d(Al):d(de.message||"Fehler beim Speichern")}finally{r(null)}}async function xt(){Nt(!0);try{const de=(await fetch(bn("/api/llm/test-with-metrics-stream"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:we,question:W||"Testfrage",taskType:Le,previewOnly:!0})})).body.getReader(),qe=new TextDecoder;let ae="";for(;;){const{done:vt,value:lt}=await de.read();if(vt)break;ae+=qe.decode(lt,{stream:!0});const Ut=ae.split(`

`);for(const tt of Ut){const Ke=tt.match(/data: (.+)/);if(Ke)try{const it=JSON.parse(Ke[1]);if(it.rawRequest&&it.rawRequest.messages){const ct=it.rawRequest.messages.find(Yt=>Yt.role==="system"),ut=it.rawRequest.messages.find(Yt=>Yt.role==="user");Xe({systemPrompt:ct?.content||"",userPrompt:ut?.content||""}),de.cancel();return}}catch{}}}}catch(Q){console.error("Fehler beim Laden der Prompts:",Q)}finally{Nt(!1)}}async function pt(){try{const de=await(await fetch(bn("/api/llm/prompt-templates"),{credentials:"include"})).json();de.ok&&Ft(de.templates||[])}catch(Q){console.error("Fehler beim Laden der Prompt-Templates:",Q)}}async function rt(Q){At(!0);try{const qe=await(await fetch(bn(`/api/llm/prompt-templates/${encodeURIComponent(Q)}`),{credentials:"include"})).json();qe.ok&&(ft(Q),st(qe.content))}catch(de){console.error("Fehler beim Laden des Templates:",de)}finally{At(!1)}}async function rn(){if(Et){qt(!0);try{const de=await(await fetch(bn(`/api/llm/prompt-templates/${encodeURIComponent(Et)}`),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:We})})).json();de.ok?l("Template gespeichert"):d(de.error||"Fehler beim Speichern")}catch{d("Fehler beim Speichern des Templates")}finally{qt(!1)}}}async function ot(Q){he(!0),L(null),ke("");try{const de=await fetch(bn("/api/llm/test-with-metrics-stream"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:Q,question:W,taskType:Le,editedPrompts:He})});if(!de.ok){const lt=await de.json();throw new Error(lt.error||"Test fehlgeschlagen")}const qe=de.body.getReader(),ae=new TextDecoder;let vt="";for(;;){const{done:lt,value:Ut}=await qe.read();if(lt)break;vt+=ae.decode(Ut,{stream:!0});const tt=vt.split(`
`);vt=tt.pop()||"";for(const Ke of tt){if(Ke.startsWith("event: ")){const it=Ke.slice(7).trim();continue}if(Ke.startsWith("data: ")){const it=Ke.slice(6);try{const ct=JSON.parse(it);ct.token!==void 0&&ke(ut=>ut+ct.token),ct.ok!==void 0&&ct.answer!==void 0&&L(ct),ct.error!==void 0&&ct.ok===!1&&L(ct)}catch{}}}}}catch(de){de instanceof TypeError||de.name==="TypeError"||de.message&&de.message.toLowerCase().includes("network")?L({error:Al}):L({error:de.message||"Test fehlgeschlagen"})}finally{he(!1)}}function en(Q,de,qe){be(ae=>({...ae,[Q]:{...ae[Q],[de]:qe}}))}function Wn(Q){const de=N[Q],qe=Ee[Q];return!de||!qe?!1:JSON.stringify(de)!==JSON.stringify(qe)}if(n)return o.jsx("div",{className:"p-4 text-gray-500",children:"Lade Konfiguration"});const Pn=[{key:"start",label:"Start",description:"Erstes Szenario"},{key:"operations",label:"Operations",description:"Laufende Simulation"},{key:"chat",label:"Chat",description:"QA-Chat"},{key:"situation-question",label:"Situation-Question",description:"Fragen zur Lage"},{key:"analysis",label:"Analysis",description:"KI-Situationsanalyse"},{key:"summarization",label:"Summarization",description:"Kontext-Zusammenfassung"},{key:"default",label:"Default",description:"Fallback"}];return o.jsxs("div",{className:"space-y-6",children:[u&&o.jsxs("div",{className:"text-rose-700 text-sm bg-rose-50 p-3 rounded border border-rose-200",children:[u,p&&o.jsxs("div",{className:"mt-2 text-amber-700 flex items-center gap-2",children:[o.jsx("span",{className:"animate-spin",children:""}),o.jsx("span",{children:"Versuche automatisch erneut, Verbindung herzustellen..."})]})]}),t&&o.jsx("div",{className:"text-emerald-700 text-sm bg-emerald-50 p-3 rounded border border-emerald-200",children:t}),o.jsxs("div",{className:"border rounded p-4 bg-gradient-to-r from-gray-50 to-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," System-Status"]}),o.jsxs("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-white",onClick:Kt,disabled:$,children:[$?"":""," Aktualisieren"]})]}),o.jsxs("div",{className:"space-y-3",children:[j&&j.available&&j.gpus?o.jsxs(o.Fragment,{children:[j.gpus.map((Q,de)=>o.jsxs("div",{className:"bg-white rounded p-3 border",children:[o.jsx("div",{className:"font-medium text-sm mb-2",children:Q.name}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"GPU-Auslastung"}),o.jsxs("div",{className:"text-lg font-bold",style:{color:Q.utilizationPercent>80?"#dc2626":"#10b981"},children:[Q.utilizationPercent??"","%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Temperatur"}),o.jsxs("div",{className:"text-lg font-bold",style:{color:Q.temperatureCelsius>75?"#dc2626":"#10b981"},children:[Q.temperatureCelsius??"","C"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"VRAM"}),o.jsx("div",{className:"text-lg font-bold",children:Q.memoryUsedMb&&Q.memoryTotalMb?`${(Q.memoryUsedMb/1024).toFixed(1)} / ${(Q.memoryTotalMb/1024).toFixed(1)} GB`:""}),Q.memoryUsedMb&&Q.memoryTotalMb&&o.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full",style:{width:`${Q.memoryUsedMb/Q.memoryTotalMb*100}%`,backgroundColor:Q.memoryUsedMb/Q.memoryTotalMb>.9?"#dc2626":"#10b981"}})})]})]})]},de)),j.warning&&o.jsxs("div",{className:"text-amber-700 text-xs bg-amber-50 p-2 rounded",children:[" ",j.warning]})]}):o.jsxs("div",{className:"text-sm text-gray-500 bg-white rounded p-3 border",children:["GPU: ",j?.error||"Nicht verfgbar"]}),B&&B.available?o.jsxs("div",{className:"bg-white rounded p-3 border",children:[o.jsxs("div",{className:"font-medium text-sm mb-2",children:["System (",B.hostname,")"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"CPU-Auslastung"}),o.jsxs("div",{className:"text-lg font-bold",style:{color:B.cpu.usagePercent>80?"#dc2626":"#3b82f6"},children:[B.cpu.usagePercent??"","%"]}),o.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[B.cpu.count," Kerne"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Load Avg (1/5/15)"}),o.jsxs("div",{className:"text-sm font-medium mt-1",children:[B.cpu.loadAverage?.oneMin??""," / ",B.cpu.loadAverage?.fiveMin??""," / ",B.cpu.loadAverage?.fifteenMin??""]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Arbeitsspeicher"}),o.jsx("div",{className:"text-lg font-bold",children:B.memory.usedMb&&B.memory.totalMb?`${(B.memory.usedMb/1024).toFixed(1)} / ${(B.memory.totalMb/1024).toFixed(1)} GB`:""}),B.memory.usedMb&&B.memory.totalMb&&o.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full",style:{width:`${B.memory.usagePercent}%`,backgroundColor:B.memory.usagePercent>90?"#dc2626":"#3b82f6"}})})]})]})]}):o.jsxs("div",{className:"text-sm text-gray-500 bg-white rounded p-3 border",children:["System: ",B?.error||"Nicht verfgbar"]}),j?.available&&ee.length>0&&o.jsxs("div",{className:"space-y-3 mt-4",children:[o.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2 flex justify-between items-center",children:[o.jsxs("span",{children:["Verlauf (",(()=>{const Q=Math.floor((ee[ee.length-1]?.timestamp||0)/1e3);return Q>=3600?`${Math.floor(Q/3600)}h ${Math.floor(Q%3600/60)}m`:Q>=60?`${Math.floor(Q/60)}m ${Q%60}s`:`${Q}s`})(),")"]}),o.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Intervall:"}),o.jsxs("select",{className:"text-xs px-2 py-1 border rounded bg-white text-gray-700",value:ne,onChange:Q=>{const de=Number(Q.target.value);Ce(de),J([]),re.current=null},children:[o.jsx("option",{value:2e3,children:"2s"}),o.jsx("option",{value:5e3,children:"5s"}),o.jsx("option",{value:1e4,children:"10s"}),o.jsx("option",{value:3e4,children:"30s"}),o.jsx("option",{value:6e4,children:"60s"})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xs text-gray-600",children:"Zeitraum:"}),o.jsxs("select",{className:"text-xs px-2 py-1 border rounded bg-white text-gray-700",value:te,onChange:Q=>{const de=Number(Q.target.value);ie(de);const qe=ne/1e3,ae=Math.ceil(de/qe);J(vt=>vt.slice(-ae))},children:[o.jsx("option",{value:300,children:"5 Min"}),o.jsx("option",{value:900,children:"15 Min"}),o.jsx("option",{value:1800,children:"30 Min"}),o.jsx("option",{value:3600,children:"1 Std"}),o.jsx("option",{value:7200,children:"2 Std"}),o.jsx("option",{value:14400,children:"4 Std"}),o.jsx("option",{value:28800,children:"8 Std"})]})]}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-white text-gray-600",onClick:()=>{J([]),re.current=null},children:"Lschen"})]})]}),(()=>{const Q=ee.map(ae=>ae.utilizationPercent).filter(ae=>ae!=null),de=ee.map(ae=>ae.memoryUsedMb).filter(ae=>ae!=null),qe=ee.map(ae=>ae.temperatureCelsius).filter(ae=>ae!=null);return o.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[Q.length>0&&o.jsxs("div",{className:"bg-emerald-50 rounded p-3 border border-emerald-200",children:[o.jsx("div",{className:"text-xs text-emerald-700 font-medium mb-2",children:"GPU-Auslastung"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Min"}),o.jsxs("div",{className:"text-lg font-bold text-emerald-700",children:[Math.round(Math.min(...Q)),"%"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max"}),o.jsxs("div",{className:"text-lg font-bold text-emerald-700",children:[Math.round(Math.max(...Q)),"%"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[" ",Math.round(Q.reduce((ae,vt)=>ae+vt,0)/Q.length),"%"]})]}),de.length>0&&o.jsxs("div",{className:"bg-purple-50 rounded p-3 border border-purple-200",children:[o.jsx("div",{className:"text-xs text-purple-700 font-medium mb-2",children:"VRAM-Nutzung"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Min"}),o.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[(Math.min(...de)/1024).toFixed(1)," GB"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max"}),o.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[(Math.max(...de)/1024).toFixed(1)," GB"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[" ",(de.reduce((ae,vt)=>ae+vt,0)/de.length/1024).toFixed(1)," GB"]})]}),qe.length>0&&o.jsxs("div",{className:"bg-amber-50 rounded p-3 border border-amber-200",children:[o.jsx("div",{className:"text-xs text-amber-700 font-medium mb-2",children:"GPU-Temperatur"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Min"}),o.jsxs("div",{className:"text-lg font-bold text-amber-700",children:[Math.round(Math.min(...qe)),"C"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max"}),o.jsxs("div",{className:"text-lg font-bold text-amber-700",children:[Math.round(Math.max(...qe)),"C"]})]})]}),o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:[" ",Math.round(qe.reduce((ae,vt)=>ae+vt,0)/qe.length),"C"]})]})]})})(),o.jsx(ls,{data:ee,dataKey:"utilizationPercent",label:"GPU-Auslastung",unit:"%",color:"#10B981",minY:0,maxY:100,height:120}),o.jsx(ls,{data:ee,dataKey:"memoryUsedMb",label:"VRAM-Nutzung",unit:" MiB",color:"#8B5CF6",minY:0,maxY:j.gpus?.[0]?.memoryTotalMb||8192,height:120}),o.jsx(ls,{data:ee,dataKey:"temperatureCelsius",label:"GPU-Temperatur",unit:"C",color:"#F59E0B",minY:0,maxY:100,height:120})]})]})]}),o.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Globales Modell-Override"}),o.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Optional: berschreibt alle task-spezifischen Modelle. Leer lassen fr task-spezifische Konfiguration."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"text",className:"border rounded px-3 py-2 flex-1 font-mono text-sm",value:v||"",onChange:Q=>y(Q.target.value||null),placeholder:"z.B. einfo-balanced (leer = deaktiviert)",disabled:i==="global"}),o.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:q,disabled:i==="global",children:i==="global"?"Speichere...":"Speichern"})]}),v&&o.jsxs("div",{className:"mt-2 text-sm text-amber-700",children:[" Aktiv: Alle Tasks verwenden ",o.jsx("b",{children:v})]})]}),o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Task-Konfigurationen"}),o.jsx("div",{className:"text-xs text-gray-600 mb-4",children:"Jeder Task kann individuelle Parameter haben. Nur aktiv wenn globales Override leer ist."}),o.jsx("div",{className:"space-y-6",children:Pn.map(Q=>{const de=Ee[Q.key]||{},qe=Wn(Q.key);return o.jsxs("details",{className:"border rounded bg-white",open:Q.key==="chat",children:[o.jsxs("summary",{className:"cursor-pointer p-3 font-medium hover:bg-gray-50 flex items-center justify-between",children:[o.jsxs("span",{children:[Q.label," ",o.jsxs("span",{className:"text-xs text-gray-500",children:["(",Q.description,")"]})]}),qe&&o.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-1 rounded",children:"Ungespeichert"})]}),o.jsxs("div",{className:"p-4 border-t space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Modell"}),o.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2 font-mono text-sm",value:de.model||"",onChange:ae=>en(Q.key,"model",ae.target.value),placeholder:"z.B. einfo-balanced"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Temperature"}),o.jsx("input",{type:"number",step:"0.01",min:"0",max:"2",className:"w-full border rounded px-3 py-2",value:de.temperature??0,onChange:ae=>en(Q.key,"temperature",Number(ae.target.value))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"0.0 = deterministisch, 1.0 = kreativ"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Tokens"}),o.jsx("input",{type:"number",step:"100",min:"100",max:"8000",className:"w-full border rounded px-3 py-2",value:de.maxTokens??0,onChange:ae=>en(Q.key,"maxTokens",Number(ae.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timeout (ms)"}),o.jsx("input",{type:"number",step:"1000",min:"10000",max:"600000",className:"w-full border rounded px-3 py-2",value:de.timeout??0,onChange:ae=>en(Q.key,"timeout",Number(ae.target.value))}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[((de.timeout||0)/1e3).toFixed(0),"s"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Num GPU (Layers)"}),o.jsx("input",{type:"number",min:"0",max:"99",className:"w-full border rounded px-3 py-2",value:de.numGpu??0,onChange:ae=>en(Q.key,"numGpu",Number(ae.target.value))}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"0 = CPU, 20+ = GPU"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Context Size"}),o.jsx("input",{type:"number",step:"512",min:"512",max:"32768",className:"w-full border rounded px-3 py-2",value:de.numCtx??0,onChange:ae=>en(Q.key,"numCtx",Number(ae.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Top P"}),o.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",className:"w-full border rounded px-3 py-2",value:de.topP??0,onChange:ae=>en(Q.key,"topP",Number(ae.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Top K"}),o.jsx("input",{type:"number",min:"1",max:"100",className:"w-full border rounded px-3 py-2",value:de.topK??0,onChange:ae=>en(Q.key,"topK",Number(ae.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Repeat Penalty"}),o.jsx("input",{type:"number",step:"0.01",min:"1",max:"2",className:"w-full border rounded px-3 py-2",value:de.repeatPenalty??0,onChange:ae=>en(Q.key,"repeatPenalty",Number(ae.target.value))})]})]}),o.jsxs("div",{className:"flex gap-2 pt-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:()=>ye(Q.key),disabled:i===Q.key||!qe,children:i===Q.key?"Speichere...":"Speichern"}),o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:()=>be(ae=>({...ae,[Q.key]:N[Q.key]})),disabled:!qe,children:"Zurcksetzen"}),o.jsx("button",{type:"button",className:"ml-auto px-4 py-2 border rounded hover:bg-gray-50 text-blue-600",onClick:()=>O(de.model),children:"Modell testen"})]})]})]},Q.key)})})]}),o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("h3",{className:"font-medium mb-3",children:"Verfgbare Ollama-Modelle"}),k.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:"Keine Modelle gefunden oder Ollama nicht erreichbar"}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Gre"}),o.jsx("th",{className:"px-3 py-2 text-left",children:"Gendert"}),o.jsx("th",{className:"px-3 py-2"})]})}),o.jsx("tbody",{children:k.map(Q=>o.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[o.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:Q.name}),o.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:Q.size?`${(Q.size/1024/1024/1024).toFixed(2)} GB`:""}),o.jsx("td",{className:"px-3 py-2 text-xs text-gray-600",children:Q.modified_at?new Date(Q.modified_at).toLocaleString("de-AT",{hour12:!1}):""}),o.jsx("td",{className:"px-3 py-2",children:o.jsx("button",{type:"button",className:"text-blue-600 hover:text-blue-800 text-xs",onClick:()=>O(Q.name),children:"Testen"})})]},Q.name))})]})})]}),we&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"font-medium text-lg",children:["Modell testen: ",we]}),o.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700",onClick:()=>{O(null),L(null),ke(""),Xe(null),xe(!1)},children:""})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Task-Typ"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Le,onChange:Q=>{Se(Q.target.value),Xe(null),xe(!1)},disabled:oe,children:[o.jsx("option",{value:"chat",children:"Chat (QA)"}),o.jsx("option",{value:"situation-question",children:"Situation-Question (Fragen zur Lage)"}),o.jsx("option",{value:"analysis",children:"Analysis (KI-Situationsanalyse)"}),o.jsx("option",{value:"summarization",children:"Summarization (Kontext-Zusammenfassung)"}),o.jsx("option",{value:"operations",children:"Operations (Simulation)"}),o.jsx("option",{value:"start",children:"Start (Szenario-Start)"}),o.jsx("option",{value:"default",children:"Default"})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Der Task-Typ bestimmt welche Prompts und Parameter verwendet werden"}),Le==="analysis"&&o.jsx("div",{className:"text-xs text-amber-600 mt-2 bg-amber-50 p-2 rounded",children:'Hinweis: Bei aktivierter "LLM-Zusammenfassung" wird vor der Analysis zuerst ein Summarization-Aufruf gemacht. Whlen Sie "Summarization" um diesen ersten Aufruf separat zu testen.'}),Le==="situation-question"&&o.jsx("div",{className:"text-xs text-blue-600 mt-2 bg-blue-50 p-2 rounded",children:"Hinweis: Im Live-Betrieb verwendet die Fragebeantwortung den Cache der letzten timergesteuerten Analyse (kein zustzlicher LLM-Aufruf). Im Test hier wird ein neuer Summarization-Aufruf gemacht, um aktuelle Daten zu verwenden."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Testfrage"}),o.jsx("input",{type:"text",className:"w-full border rounded px-3 py-2",value:W,onChange:Q=>F(Q.target.value),disabled:oe})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:()=>ot(we),disabled:oe||!W.trim(),children:oe?"Teste...":"Test starten"}),o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50 text-gray-700",onClick:()=>{ue||xt(),xe(!ue)},disabled:oe||gt,children:gt?"Lade...":ue?"Prompts ausblenden":"Prompts anzeigen/bearbeiten"})]}),ue&&He&&o.jsxs("div",{className:"border rounded p-4 bg-gray-50 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"font-medium text-sm",children:"Prompts bearbeiten vor dem Senden"}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-white",onClick:()=>Xe(null),children:"Zurcksetzen"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["System-Prompt",o.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["(",He.systemPrompt.length," Zeichen)"]})]}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs min-h-[200px] max-h-[400px] overflow-auto resize-y",value:He.systemPrompt,onChange:Q=>Xe(de=>({...de,systemPrompt:Q.target.value})),disabled:oe})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium mb-1",children:["User-Prompt",o.jsxs("span",{className:"text-gray-400 font-normal ml-2",children:["(",He.userPrompt.length," Zeichen)"]})]}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs min-h-[200px] max-h-[400px] overflow-auto resize-y",value:He.userPrompt,onChange:Q=>Xe(de=>({...de,userPrompt:Q.target.value})),disabled:oe})]}),o.jsx("div",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded",children:"Hinweis: nderungen an den Prompts gelten nur fr diesen Test und werden nicht gespeichert."})]}),oe&&je&&o.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[o.jsxs("div",{className:"text-xs text-gray-600 mb-1 flex items-center gap-2",children:[o.jsx("span",{className:"animate-pulse",children:""}),"Antwort wird generiert..."]}),o.jsxs("div",{className:"text-sm whitespace-pre-wrap bg-white p-2 rounded border min-h-[60px]",children:[je,o.jsx("span",{className:"animate-pulse text-blue-500",children:""})]})]}),b&&o.jsx("div",{className:"border rounded p-4 bg-gray-50 space-y-4",children:b.error?o.jsxs("div",{className:"text-red-600",children:[o.jsx("div",{className:"font-medium",children:"Fehler:"}),o.jsx("div",{className:"text-sm mt-1",children:b.error}),b.debug&&o.jsxs("details",{className:"mt-2 text-xs text-gray-500",children:[o.jsx("summary",{className:"cursor-pointer hover:text-gray-700",children:"Debug-Info"}),o.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded overflow-auto text-gray-700",children:JSON.stringify(b.debug,null,2)})]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs text-gray-600 mb-1 flex justify-between items-center",children:[o.jsx("span",{children:"Antwort:"}),o.jsxs("span",{className:"text-gray-400",children:[b.answer?.length||0," Zeichen"]})]}),o.jsx("div",{className:"text-sm whitespace-pre-wrap bg-white p-3 rounded border max-h-[400px] overflow-y-auto",children:b.answer})]}),b.modelParams&&o.jsxs("div",{className:"bg-indigo-50 rounded p-3 border border-indigo-200",children:[o.jsxs("div",{className:"text-xs text-indigo-700 font-medium mb-2",children:["Verwendete Modell-Parameter",b.taskType&&o.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-indigo-200 rounded text-indigo-800",children:["Task: ",b.taskType]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Temperature"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.temperature??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Max Tokens"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.maxTokens??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Context Size"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.numCtx??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Num GPU"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.numGpu??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Top P"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.topP??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Top K"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.topK??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Repeat Penalty"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.repeatPenalty??""})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-600",children:"Timeout"}),o.jsx("div",{className:"font-bold text-indigo-900",children:b.modelParams.timeout?`${(b.modelParams.timeout/1e3).toFixed(0)}s`:""})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"Dauer"}),o.jsx("div",{className:"text-lg font-bold text-blue-700",children:b.duration?`${(b.duration/1e3).toFixed(2)}s`:""})]}),b.stats?.gpuUtilization&&o.jsxs("div",{className:"bg-emerald-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"GPU Max"}),o.jsxs("div",{className:"text-lg font-bold text-emerald-700",children:[b.stats.gpuUtilization.max??"","%"]})]}),b.stats?.memoryUsedMb&&o.jsxs("div",{className:"bg-purple-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"VRAM Peak"}),o.jsx("div",{className:"text-lg font-bold text-purple-700",children:b.stats.memoryUsedMb.max?`${(b.stats.memoryUsedMb.max/1024).toFixed(1)} GB`:""})]}),b.stats?.cpuUsage&&o.jsxs("div",{className:"bg-sky-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"CPU Max"}),o.jsxs("div",{className:"text-lg font-bold text-sky-700",children:[b.stats.cpuUsage.max??"","%"]})]}),b.stats?.ramUsedMb&&o.jsxs("div",{className:"bg-amber-50 rounded p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600",children:"RAM Peak"}),o.jsx("div",{className:"text-lg font-bold text-amber-700",children:b.stats.ramUsedMb.max?`${(b.stats.ramUsedMb.max/1024).toFixed(1)} GB`:""})]})]}),b.metrics&&b.metrics.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Metriken-Verlauf"}),o.jsx(ls,{data:b.metrics,dataKey:"utilizationPercent",label:"GPU-Auslastung",unit:"%",color:"#10B981",minY:0,maxY:100,height:140}),o.jsx(ls,{data:b.metrics,dataKey:"memoryUsedMb",label:"VRAM-Nutzung",unit:" MiB",color:"#8B5CF6",minY:0,maxY:b.stats?.memoryTotalMb||8192,height:140}),o.jsx(ls,{data:b.metrics,dataKey:"cpuUsagePercent",label:"CPU-Auslastung",unit:"%",color:"#0EA5E9",minY:0,maxY:100,height:140}),o.jsx(ls,{data:b.metrics,dataKey:"ramUsedMb",label:"Arbeitsspeicher",unit:" MiB",color:"#F59E0B",minY:0,maxY:b.stats?.ramTotalMb||32768,height:140}),o.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[b.metrics.length," Messpunkte (2s Intervall)"]})]}),b.stats&&o.jsx("div",{className:"text-xs text-gray-600 bg-gray-100 rounded p-2",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"GPU:"})," ","Min ",b.stats.gpuUtilization?.min??"","% |"," ","Max ",b.stats.gpuUtilization?.max??"","% |"," ","Avg ",b.stats.gpuUtilization?.avg??"","%"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"VRAM:"})," ","Min ",b.stats.memoryUsedMb?.min?(b.stats.memoryUsedMb.min/1024).toFixed(1):""," GB |"," ","Max ",b.stats.memoryUsedMb?.max?(b.stats.memoryUsedMb.max/1024).toFixed(1):""," GB |"," ","Total ",b.stats.memoryTotalMb?(b.stats.memoryTotalMb/1024).toFixed(1):""," GB"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"CPU:"})," ","Min ",b.stats.cpuUsage?.min??"","% |"," ","Max ",b.stats.cpuUsage?.max??"","% |"," ","Avg ",b.stats.cpuUsage?.avg??"","%"]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"RAM:"})," ","Min ",b.stats.ramUsedMb?.min?(b.stats.ramUsedMb.min/1024).toFixed(1):""," GB |"," ","Max ",b.stats.ramUsedMb?.max?(b.stats.ramUsedMb.max/1024).toFixed(1):""," GB |"," ","Total ",b.stats.ramTotalMb?(b.stats.ramTotalMb/1024).toFixed(1):""," GB"]})]})}),o.jsxs("div",{className:"space-y-2 mt-4",children:[b.rawRequest&&o.jsxs("details",{className:"border rounded",children:[o.jsx("summary",{className:"px-3 py-2 bg-gray-100 cursor-pointer hover:bg-gray-200 text-sm font-medium text-gray-700",children:"RAW Request (Ollama API)"}),o.jsxs("div",{className:"p-3 text-xs bg-gray-50 overflow-auto max-h-96 text-gray-800 space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:"Optionen:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs",children:JSON.stringify({model:b.rawRequest.model,stream:b.rawRequest.stream,format:b.rawRequest.format,options:b.rawRequest.options},null,2)})]}),b.rawRequest.messages?.map((Q,de)=>o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:Q.role==="system"?"System-Prompt:":"User-Prompt:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs whitespace-pre-wrap break-words",children:Q.content})]},de))]})]}),b.rawResponse&&o.jsxs("details",{className:"border rounded",children:[o.jsx("summary",{className:"px-3 py-2 bg-gray-100 cursor-pointer hover:bg-gray-200 text-sm font-medium text-gray-700",children:"RAW Response (Ollama API)"}),o.jsxs("div",{className:"p-3 text-xs bg-gray-50 overflow-auto max-h-96 text-gray-800 space-y-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:"Metadaten:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs",children:JSON.stringify({model:b.rawResponse.model,created_at:b.rawResponse.created_at,done:b.rawResponse.done,total_duration:b.rawResponse.total_duration,eval_count:b.rawResponse.eval_count},null,2)})]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-600 mb-1",children:"Antwort:"}),o.jsx("pre",{className:"bg-white p-2 rounded border text-xs whitespace-pre-wrap break-words",children:b.rawResponse.message?.content})]})]})]})]})]})})]})})}),o.jsxs("div",{className:"border rounded p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"font-medium",children:"Prompt-Templates bearbeiten"}),o.jsx("button",{type:"button",className:"text-xs px-2 py-1 border rounded hover:bg-gray-50",onClick:pt,children:"Templates laden"})]}),o.jsx("div",{className:"text-xs text-gray-600 mb-4",children:"Hier knnen Sie die Prompt-Templates fr verschiedene Task-Typen direkt bearbeiten. nderungen werden sofort wirksam. Ein Backup wird automatisch erstellt."}),Ze.length===0?o.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:'Klicken Sie auf "Templates laden" um die verfgbaren Templates anzuzeigen.'}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-1",children:"Template auswhlen"}),o.jsxs("select",{className:"w-full border rounded px-3 py-2",value:Et||"",onChange:Q=>{Q.target.value?rt(Q.target.value):(ft(null),st(""))},disabled:Ae,children:[o.jsx("option",{value:"",children:"-- Template whlen --"}),Ze.map(Q=>o.jsx("option",{value:Q.name,children:Q.displayName},Q.name))]})]}),Et&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium",children:Et}),o.jsxs("span",{className:"text-xs text-gray-500",children:[We.length," Zeichen"]})]}),o.jsx("textarea",{className:"w-full border rounded px-3 py-2 font-mono text-xs h-80",value:We,onChange:Q=>st(Q.target.value),disabled:Ae||Bt,placeholder:"Template-Inhalt..."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-gray-400",onClick:rn,disabled:Bt||!We,children:Bt?"Speichere...":"Template speichern"}),o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:()=>rt(Et),disabled:Ae,children:"Zurcksetzen"})]}),o.jsx("div",{className:"text-xs text-amber-700 bg-amber-50 p-2 rounded",children:'Hinweis: nderungen werden sofort wirksam. Ein Backup der vorherigen Version wird automatisch im Ordner "backups" erstellt.'})]})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsx("button",{type:"button",className:"px-4 py-2 border rounded hover:bg-gray-50",onClick:$t,disabled:n||i,children:"Neu laden"})})]})}const Or={name:"",keywords:"",weight:.2},DC={min_score:.6,max_individual_incidents:3,fallback_top_n_incidents:5,show_score:!1},zl={base_score:.5,factors:[{name:"Offene Fragen",pattern:"\\?",weight:.3,learnable:!0,custom:!1},{name:"Personen in Gefahr",keywords:["eingeklemmt","vermisst","kind","kinder","verletzte","bewusstlos"],weight:.5,learnable:!0,custom:!1},{name:"Evakuierung",keywords:["evaku","rumung","rumen"],weight:.45,learnable:!0,custom:!1},{name:"Infrastruktur kritisch",keywords:["strom","wasserwerk","damm","brcke","gas","bahn","bb"],weight:.35,learnable:!0,custom:!1}]};function kg({factors:n,showAdd:s,newFactor:i,onShowAdd:r,onAddFactor:t,onCancelAdd:l,onNewFactorChange:u,onUpdateWeight:d,onRemove:p}){return o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("div",{className:"text-xs font-medium mb-2",children:"Scoring-Faktoren (Keywords):"}),o.jsx("div",{className:"space-y-2",children:n.map((h,v)=>o.jsxs("div",{className:"flex items-center gap-2 text-xs bg-white p-2 rounded border",children:[o.jsx("span",{className:"font-medium min-w-[120px]",children:h.name}),o.jsx("span",{className:"text-gray-500 flex-1",children:h.keywords?h.keywords.join(", "):h.pattern||"-"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{children:"Gewicht:"}),o.jsx("input",{type:"number",min:"-1",max:"2",step:"0.05",value:h.weight,onChange:y=>d(v,y.target.value),className:"w-16 px-1 py-0.5 border rounded text-xs"})]}),h.custom&&o.jsx("button",{type:"button",onClick:()=>p(v),className:"text-red-600 hover:text-red-800 px-1",title:"Faktor entfernen",children:"X"}),h.learnable&&o.jsx("span",{className:"text-blue-500 text-[10px]",title:"Wird durch ML angepasst",children:"ML"})]},v))}),s?o.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded",children:[o.jsx("div",{className:"text-xs font-medium mb-2",children:"Neuen Faktor hinzufgen:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("input",{type:"text",placeholder:"Name (z.B. 'Evakuierung')",value:i.name,onChange:h=>u({name:h.target.value}),className:"w-full px-2 py-1 border rounded text-xs"}),o.jsx("input",{type:"text",placeholder:"Keywords (kommagetrennt, z.B. 'evakuieren, rumung, verlassen')",value:i.keywords,onChange:h=>u({keywords:h.target.value}),className:"w-full px-2 py-1 border rounded text-xs"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-xs",children:"Gewicht:"}),o.jsx("input",{type:"number",min:"-1",max:"2",step:"0.05",value:i.weight,onChange:h=>u({weight:h.target.value}),className:"w-20 px-2 py-1 border rounded text-xs"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",onClick:t,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs",children:"Hinzufgen"}),o.jsx("button",{type:"button",onClick:l,className:"px-3 py-1 bg-gray-500 hover:bg-gray-600 text-white rounded text-xs",children:"Abbrechen"})]})]})]}):o.jsx("button",{type:"button",onClick:r,className:"mt-2 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-xs",children:"+ Eigenen Faktor hinzufgen"})]})}function TC({locked:n=!1}){const[s,i]=x.useState(!0),[r,t]=x.useState(""),[l,u]=x.useState(null),[d,p]=x.useState(null),[h,v]=x.useState(null),[y,N]=x.useState(!1),[C,k]=x.useState(null),[E,j]=x.useState(!1),[I,$]=x.useState({R2_PROTOKOLL_RELEVANZ:!1,R5_STABS_FOKUS:!1}),[Y,B]=x.useState({R2_PROTOKOLL_RELEVANZ:{...Or},R5_STABS_FOKUS:{...Or}}),[Z,ee]=x.useState(!1),[J,re]=x.useState(null),[te,ie]=x.useState(!1),[ne,Ce]=x.useState(""),[ve,Te]=x.useState(null),[Ee,be]=x.useState(!1),[we,O]=x.useState({}),[W,F]=x.useState(!1);x.useEffect(()=>{oe(),he(),je(),b(),ke()},[]);async function b(){try{const q=await fetch("/api/admin/filtering-rules/ai-analysis-config",{credentials:"include"}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Laden fehlgeschlagen");re(ye)}catch(q){console.warn("AI-Analyse-Konfiguration laden fehlgeschlagen:",q.message),re({enabled:!0,intervalMinutes:5,contextMode:"rules",llmSummarization:{enabled:!1,model:"llama3.1:8b",maxTokens:1500,temperature:.3,timeout:6e4}})}}async function L(q){try{ie(!0),Ce("");const ye={...J,...q};q.llmSummarization&&(ye.llmSummarization={...J.llmSummarization,...q.llmSummarization});const xt=await fetch("/api/admin/filtering-rules/ai-analysis-config",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ye)}),pt=await xt.json();if(!xt.ok||pt.error)throw new Error(pt.error||"Speichern fehlgeschlagen");re(pt.config),Ce("Konfiguration gespeichert"),setTimeout(()=>Ce(""),3e3)}catch(ye){t(ye.message||"Speichern fehlgeschlagen")}finally{ie(!1)}}async function oe(){try{i(!0);const q=await fetch("/api/admin/filtering-rules/status",{credentials:"include"}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Laden fehlgeschlagen");u(ye),t("")}catch(q){t(q.message||"Status laden fehlgeschlagen")}finally{i(!1)}}async function he(){try{const q=await fetch("/api/admin/filtering-rules/learned",{credentials:"include"}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Laden fehlgeschlagen");p(ye.learned_weights||{})}catch(q){console.warn("Learned weights laden fehlgeschlagen:",q.message)}}async function je(){try{const q=await fetch("/api/admin/filtering-rules",{credentials:"include"}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Laden fehlgeschlagen");v(ye),k(JSON.parse(JSON.stringify(ye)))}catch(q){console.warn("Regeln laden fehlgeschlagen:",q.message)}}async function ke(){try{const q=await fetch("/api/admin/filtering-rules/scenario",{credentials:"include"}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Laden fehlgeschlagen");Te(ye),O(ye)}catch(q){console.warn("Szenario laden fehlgeschlagen:",q.message)}}async function Le(){try{F(!0);const q=await fetch("/api/admin/filtering-rules/scenario",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(we)}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Speichern fehlgeschlagen");Te(we),be(!1),t(""),await oe()}catch(q){t(q.message||"Szenario speichern fehlgeschlagen")}finally{F(!1)}}async function Se(){if(C)try{j(!0);const q=await fetch("/api/admin/filtering-rules",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(C)}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Speichern fehlgeschlagen");v(C),N(!1),t(""),await oe()}catch(q){t(q.message||"Speichern fehlgeschlagen")}finally{j(!1)}}function ue(){k(JSON.parse(JSON.stringify(h))),N(!1),$({R2_PROTOKOLL_RELEVANZ:!1,R5_STABS_FOKUS:!1}),B({R2_PROTOKOLL_RELEVANZ:{...Or},R5_STABS_FOKUS:{...Or}})}function xe(q){C?.rules?.[q]&&k(ye=>({...ye,rules:{...ye.rules,[q]:{...ye.rules[q],enabled:!ye.rules[q].enabled}}}))}function He(q,ye,xt){C?.rules?.[q]&&k(pt=>({...pt,rules:{...pt.rules,[q]:{...pt.rules[q],output:{...pt.rules[q].output,[ye]:xt}}}}))}function Xe(q,ye){B(xt=>({...xt,[q]:{...Or,...xt[q]||{},...ye}}))}function gt(q){return q==="R5_STABS_FOKUS"?{base_score:zl.base_score,factors:[...zl.factors]}:{base_score:.5,factors:[]}}function Nt(q){const ye=Y[q]||Or;if(!ye.name.trim()||!ye.keywords.trim())return;const xt=ye.keywords.split(",").map(rt=>rt.trim()).filter(rt=>rt);if(xt.length===0)return;const pt={name:ye.name.trim(),keywords:xt,weight:parseFloat(ye.weight)||.2,learnable:!0,custom:!0};k(rt=>{const rn=rt.rules[q],ot=rn.scoring?{...rn.scoring,factors:[...rn.scoring.factors||[]]}:gt(q),en=[...ot.factors||[],pt];return{...rt,rules:{...rt.rules,[q]:{...rn,scoring:{...ot,factors:en}}}}}),Xe(q,{...Or}),$(rt=>({...rt,[q]:!1}))}function Ze(q,ye){k(xt=>{const pt=xt.rules[q],rt=pt.scoring?{...pt.scoring,factors:[...pt.scoring.factors||[]]}:gt(q);return{...xt,rules:{...xt.rules,[q]:{...pt,scoring:{...rt,factors:rt.factors.filter((rn,ot)=>ot!==ye)}}}}})}function Ft(q,ye,xt){k(pt=>{const rt=pt.rules[q],rn=rt.scoring?{...rt.scoring,factors:[...rt.scoring.factors||[]]}:gt(q);return{...pt,rules:{...pt.rules,[q]:{...rt,scoring:{...rn,factors:rn.factors.map((ot,en)=>en===ye?{...ot,weight:parseFloat(xt)||0}:ot)}}}}})}async function Et(){if(confirm("Alle gelernten Gewichte zurcksetzen? Dies kann nicht rckgngig gemacht werden."))try{i(!0);const q=await fetch("/api/admin/filtering-rules/reset-learned",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({confirmReset:!0})}),ye=await q.json();if(!q.ok||ye.error)throw new Error(ye.error||"Reset fehlgeschlagen");await he(),t(""),alert("Gelernte Gewichte erfolgreich zurckgesetzt.")}catch(q){t(q.message||"Reset fehlgeschlagen")}finally{i(!1)}}if(s&&!l)return o.jsx("div",{className:"text-sm text-gray-500",children:"Lade Filterregeln-Status..."});const ft=l?.lastAnalysis,We=ft?.appliedRules,st=ft?.fingerprint,Ae=y?C:h,At=Ae?.rules?.R5_STABS_FOKUS,Bt={...DC,...At?.output||{}},$t=(At?.scoring||zl)?.factors||zl.factors,Kt=Ae?.rules?.R2_PROTOKOLL_RELEVANZ?.scoring?.factors||[];return o.jsxs("div",{className:"space-y-4 text-sm",children:[r&&o.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded text-red-700",children:r}),J&&o.jsxs("div",{className:"border rounded p-4 bg-gradient-to-r from-purple-50 to-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"font-medium text-base flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""})," KI-Analyse Context-Modus"]}),ne&&o.jsx("span",{className:"text-green-600 text-xs",children:ne})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4 p-3 bg-white rounded border",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-medium text-sm",children:"Kontext-Aufbereitung fr KI-Analyse"}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Whlen Sie, wie die Lage-Daten fr die KI-Analyse aufbereitet werden sollen."})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",className:`px-3 py-2 rounded text-sm font-medium transition-colors ${J.contextMode!=="llm"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:te||n,onClick:()=>L({contextMode:"rules"}),children:"Regelbasiert (R1-R5)"}),o.jsx("button",{type:"button",className:`px-3 py-2 rounded text-sm font-medium transition-colors ${J.contextMode==="llm"?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:te||n,onClick:()=>L({contextMode:"llm"}),children:"LLM-Zusammenfassung"})]})]}),o.jsx("div",{className:`p-3 rounded border ${J.contextMode==="llm"?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:J.contextMode==="llm"?o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-purple-800 mb-1",children:"LLM-Zusammenfassung aktiv (2. LLM-Call)"}),o.jsx("div",{className:"text-gray-700",children:"Ein schnelles Chat-Modell fasst die aktuelle Lage zusammen, bevor sie an das Analyse-Modell bergeben wird. Dies kann flexibler sein als regelbasierte Filterung, bentigt aber mehr Rechenzeit."}),o.jsxs("div",{className:"mt-2 text-xs text-purple-600",children:["Modell: ",o.jsx("strong",{children:J.llmSummarization?.model||"llama3.1:8b"})," | Temp: ",J.llmSummarization?.temperature||.3," | Max Tokens: ",J.llmSummarization?.maxTokens||1500]})]}):o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"Regelbasierte Filterung aktiv"}),o.jsx("div",{className:"text-gray-700",children:"Die 5 Filterregeln (R1-R5) werden angewendet, um die relevantesten Daten fr die KI-Analyse auszuwhlen. Schneller und vorhersehbarer als LLM-Zusammenfassung."})]})}),J.contextMode==="llm"&&o.jsxs("div",{className:"p-3 bg-white rounded border",children:[o.jsx("div",{className:"font-medium text-sm mb-2",children:"LLM-Summarization Einstellungen"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Modell:"}),o.jsxs("select",{value:J.llmSummarization?.model||"llama3.1:8b",onChange:q=>L({llmSummarization:{model:q.target.value}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:te||n,children:[o.jsx("option",{value:"llama3.1:8b",children:"llama3.1:8b (schnell)"}),o.jsx("option",{value:"einfo-balanced",children:"einfo-balanced"}),o.jsx("option",{value:"einfo-analysis",children:"einfo-analysis"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Temperatur:"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:J.llmSummarization?.temperature||.3,onChange:q=>L({llmSummarization:{temperature:parseFloat(q.target.value)||.3}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:te||n})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Max Tokens:"}),o.jsx("input",{type:"number",min:"500",max:"4000",step:"100",value:J.llmSummarization?.maxTokens||1500,onChange:q=>L({llmSummarization:{maxTokens:parseInt(q.target.value)||1500}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:te||n})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-gray-600",children:"Timeout (ms):"}),o.jsx("input",{type:"number",min:"10000",max:"120000",step:"5000",value:J.llmSummarization?.timeout||6e4,onChange:q=>L({llmSummarization:{timeout:parseInt(q.target.value)||6e4}}),className:"mt-1 w-full px-2 py-1 border rounded",disabled:te||n})]})]})]})]})]}),Ae?.rules&&o.jsxs("div",{className:"border rounded p-4 bg-white",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"font-medium text-base",children:"Filterregeln konfigurieren"}),y?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-gray-500 hover:bg-gray-600 text-white text-sm",onClick:ue,children:"Abbrechen"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white text-sm disabled:opacity-60",disabled:E,onClick:Se,children:E?"Speichern...":"Speichern"})]}):o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white text-sm disabled:opacity-60",disabled:n||s,onClick:()=>N(!0),children:"Bearbeiten"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:`border rounded p-3 ${Ae.rules.R1_ABSCHNITTE_PRIORITAET?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Ae.rules.R1_ABSCHNITTE_PRIORITAET?.enabled||!1,onChange:()=>xe("R1_ABSCHNITTE_PRIORITAET"),className:"w-4 h-4"}):Ae.rules.R1_ABSCHNITTE_PRIORITAET?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R1 Abschnitte-Prioritt"})]}),y&&Ae.rules.R1_ABSCHNITTE_PRIORITAET?.enabled&&o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("label",{children:"Max Abschnitte:"}),o.jsx("input",{type:"number",min:"1",max:"20",value:Ae.rules.R1_ABSCHNITTE_PRIORITAET?.output?.max_items||5,onChange:q=>He("R1_ABSCHNITTE_PRIORITAET","max_items",parseInt(q.target.value)||5),className:"w-16 px-2 py-1 border rounded"})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ae.rules.R1_ABSCHNITTE_PRIORITAET?.description})]}),o.jsxs("div",{className:`border rounded p-3 ${Ae.rules.R2_PROTOKOLL_RELEVANZ?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Ae.rules.R2_PROTOKOLL_RELEVANZ?.enabled||!1,onChange:()=>xe("R2_PROTOKOLL_RELEVANZ"),className:"w-4 h-4"}):Ae.rules.R2_PROTOKOLL_RELEVANZ?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R2 Protokoll-Relevanz"})]}),y&&Ae.rules.R2_PROTOKOLL_RELEVANZ?.enabled&&o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Max Eintrge:"}),o.jsx("input",{type:"number",min:"1",max:"50",value:Ae.rules.R2_PROTOKOLL_RELEVANZ?.output?.max_entries||10,onChange:q=>He("R2_PROTOKOLL_RELEVANZ","max_entries",parseInt(q.target.value)||10),className:"w-16 px-2 py-1 border rounded"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Min Score:"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:Ae.rules.R2_PROTOKOLL_RELEVANZ?.output?.min_score||.6,onChange:q=>He("R2_PROTOKOLL_RELEVANZ","min_score",parseFloat(q.target.value)||.6),className:"w-16 px-2 py-1 border rounded"})]})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ae.rules.R2_PROTOKOLL_RELEVANZ?.description}),y&&Ae.rules.R2_PROTOKOLL_RELEVANZ?.enabled&&o.jsx(kg,{factors:Kt,showAdd:I.R2_PROTOKOLL_RELEVANZ,newFactor:Y.R2_PROTOKOLL_RELEVANZ||Or,onShowAdd:()=>$(q=>({...q,R2_PROTOKOLL_RELEVANZ:!0})),onAddFactor:()=>Nt("R2_PROTOKOLL_RELEVANZ"),onCancelAdd:()=>{$(q=>({...q,R2_PROTOKOLL_RELEVANZ:!1})),Xe("R2_PROTOKOLL_RELEVANZ",{...Or})},onNewFactorChange:q=>Xe("R2_PROTOKOLL_RELEVANZ",q),onUpdateWeight:(q,ye)=>Ft("R2_PROTOKOLL_RELEVANZ",q,ye),onRemove:q=>Ze("R2_PROTOKOLL_RELEVANZ",q)})]}),o.jsxs("div",{className:`border rounded p-3 ${Ae.rules.R3_TRENDS_ERKENNUNG?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Ae.rules.R3_TRENDS_ERKENNUNG?.enabled||!1,onChange:()=>xe("R3_TRENDS_ERKENNUNG"),className:"w-4 h-4"}):Ae.rules.R3_TRENDS_ERKENNUNG?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R3 Trends-Erkennung"})]}),y&&Ae.rules.R3_TRENDS_ERKENNUNG?.enabled&&o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx("label",{children:"Prognose-Horizont (Min):"}),o.jsx("input",{type:"number",min:"30",max:"480",step:"30",value:Ae.rules.R3_TRENDS_ERKENNUNG?.output?.forecast_horizon_minutes||120,onChange:q=>He("R3_TRENDS_ERKENNUNG","forecast_horizon_minutes",parseInt(q.target.value)||120),className:"w-20 px-2 py-1 border rounded"})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ae.rules.R3_TRENDS_ERKENNUNG?.description})]}),o.jsxs("div",{className:`border rounded p-3 ${Ae.rules.R4_RESSOURCEN_STATUS?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Ae.rules.R4_RESSOURCEN_STATUS?.enabled||!1,onChange:()=>xe("R4_RESSOURCEN_STATUS"),className:"w-4 h-4"}):Ae.rules.R4_RESSOURCEN_STATUS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R4 Ressourcen-Status"})]})}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ae.rules.R4_RESSOURCEN_STATUS?.description})]}),o.jsxs("div",{className:`border rounded p-3 ${Ae.rules.R5_STABS_FOKUS?.enabled?"bg-green-50 border-green-200":"bg-gray-50"}`,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[y?o.jsx("input",{type:"checkbox",checked:Ae.rules.R5_STABS_FOKUS?.enabled||!1,onChange:()=>xe("R5_STABS_FOKUS"),className:"w-4 h-4"}):Ae.rules.R5_STABS_FOKUS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"ON"}):o.jsx("span",{className:"text-gray-400",children:"OFF"}),o.jsx("span",{className:"font-medium",children:"R5 Stabs-Fokus"})]}),y&&Ae.rules.R5_STABS_FOKUS?.enabled&&o.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Max Einzeleinstze (kritisch):"}),o.jsx("input",{type:"number",min:"0",max:"50",value:Bt.max_individual_incidents,onChange:q=>He("R5_STABS_FOKUS","max_individual_incidents",parseInt(q.target.value)||0),className:"w-16 px-2 py-1 border rounded"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Fallback Top-N Einstze:"}),o.jsx("input",{type:"number",min:"0",max:"50",value:Bt.fallback_top_n_incidents,onChange:q=>He("R5_STABS_FOKUS","fallback_top_n_incidents",parseInt(q.target.value)||0),className:"w-16 px-2 py-1 border rounded"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("label",{children:"Min Score:"}),o.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:Bt.min_score,onChange:q=>He("R5_STABS_FOKUS","min_score",parseFloat(q.target.value)||0),className:"w-16 px-2 py-1 border rounded"})]})]})]}),o.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ae.rules.R5_STABS_FOKUS?.description}),y&&Ae.rules.R5_STABS_FOKUS?.enabled&&o.jsx(kg,{factors:$t,showAdd:I.R5_STABS_FOKUS,newFactor:Y.R5_STABS_FOKUS||Or,onShowAdd:()=>$(q=>({...q,R5_STABS_FOKUS:!0})),onAddFactor:()=>Nt("R5_STABS_FOKUS"),onCancelAdd:()=>{$(q=>({...q,R5_STABS_FOKUS:!1})),Xe("R5_STABS_FOKUS",{...Or})},onNewFactorChange:q=>Xe("R5_STABS_FOKUS",q),onUpdateWeight:(q,ye)=>Ft("R5_STABS_FOKUS",q,ye),onRemove:q=>Ze("R5_STABS_FOKUS",q)})]})]})]}),o.jsxs("div",{className:"border rounded p-4 bg-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"font-medium text-base",children:"Szenario-Konfiguration"}),Ee?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:Le,disabled:W,className:"text-xs px-2 py-1 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:W?"...":"Speichern"}),o.jsx("button",{onClick:()=>{O(ve||{}),be(!1)},className:"text-xs px-2 py-1 bg-gray-400 text-white rounded hover:bg-gray-500",children:"Abbrechen"})]}):o.jsx("button",{onClick:()=>be(!0),disabled:n,className:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Bearbeiten"})]}),Ee?o.jsxs("div",{className:"grid gap-3 text-sm",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-600 mb-1",children:"Art des Ereignisses:"}),o.jsxs("select",{value:we.artDesEreignisses||"",onChange:q=>O({...we,artDesEreignisses:q.target.value}),className:"w-full p-2 border rounded text-sm",children:[o.jsx("option",{value:"",children:"-- Bitte whlen --"}),o.jsx("option",{value:"Hochwasser",children:"Hochwasser"}),o.jsx("option",{value:"Sturm",children:"Sturm"}),o.jsx("option",{value:"Schnee",children:"Schnee/Winterdienst"}),o.jsx("option",{value:"Brand",children:"Brand/Waldbrand"}),o.jsx("option",{value:"Mure",children:"Mure/Hangrutschung"}),o.jsx("option",{value:"Verkehrsunfall",children:"Verkehrsunfall (gro)"}),o.jsx("option",{value:"Technischer Einsatz",children:"Technischer Einsatz"}),o.jsx("option",{value:"Sonstiges",children:"Sonstiges"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-600 mb-1",children:"Geografischer Bereich:"}),o.jsx("input",{type:"text",value:we.geografischerBereich||"",onChange:q=>O({...we,geografischerBereich:q.target.value}),placeholder:"z.B. Bezirk Feldkirchen",className:"w-full p-2 border rounded text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-600 mb-1",children:"Wetter (optional):"}),o.jsx("input",{type:"text",value:we.wetter||"",onChange:q=>O({...we,wetter:q.target.value}),placeholder:"z.B. Dauerregen, starker Wind",className:"w-full p-2 border rounded text-sm"})]})]}):o.jsxs("div",{className:"grid gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Art des Ereignisses:"})," ",o.jsx("strong",{children:ve?.artDesEreignisses||"Nicht definiert"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Geografischer Bereich:"})," ",ve?.geografischerBereich||"Nicht definiert"]}),ve?.wetter&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Wetter:"})," ",ve.wetter]})]})]}),ft?o.jsxs("div",{className:"border rounded p-4 bg-gray-50",children:[o.jsx("div",{className:"font-medium text-base mb-3",children:"Letzte Analyse-Details"}),o.jsxs("div",{className:"grid gap-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Zeitstempel:"})," ",o.jsx("code",{className:"text-xs bg-white px-1 rounded",children:new Date(ft.timestamp).toLocaleString("de-AT",{hour12:!1})})]}),st&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Disaster:"})," ",o.jsx("strong",{children:st.disaster_type||"unbekannt"}),st.phase&&o.jsxs("span",{className:"text-gray-500",children:[" (",st.phase,")"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Abschnitte:"})," ",st.total_sections," gesamt",st.critical_sections>0&&o.jsxs("span",{className:"text-red-600 font-medium",children:[" (",st.critical_sections," kritisch)"]})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Geograf. Verteilung:"})," ",o.jsx("span",{className:"capitalize",children:st.geographic_pattern||"unbekannt"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Trend:"})," ",o.jsx("span",{className:"capitalize",children:st.trend_direction||"stabil"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Ressourcen-Auslastung:"})," ",st.utilization_percent,"%"]})]}),o.jsxs("div",{className:"mt-2 pt-2 border-t",children:[o.jsx("span",{className:"text-gray-600",children:"Token-Nutzung:"})," ",o.jsx("strong",{children:ft.tokensUsed.toLocaleString("de-AT")})," / ",ft.tokensLimit.toLocaleString("de-AT"),o.jsxs("span",{className:"text-gray-500 ml-2",children:["(",Math.round(ft.tokensUsed/ft.tokensLimit*100),"% genutzt)"]})]})]})]}):o.jsx("div",{className:"border rounded p-4 bg-gray-50 text-gray-500",children:"Noch keine Analyse durchgefhrt."}),We&&o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("div",{className:"font-medium text-base mb-3",children:"Angewendete Regeln"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[We.R1_ABSCHNITTE?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:We.R1_ABSCHNITTE?.enabled?"":"text-gray-400",children:"R1 Abschnitte-Prioritt"})]}),We.R1_ABSCHNITTE?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[We.R1_ABSCHNITTE.items_shown," / ",We.R1_ABSCHNITTE.max_items," Abschnitte"]})]}),o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[We.R2_PROTOKOLL?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:We.R2_PROTOKOLL?.enabled?"":"text-gray-400",children:"R2 Protokoll-Relevanz"})]}),We.R2_PROTOKOLL?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[We.R2_PROTOKOLL.items_shown," / ",We.R2_PROTOKOLL.max_items," Eintrge"]})]}),o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[We.R3_TRENDS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:We.R3_TRENDS?.enabled?"":"text-gray-400",children:"R3 Trends-Erkennung"})]}),We.R3_TRENDS?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600 capitalize",children:[We.R3_TRENDS.direction," (",We.R3_TRENDS.strength,")"]})]}),o.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[We.R4_RESSOURCEN?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:We.R4_RESSOURCEN?.enabled?"":"text-gray-400",children:"R4 Ressourcen-Status"})]}),We.R4_RESSOURCEN?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[We.R4_RESSOURCEN.utilization,"% Auslastung",We.R4_RESSOURCEN.shortage&&o.jsx("span",{className:"text-red-600 ml-2",children:"Engpass!"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[We.R5_STABS_FOKUS?.enabled?o.jsx("span",{className:"text-green-600 font-bold",children:"OK"}):o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("span",{className:We.R5_STABS_FOKUS?.enabled?"":"text-gray-400",children:"R5 Stabs-Fokus"})]}),We.R5_STABS_FOKUS?.enabled&&o.jsxs("div",{className:"text-xs text-gray-600",children:[We.R5_STABS_FOKUS.individual_incidents_shown," Einzeleinstze",We.R5_STABS_FOKUS.fallback_used&&o.jsx("span",{className:"ml-2 text-orange-600",children:"Fallback aktiv"})]})]})]})]}),d&&Object.keys(d).length>0&&o.jsxs("div",{className:"border rounded p-4",children:[o.jsx("div",{className:"font-medium text-base mb-3",children:"Gelernte Gewichte"}),d.protocol_factors&&Object.keys(d.protocol_factors).length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Protokoll-Faktoren:"}),Object.entries(d.protocol_factors).map(([q,ye])=>o.jsxs("div",{className:"border-l-2 border-blue-400 pl-3 py-1",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium",children:q}),o.jsxs("span",{className:"text-xs text-gray-600",children:[ye.initial_weight?.toFixed(2)," -> ",ye.current_weight?.toFixed(2)]})]}),ye.success_rate!==void 0&&o.jsxs("div",{className:"text-xs text-gray-500",children:["Erfolgsrate: ",(ye.success_rate*100).toFixed(1),"% (",ye.helpful_count,"/",ye.feedback_count," Feedbacks)"]})]},q))]}),o.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white text-sm disabled:opacity-60",disabled:n||s,onClick:Et,children:"Gelernte Gewichte zurcksetzen"}),o.jsx("span",{className:"text-xs text-gray-500",children:"Setzt alle gelernten Gewichte auf ihre Ausgangswerte zurck"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60",disabled:n||s,onClick:()=>{oe(),he(),je()},children:"Aktualisieren"}),o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-600 hover:bg-gray-700 text-white",onClick:()=>ee(!0),children:"Hilfe zur Regel-Erstellung"})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-4 pt-4 border-t",children:[o.jsx("strong",{children:"Info:"})," Das Hybrid-Filtersystem kombiniert regelbasierte Filterung (R1-R5) mit Context-Fingerprinting und maschinellem Lernen. Gelernte Gewichte werden automatisch basierend auf Feedback angepasst und bleiben ber Neustarts hinweg erhalten."]}),Z&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"Hilfe: Filterregeln konfigurieren"}),o.jsx("button",{type:"button",onClick:()=>ee(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"px-6 py-4 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Was sind Filterregeln?"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Filterregeln bestimmen, welche Informationen dem KI-Chatbot zur Verfgung gestellt werden. Sie helfen dabei, die relevantesten Daten auszuwhlen und unwichtige Informationen auszublenden. So erhlt der Chatbot genau die Informationen, die er braucht, um hilfreiche Antworten zu geben."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Die 5 Standard-Regeln"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"border rounded p-3 bg-green-50",children:[o.jsx("h4",{className:"font-medium text-green-800",children:"R1: Abschnitte-Prioritt"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Sortiert und filtert Einsatz-Abschnitte nach Wichtigkeit. Abschnitte mit kritischen Einstzen, vielen Einstzen oder viel Personal werden priorisiert."}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.jsx("strong",{children:"Einstellung:"}),' "Max Abschnitte" bestimmt, wie viele Abschnitte maximal angezeigt werden.']})]}),o.jsxs("div",{className:"border rounded p-3 bg-blue-50",children:[o.jsx("h4",{className:"font-medium text-blue-800",children:"R2: Protokoll-Relevanz"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Bewertet Protokoll-Eintrge nach Relevanz anhand von Schlsselwrtern. Eintrge mit Fragen, dringenden Meldungen oder Ressourcen-Anfragen werden hher bewertet."}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.jsx("strong",{children:"Einstellungen:"}),o.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[o.jsx("li",{children:'"Max Eintrge" - Maximale Anzahl der Protokoll-Eintrge'}),o.jsx("li",{children:'"Min Score" - Mindest-Relevanz (0-1). Hher = nur sehr relevante Eintrge'})]})]})]}),o.jsxs("div",{className:"border rounded p-3 bg-purple-50",children:[o.jsx("h4",{className:"font-medium text-purple-800",children:"R3: Trends-Erkennung"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Erkennt Entwicklungstrends im Einsatzgeschehen (steigend, stabil, fallend) und erstellt Prognosen fr die kommenden Stunden."}),o.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:[o.jsx("strong",{children:"Einstellung:"}),' "Prognose-Horizont" bestimmt, wie weit in die Zukunft prognostiziert wird (in Minuten).']})]}),o.jsxs("div",{className:"border rounded p-3 bg-orange-50",children:[o.jsx("h4",{className:"font-medium text-orange-800",children:"R4: Ressourcen-Status"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Analysiert die Auslastung der verfgbaren Ressourcen (Fahrzeuge, Personal) und erkennt Engpsse automatisch."})]}),o.jsxs("div",{className:"border rounded p-3 bg-gray-100",children:[o.jsx("h4",{className:"font-medium text-gray-800",children:"R5: Stabs-Fokus (Standard: AUS)"}),o.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"Spezialansicht fr Stabsarbeit. Aggregiert Daten auf Abschnitts-Ebene und zeigt nur kritische Einzeleinstze an. Fr strategische bersicht statt operative Details."})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"So aktivieren/deaktivieren Sie Regeln"}),o.jsxs("ol",{className:"list-decimal ml-5 text-sm text-gray-700 space-y-2",children:[o.jsxs("li",{children:["Klicken Sie auf den Button ",o.jsx("strong",{children:'"Bearbeiten"'})," oben rechts im Regel-Bereich"]}),o.jsx("li",{children:"Setzen oder entfernen Sie das Hkchen bei der gewnschten Regel"}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Speichern"'})," um die nderungen zu bernehmen"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"So passen Sie Regel-Parameter an"}),o.jsxs("ol",{className:"list-decimal ml-5 text-sm text-gray-700 space-y-2",children:[o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Bearbeiten"'})]}),o.jsx("li",{children:"Bei aktivierten Regeln erscheinen Eingabefelder fr die Parameter"}),o.jsxs("li",{children:["ndern Sie die Werte nach Bedarf:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Max Abschnitte/Eintrge:"})," Weniger = kompaktere bersicht, mehr = detailliertere Information"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Min Score:"})," 0.0 bis 1.0 - Je hher, desto strenger die Filterung"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Prognose-Horizont:"})," In Minuten, z.B. 120 = 2 Stunden Vorausschau"]})]})]}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Speichern"'})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"So fgen Sie eigene Schlsselwrter hinzu (R2)"}),o.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Sie knnen eigene Begriffe definieren, die Protokoll-Eintrge als wichtig markieren sollen. Das ist ntzlich fr organisationsspezifische Begriffe oder aktuelle Ereignisse."}),o.jsxs("ol",{className:"list-decimal ml-5 text-sm text-gray-700 space-y-2",children:[o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Bearbeiten"'})]}),o.jsxs("li",{children:["Scrollen Sie zur Regel ",o.jsx("strong",{children:"R2 Protokoll-Relevanz"})]}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"+ Eigenen Faktor hinzufgen"'})]}),o.jsxs("li",{children:["Geben Sie einen ",o.jsx("strong",{children:"Namen"}),' ein (z.B. "Evakuierung")']}),o.jsxs("li",{children:["Geben Sie ",o.jsx("strong",{children:"Schlsselwrter"}),' kommagetrennt ein (z.B. "evakuieren, rumung, verlassen, evakuierung")']}),o.jsxs("li",{children:["Stellen Sie das ",o.jsx("strong",{children:"Gewicht"})," ein:",o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"0.1 - 0.2:"})," Niedrige Prioritt (leichte Erhhung der Relevanz)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"0.3 - 0.4:"})," Mittlere Prioritt (deutliche Erhhung)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"0.5+:"})," Hohe Prioritt (starke Erhhung)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Negative Werte:"})," Verringert die Relevanz (z.B. fr unwichtige Routine-Meldungen)"]})]})]}),o.jsxs("li",{children:["Klicken Sie auf ",o.jsx("strong",{children:'"Hinzufgen"'})," und dann ",o.jsx("strong",{children:'"Speichern"'})]})]}),o.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm",children:[o.jsx("strong",{children:"Beispiele fr ntzliche eigene Faktoren:"}),o.jsxs("ul",{className:"list-disc ml-5 mt-1",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Evakuierung"})," (evakuieren, rumung, verlassen) - Gewicht: 0.5"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Verletzte"})," (verletzte, verletzt, sanitter, rettung) - Gewicht: 0.4"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Routine"})," (routinemeldung, standard, planmig) - Gewicht: -0.2"]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Maschinelles Lernen (ML)"}),o.jsxs("p",{className:"text-sm text-gray-700",children:["Faktoren mit dem ",o.jsx("span",{className:"text-blue-500 font-medium",children:"ML"}),"-Symbol werden automatisch durch Benutzer-Feedback verbessert. Wenn Chatbot-Antworten als hilfreich oder nicht hilfreich markiert werden, passt das System die Gewichte dieser Faktoren automatisch an."]}),o.jsxs("p",{className:"text-sm text-gray-700 mt-2",children:["Die ",o.jsx("strong",{children:'"Gelernte Gewichte"'})," Sektion zeigt, wie sich die Gewichte durch Feedback verndert haben. Mit ",o.jsx("strong",{children:'"Gelernte Gewichte zurcksetzen"'})," knnen Sie alle Anpassungen rckgngig machen."]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-800",children:"Tipps fr optimale Einstellungen"}),o.jsxs("ul",{className:"list-disc ml-5 text-sm text-gray-700 space-y-1",children:[o.jsxs("li",{children:["Beginnen Sie mit den ",o.jsx("strong",{children:"Standard-Einstellungen"})," und passen Sie nach Bedarf an"]}),o.jsxs("li",{children:["Bei ",o.jsx("strong",{children:"groen Einsatzlagen"}),": Reduzieren Sie Max-Werte fr kompaktere bersicht"]}),o.jsxs("li",{children:["Bei ",o.jsx("strong",{children:"wenig Einstzen"}),": Erhhen Sie Max-Werte fr mehr Details"]}),o.jsxs("li",{children:["Der ",o.jsx("strong",{children:"Min Score"})," bei R2 sollte zwischen 0.5 und 0.7 liegen"]}),o.jsxs("li",{children:["Aktivieren Sie ",o.jsx("strong",{children:"R5 Stabs-Fokus"})," nur fr strategische Stabsarbeit"]}),o.jsxs("li",{children:["Testen Sie nderungen im ",o.jsx("strong",{children:"Chatbot"})," um die Auswirkungen zu sehen"]})]})]})]}),o.jsx("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4",children:o.jsx("button",{type:"button",onClick:()=>ee(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"Schlieen"})})]})})]})}function Qd(n){const s=[],i=r=>{const t=typeof r=="string"?r:r&&typeof r.id=="string"?r.id:r&&typeof r.role=="string"?r.role:r&&typeof r.label=="string"?r.label:"",l=String(t||"").trim();l&&!s.includes(l)&&s.push(l)};return n&&(i(n.role),Array.isArray(n.roles)&&n.roles.forEach(i)),s}const Dd=n=>Qd(n).some(s=>s.toUpperCase()==="ADMIN");async function jo(n,s,i){const r=await fetch(`/api/user${s}`,{method:n,credentials:"include",headers:i?{"Content-Type":"application/json"}:void 0,body:i?JSON.stringify(i):void 0}),t=await r.text(),l=t?(()=>{try{return JSON.parse(t)}catch{return{error:t}}})():{};if(!r.ok){const u=new Error(l?.error||r.statusText);throw u.status=r.status,u.data=l,u}return l}const Td=n=>jo("GET",n),Ki=(n,s)=>jo("POST",n,s),jg=(n,s)=>jo("PUT",n,s),MC=(n,s)=>jo("PATCH",n,s),RC=n=>jo("DELETE",n),Ul=n=>{if(typeof n=="string"){const s=n.trim().toLowerCase();if(["all","alle","alles","gesamt","voll"].includes(s))return"all";if(["interval","intervall","window","range","zeitraum"].includes(s))return"interval"}return n===!0?"all":"interval"},PC=(n,s)=>{if(typeof n=="string"){const i=n.match(/filename="([^"]+)"/);if(i?.[1])return i[1]}return s},Cg=()=>({id:null,label:"",to:"",subject:"",text:"",mode:"interval",intervalMinutes:"60",timeOfDay:"08:00",attachmentPath:"",enabled:!0}),Eg=()=>({id:null,label:"",url:"",method:"GET",body:"",mode:"interval",intervalMinutes:"60",timeOfDay:"08:00",enabled:!0});function _C(){const{user:n}=ko(),[s,i]=x.useState(!1),[r,t]=x.useState(!0),[l,u]=x.useState(""),[d,p]=x.useState(""),[h,v]=x.useState([]),[y,N]=x.useState([]),[C,k]=x.useState({has:!1,updatedAt:null}),[E,j]=x.useState({enabled:!1,intervalSec:30,demoMode:!1}),[I,$]=x.useState({enabled:!1,intervalSec:"30",demoMode:!1}),[Y,B]=x.useState(!1),[Z,ee]=x.useState(!1),[J,re]=x.useState({enabled:!1,intervalMinutes:10,lastRunAt:null,entryScope:"interval",scope:"interval"}),[te,ie]=x.useState({enabled:!1,intervalMinutes:"10",entryScope:"interval"}),[ne,Ce]=x.useState(!1),[ve,Te]=x.useState({enabled:!0,intervalMinutes:5,useRagContext:!1}),[Ee,be]=x.useState({enabled:!0,intervalMinutes:"5",useRagContext:!1}),[we,O]=x.useState(!1),[W,F]=x.useState([]),[b,L]=x.useState(Cg()),[oe,he]=x.useState(!1),[je,ke]=x.useState(!1),[Le,Se]=x.useState([]),[ue,xe]=x.useState(Eg()),[He,Xe]=x.useState(!1),[gt,Nt]=x.useState(!1),[Ze,Ft]=x.useState({chatbot:{running:!1},worker:{running:!1}}),[Et,ft]=x.useState(!1),We=async()=>{try{const S=await fetch("/api/user/admin/chatbot/status",{credentials:"include",cache:"no-store"});if(!S.ok)return null;const T=await S.json().catch(()=>({}));return T.ok===!1?null:(Ft(T),T)}catch{return null}},[st,Ae]=x.useState({intervalMs:3e4,enabled:!0}),[At,Bt]=x.useState({intervalSec:"30",enabled:!0}),[qt,$t]=x.useState(!1),[Kt,q]=x.useState([]),[ye,xt]=x.useState(!1),[pt,rt]=x.useState(!1),[rn,ot]=x.useState(!1),en=S=>{if(!S)return null;const H=String(S).trim().match(/^([a-z0-9_-]+)[:.]([a-z]+)$/i);if(!H)return null;const se=H[1].toLowerCase(),Re=H[2].toLowerCase();return["none","view","edit"].includes(Re)?{app:se,level:Re}:null},Wn=(S=[])=>{const T={};for(const H of S){const se=en(H);if(!se)continue;const Re=T[se.app];T[se.app]=Re==="edit"||se.level==="edit"?"edit":se.level}return T},Pn=S=>{if(typeof S=="string")return{id:S,label:S,apps:{}};const T=S?.id??S?.label??"",H=S?.apps&&Object.keys(S.apps).length?{...S.apps}:Wn(S?.capabilities||[]);return{id:T,label:S?.label??T,apps:H}},Q=x.useMemo(()=>(h||[]).map(S=>typeof S=="string"?S:S&&typeof S=="object"?S.id??S.label??"":"").filter(Boolean),[h]),de=x.useMemo(()=>Q.map(S=>({key:S,label:S})),[Q]),qe=x.useMemo(()=>{const S=new Set(["einsatzboard","aufgabenboard","protokoll"]);for(const T of h||[])(typeof T=="object"&&T?.apps?Object.keys(T.apps):Array.isArray(T?.capabilities)?Object.keys(Wn(T.capabilities)):[]).forEach(se=>S.add(se));return Array.from(S)},[h]),ae=["none","view","edit"],vt=(S,T,H)=>{v(se=>{const Re=Array.isArray(se)?se.slice():[],mt=Re.findIndex(U=>(typeof U=="string"?U:U?.id??U?.label)===S);if(mt<0)return se;const Vt=Pn(Re[mt]),_n=ae.includes(H)?H:"none",P={...Vt.apps||{}};return _n==="none"?delete P[T]:P[T]=_n,Re[mt]={...Vt,apps:P},Re})},lt=()=>L(Cg()),Ut=S=>{if(!S){lt();return}L({id:S.id||null,label:S.label||"",to:S.to||"",subject:S.subject||"",text:S.text||"",mode:S.mode==="time"?"time":"interval",intervalMinutes:String(S.intervalMinutes??""),timeOfDay:S.timeOfDay||"08:00",attachmentPath:S.attachmentPath||"",enabled:S.enabled!==!1})};async function tt(){ke(!0);try{const S=await fetch("/api/mail/schedule",{credentials:"include",cache:"no-store"}),T=await S.json().catch(()=>({}));if(!S.ok||T?.error)throw new Error(T?.error||"Zeitplne konnten nicht geladen werden.");F(Array.isArray(T.schedules)?T.schedules:[])}catch(S){p(T=>T||S.message||"Fehler beim Laden der Mail-Zeitplne")}finally{ke(!1)}}const Ke=()=>xe(Eg()),it=S=>{if(!S){Ke();return}xe({id:S.id||null,label:S.label||"",url:S.url||"",method:S.method||"GET",body:S.body||"",mode:S.mode==="time"?"time":"interval",intervalMinutes:String(S.intervalMinutes??""),timeOfDay:S.timeOfDay||"08:00",enabled:S.enabled!==!1})};async function ct(){Nt(!0);try{const S=await fetch("/api/http/schedule",{credentials:"include",cache:"no-store"}),T=await S.json().catch(()=>({}));if(!S.ok||T?.error)throw new Error(T?.error||"Zeitplne konnten nicht geladen werden.");Se(Array.isArray(T.schedules)?T.schedules:[])}catch(S){p(T=>T||S.message||"Fehler beim Laden der API-Zeitplne")}finally{Nt(!1)}}async function ut(){t(!0),p("");try{const S=await Td("/roles");v(S.roles||[]);const T=await Td("/users");N(T.users||[]),i(!1);try{const H=await Td("/fetcher");k({has:!!(H?.has||H?.ok||H?.present),updatedAt:H?.updatedAt??H?.ts??null})}catch{}try{const H=await fetch("/api/import/auto-config",{credentials:"include",cache:"no-store"});if(H.ok){const se=await H.json().catch(()=>({})),Re=Ur(se.intervalSec,30);j({enabled:!!se.enabled,intervalSec:Re,demoMode:!!se.demoMode}),$({enabled:!!se.enabled,intervalSec:String(Re),demoMode:!!se.demoMode})}}catch{}try{const H=await fetch("/api/protocol/auto-print-config",{credentials:"include",cache:"no-store"});if(H.ok){const se=await H.json().catch(()=>({})),Re=Number(se.intervalMinutes),mt=Number.isFinite(Re)&&Re>0?Math.floor(Re):10,Vt=Number(se.lastRunAt),_n=Number.isFinite(Vt)&&Vt>0?Vt:null,P=typeof se.entryScope=="string"?se.entryScope:typeof se.scope=="string"?se.scope:typeof se.mode=="string"?se.mode:null,U=Ul(P),ce={enabled:!!se.enabled,intervalMinutes:mt,lastRunAt:_n,entryScope:U,scope:U};re(ce),ie({enabled:ce.enabled,intervalMinutes:String(ce.intervalMinutes||""),entryScope:ce.entryScope})}}catch{}try{const H=await fetch("/api/situation/analysis-config",{credentials:"include",cache:"no-store"});if(H.ok){const se=await H.json().catch(()=>({})),Re=Wa(se.intervalMinutes,5);Te({enabled:!!se.enabled,intervalMinutes:Re,useRagContext:!!se.useRagContext}),be({enabled:!!se.enabled,intervalMinutes:String(Re),useRagContext:!!se.useRagContext})}}catch{}try{await tt(),await ct()}catch{}try{const H=await fetch("/api/user/admin/worker/config",{credentials:"include",cache:"no-store"});if(H.ok){const se=await H.json();se.ok!==!1&&se.config&&(Ae(se.config),Bt({intervalSec:String((se.config.intervalMs||3e4)/1e3),enabled:se.config.enabled!==!1}))}}catch{}try{await We()}catch{}try{const H=await fetch("/api/user/admin/knowledge/files",{credentials:"include",cache:"no-store"});if(H.ok){const se=await H.json();se.ok!==!1&&q(se.files||[])}}catch{}}catch(S){S.status===423?i(!0):p(S.message||"Fehler beim Laden")}finally{t(!1)}}if(x.useEffect(()=>{ut()},[]),x.useEffect(()=>{const S=setInterval(()=>{We().catch(()=>{})},5e3);return()=>clearInterval(S)},[]),x.useEffect(()=>{n&&!Dd(n)&&no()},[n]),!n)return null;if(!Dd(n))return o.jsxs("div",{className:"p-4 text-red-700",children:[o.jsx(po,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/"},addTitle:"Zur Einsatzbersicht"}),bf]});async function Yt(S){S.preventDefault(),p(""),u("");const T=S.target;try{await Ki("/master/setup",{password:T.master.value,adminUser:T.adminUser.value,adminPass:T.adminPass.value}),u("Master gesetzt & Admin angelegt."),T.reset(),await ut()}catch(H){p(H.message||"Fehler")}}async function wt(S){S.preventDefault(),p(""),u("");const T=S.target;try{await Ki("/master/unlock",{password:T.master.value}),u("Master entsperrt."),T.reset(),await ut()}catch(H){p(H.message||"Master ungltig")}}async function A(){if(confirm("Board wirklich zurcksetzen?")){p(""),u(""),ee(!0);try{await C1(),u("Board zurckgesetzt.")}catch(S){p(S?.message||"Reset fehlgeschlagen.")}finally{ee(!1)}}}async function le(){p(""),u("");const S=(h||[]).map(Pn);if(!S.some(T=>T.id==="Admin")){const T=Object.fromEntries(qe.map(H=>[H,"edit"]));S.unshift({id:"Admin",label:"Administrator",apps:T})}try{const T=await jg("/roles",{roles:S}),H=Array.isArray(T?.roles)?T.roles:S;v(H.map(Pn)),u("Rollen gespeichert.")}catch(T){p(T.message||"Fehler beim Speichern der Rollen")}}function Me(S){S!=="Admin"&&v(T=>(T||[]).filter(H=>typeof H=="string"?H!==S:H&&typeof H=="object"?(H.id??H.label)!==S:!0))}function Oe(S){const T=String(S||"").trim();!T||T.toLowerCase()==="admin"||v(H=>new Set(Q).has(T)?H:[...H||[],{id:T,label:T,apps:{}}])}async function $e(S){S.preventDefault(),p(""),u("");const T=S.target;try{const H=Array.from(T.roles?.selectedOptions||[]).map(se=>String(se.value||"").trim()).filter(Boolean);if(!H.length){p("Bitte mindestens eine Rolle whlen.");return}await Ki("/users",{username:T.u.value,password:T.p.value,displayName:T.d.value,roles:H}),T.reset(),T.roles&&Array.from(T.roles.options||[]).forEach((se,Re)=>{se.selected=Re===0}),u("Benutzer angelegt."),await ut()}catch(H){p(H.message||"Fehler beim Anlegen")}}async function nt(S,T){if(window.confirm(`Benutzer '${T}' wirklich lschen?`)){p(""),u("");try{await RC(`/users/${S}`),u("Benutzer gelscht."),await ut()}catch(H){p(H.message||"Lschen fehlgeschlagen")}}}const[Je,kt]=x.useState(null),[at,Fn]=x.useState({displayName:"",roles:[],password:""});function Wt(S){kt(S.id),Fn({displayName:S.displayName??S.username??"",roles:(()=>{const T=Qd(S);return T.length?T:Q.length?[Q[0]]:[]})(),password:""})}function gn(){kt(null),Fn({displayName:"",roles:[],password:""})}function qn(S,T){Fn(H=>({...H,[S]:T}))}async function zr(S){if(S){p(""),u(""),t(!0);try{const T=Array.isArray(at.roles)?at.roles.filter(Boolean):[];if(!T.length){p("Benutzer bentigt mindestens eine Rolle."),t(!1);return}const H={displayName:at.displayName,roles:T},se=(at.password||"").trim();se&&(H.password=se),await MC(`/users/${S}`,H),u("Benutzer aktualisiert."),await ut(),gn()}catch(T){p(T.message||"Aktualisieren fehlgeschlagen")}finally{t(!1)}}}function Ur(S,T=30){const H=Number.isFinite(Number(T))?Number(T):30,se=Number(S);return!Number.isFinite(se)||se<=0?Math.max(5,Math.min(3600,Math.floor(H))):Math.max(5,Math.min(3600,Math.floor(se)))}function Wa(S,T=5){const H=Number.isFinite(Number(T))?Number(T):5,se=Number(S);return!Number.isFinite(se)||se<0?Math.max(0,Math.floor(H)):Math.max(0,Math.floor(se))}function Nr(S){const T=Ur(S?.intervalSec,E.intervalSec||30),H={enabled:!!S?.enabled,intervalSec:T,demoMode:!!S?.demoMode};j(H),$({enabled:H.enabled,intervalSec:String(H.intervalSec),demoMode:H.demoMode})}async function va(S,T="Auto-Import Einstellungen gespeichert."){if(Y)return;p(""),u(""),B(!0);const H={enabled:!!S.enabled,intervalSec:Ur(S.intervalSec,E.intervalSec||30),demoMode:!!S.demoMode};try{const se=await fetch("/api/import/auto-config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)}),Re=await se.json().catch(()=>({}));if(!se.ok||Re?.error)throw new Error(Re?.error||"Speichern fehlgeschlagen");Nr({enabled:Re.enabled,intervalSec:Re.intervalSec,demoMode:Re.demoMode}),u(T)}catch(se){p(se.message||"Speichern fehlgeschlagen")}finally{B(!1)}}const di=async()=>{const S=!I.demoMode;await va({...I,demoMode:S},S?"Demomodus aktiviert. Fetcher wird beim Import nicht gestartet.":"Demomodus deaktiviert. Fetcher startet beim Import wieder.")},fi=async()=>{await va({...I,enabled:!I.enabled})},Jt=async()=>{await va(I)};async function Br(){if(qt)return;const S=Number.parseInt(At.intervalSec,10);if(!Number.isFinite(S)||S<5){p("Worker-Intervall muss mindestens 5 Sekunden sein.");return}p(""),u(""),$t(!0);try{const T=await fetch("/api/user/admin/worker/config",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({intervalMs:S*1e3,enabled:At.enabled})}),H=await T.json().catch(()=>({}));if(!T.ok||H?.error)throw new Error(H?.error||"Speichern fehlgeschlagen");H.config&&(Ae(H.config),Bt({intervalSec:String((H.config.intervalMs||3e4)/1e3),enabled:H.config.enabled!==!1})),u(H.message||"Worker-Intervall gespeichert.")}catch(T){p(T.message||"Speichern fehlgeschlagen")}finally{$t(!1)}}async function $r(){if(we)return;const S=Number.parseInt(Ee.intervalMinutes,10);if(!Number.isFinite(S)||S<0){p("Intervall fr die KI-Analyse muss eine Zahl  0 sein (0 = nur manuelle Auslsung).");return}const T=Math.max(0,S);p(""),u(""),O(!0);try{const H=await fetch("/api/situation/analysis-config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!!Ee.enabled,intervalMinutes:T,useRagContext:!!Ee.useRagContext})}),se=await H.json().catch(()=>({}));if(!H.ok||se?.error)throw new Error(se?.error||"Speichern fehlgeschlagen");const Re=Wa(se.intervalMinutes,T),mt={enabled:!!se.enabled,intervalMinutes:Re,useRagContext:!!se.useRagContext};Te(mt),be({enabled:mt.enabled,intervalMinutes:Number.isFinite(mt.intervalMinutes)?String(mt.intervalMinutes):"",useRagContext:mt.useRagContext}),u("KI-Analyse Einstellungen gespeichert.")}catch(H){p(H.message||"Speichern fehlgeschlagen")}finally{O(!1)}}async function Ha(){if(ne)return;const S=Number.parseInt(te.intervalMinutes,10);if(!Number.isFinite(S)||S<=0){p("Intervall fr den Auto-Druck muss eine Zahl  1 sein.");return}const T=Math.max(1,S),H=Ul(te.entryScope);p(""),u(""),Ce(!0);try{const se=await fetch("/api/protocol/auto-print-config",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:!!te.enabled,intervalMinutes:T,entryScope:H,scope:H})}),Re=await se.json().catch(()=>({}));if(!se.ok||Re?.error)throw new Error(Re?.error||"Speichern fehlgeschlagen");const mt=Number(Re.intervalMinutes),Vt=Number.isFinite(mt)&&mt>0?Math.floor(mt):T,_n=Number(Re.lastRunAt),P=Ul(Re.entryScope??Re.scope??Re.mode),U={enabled:!!Re.enabled,intervalMinutes:Vt,lastRunAt:Number.isFinite(_n)&&_n>0?_n:null,entryScope:P,scope:P};re(U),ie({enabled:U.enabled,intervalMinutes:String(U.intervalMinutes||""),entryScope:U.entryScope}),u("Auto-Druck Einstellungen gespeichert.")}catch(se){p(se.message||"Speichern fehlgeschlagen")}finally{Ce(!1)}}async function kr(S){if(S.preventDefault(),oe)return;const T=Number.parseInt(b.intervalMinutes,10),H={label:b.label||"",to:b.to,subject:b.subject,text:b.text,mode:b.mode==="time"?"time":"interval",intervalMinutes:Number.isFinite(T)?T:b.intervalMinutes,timeOfDay:b.timeOfDay,attachmentPath:b.attachmentPath,enabled:!!b.enabled};p(""),u(""),he(!0);try{const se=b.id?`/api/mail/schedule/${encodeURIComponent(b.id)}`:"/api/mail/schedule",Re=b.id?"PUT":"POST",mt=await fetch(se,{method:Re,credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)}),Vt=await mt.json().catch(()=>({}));if(!mt.ok||Vt?.error)throw new Error(Vt?.error||"Speichern fehlgeschlagen");F(Array.isArray(Vt.schedules)?Vt.schedules:[]),lt(),u(b.id?"Zeitplan aktualisiert.":"Zeitplan angelegt.")}catch(se){p(se.message||"Speichern fehlgeschlagen")}finally{he(!1)}}async function xs(S){if(S){p(""),u("");try{const T=await fetch(`/api/mail/schedule/${encodeURIComponent(S)}`,{method:"DELETE",credentials:"include"}),H=await T.json().catch(()=>({}));if(!T.ok||H?.error)throw new Error(H?.error||"Lschen fehlgeschlagen");F(Array.isArray(H.schedules)?H.schedules:[]),b.id===S&&lt(),u("Zeitplan gelscht.")}catch(T){p(T.message||"Lschen fehlgeschlagen")}}}async function ws(S){if(S){p(""),u("");try{const T=await fetch(`/api/mail/schedule/${encodeURIComponent(S)}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetLastSent:!0})}),H=await T.json().catch(()=>({}));if(!T.ok||H?.error)throw new Error(H?.error||"Aktualisierung fehlgeschlagen");F(Array.isArray(H.schedules)?H.schedules:[]),u("Letzter Versandzeitpunkt zurckgesetzt.")}catch(T){p(T.message||"Aktualisierung fehlgeschlagen")}}}async function ya(S){if(S.preventDefault(),!He){p(""),u("");try{Xe(!0);const T=(ue.url||"").trim();if(!T)throw new Error("Bitte eine URL angeben.");const H={label:ue.label,url:T,method:ue.method,body:ue.body,mode:ue.mode,intervalMinutes:Number(ue.intervalMinutes),timeOfDay:ue.timeOfDay,enabled:!!ue.enabled},se=!!ue.id,Re=await fetch(se?`/api/http/schedule/${encodeURIComponent(ue.id)}`:"/api/http/schedule",{method:se?"PUT":"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)}),mt=await Re.json().catch(()=>({}));if(!Re.ok||mt?.error)throw new Error(mt?.error||"Speichern fehlgeschlagen");Se(Array.isArray(mt.schedules)?mt.schedules:[]),Ke(),u(se?"API-Zeitplan aktualisiert.":"API-Zeitplan angelegt.")}catch(T){p(T.message||"Speichern fehlgeschlagen")}finally{Xe(!1)}}}async function Jn(S){if(S){p(""),u("");try{const T=await fetch(`/api/http/schedule/${encodeURIComponent(S)}`,{method:"DELETE",credentials:"include"}),H=await T.json().catch(()=>({}));if(!T.ok||H?.error)throw new Error(H?.error||"Lschen fehlgeschlagen");Se(Array.isArray(H.schedules)?H.schedules:[]),ue.id===S&&Ke(),u("API-Zeitplan gelscht.")}catch(T){p(T.message||"Lschen fehlgeschlagen")}}}async function bs(S){if(S){p(""),u("");try{const T=await fetch(`/api/http/schedule/${encodeURIComponent(S)}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({resetLastRun:!0})}),H=await T.json().catch(()=>({}));if(!T.ok||H?.error)throw new Error(H?.error||"Aktualisierung fehlgeschlagen");Se(Array.isArray(H.schedules)?H.schedules:[]),u("Letzter Aufrufzeitpunkt zurckgesetzt.")}catch(T){p(T.message||"Aktualisierung fehlgeschlagen")}}}const Hn=J.lastRunAt?new Date(J.lastRunAt).toLocaleString("de-AT",{hour12:!1}):null,pi=S=>{const T=Number(S);return!Number.isFinite(T)||T<=0?"":new Date(T).toLocaleString("de-AT",{hour12:!1})},Ka=!!b.id,Ss=S=>{const T=Number(S);return!Number.isFinite(T)||T<=0?"":new Date(T).toLocaleString("de-AT",{hour12:!1})},aa=!!ue.id;return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx(po,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/"},addTitle:"Zur Einsatzbersicht"}),o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[o.jsx("h1",{className:"text-2xl font-semibold",children:"User Admin"}),o.jsx("button",{type:"button",onClick:A,className:"px-3 py-1.5 rounded-md bg-gray-700 hover:bg-gray-800 text-white disabled:opacity-60",disabled:Z||s,children:Z?"Reset luft":"Reset"})]}),(l||d||s)&&o.jsxs("div",{className:"space-y-1",children:[s&&o.jsx("div",{className:"text-amber-700",children:"Gesperrt (Master-Lock aktiv)."}),d&&o.jsx("div",{className:"text-rose-700",children:d}),l&&o.jsx("div",{className:"text-emerald-700",children:l})]}),o.jsxs("details",{className:"border rounded p-3",children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Master-Key initial setzen"}),o.jsxs("form",{onSubmit:Yt,className:"mt-3 grid gap-2 max-w-xl",children:[o.jsx("input",{name:"master",placeholder:"Neuer Master-Key",className:"border px-2 py-1 rounded"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{name:"adminUser",placeholder:"Admin Benutzer (z. B. admin)",className:"border px-2 py-1 rounded"}),o.jsx("input",{name:"adminPass",placeholder:"Admin Passwort",className:"border px-2 py-1 rounded"})]}),o.jsx("button",{className:"border rounded px-3 py-1 w-48",children:"Setzen"})]})]}),o.jsxs("details",{className:"border rounded p-3",open:s,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Master entsperren (nach Server-Neustart)"}),o.jsxs("form",{onSubmit:wt,className:"mt-3 grid gap-2 max-w-sm",children:[o.jsx("input",{name:"master",placeholder:"Master-Key",className:"border px-2 py-1 rounded"}),o.jsx("button",{className:"border rounded px-3 py-1 w-32",children:"Entsperren"})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Rollen (Admin + weitere)"}),o.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[de.length===0&&o.jsx("span",{className:"text-gray-500 text-sm",children:" keine Rollen geladen "}),de.map(S=>o.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full border ${S.label==="Admin"?"bg-slate-100 border-slate-300 text-slate-700":"bg-gray-50 border-gray-300 text-gray-700"}`,children:[S.label,S.label!=="Admin"&&o.jsx("button",{type:"button",onClick:()=>Me(S.label),className:"ml-1 text-gray-500 hover:text-red-600",title:"Rolle entfernen",children:""})]},S.key))]}),o.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[o.jsx("input",{id:"addRole",placeholder:"Rolle hinzufgen",className:"border px-2 py-1 rounded",onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),Oe(S.currentTarget.value),S.currentTarget.value="")}}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:()=>{const S=document.getElementById("addRole");if(!S)return;const T=S.value.trim();T&&(Oe(T),S.value="")},children:"Hinzufgen"}),o.jsx("div",{className:"ml-auto",children:o.jsx("button",{className:"border rounded px-3 py-1",onClick:le,disabled:s||r,children:"Rollen speichern"})})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Hinweis: ",o.jsx("b",{children:"Admin"})," kann nicht gelscht werden."]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Rechte pro Rolle"}),o.jsx("div",{className:"mt-3 overflow-x-auto",children:o.jsxs("table",{className:"min-w-[720px] w-full text-sm border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500",children:[o.jsx("th",{className:"px-2",children:"Rolle"}),qe.map(S=>o.jsx("th",{className:"px-2 capitalize",children:S},S))]})}),o.jsx("tbody",{children:Q.map(S=>{const T=(h||[]).find(se=>(typeof se=="string"?se:se?.id??se?.label)===S),H=Pn(T);return o.jsxs("tr",{className:"bg-white shadow-sm rounded",children:[o.jsx("td",{className:"px-2 py-1 font-medium",children:S}),qe.map(se=>{const Re=H.apps?.[se]??"none";return o.jsx("td",{className:"px-2 py-1",children:o.jsx("select",{value:Re,onChange:mt=>vt(S,se,mt.target.value),className:"border rounded px-2 py-1",disabled:s||r||S==="Admin",title:S==="Admin"?"Admin ist immer edit":void 0,children:ae.map(mt=>o.jsx("option",{value:mt,children:mt},mt))})},se)})]},S)})})]})}),o.jsx("div",{className:"mt-3",children:o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:le,disabled:s||r,children:"Rechte speichern"})})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Benutzer"}),o.jsxs("form",{onSubmit:$e,className:"mt-3 grid grid-cols-5 gap-2 items-start max-w-5xl",children:[o.jsx("input",{name:"u",placeholder:"username",className:"border px-2 py-1 rounded",disabled:s}),o.jsx("input",{name:"p",placeholder:"passwort",className:"border px-2 py-1 rounded",disabled:s}),o.jsx("input",{name:"d",placeholder:"Anzeigename",className:"border px-2 py-1 rounded",disabled:s}),o.jsx("select",{name:"roles",multiple:!0,size:Math.min(6,Math.max(Q.length||0,3)),className:"border px-2 py-1 rounded min-h-[6rem]",defaultValue:Q.length?[Q[0]]:[],disabled:s,children:Q.map(S=>o.jsx("option",{value:S,children:S},S))},Q.join("|")),o.jsx("button",{className:"border rounded px-3 py-1",disabled:s,children:"Anlegen"})]}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Mehrfachauswahl ber Strg (Windows) bzw.  (macOS) mglich."}),o.jsx("div",{className:"mt-4",children:y.length===0?o.jsx("div",{className:"text-sm text-gray-500",children:" keine Benutzer "}):o.jsxs("table",{className:"text-sm w-full max-w-5xl border-separate border-spacing-y-1",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-gray-500",children:[o.jsx("th",{className:"px-2",children:"ID"}),o.jsx("th",{className:"px-2",children:"Benutzername"}),o.jsx("th",{className:"px-2",children:"Rollen"}),o.jsx("th",{className:"px-2",children:"Anzeigename"}),o.jsx("th",{className:"px-2 w-40",children:"Aktionen"})]})}),o.jsx("tbody",{children:y.map(S=>{const T=Je===S.id,H=Qd(S),se=Dd(S);return o.jsxs("tr",{className:"bg-white border rounded",children:[o.jsx("td",{className:"px-2 py-1",children:S.id}),o.jsx("td",{className:"px-2 py-1",children:S.username}),o.jsx("td",{className:"px-2 py-1",children:T?o.jsx("select",{multiple:!0,size:Math.min(4,Math.max(Q.length||0,2)),value:at.roles,onChange:Re=>qn("roles",Array.from(Re.target.selectedOptions||[]).map(mt=>String(mt.value||"").trim()).filter(Boolean)),className:"border rounded px-2 py-1 w-full min-h-[4rem]",disabled:s||r,children:Q.map(Re=>o.jsx("option",{value:Re,children:Re},Re))}):H.length?H.join(", "):""}),o.jsx("td",{className:"px-2 py-1",children:T?o.jsx("input",{value:at.displayName,onChange:Re=>qn("displayName",Re.target.value),className:"border rounded px-2 py-1 w-full",disabled:s||r}):S.displayName||""}),o.jsx("td",{className:"px-2 py-1 space-x-2",children:T?o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"password",placeholder:"neues Passwort (optional)",value:at.password,onChange:Re=>qn("password",Re.target.value),className:"border rounded px-2 py-1 w-40 mr-2",disabled:s||r}),o.jsx("button",{className:"px-2 py-1 rounded border border-emerald-300 text-emerald-700 hover:bg-emerald-50",onClick:()=>zr(S.id),disabled:s||r,title:"nderungen speichern",children:"Speichern"}),o.jsx("button",{className:"px-2 py-1 rounded border",onClick:gn,disabled:r,title:"Abbrechen",children:"Abbrechen"})]}):o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"px-2 py-1 rounded border",onClick:()=>Wt(S),disabled:s||r,title:"Benutzer bearbeiten",children:"Bearbeiten"}),o.jsx("button",{className:"px-2 py-1 rounded border border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>nt(S.id,S.username),disabled:s||se,title:se?"Admin kann nicht gelscht werden":"Benutzer lschen",children:"Lschen"})]})})]},S.id)})})]})})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Import-Einstellungen"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!I.enabled,onChange:fi,disabled:s||Y}),"Auto-Import aktivieren"]}),o.jsxs("label",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"Intervall (Sekunden)"}),o.jsx("input",{type:"number",min:5,max:3600,className:"border px-2 py-1 rounded w-24",value:I.intervalSec,onChange:S=>{const T=S.target.value.replace(/[^0-9]/g,"");$(H=>({...H,intervalSec:T}))},disabled:s||Y})]}),o.jsx("button",{type:"button",onClick:Jt,disabled:s||Y,className:"px-3 py-1 rounded border border-blue-300 text-blue-700 hover:bg-blue-50 disabled:opacity-60",children:"Speichern"})]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!I.demoMode,onChange:di,disabled:s||Y}),"Demomodus (Fetcher beim Import nicht starten)"]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Bei aktivem Demomodus wird der Fetcher fr manuelle und automatische Importe nicht aufgerufen."})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Auto-Druck (Protokoll)"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!te.enabled,onChange:S=>ie(T=>({...T,enabled:S.target.checked})),disabled:s||ne}),"Automatischen Druck aktivieren"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{htmlFor:"autoPrintInterval",className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{id:"autoPrintInterval",type:"number",min:1,className:"border px-2 py-1 rounded w-24",value:te.intervalMinutes,onChange:S=>{const T=S.target.value.replace(/[^0-9]/g,"");ie(H=>({...H,intervalMinutes:T}))},disabled:s||ne})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{htmlFor:"autoPrintScope",className:"text-sm text-gray-700",children:"Umfang"}),o.jsxs("select",{id:"autoPrintScope",className:"border px-2 py-1 rounded w-64",value:te.entryScope,onChange:S=>{const T=Ul(S.target.value);ie(H=>({...H,entryScope:T}))},disabled:s||ne,children:[o.jsx("option",{value:"interval",children:"Nur Meldungen im Intervall"}),o.jsx("option",{value:"all",children:"Alle Meldungen"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:te.entryScope==="all"?"Es werden alle vorhandenen Protokollmeldungen gedruckt.":"Es werden nur Meldungen gedruckt, die seit dem letzten Lauf erfasst wurden."}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[o.jsx("span",{children:"Letzter Lauf:"}),o.jsx("span",{children:Hn||""})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:Ha,disabled:s||ne,children:"Einstellungen speichern"})})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"KI-Analyse"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!Ee.enabled,onChange:S=>be(T=>({...T,enabled:S.target.checked})),disabled:s||we}),"KI-Analyse aktivieren"]}),o.jsxs("label",{className:"inline-flex items-center gap-2",children:[o.jsx("input",{type:"checkbox",checked:!!Ee.useRagContext,onChange:S=>be(T=>({...T,useRagContext:S.target.checked})),disabled:s||we}),"RAG-Wissensdatenbank einbeziehen (SOPs, Richtlinien)"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{htmlFor:"analysisInterval",className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{id:"analysisInterval",type:"number",min:0,className:"border px-2 py-1 rounded w-24",value:Ee.intervalMinutes,onChange:S=>{const T=S.target.value.replace(/[^0-9]/g,"");be(H=>({...H,intervalMinutes:T}))},disabled:s||we})]}),o.jsx("div",{className:"flex items-center gap-3",children:o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:$r,disabled:s||we,children:"Einstellungen speichern"})}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Aktuell: ",ve.enabled?"aktiv":"deaktiviert","  ",ve.intervalMinutes," min  RAG: ",ve.useRagContext?"aktiviert":"deaktiviert"]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Zeitgesteuerter Mailversand"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Versand an hinterlegte Empfnger mit festem Intervall oder tglicher Uhrzeit. Anhnge werden vom Serverpfad geladen."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500",children:[o.jsx("th",{className:"px-2",children:"Titel / Betreff"}),o.jsx("th",{className:"px-2",children:"Empfnger"}),o.jsx("th",{className:"px-2",children:"Rhythmus"}),o.jsx("th",{className:"px-2",children:"Anhang"}),o.jsx("th",{className:"px-2",children:"Letzter Versand"}),o.jsx("th",{className:"px-2",children:"Aktiv"}),o.jsx("th",{className:"px-2",children:"Aktionen"})]})}),o.jsx("tbody",{children:W.length===0?o.jsx("tr",{children:o.jsx("td",{className:"px-2 py-2 text-gray-500",colSpan:7,children:" keine Zeitplne hinterlegt "})}):W.map(S=>o.jsxs("tr",{className:"bg-white shadow-sm rounded",children:[o.jsx("td",{className:"px-2 py-2 font-medium",children:S.label||S.subject||"(ohne Titel)"}),o.jsx("td",{className:"px-2 py-2",children:S.to}),o.jsx("td",{className:"px-2 py-2",children:S.mode==="time"?`tglich ${S.timeOfDay||""}`:`${S.intervalMinutes||""} min`}),o.jsx("td",{className:"px-2 py-2 break-all",children:S.attachmentPath||""}),o.jsx("td",{className:"px-2 py-2 text-xs text-gray-600",children:pi(S.lastSentAt)}),o.jsx("td",{className:"px-2 py-2 text-center",children:S.enabled!==!1?"Ja":"Nein"}),o.jsxs("td",{className:"px-2 py-2 space-x-2 whitespace-nowrap",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>Ut(S),disabled:oe,children:"Bearbeiten"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>ws(S.id),disabled:oe,children:"Zurcksetzen"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>xs(S.id),disabled:oe,children:"Lschen"})]})]},S.id))})]})}),je&&o.jsx("div",{className:"text-xs text-gray-500",children:"Lade Zeitplne "}),o.jsxs("form",{onSubmit:kr,className:"grid gap-3 lg:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Titel (optional)"}),o.jsx("input",{className:"border px-2 py-1 rounded",value:b.label,onChange:S=>L(T=>({...T,label:S.target.value})),disabled:oe})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Empfnger"}),o.jsx("input",{className:"border px-2 py-1 rounded",type:"email",required:!0,value:b.to,onChange:S=>L(T=>({...T,to:S.target.value})),disabled:oe})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Betreff"}),o.jsx("input",{className:"border px-2 py-1 rounded",required:!0,value:b.subject,onChange:S=>L(T=>({...T,subject:S.target.value})),disabled:oe})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Mailtext"}),o.jsx("textarea",{className:"border px-2 py-1 rounded min-h-[120px]",required:!0,value:b.text,onChange:S=>L(T=>({...T,text:S.target.value})),disabled:oe})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Versandart"}),o.jsxs("select",{className:"border px-2 py-1 rounded",value:b.mode,onChange:S=>L(T=>({...T,mode:S.target.value==="time"?"time":"interval"})),disabled:oe,children:[o.jsx("option",{value:"interval",children:"Intervall (Minuten)"}),o.jsx("option",{value:"time",children:"Uhrzeit (tglich)"})]})]}),b.mode==="time"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Uhrzeit (HH:MM)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-40",type:"time",value:b.timeOfDay,onChange:S=>L(T=>({...T,timeOfDay:S.target.value})),disabled:oe})]}):o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-32",type:"number",min:1,value:b.intervalMinutes,onChange:S=>{const T=S.target.value.replace(/[^0-9]/g,"");L(H=>({...H,intervalMinutes:T}))},disabled:oe})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Anhang (Serverpfad)"}),o.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"z. B. data/mail/anhang.pdf",value:b.attachmentPath,onChange:S=>L(T=>({...T,attachmentPath:S.target.value})),disabled:oe})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[o.jsx("input",{type:"checkbox",checked:!!b.enabled,onChange:S=>L(T=>({...T,enabled:S.target.checked})),disabled:oe}),"Aktiv"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"submit",className:"border rounded px-3 py-1",disabled:oe,children:Ka?"Zeitplan speichern":"Zeitplan anlegen"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:lt,disabled:oe,children:"Neu"})]})]})]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Zeitgesteuerte API-Calls"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Ruft hinterlegte URLs im gewnschten Rhythmus auf (GET/POST/PUT/PATCH/DELETE). Antwortinhalt wird verworfen, Fehler werden protokolliert."}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full text-sm border-separate border-spacing-y-2",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left text-xs text-gray-500",children:[o.jsx("th",{className:"px-2",children:"Titel"}),o.jsx("th",{className:"px-2",children:"URL"}),o.jsx("th",{className:"px-2",children:"Methode"}),o.jsx("th",{className:"px-2",children:"Rhythmus"}),o.jsx("th",{className:"px-2",children:"Letzter Aufruf"}),o.jsx("th",{className:"px-2",children:"Aktiv"}),o.jsx("th",{className:"px-2",children:"Aktionen"})]})}),o.jsx("tbody",{children:Le.length===0?o.jsx("tr",{children:o.jsx("td",{className:"px-2 py-2 text-gray-500",colSpan:7,children:" keine Zeitplne hinterlegt "})}):Le.map(S=>o.jsxs("tr",{className:"bg-white shadow-sm rounded",children:[o.jsx("td",{className:"px-2 py-2 font-medium",children:S.label||"(ohne Titel)"}),o.jsx("td",{className:"px-2 py-2 break-all",children:S.url}),o.jsx("td",{className:"px-2 py-2",children:S.method||"GET"}),o.jsx("td",{className:"px-2 py-2",children:S.mode==="time"?`tglich ${S.timeOfDay||""}`:`${S.intervalMinutes||""} min`}),o.jsx("td",{className:"px-2 py-2 text-xs text-gray-600",children:Ss(S.lastRunAt)}),o.jsx("td",{className:"px-2 py-2 text-center",children:S.enabled!==!1?"Ja":"Nein"}),o.jsxs("td",{className:"px-2 py-2 space-x-2 whitespace-nowrap",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>it(S),disabled:He,children:"Bearbeiten"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border",onClick:()=>bs(S.id),disabled:He,children:"Zurcksetzen"}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded border border-rose-300 text-rose-700 hover:bg-rose-50",onClick:()=>Jn(S.id),disabled:He,children:"Lschen"})]})]},S.id))})]})}),gt&&o.jsx("div",{className:"text-xs text-gray-500",children:"Lade Zeitplne "}),o.jsxs("form",{onSubmit:ya,className:"grid gap-3 lg:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Titel (optional)"}),o.jsx("input",{className:"border px-2 py-1 rounded",value:ue.label,onChange:S=>xe(T=>({...T,label:S.target.value})),disabled:He})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"URL"}),o.jsx("input",{className:"border px-2 py-1 rounded",type:"text",required:!0,placeholder:"https://example.com/webhook",value:ue.url,onChange:S=>xe(T=>({...T,url:S.target.value})),disabled:He})]}),o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"HTTP-Methode"}),o.jsxs("select",{className:"border px-2 py-1 rounded w-40",value:ue.method,onChange:S=>xe(T=>({...T,method:S.target.value})),disabled:He,children:[o.jsx("option",{value:"GET",children:"GET"}),o.jsx("option",{value:"POST",children:"POST"}),o.jsx("option",{value:"PUT",children:"PUT"}),o.jsx("option",{value:"PATCH",children:"PATCH"}),o.jsx("option",{value:"DELETE",children:"DELETE"})]})]}),ue.method&&ue.method!=="GET"&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Request-Body (optional, wird unverndert gesendet)"}),o.jsx("textarea",{className:"border px-2 py-1 rounded min-h-[80px]",placeholder:"z. B. JSON",value:ue.body,onChange:S=>xe(T=>({...T,body:S.target.value})),disabled:He})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Aufrufart"}),o.jsxs("select",{className:"border px-2 py-1 rounded",value:ue.mode,onChange:S=>xe(T=>({...T,mode:S.target.value==="time"?"time":"interval"})),disabled:He,children:[o.jsx("option",{value:"interval",children:"Intervall (Minuten)"}),o.jsx("option",{value:"time",children:"Uhrzeit (tglich)"})]})]}),ue.mode==="time"?o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Uhrzeit (HH:MM)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-40",type:"time",value:ue.timeOfDay,onChange:S=>xe(T=>({...T,timeOfDay:S.target.value})),disabled:He})]}):o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("label",{className:"text-sm text-gray-700",children:"Intervall (Minuten)"}),o.jsx("input",{className:"border px-2 py-1 rounded w-32",type:"number",min:1,value:ue.intervalMinutes,onChange:S=>{const T=S.target.value.replace(/[^0-9]/g,"");xe(H=>({...H,intervalMinutes:T}))},disabled:He})]}),o.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[o.jsx("input",{type:"checkbox",checked:!!ue.enabled,onChange:S=>xe(T=>({...T,enabled:S.target.checked})),disabled:He}),"Aktiv"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"submit",className:"border rounded px-3 py-1",disabled:He,children:aa?"Zeitplan speichern":"Zeitplan anlegen"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",onClick:Ke,disabled:He,children:"Neu"})]})]})]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Fetcher-Zugangsdaten (global)"}),o.jsxs("div",{className:"mt-3 text-sm",children:["Status:"," ",C.has?o.jsx("b",{className:"text-emerald-700",children:"gesetzt"}):o.jsx("b",{className:"text-rose-700",children:"fehlt"}),C.updatedAt&&o.jsxs(o.Fragment,{children:["  zuletzt gendert: ",o.jsx("code",{children:new Date(C.updatedAt).toLocaleString("de-AT",{hour12:!1})})]})]}),o.jsxs("form",{onSubmit:async S=>{S.preventDefault(),p(""),u("");const T=S.target;try{await jg("/fetcher",{username:T.u.value,password:T.p.value}),T.reset(),u("Fetcher-Creds gespeichert (global)."),await ut()}catch(H){p(H.message||"Speichern fehlgeschlagen")}},className:"mt-3 grid grid-cols-3 gap-2 items-center max-w-4xl",children:[o.jsx("input",{name:"u",placeholder:"Fetcher Benutzername",className:"border px-2 py-1 rounded",disabled:s}),o.jsx("input",{name:"p",placeholder:"Fetcher Passwort",className:"border px-2 py-1 rounded",disabled:s}),o.jsx("button",{className:"border rounded px-3 py-1",disabled:s,children:"Speichern"})]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Diese Zugangsdaten gelten fr ",o.jsx("b",{children:"alle Benutzer"}),". Start/Stopp nutzt immer den globalen Satz."]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Wartung (Admin)"}),o.jsxs("div",{className:"mt-3 grid gap-2 max-w-xl",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"border rounded px-3 py-1",disabled:s||r,onClick:async()=>{p(""),u(""),t(!0);try{const S=await Ki("/admin/initialsetup");u(S?.ok?S.message||"Initialsetup erfolgreich.":"Initialsetup ausgefhrt.")}catch(S){p(S.message||"Initialsetup fehlgeschlagen")}finally{t(!1)}},title:'Kopiert *.csv & *.json aus "data/initial" nach "data" (berschreibt).',children:"Initialsetup"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",disabled:s||r,onClick:async()=>{p(""),u(""),t(!0);try{const S=await Ki("/admin/archive"),T=S?.file||S?.filename||"archive.zip";u(`Archiv erstellt: ${T}`);const H=`/api/user/admin/archive/download/${encodeURIComponent(T)}`,se=document.createElement("a");se.href=H,se.download=T,document.body.appendChild(se),se.click(),se.remove()}catch(S){p(S.message||"Archiv-Erstellung fehlgeschlagen")}finally{t(!1)}},title:'Packt *.csv & *.json aus "data" in eine ZIP unter "data/archive" (mit Zeitstempel) und ldt es herunter.',children:"Archive"}),o.jsx("button",{type:"button",className:"border rounded px-3 py-1",disabled:s||r,onClick:async()=>{p(""),u(""),t(!0);try{const S=await fetch("/api/user/admin/logs/download",{credentials:"include"});if(!S.ok){const mt=await S.text();let Vt="Log-Download fehlgeschlagen";try{Vt=JSON.parse(mt)?.error||Vt}catch{mt&&(Vt=mt)}throw new Error(Vt)}const T=await S.blob(),H=PC(S.headers.get("Content-Disposition"),"logs.zip"),se=window.URL.createObjectURL(T),Re=document.createElement("a");Re.href=se,Re.download=H,document.body.appendChild(Re),Re.click(),Re.remove(),window.URL.revokeObjectURL(se),u("Logfiles heruntergeladen.")}catch(S){p(S.message||"Log-Download fehlgeschlagen")}finally{t(!1)}},title:"Ldt alle Logfiles als ZIP herunter.",children:"Logfiles herunterladen"})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Hinweis: Nur ",o.jsx("b",{children:"Admin"}),". Initialsetup berschreibt bestehende Dateien im Datenverzeichnis."]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Chatbot & Worker"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${Ze.chatbot?.ready?"bg-green-500":Ze.chatbot?.running?"bg-yellow-500":"bg-gray-400"}`}),o.jsxs("span",{children:["Chatbot: ",o.jsx("b",{children:Ze.chatbot?.ready?"Luft":Ze.chatbot?.running?"Startet...":"Gestoppt"})]}),Ze.chatbot?.pid&&o.jsxs("span",{className:"text-xs text-gray-500",children:["(PID: ",Ze.chatbot.pid,")"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`inline-block w-3 h-3 rounded-full ${Ze.worker?.running?"bg-green-500":"bg-gray-400"}`}),o.jsxs("span",{children:["Worker: ",o.jsx("b",{children:Ze.worker?.running?"Luft":"Gestoppt"})]}),Ze.worker?.pid&&o.jsxs("span",{className:"text-xs text-gray-500",children:["(PID: ",Ze.worker.pid,")"]})]}),o.jsx("button",{type:"button",className:"ml-auto px-2 py-1 border rounded text-xs",disabled:Et,onClick:async()=>{ft(!0),await We(),ft(!1)},children:"Status aktualisieren"})]}),o.jsxs("div",{className:"grid gap-2 text-xs text-gray-600",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"min-w-[70px] font-medium text-gray-700",children:"Chatbot"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",disabled:s||Et||Ze.chatbot?.running,onClick:async()=>{p(""),u(""),ft(!0);try{const S=await fetch("/api/user/admin/chatbot/server/start",{method:"POST",credentials:"include"}),T=await S.json();if(!S.ok||T.error)throw new Error(T.error||"Start fehlgeschlagen");const H=T.status??(T.chatbot||T.worker?T:null);H?Ft(H):await We(),u("Chatbot gestartet.")}catch(S){p(S.message||"Start fehlgeschlagen")}finally{ft(!1)}},children:"Starten"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white disabled:opacity-60",disabled:s||Et||!Ze.chatbot?.running,onClick:async()=>{p(""),u(""),ft(!0);try{const S=await fetch("/api/user/admin/chatbot/server/stop",{method:"POST",credentials:"include"}),T=await S.json();if(!S.ok||T.error)throw new Error(T.error||"Stop fehlgeschlagen");const H=T.status??(T.chatbot||T.worker?T:null);H?Ft(H):await We(),u("Chatbot gestoppt.")}catch(S){p(S.message||"Stop fehlgeschlagen")}finally{ft(!1)}},children:"Stoppen"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsx("span",{className:"min-w-[70px] font-medium text-gray-700",children:"Worker"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",disabled:s||Et||Ze.worker?.running,onClick:async()=>{p(""),u(""),ft(!0);try{const S=await fetch("/api/user/admin/chatbot/worker/start",{method:"POST",credentials:"include"}),T=await S.json();if(!S.ok||T.error)throw new Error(T.error||"Start fehlgeschlagen");const H=T.status??(T.chatbot||T.worker?T:null);H?Ft(H):await We(),u("Worker gestartet.")}catch(S){p(S.message||"Start fehlgeschlagen")}finally{ft(!1)}},children:"Starten"}),o.jsx("button",{type:"button",className:"px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white disabled:opacity-60",disabled:s||Et||!Ze.worker?.running,onClick:async()=>{p(""),u(""),ft(!0);try{const S=await fetch("/api/user/admin/chatbot/worker/stop",{method:"POST",credentials:"include"}),T=await S.json();if(!S.ok||T.error)throw new Error(T.error||"Stop fehlgeschlagen");const H=T.status??(T.chatbot||T.worker?T:null);H?Ft(H):await We(),u("Worker gestoppt.")}catch(S){p(S.message||"Stop fehlgeschlagen")}finally{ft(!1)}},children:"Stoppen"})]})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Chatbot-Server (Port 3100) und Simulations-Worker lassen sich getrennt starten/stoppen."})]})]}),o.jsxs("details",{className:"border rounded p-3",children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Worker-Intervall Einstellung"}),o.jsxs("div",{className:"mt-3 space-y-3 text-sm",children:[o.jsxs("p",{className:"text-gray-600",children:["Aktuelles Intervall: ",o.jsxs("strong",{children:[(st.intervalMs/1e3).toFixed(1),"s"]}),Ze.worker?.running&&o.jsx("span",{className:"ml-2 text-green-600 font-medium",children:"(Worker luft, nderung wird in ~10s bernommen)"})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("label",{className:"font-medium",children:"Intervall (Sekunden):"}),o.jsx("input",{type:"number",min:"5",step:"1",className:"border rounded px-2 py-1 w-24",disabled:s||qt,value:At.intervalSec,onChange:S=>Bt({...At,intervalSec:S.target.value})}),o.jsx("button",{type:"button",className:"px-4 py-1 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60",disabled:s||qt,onClick:Br,children:qt?"Speichert...":"Speichern"})]}),o.jsx("div",{className:"text-xs text-gray-500",children:"Min. 5 Sekunden. Der Worker berwacht die Config-Datei und passt das Intervall automatisch an."})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Knowledge-Basis (RAG)"}),o.jsxs("div",{className:"mt-3 space-y-4 text-sm",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"font-medium",children:"Neue Dateien hochladen"}),o.jsx("input",{type:"file",multiple:!0,accept:".txt,.pdf,.json,.md,.csv",disabled:rn||s,onChange:async S=>{const T=S.target.files;if(!(!T||T.length===0)){p(""),u(""),ot(!0);try{const H=new FormData;for(const _n of T)H.append("files",_n);const se=await fetch("/api/user/admin/knowledge/upload-multiple",{method:"POST",credentials:"include",body:H}),Re=await se.json();if(!se.ok||Re.error)throw new Error(Re.error||"Upload fehlgeschlagen");u(Re.message||`${Re.count} Datei(en) hochgeladen`);const Vt=await(await fetch("/api/user/admin/knowledge/files",{credentials:"include"})).json();Vt.ok!==!1&&q(Vt.files||[])}catch(H){p(H.message||"Upload fehlgeschlagen")}finally{ot(!1),S.target.value=""}}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Erlaubte Dateitypen: .txt, .pdf, .json, .md, .csv (max. 50MB pro Datei)"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-60",disabled:pt||s,onClick:async()=>{p(""),u(""),rt(!0);try{const S=await fetch("/api/user/admin/knowledge/ingest",{method:"POST",credentials:"include"}),T=await S.json();if(!S.ok||T.error)throw new Error(T.error||"Ingest fehlgeschlagen");u("Knowledge-Index erfolgreich aktualisiert.")}catch(S){p(S.message||"Ingest fehlgeschlagen")}finally{rt(!1)}},children:pt?"Indexierung luft":"Ingest starten"}),o.jsx("button",{type:"button",className:"px-3 py-2 border rounded",disabled:ye,onClick:async()=>{xt(!0);try{const T=await(await fetch("/api/user/admin/knowledge/files",{credentials:"include"})).json();T.ok!==!1&&q(T.files||[])}catch{}xt(!1)},children:"Liste aktualisieren"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"font-medium",children:"Vorhandene Knowledge-Dateien"}),ye?o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Lade"}):Kt.length===0?o.jsx("div",{className:"text-xs text-gray-500 mt-2",children:" keine Dateien vorhanden "}):o.jsx("div",{className:"mt-2 max-h-48 overflow-y-auto border rounded",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-2 py-1 text-left",children:"Dateiname"}),o.jsx("th",{className:"px-2 py-1 text-right",children:"Gre"}),o.jsx("th",{className:"px-2 py-1 text-right",children:"Gendert"}),o.jsx("th",{className:"px-2 py-1"})]})}),o.jsx("tbody",{children:Kt.map(S=>o.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[o.jsx("td",{className:"px-2 py-1 font-mono",children:S.name}),o.jsx("td",{className:"px-2 py-1 text-right text-gray-500",children:S.size<1024?`${S.size} B`:S.size<1048576?`${(S.size/1024).toFixed(1)} KB`:`${(S.size/1048576).toFixed(1)} MB`}),o.jsx("td",{className:"px-2 py-1 text-right text-gray-500",children:new Date(S.modified).toLocaleString("de-AT",{hour12:!1})}),o.jsx("td",{className:"px-2 py-1 text-right",children:o.jsx("button",{type:"button",className:"text-red-600 hover:text-red-800",onClick:async()=>{if(window.confirm(`Datei "${S.name}" wirklich lschen?`)){p(""),u("");try{const T=await fetch(`/api/user/admin/knowledge/files/${encodeURIComponent(S.name)}`,{method:"DELETE",credentials:"include"}),H=await T.json();if(!T.ok||H.error)throw new Error(H.error||"Lschen fehlgeschlagen");q(se=>se.filter(Re=>Re.name!==S.name)),u(`Datei "${S.name}" gelscht.`)}catch(T){p(T.message||"Lschen fehlgeschlagen")}}},children:"Lschen"})})]},S.name))})]})})]}),o.jsxs("div",{className:"text-xs text-gray-500",children:["Nach dem Hochladen neuer Dateien muss ",o.jsx("b",{children:"Ingest"})," gestartet werden, um den Index zu aktualisieren."]})]})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Hybrid-Filtersystem (Regeln + Context-Fingerprint + Lernen)"}),o.jsx("div",{className:"mt-3",children:o.jsx(TC,{locked:s})})]}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"KI-Modell-Verwaltung"}),o.jsx("div",{className:"mt-3",children:o.jsx(EC,{})})]}),r&&o.jsx("div",{className:"text-sm text-gray-500",children:"Lade"})]})}function OC(){const[n,s]=x.useState(!1),[i,r]=x.useState(""),[t,l]=x.useState("");if(x.useEffect(()=>{(async()=>{try{if((await b1())?.hasMaster){window.location.href="/user-login";return}}catch{}s(!0)})()},[]),!n)return null;async function u(d){d.preventDefault(),r(""),l("");const p=d.target;try{await w1(p.master.value,p.adminUser.value,p.adminPass.value),l("Master gesetzt & Admin angelegt. Weiter zu /user-login.")}catch(h){r(h.message||"Fehler")}}return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:[o.jsx(po,{helpHref:"/Hilfe.pdf",onAdd:()=>{window.location.href="/user-login"},addTitle:"Zur Anmeldung"}),o.jsxs("div",{className:"bg-white shadow rounded-2xl p-6 w-[520px] space-y-6",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Erststart"}),t&&o.jsx("div",{className:"text-green-700 text-sm",children:t}),i&&o.jsx("div",{className:"text-red-700 text-sm",children:i}),o.jsxs("details",{className:"border rounded p-3",open:!0,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"1) Master-Key initial setzen (einmalig)"}),o.jsxs("form",{onSubmit:u,className:"mt-3 grid gap-2",children:[o.jsx("input",{name:"master",placeholder:"Neuer Master-Key",className:"border rounded px-3 py-2"}),o.jsx("input",{name:"adminUser",placeholder:"Admin Benutzer (z. B. admin)",className:"border rounded px-3 py-2"}),o.jsx("input",{name:"adminPass",placeholder:"Admin Passwort",className:"border rounded px-3 py-2"}),o.jsx("button",{className:"border rounded px-3 py-2 bg-gray-900 text-white",children:"Master setzen & Admin anlegen"})]})]}),o.jsx("div",{className:"text-sm text-gray-600",children:"Hinweis: Diese Seite ist nur sichtbar, solange noch kein Master/kein Admin existiert."})]})]})}async function AC(){const n=document.getElementById("root");if(!n)return;const s=Zx.createRoot(n),i=window.location.pathname.replace(/\/+$/,""),r=l=>o.jsx(Nd,{children:o.jsx(N1,{fallback:o.jsx(Ng,{}),children:l})});if(i==="/user-firststart"){s.render(o.jsx(Nd,{children:o.jsx(OC,{})}));return}if(i==="/user-login"){s.render(o.jsx(Nd,{children:o.jsx(Ng,{})}));return}if(i==="/user-admin"){s.render(r(o.jsx(_C,{})));return}if(i==="/aufgaben"||i==="/aufg"){s.render(r(o.jsx(kC,{})));return}const{default:t}=await Hx(async()=>{const{default:l}=await import("./App-5D5Zgt-x.js");return{default:l}},[]);s.render(r(o.jsx(t,{})))}AC();export{nf as $,lC as A,h0 as B,Ba as C,Xm as D,po as E,pw as F,N0 as G,b0 as H,Lw as I,Aw as J,QC as K,HC as L,VC as M,ZC as N,Rw as O,q1 as P,zC as Q,K as R,oy as S,UC as T,KC as U,JC as V,C1 as W,qC as X,YC as Y,Hg as Z,Wg as _,Ww as a,WC as b,Xg as c,ko as d,R1 as e,O1 as f,ug as g,I1 as h,k1 as i,o as j,IC as k,P1 as l,iy as m,ny as n,ry as o,Gs as p,sy as q,x as r,XC as s,oC as t,gw as u,BC as v,LC as w,FC as x,GC as y,$C as z};
