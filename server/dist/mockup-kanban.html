<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kanban-Board Mockup – Bezirksstab Feuerwehr</title>
<style>
/* ============================================================
   INTERAKTIVES MOCKUP – Kanban Board Bezirksstab
   Oeffne diese Datei direkt im Browser (Datei > Oeffnen)
   ============================================================ */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --col-new: #dc2626;
  --col-new-bg: #fef2f2;
  --col-new-border: #fecaca;
  --col-progress: #d97706;
  --col-progress-bg: #fffbeb;
  --col-progress-border: #fde68a;
  --col-done: #059669;
  --col-done-bg: #ecfdf5;
  --col-done-border: #a7f3d0;
  --col-surface: rgba(255,255,255,.92);
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 8px;
}

body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 40%, #e2e8f0 100%);
  color: #1e293b;
  min-height: 100vh;
  padding: 20px;
  -webkit-font-smoothing: antialiased;
}

/* Scrollbar */
* { scrollbar-width: thin; }
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(0,0,0,.18); border-radius: 999px; }

/* === HEADER === */
.aufg-header {
  backdrop-filter: blur(20px);
  background: var(--col-surface);
  border: 1px solid rgba(15,23,42,.06);
  border-radius: var(--radius-lg);
  padding: 16px 20px;
  margin-bottom: 20px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  box-shadow: 0 1px 3px rgba(0,0,0,.06), 0 4px 12px rgba(0,0,0,.04);
}

.header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.header-title {
  font-size: 1.25rem;
  font-weight: 800;
  letter-spacing: -0.025em;
  color: #0f172a;
}

.role-selector {
  padding: 6px 12px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(15,23,42,.12);
  font-size: 0.875rem;
  font-weight: 500;
  background: white;
  cursor: pointer;
  transition: all .2s;
}
.role-selector:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59,130,246,.1);
}

.role-label {
  font-size: 0.75rem;
  color: #64748b;
  font-weight: 500;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.search-input {
  padding: 10px 16px;
  font-size: 0.875rem;
  border-radius: var(--radius-md);
  border: 1px solid rgba(15,23,42,.1);
  background: rgba(255,255,255,.8);
  backdrop-filter: blur(8px);
  width: 280px;
  transition: all .2s;
}
.search-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59,130,246,.12);
  background: white;
}
.search-input::placeholder { color: #94a3b8; }

.btn-primary {
  font-size: 0.875rem;
  padding: 10px 16px;
  border-radius: var(--radius-md);
  font-weight: 600;
  color: white;
  border: none;
  background: linear-gradient(135deg, #0369a1, #0284c7);
  box-shadow: 0 1px 3px rgba(3,105,161,.3);
  cursor: pointer;
  transition: all .2s;
}
.btn-primary:hover {
  background: linear-gradient(135deg, #075985, #0369a1);
  box-shadow: 0 2px 6px rgba(3,105,161,.35);
  transform: translateY(-0.5px);
}

.btn-secondary {
  font-size: 0.875rem;
  padding: 10px 16px;
  border-radius: var(--radius-md);
  font-weight: 500;
  color: #334155;
  background: white;
  border: 1px solid rgba(15,23,42,.12);
  cursor: pointer;
  transition: all .2s;
}
.btn-secondary:hover {
  background: #f8fafc;
  border-color: rgba(15,23,42,.18);
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
}

/* === KANBAN GRID === */
.kanban-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  position: relative;
}
.kanban-grid::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 400' fill='none'%3E%3Ccircle cx='200' cy='200' r='185' stroke='%2394a3b8' stroke-width='2.5' opacity='0.12'/%3E%3Ccircle cx='200' cy='200' r='175' stroke='%2394a3b8' stroke-width='1' opacity='0.08'/%3E%3Cg transform='translate(200,200)' opacity='0.10' fill='%2364748b'%3E%3Cpath d='M-28,-140 L-12,-60 Q0,-48 12,-60 L28,-140 Q16,-155 0,-160 Q-16,-155 -28,-140Z'/%3E%3Cpath d='M140,-28 L60,-12 Q48,0 60,12 L140,28 Q155,16 160,0 Q155,-16 140,-28Z'/%3E%3Cpath d='M28,140 L12,60 Q0,48 -12,60 L-28,140 Q-16,155 0,160 Q16,155 28,140Z'/%3E%3Cpath d='M-140,28 L-60,12 Q-48,0 -60,-12 L-140,-28 Q-155,-16 -160,0 Q-155,16 -140,28Z'/%3E%3C/g%3E%3Ccircle cx='200' cy='200' r='52' stroke='%2394a3b8' stroke-width='1.5' opacity='0.09'/%3E%3Cg transform='translate(200,200)' opacity='0.09' fill='%2364748b'%3E%3Cpath d='M-32,-38 L32,-38 L32,18 Q32,42 0,48 Q-32,42 -32,18Z'/%3E%3Crect x='-32' y='-6' width='64' height='4' fill='%23f1f5f9'/%3E%3C/g%3E%3Cdefs%3E%3Cpath id='a' d='M 40,200 a 160,160 0 0,1 320,0'/%3E%3Cpath id='b' d='M 55,200 a 145,145 0 0,0 290,0'/%3E%3C/defs%3E%3Ctext font-family='system-ui,sans-serif' font-size='14' font-weight='600' letter-spacing='3' fill='%2394a3b8' opacity='0.10'%3E%3CtextPath href='%23a' startOffset='50%25' text-anchor='middle'%3ELANDESFEUERWEHRVERBAND%3C/textPath%3E%3C/text%3E%3Ctext font-family='system-ui,sans-serif' font-size='14' font-weight='600' letter-spacing='3' fill='%2394a3b8' opacity='0.10'%3E%3CtextPath href='%23b' startOffset='50%25' text-anchor='middle'%3EK%C3%84RNTEN%3C/textPath%3E%3C/text%3E%3C/svg%3E") no-repeat center center;
  background-size: min(55%, 420px);
  opacity: 1;
}
.kanban-grid > * {
  position: relative;
  z-index: 1;
}

/* === COLUMNS === */
.column {
  border-radius: var(--radius-lg);
  border: 1px solid rgba(15,23,42,.07);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 140px);
  transition: box-shadow .2s;
  box-shadow: 0 1px 3px rgba(0,0,0,.04);
}
.column:hover { box-shadow: 0 4px 12px rgba(0,0,0,.08); }

.column.col-new { background: var(--col-new-bg); border-color: var(--col-new-border); }
.column.col-progress { background: var(--col-progress-bg); border-color: var(--col-progress-border); }
.column.col-done { background: var(--col-done-bg); border-color: var(--col-done-border); }

/* === COLUMN HEADERS === */
.column-header {
  position: sticky;
  top: 0;
  z-index: 5;
  padding: 10px 12px 8px;
  backdrop-filter: blur(12px);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.col-new .column-header {
  background: linear-gradient(180deg, rgba(254,242,242,.97), rgba(254,242,242,.90));
  border-bottom: 2px solid var(--col-new);
}
.col-progress .column-header {
  background: linear-gradient(180deg, rgba(255,251,235,.97), rgba(255,251,235,.90));
  border-bottom: 2px solid var(--col-progress);
}
.col-done .column-header {
  background: linear-gradient(180deg, rgba(236,253,245,.97), rgba(236,253,245,.90));
  border-bottom: 2px solid var(--col-done);
}

.col-title {
  font-size: 0.8rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  display: flex;
  align-items: center;
  gap: 8px;
}
.col-title-icon { font-size: 1rem; }
.col-new .col-title { color: var(--col-new); }
.col-progress .col-title { color: var(--col-progress); }
.col-done .col-title { color: var(--col-done); }

.kpi-badge {
  font-size: 0.7rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 999px;
  letter-spacing: 0.01em;
}
.col-new .kpi-badge { background: #fee2e2; color: var(--col-new); }
.col-progress .kpi-badge { background: #fef3c7; color: var(--col-progress); }
.col-done .kpi-badge { background: #d1fae5; color: var(--col-done); }

/* === CARD LIST === */
.card-list {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* === CARDS === */
.card {
  background: white;
  border: 1px solid rgba(15,23,42,.08);
  border-radius: var(--radius-md);
  padding: 14px;
  cursor: grab;
  transition: all .15s ease;
  position: relative;
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
}
.card:hover {
  box-shadow: 0 4px 12px rgba(0,0,0,.08);
  transform: translateY(-1px);
  border-color: rgba(15,23,42,.14);
}
.card:active { cursor: grabbing; opacity: 0.8; }

.card-accent-new { border-left: 3px solid var(--col-new); }
.card-accent-progress { border-left: 3px solid var(--col-progress); }
.card-accent-done { border-left: 3px solid var(--col-done); opacity: 0.75; }

/* Card Content */
.card-timestamps {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: #94a3b8;
  font-weight: 500;
  margin-bottom: 6px;
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 8px;
}

.card-title {
  font-weight: 700;
  font-size: 0.875rem;
  line-height: 1.3;
  color: #0f172a;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-actions {
  display: flex;
  gap: 4px;
  flex-shrink: 0;
}

.card-action-btn {
  font-size: 0.75rem;
  padding: 5px 8px;
  border-radius: var(--radius-sm);
  border: none;
  cursor: pointer;
  font-weight: 500;
  transition: all .15s;
  line-height: 1;
}
.card-action-btn.edit-btn {
  background: #f1f5f9;
  color: #64748b;
}
.card-action-btn.edit-btn:hover {
  background: #dbeafe;
  color: #2563eb;
}
.card-action-btn.advance-btn {
  background: #ecfdf5;
  color: #059669;
}
.card-action-btn.advance-btn:hover {
  background: #d1fae5;
  color: #047857;
}

.card-type-badge {
  display: inline-flex;
  align-items: center;
  font-size: 0.75rem;
  font-weight: 500;
  padding: 2px 8px;
  border-radius: 6px;
  background: #f1f5f9;
  color: #475569;
  margin-top: 6px;
}

.card-desc {
  font-size: 0.8125rem;
  color: #475569;
  line-height: 1.5;
  margin-top: 8px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.card-refs {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.6875rem;
  margin-top: 10px;
}
.card-ref-link {
  color: #2563eb;
  text-decoration: none;
  font-weight: 500;
  cursor: pointer;
}
.card-ref-link:hover { text-decoration: underline; }
.card-ref-incident {
  color: #64748b;
}

.card-due {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.75rem;
  color: #64748b;
  margin-top: 8px;
}
.card-due svg { width: 14px; height: 14px; flex-shrink: 0; }
.card-due-overdue { color: var(--col-new); font-weight: 600; }

.card-overdue-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 6px;
  background: #fef2f2;
  color: var(--col-new);
  border: 1px solid #fecaca;
  margin-left: 4px;
}

/* === PULSE ANIMATION === */
@keyframes pulseIncoming {
  0%   { box-shadow: 0 0 0 0 rgba(239,68,68,0.5); }
  60%  { box-shadow: 0 0 0 12px rgba(239,68,68,0); }
  100% { box-shadow: 0 0 0 0 rgba(239,68,68,0); }
}
.pulse-incoming {
  animation: pulseIncoming 1.6s ease-out infinite;
  border-color: rgba(239,68,68,0.5) !important;
}

/* === DRAG OVERLAY PREVIEW === */
.drag-preview {
  position: fixed;
  top: 50%;
  right: 30px;
  transform: translateY(-50%);
  background: white;
  border: 2px solid #3b82f6;
  border-radius: var(--radius-lg);
  padding: 16px;
  width: 300px;
  box-shadow: 0 20px 60px -12px rgba(0,0,0,.25), 0 0 0 1px rgba(59,130,246,.15);
  z-index: 100;
  opacity: 0;
  pointer-events: none;
  transition: opacity .3s;
}
.drag-preview.visible { opacity: 1; }

/* === ERROR BANNER === */
.error-banner {
  background: #fef2f2;
  border: 1px solid #fecaca;
  border-radius: var(--radius-md);
  padding: 10px 16px;
  color: #991b1b;
  font-size: 0.875rem;
  margin-bottom: 16px;
  display: none;
}
.error-banner.visible { display: block; }

/* === FABs === */
.fab-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 50;
}
.fab {
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: none;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all .2s;
  box-shadow: 0 8px 24px rgba(15,23,42,.15);
}
.fab:hover { transform: translateY(-2px); box-shadow: 0 12px 28px rgba(15,23,42,.2); }
.fab-help { background: #1e40af; }
.fab-nav { background: #0369a1; }
.fab-logout { background: #dc2626; }
.fab-add { background: #059669; box-shadow: 0 8px 24px rgba(5,150,105,.3); }

/* === MOCKUP CONTROLS === */
.mockup-controls {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 200;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: var(--radius-md);
  padding: 12px 16px;
  box-shadow: 0 4px 16px rgba(0,0,0,.1);
  font-size: 0.8rem;
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 240px;
}
.mockup-controls h3 {
  font-weight: 700;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: #64748b;
  margin-bottom: 2px;
}
.mockup-controls label {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-size: 0.8rem;
}
.mockup-controls button {
  font-size: 0.75rem;
  padding: 6px 10px;
  border-radius: 6px;
  border: 1px solid #e2e8f0;
  background: #f8fafc;
  cursor: pointer;
  font-weight: 500;
  transition: all .15s;
}
.mockup-controls button:hover { background: #e2e8f0; }
.mockup-controls button.active { background: #0369a1; color: white; border-color: #0369a1; }

/* === MODAL OVERLAY === */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15,23,42,.4);
  backdrop-filter: blur(4px);
  z-index: 150;
  display: none;
  align-items: center;
  justify-content: center;
}
.modal-overlay.visible { display: flex; }
.modal {
  background: white;
  border-radius: var(--radius-lg);
  padding: 24px;
  width: 480px;
  max-width: 90vw;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 24px 48px rgba(0,0,0,.15);
}
.modal h2 {
  font-size: 1.1rem;
  font-weight: 700;
  margin-bottom: 16px;
  color: #0f172a;
}
.modal label {
  display: block;
  font-size: 0.8rem;
  font-weight: 600;
  color: #475569;
  margin-bottom: 4px;
  margin-top: 12px;
}
.modal input, .modal textarea, .modal select {
  width: 100%;
  padding: 8px 12px;
  font-size: 0.875rem;
  border: 1px solid #e2e8f0;
  border-radius: var(--radius-sm);
  font-family: inherit;
  transition: all .15s;
}
.modal input:focus, .modal textarea:focus, .modal select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59,130,246,.1);
}
.modal textarea { resize: vertical; min-height: 60px; }
.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 20px;
}

/* Responsive */
@media (max-width: 768px) {
  .kanban-grid { grid-template-columns: 1fr; }
  .column { max-height: 400px; }
  .search-input { width: 100%; }
  .mockup-controls { top: auto; bottom: 70px; right: 70px; }
}
</style>
</head>
<body>

<!-- Mockup Controls Panel -->
<div class="mockup-controls" id="controls">
  <h3>Mockup-Steuerung</h3>
  <label><input type="checkbox" id="togglePulse" checked> Neuer-Eintrag-Puls</label>
  <label><input type="checkbox" id="toggleOverdue"> Ueberfaellige Aufgabe</label>
  <label><input type="checkbox" id="toggleError"> Fehler-Banner</label>
  <label><input type="checkbox" id="toggleDrag"> Drag-Vorschau</label>
  <button id="btnAddModal" onclick="toggleModal(true)">+ Neu-Modal oeffnen</button>
  <button id="btnSimNew" onclick="simulateNewTask()">Neue Aufgabe simulieren</button>
</div>

<!-- FABs -->
<div class="fab-container">
  <button class="fab fab-help" title="Hilfe">?</button>
  <button class="fab fab-nav" title="Einsatzuebersicht">E</button>
  <button class="fab fab-nav" title="Meldestelle">M</button>
  <button class="fab fab-logout" title="Abmelden">&times;</button>
  <button class="fab fab-add" title="Aufgabe anlegen" onclick="toggleModal(true)">+</button>
</div>

<!-- HEADER -->
<header class="aufg-header">
  <div class="header-left">
    <h1 class="header-title">Aufgaben</h1>
    <div style="display:flex;align-items:center;gap:8px">
      <span class="role-label">Rolle</span>
      <select class="role-selector">
        <option>S3 – Einsatz</option>
        <option>S1 – Personal</option>
        <option>S2 – Lage</option>
        <option>S4 – Versorgung</option>
        <option>S5 – Oeffentlichkeitsarbeit</option>
        <option>S6 – Kommunikation</option>
        <option>LtStb</option>
      </select>
    </div>
  </div>
  <div class="header-right">
    <input type="text" class="search-input" placeholder="Suche Titel / Typ / Verantwortlich...">
    <button class="btn-primary" onclick="toggleModal(true)">+ Neu</button>
    <button class="btn-secondary">Aktualisieren</button>
  </div>
</header>

<!-- Error Banner -->
<div class="error-banner" id="errorBanner">
  Verbindungsfehler: Server nicht erreichbar. Naechster Versuch in 30s...
</div>

<!-- KANBAN GRID -->
<div class="kanban-grid">

  <!-- === SPALTE: NEU === -->
  <div class="column col-new">
    <div class="column-header">
      <h2 class="col-title">
        <span class="col-title-icon">&#x25CF;</span>
        Neu
      </h2>
      <span class="kpi-badge">3</span>
    </div>
    <div class="card-list" id="colNew">

      <!-- Karte 1: Neu + Puls -->
      <div class="card card-accent-new pulse-incoming" id="pulseCard">
        <div class="card-timestamps">
          <span>02.02.2026, 14:32:18</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Wasserversorgung Einsatzabschnitt Nord sicherstellen</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
            <button class="card-action-btn advance-btn" onclick="advanceCard(this)">&#x279C;</button>
          </div>
        </div>
        <span class="card-type-badge">Einsatz</span>
        <div class="card-desc">Zuleitung von Hydrant Bergstrasse 12 zum Sammelbehaelter pruefen. TLF-A bereithalten.</div>
        <div class="card-refs">
          <a class="card-ref-link">Meldung #47</a>
          <span class="card-ref-incident">Einsatz: Brand Lagerhalle (in-bearbeitung)</span>
        </div>
        <div class="card-due card-due-overdue" id="dueOverdue" style="display:none">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          <span>02.02.2026, 13:00</span>
          <span class="card-overdue-badge">Ueberfaellig</span>
        </div>
        <div class="card-due" id="dueNormal">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          <span>02.02.2026, 16:30</span>
        </div>
      </div>

      <!-- Karte 2 -->
      <div class="card card-accent-new">
        <div class="card-timestamps">
          <span>02.02.2026, 14:15:03</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Personalnachforderung: 2 Gruppen TLF</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
            <button class="card-action-btn advance-btn" onclick="advanceCard(this)">&#x279C;</button>
          </div>
        </div>
        <span class="card-type-badge">Personal</span>
        <div class="card-due">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          <span>02.02.2026, 15:45</span>
        </div>
      </div>

      <!-- Karte 3 -->
      <div class="card card-accent-new">
        <div class="card-timestamps">
          <span>02.02.2026, 13:48:22</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Absperrung B83 koordinieren</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
            <button class="card-action-btn advance-btn" onclick="advanceCard(this)">&#x279C;</button>
          </div>
        </div>
        <span class="card-type-badge">Logistik</span>
        <div class="card-refs">
          <span class="card-ref-incident">Einsatz: Verkehrsunfall B83 (neu)</span>
        </div>
      </div>

    </div>
  </div>

  <!-- === SPALTE: IN BEARBEITUNG === -->
  <div class="column col-progress">
    <div class="column-header">
      <h2 class="col-title">
        <span class="col-title-icon">&#x25B6;</span>
        In Bearbeitung
      </h2>
      <span class="kpi-badge">2</span>
    </div>
    <div class="card-list" id="colProgress">

      <div class="card card-accent-progress">
        <div class="card-timestamps">
          <span>02.02.2026, 12:20:45</span>
          <span>akt. 14:05:12</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Evakuierung Wohnblock Seestrasse 8-12</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
            <button class="card-action-btn advance-btn" onclick="advanceCard(this)">&#x279C;</button>
          </div>
        </div>
        <span class="card-type-badge">Einsatz</span>
        <div class="card-desc">Betreutes Wohnen, 3. Stock. Zusammenarbeit mit Rettungsdienst. 14 Personen evakuiert, 6 verbleibend.</div>
        <div class="card-refs">
          <a class="card-ref-link">Meldung #42</a>
          <span class="card-ref-incident">Einsatz: Brand Lagerhalle (in-bearbeitung)</span>
        </div>
        <div class="card-due">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
          <span>02.02.2026, 16:00</span>
        </div>
      </div>

      <div class="card card-accent-progress">
        <div class="card-timestamps">
          <span>02.02.2026, 11:45:33</span>
          <span>akt. 13:22:08</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Lagekartenupdate an alle Abschnitte verteilen</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
            <button class="card-action-btn advance-btn" onclick="advanceCard(this)">&#x279C;</button>
          </div>
        </div>
        <span class="card-type-badge">Kommunikation</span>
      </div>

    </div>
  </div>

  <!-- === SPALTE: ERLEDIGT === -->
  <div class="column col-done">
    <div class="column-header">
      <h2 class="col-title">
        <span class="col-title-icon">&#x2714;</span>
        Erledigt
      </h2>
      <span class="kpi-badge">2</span>
    </div>
    <div class="card-list" id="colDone">

      <div class="card card-accent-done">
        <div class="card-timestamps">
          <span>02.02.2026, 10:15:00</span>
          <span>akt. 12:30:45</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Erstbericht an Landeswarnzentrale</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
          </div>
        </div>
        <span class="card-type-badge">Meldewesen</span>
        <div class="card-refs">
          <a class="card-ref-link">Meldung #38</a>
        </div>
      </div>

      <div class="card card-accent-done">
        <div class="card-timestamps">
          <span>02.02.2026, 09:30:12</span>
          <span>akt. 11:45:22</span>
        </div>
        <div class="card-header">
          <h3 class="card-title">Sammelplatz Parkplatz Volksschule einrichten</h3>
          <div class="card-actions">
            <button class="card-action-btn edit-btn">&#x270E;</button>
          </div>
        </div>
        <span class="card-type-badge">Logistik</span>
      </div>

    </div>
  </div>
</div>

<!-- Drag Preview -->
<div class="drag-preview" id="dragPreview">
  <div style="font-size:10px;color:#94a3b8;font-weight:500;margin-bottom:4px">02.02.2026, 14:32:18</div>
  <div style="font-weight:700;font-size:0.875rem;color:#0f172a;margin-bottom:4px">Wasserversorgung Einsatzabschnitt Nord sicherstellen</div>
  <span class="card-type-badge">Einsatz</span>
</div>

<!-- Add Modal -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <h2>Neue Aufgabe erstellen</h2>
    <label>Titel *</label>
    <input type="text" placeholder="Aufgabentitel eingeben...">
    <label>Typ</label>
    <select>
      <option value="">— kein Typ —</option>
      <option>Einsatz</option>
      <option>Personal</option>
      <option>Logistik</option>
      <option>Kommunikation</option>
      <option>Meldewesen</option>
      <option>Versorgung</option>
    </select>
    <label>Verantwortlich</label>
    <input type="text" placeholder="Name oder Funktion...">
    <label>Beschreibung</label>
    <textarea placeholder="Details zur Aufgabe..."></textarea>
    <label>Frist</label>
    <input type="datetime-local" value="2026-02-02T16:30">
    <label>Bezug Einsatz</label>
    <select>
      <option value="">— kein Einsatz —</option>
      <option>Brand Lagerhalle — Industriestr. 5</option>
      <option>Verkehrsunfall B83 — km 12.4</option>
    </select>
    <div class="modal-footer">
      <button class="btn-secondary" onclick="toggleModal(false)">Abbrechen</button>
      <button class="btn-primary" onclick="toggleModal(false)">Erstellen</button>
    </div>
  </div>
</div>

<script>
// === Mockup Interaktivitaet ===
const pulseCard = document.getElementById('pulseCard');
const errorBanner = document.getElementById('errorBanner');
const dragPreview = document.getElementById('dragPreview');
const dueOverdue = document.getElementById('dueOverdue');
const dueNormal = document.getElementById('dueNormal');
const modalOverlay = document.getElementById('modalOverlay');

document.getElementById('togglePulse').addEventListener('change', (e) => {
  pulseCard.classList.toggle('pulse-incoming', e.target.checked);
});

document.getElementById('toggleOverdue').addEventListener('change', (e) => {
  if (e.target.checked) {
    pulseCard.style.background = '#fef2f2';
    pulseCard.style.borderColor = '#fecaca';
    dueOverdue.style.display = 'flex';
    dueNormal.style.display = 'none';
  } else {
    pulseCard.style.background = '';
    pulseCard.style.borderColor = '';
    dueOverdue.style.display = 'none';
    dueNormal.style.display = 'flex';
  }
});

document.getElementById('toggleError').addEventListener('change', (e) => {
  errorBanner.classList.toggle('visible', e.target.checked);
});

document.getElementById('toggleDrag').addEventListener('change', (e) => {
  dragPreview.classList.toggle('visible', e.target.checked);
});

function toggleModal(show) {
  modalOverlay.classList.toggle('visible', show);
}
modalOverlay.addEventListener('click', (e) => {
  if (e.target === modalOverlay) toggleModal(false);
});

function advanceCard(btn) {
  const card = btn.closest('.card');
  const col = card.closest('.card-list');

  if (col.id === 'colNew') {
    card.classList.remove('card-accent-new', 'pulse-incoming');
    card.classList.add('card-accent-progress');
    card.style.background = '';
    card.style.borderColor = '';
    document.getElementById('colProgress').prepend(card);
    updateCounts();
  } else if (col.id === 'colProgress') {
    if (!confirm('Sind Sie sicher?')) return;
    card.classList.remove('card-accent-progress');
    card.classList.add('card-accent-done');
    btn.style.display = 'none';
    document.getElementById('colDone').prepend(card);
    updateCounts();
  }
}

function updateCounts() {
  document.querySelectorAll('.col-new .kpi-badge')[0].textContent = document.getElementById('colNew').children.length;
  document.querySelectorAll('.col-progress .kpi-badge')[0].textContent = document.getElementById('colProgress').children.length;
  document.querySelectorAll('.col-done .kpi-badge')[0].textContent = document.getElementById('colDone').children.length;
}

let simCounter = 0;
function simulateNewTask() {
  simCounter++;
  const titles = [
    'Nachbarschaftshilfe FF Villach anfordern',
    'Atemschutzgeraete-Austausch organisieren',
    'Verpflegung fuer Einsatzkraefte bestellen',
    'Drohnenaufklaerung Einsatzgebiet Ost',
    'Medieninfo an Pressestelle weiterleiten',
    'Reservefahrzeug aus Depot holen',
  ];
  const types = ['Einsatz', 'Logistik', 'Personal', 'Kommunikation', 'Versorgung'];
  const now = new Date();
  const ts = now.toLocaleString('de-AT', { timeZone: 'Europe/Vienna', hour12: false });

  const card = document.createElement('div');
  card.className = 'card card-accent-new pulse-incoming';
  card.innerHTML = `
    <div class="card-timestamps"><span>${ts}</span></div>
    <div class="card-header">
      <h3 class="card-title">${titles[(simCounter - 1) % titles.length]}</h3>
      <div class="card-actions">
        <button class="card-action-btn edit-btn">&#x270E;</button>
        <button class="card-action-btn advance-btn" onclick="advanceCard(this)">&#x279C;</button>
      </div>
    </div>
    <span class="card-type-badge">${types[(simCounter - 1) % types.length]}</span>
  `;

  document.getElementById('colNew').prepend(card);
  updateCounts();

  setTimeout(() => card.classList.remove('pulse-incoming'), 9000);
}
</script>
</body>
</html>
